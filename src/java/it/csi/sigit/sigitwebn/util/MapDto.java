/*******************************************************************************
 * SPDX-License-Identifier: EUPL-1.2
 * Copyright Regione Piemonte - 2021
 *******************************************************************************/
package it.csi.sigit.sigitwebn.util;


import it.csi.aaep.aaeporch.business.AlboRuolo;
import it.csi.aaep.aaeporch.business.Carica;
import it.csi.aaep.aaeporch.business.Sede;
import it.csi.aaep.aaeporch.business.SedeINFOC;
import it.csi.aaep.aaeporch.business.SedeListItem;
import it.csi.aaep.aaeporch.business.Ubicazione;
import it.csi.sigit.sigitext.dto.sigitext.ImpiantoFiltro;
import it.csi.sigit.sigitwebn.business.dao.sigitwebn.dao.SigitTImportDistribDao;
import it.csi.sigit.sigitwebn.business.dao.sigitwebn.dto.*;
import it.csi.sigit.sigitwebn.business.dao.sigitwebn.filter.CompFilter;
import it.csi.sigit.sigitwebn.business.dao.sigitwebn.filter.FiltroRicercaAllegati;
import it.csi.sigit.sigitwebn.business.dao.sigitwebn.filter.ImpiantoFilter;
import it.csi.sigit.sigitwebn.business.dao.sigitwebn.filter.ImportDistribFilter;
import it.csi.sigit.sigitwebn.business.dao.sigitwebn.filter.ImportDocumentoFilter;
import it.csi.sigit.sigitwebn.business.dao.sigitwebn.filter.ImportFilter;
import it.csi.sigit.sigitwebn.business.dao.sigitwebn.filter.RicercaAccertamentoFilter;
import it.csi.sigit.sigitwebn.business.dao.sigitwebn.filter.RicercaAvanzataImpiantoFilter;
import it.csi.sigit.sigitwebn.business.dao.sigitwebn.filter.RicercaVerificaFilter;
import it.csi.sigit.sigitwebn.business.manager.DbMgr;
import it.csi.sigit.sigitwebn.business.manager.util.ManagerException;
import it.csi.sigit.sigitwebn.business.pdf.DatiGFCommon;
import it.csi.sigit.sigitwebn.business.pdf.DatiGTCommon;
import it.csi.sigit.sigitwebn.dto.accertamento.Accertamento;
import it.csi.sigit.sigitwebn.dto.accertamento.IspezioneAccertamento;
import it.csi.sigit.sigitwebn.dto.accertamento.RicercaAccertamento;
import it.csi.sigit.sigitwebn.dto.accertamento.SanzioneAccertamento;
import it.csi.sigit.sigitwebn.dto.accesso.AbilitazioniRuoloFunz;
import it.csi.sigit.sigitwebn.dto.accesso.PersonaFisica;
import it.csi.sigit.sigitwebn.dto.accesso.PersonaGiuridica;
import it.csi.sigit.sigitwebn.dto.allegati.DettaglioAllegato;
import it.csi.sigit.sigitwebn.dto.allegati.ElencoAllegati;
import it.csi.sigit.sigitwebn.dto.allegati.IdentificativoImpiantoAllegato;
import it.csi.sigit.sigitwebn.dto.allegati.RicercaAllegati;
import it.csi.sigit.sigitwebn.dto.azioni.Azione;
import it.csi.sigit.sigitwebn.dto.azioni.Sveglia;
import it.csi.sigit.sigitwebn.dto.back_office.Abilitazione;
import it.csi.sigit.sigitwebn.dto.bollini.AcquistoBollini;
import it.csi.sigit.sigitwebn.dto.bollini.AcquistoBolliniQuantita;
import it.csi.sigit.sigitwebn.dto.bollini.TransazioneApp;
import it.csi.sigit.sigitwebn.dto.bollini.TransazioneBollini;
import it.csi.sigit.sigitwebn.dto.codici_impianto.AcquisizioneCodici;
import it.csi.sigit.sigitwebn.dto.codici_impianto.RisultatoRicCodImpiantoLib;
import it.csi.sigit.sigitwebn.dto.common.CodeDescription;
import it.csi.sigit.sigitwebn.dto.common.IdDescription;
import it.csi.sigit.sigitwebn.dto.delega.Delegato;
import it.csi.sigit.sigitwebn.dto.distributori.DettaglioErrore;
import it.csi.sigit.sigitwebn.dto.distributori.DettaglioImportDistributori;
import it.csi.sigit.sigitwebn.dto.distributori.DistributoreMan;
import it.csi.sigit.sigitwebn.dto.documentazione.Documento;
import it.csi.sigit.sigitwebn.dto.impianto.IdentificativoImpianto;
import it.csi.sigit.sigitwebn.dto.impianto.Impianto;
import it.csi.sigit.sigitwebn.dto.impianto.Proprietario;
import it.csi.sigit.sigitwebn.dto.impianto.Responsabile;
import it.csi.sigit.sigitwebn.dto.impianto.RicercaAvanzataImpianti;
import it.csi.sigit.sigitwebn.dto.impianto.RicercaImpianti;
import it.csi.sigit.sigitwebn.dto.impianto.RisultatoRicManutentore;
import it.csi.sigit.sigitwebn.dto.impianto.RisultatoRicResponsabile;
import it.csi.sigit.sigitwebn.dto.impresa.LabelValue;
import it.csi.sigit.sigitwebn.dto.incarico.Incaricato;
import it.csi.sigit.sigitwebn.dto.index.Metadati;
import it.csi.sigit.sigitwebn.dto.ispezioni.DettaglioIspezione;
import it.csi.sigit.sigitwebn.dto.ispezioni.Ispezione2018;
import it.csi.sigit.sigitwebn.dto.libretto.Componente;
import it.csi.sigit.sigitwebn.dto.libretto.ComponenteAC;
import it.csi.sigit.sigitwebn.dto.libretto.ComponenteAG;
import it.csi.sigit.sigitwebn.dto.libretto.ComponenteBRRC;
import it.csi.sigit.sigitwebn.dto.libretto.ComponenteCG;
import it.csi.sigit.sigitwebn.dto.libretto.ComponenteCI;
import it.csi.sigit.sigitwebn.dto.libretto.ComponenteCS;
import it.csi.sigit.sigitwebn.dto.libretto.ComponenteGF;
import it.csi.sigit.sigitwebn.dto.libretto.ComponenteGT;
import it.csi.sigit.sigitwebn.dto.libretto.ComponentePO;
import it.csi.sigit.sigitwebn.dto.libretto.ComponenteRC;
import it.csi.sigit.sigitwebn.dto.libretto.ComponenteRV;
import it.csi.sigit.sigitwebn.dto.libretto.ComponenteSC;
import it.csi.sigit.sigitwebn.dto.libretto.ComponenteSCX;
import it.csi.sigit.sigitwebn.dto.libretto.ComponenteSR;
import it.csi.sigit.sigitwebn.dto.libretto.ComponenteTE;
import it.csi.sigit.sigitwebn.dto.libretto.ComponenteUT;
import it.csi.sigit.sigitwebn.dto.libretto.ComponenteVM;
import it.csi.sigit.sigitwebn.dto.libretto.ComponenteVR;
import it.csi.sigit.sigitwebn.dto.libretto.ComponenteVX;
import it.csi.sigit.sigitwebn.dto.libretto.Consumo;
import it.csi.sigit.sigitwebn.dto.libretto.ControlloLibretto;
import it.csi.sigit.sigitwebn.dto.libretto.DatiExtra;
import it.csi.sigit.sigitwebn.dto.libretto.DettaglioManutenzione;
import it.csi.sigit.sigitwebn.dto.libretto.LibrettoDett;
import it.csi.sigit.sigitwebn.dto.libretto.PkTabellaEdit;
import it.csi.sigit.sigitwebn.dto.libretto.Scheda1;
import it.csi.sigit.sigitwebn.dto.libretto.Scheda11;
import it.csi.sigit.sigitwebn.dto.libretto.Scheda11Intest;
import it.csi.sigit.sigitwebn.dto.libretto.Scheda12;
import it.csi.sigit.sigitwebn.dto.libretto.Scheda15;
import it.csi.sigit.sigitwebn.dto.libretto.SistemaEmissione;
import it.csi.sigit.sigitwebn.dto.libretto.SistemiDistribuzione;
import it.csi.sigit.sigitwebn.dto.libretto.SistemiRegolazioneContabilizzazione;
import it.csi.sigit.sigitwebn.dto.main.RisultatoRicTransazione;
import it.csi.sigit.sigitwebn.dto.main.UtenteLoggato;
import it.csi.sigit.sigitwebn.dto.rappprova.TipoGFDett;
import it.csi.sigit.sigitwebn.dto.rappprova.TipoGFDettCircuito;
import it.csi.sigit.sigitwebn.dto.rappprova.TipoGTDett;
import it.csi.sigit.sigitwebn.dto.rappprova.TipoGTDettModulo;
import it.csi.sigit.sigitwebn.dto.ree.Tipo1Dett;
import it.csi.sigit.sigitwebn.dto.ree.Tipo1DettModulo;
import it.csi.sigit.sigitwebn.dto.ree.Tipo2Dett;
import it.csi.sigit.sigitwebn.dto.ree.Tipo2DettCircuito;
import it.csi.sigit.sigitwebn.dto.ree.Tipo3Dett;
import it.csi.sigit.sigitwebn.dto.ree.Tipo4Dett;
import it.csi.sigit.sigitwebn.dto.sanzioni.DatiInserimentoSanzione;
import it.csi.sigit.sigitwebn.dto.sanzioni.RisultatoRicerca;
import it.csi.sigit.sigitwebn.dto.sanzioni.Sanzione;
import it.csi.sigit.sigitwebn.dto.subentro.Subentro;
import it.csi.sigit.sigitwebn.dto.terzoresponsabile.DettaglioTerzoResponsabile;
import it.csi.sigit.sigitwebn.dto.terzoresponsabile.TerzoResponsabile;
import it.csi.sigit.sigitwebn.dto.userws.UserWs;
//import it.csi.sigit.sigitwebn.dto.verifica.Azione;
import it.csi.sigit.sigitwebn.dto.verifica.RicercaVerifica;
import it.csi.sigit.sigitwebn.dto.verifica.Verifica;
//import it.csi.sigit.sigitwebn.dto.verifica.Verifica;
import it.csi.sigit.sigitwebn.util.enumutil.ApertoChiusoEnum;
import it.csi.sigit.sigitwebn.util.enumutil.DirettoIndirettoEnum;
import it.csi.sigit.sigitwebn.util.enumutil.O2CO2Enum;
import it.csi.sigit.sigitwebn.util.enumutil.OrigineAcquaAlimentoEnum;
import it.csi.sigit.sigitwebn.util.enumutil.PositivoNegativoEnum;
import it.csi.sigit.sigitwebn.util.enumutil.PresenteAssenteEnum;
import it.csi.sigit.sigitwebn.util.enumutil.RegolareIrregolareEnum;
import it.csi.sigit.sigitwebn.util.enumutil.SiNoEnum;
import it.csi.sigit.sigitwebn.util.enumutil.SorgenteFluidoEnum;
import it.csi.sigit.sigitwebn.util.enumutil.SufficienteNonSufficiente;
import it.csi.sigit.sigitwebn.util.enumutil.TipoDistribuzioneEnum;
import it.csi.sigit.sigitwebn.util.enumutil.TipoRegolazioneEnum;
import it.csi.sigit.sigitwebn.util.enumutil.TipologiaCircuitoRaffreddamentoEnum;
import it.csi.sigit.sigitwebn.util.enumutil.TrattamentiAcquaCondizionamentoChimicoEnum;
import it.csi.sigit.sigitwebn.util.enumutil.TrattamentiAcquaFiltrazioneEnum;
import it.csi.sigit.sigitwebn.util.enumutil.TrattamentiAcquaTrattamentoEnum;
import it.csi.sigit.sigitwebn.xml.allegato2.data.CheckListDocument.CheckList;
import it.csi.sigit.sigitwebn.xml.allegato2.data.ControlloImpiantoDocument.ControlloImpianto;
import it.csi.sigit.sigitwebn.xml.allegato2.data.ControlloVerificaEnergeticaDocument.ControlloVerificaEnergetica;
import it.csi.sigit.sigitwebn.xml.allegato2.data.DatiIdentificativiDocument.DatiIdentificativi;
import it.csi.sigit.sigitwebn.xml.allegato2.data.DatiTecnicoDocument.DatiTecnico;
import it.csi.sigit.sigitwebn.xml.allegato2.data.DocumentazioneTecnicaDocument.DocumentazioneTecnica;
import it.csi.sigit.sigitwebn.xml.allegato2.data.MODIIDocument;
import it.csi.sigit.sigitwebn.xml.allegato2.data.RowAllegatoIIDocument.RowAllegatoII;
import it.csi.sigit.sigitwebn.xml.allegato2.data.RowAllegatoIIDocument.RowAllegatoII.TabFumi;
import it.csi.sigit.sigitwebn.xml.allegato2.data.RowFumiDocument.RowFumi;
import it.csi.sigit.sigitwebn.xml.allegato2.data.TrattamentoAcquaDocument.TrattamentoAcqua;
import it.csi.sigit.sigitwebn.xml.allegato3.data.MODIIIDocument;
import it.csi.sigit.sigitwebn.xml.allegato3.data.RowAllegatoIIIDocument.RowAllegatoIII;
import it.csi.sigit.sigitwebn.xml.allegato4.data.MODIVDocument;
import it.csi.sigit.sigitwebn.xml.allegato4.data.RowAllegatoIVDocument.RowAllegatoIV;
import it.csi.sigit.sigitwebn.xml.allegato5.data.MODVDocument;
import it.csi.sigit.sigitwebn.xml.allegato5.data.RowAllegatoVDocument.RowAllegatoV;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.FlgDescrizioneTypeDocument.FlgDescrizioneType;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L101VentilazioneMeccanicaDocument.L101VentilazioneMeccanica;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L101VentilazioneMeccanicaSostituitoDocument.L101VentilazioneMeccanicaSostituito;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L10VentilazioneDocument.L10Ventilazione;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L10VentilazioneDocument.L10Ventilazione.L101VM;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L141DatiConsumoCombustibileDocument.L141DatiConsumoCombustibile;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L142DatiConsumoEnergiaElettricaDocument.L142DatiConsumoEnergiaElettrica;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L143DatiConsumoAcquaDocument.L143DatiConsumoAcqua;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L144DatiConsumoProdottiChimiciDocument.L144DatiConsumoProdottiChimici;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L14ConsumiDocument.L14Consumi;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L14ConsumiDocument.L14Consumi.L141ConsumoCombustibile;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L14ConsumiDocument.L14Consumi.L142ConsumoEnergiaElettrica;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L14ConsumiDocument.L14Consumi.L143ConsumoAcqua;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L14ConsumiDocument.L14Consumi.L144ConsumoProdottiChimici;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L1SchedaIdentificativaDocument.L1SchedaIdentificativa;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L2TrattamentoAcquaDocument;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L2TrattamentoAcquaDocument.L2TrattamentoAcqua;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L2TrattamentoAcquaDocument.L2TrattamentoAcqua.L23TrattAcquaGeloEtilenico;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L41GruppoTermicoDocument.L41GruppoTermico;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L41GruppoTermicoSostituitoDocument.L41GruppoTermicoSostituito;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L42BruciatoreDocument.L42Bruciatore;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L42BruciatoreSostituitoDocument.L42BruciatoreSostituito;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L43RecuperatoreDocument.L43Recuperatore;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L43RecuperatoreSostituitoDocument.L43RecuperatoreSostituito;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L44GruppoFrigoDocument.L44GruppoFrigo;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L44GruppoFrigoSostituitoDocument.L44GruppoFrigoSostituito;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L45ScambiatoreDocument.L45Scambiatore;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L45ScambiatoreSostituitoDocument.L45ScambiatoreSostituito;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L46CogeneratoreDocument.L46Cogeneratore;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L46CogeneratoreSostituitoDocument.L46CogeneratoreSostituito;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L47CampoSolareTermicoDocument.L47CampoSolareTermico;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L47CampoSolareTermicoSostituitoDocument.L47CampoSolareTermicoSostituito;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L48AltroGeneratoreDocument.L48AltroGeneratore;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L48AltroGeneratoreSostituitoDocument.L48AltroGeneratoreSostituito;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L4GeneratoriDocument.L4Generatori;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L4GeneratoriDocument.L4Generatori.L41GT;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L4GeneratoriDocument.L4Generatori.L42BR;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L4GeneratoriDocument.L4Generatori.L43RC;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L4GeneratoriDocument.L4Generatori.L44GF;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L4GeneratoriDocument.L4Generatori.L45SC;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L4GeneratoriDocument.L4Generatori.L46CG;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L4GeneratoriDocument.L4Generatori.L47CS;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L4GeneratoriDocument.L4Generatori.L48AG;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L51SistemaRegolazioneDocument.L51SistemaRegolazione;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L51SistemaRegolazioneSostituitoDocument.L51SistemaRegolazioneSostituito;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L51ValvolaRegolazioneDocument.L51ValvolaRegolazione;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L51ValvolaRegolazioneSostituitoDocument.L51ValvolaRegolazioneSostituito;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L5SistemiRegolazioneContabilizzazioneDocument.L5SistemiRegolazioneContabilizzazione;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L5SistemiRegolazioneContabilizzazioneDocument.L5SistemiRegolazioneContabilizzazione.L51SR;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L5SistemiRegolazioneContabilizzazioneDocument.L5SistemiRegolazioneContabilizzazione.L51VR;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L63VasoEspansioneDocument.L63VasoEspansione;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L64PompaDocument.L64Pompa;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L64PompaSostituitoDocument.L64PompaSostituito;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L6SistemiDistribuzioneDocument.L6SistemiDistribuzione;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L6SistemiDistribuzioneDocument.L6SistemiDistribuzione.L63VX;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L6SistemiDistribuzioneDocument.L6SistemiDistribuzione.L64PO;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L7SistemiEmissioneDocument.L7SistemiEmissione;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L81AccumuloDocument.L81Accumulo;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L81AccumuloSostituitoDocument.L81AccumuloSostituito;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L8SistemiAccumuloDocument.L8SistemiAccumulo;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L8SistemiAccumuloDocument.L8SistemiAccumulo.L81AC;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L91TorreDocument.L91Torre;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L91TorreSostituitoDocument.L91TorreSostituito;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L92RaffreddatoreDocument.L92Raffreddatore;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L92RaffreddatoreSostituitoDocument.L92RaffreddatoreSostituito;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L93ScambiatoreIntermedioDocument.L93ScambiatoreIntermedio;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L93ScambiatoreIntermedioSostituitoDocument.L93ScambiatoreIntermedioSostituito;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L94CircuitoDocument.L94Circuito;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L94CircuitoSostituitoDocument.L94CircuitoSostituito;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L95UnitaTrattAriaDocument.L95UnitaTrattAria;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L95UnitaTrattAriaSostituitoDocument.L95UnitaTrattAriaSostituito;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L96RecuperatoreAriaAmbDocument.L96RecuperatoreAriaAmb;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L96RecuperatoreAriaAmbSostituitoDocument.L96RecuperatoreAriaAmbSostituito;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L9AltriComponentiDocument.L9AltriComponenti;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L9AltriComponentiDocument.L9AltriComponenti.L91TE;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L9AltriComponentiDocument.L9AltriComponenti.L92RV;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L9AltriComponentiDocument.L9AltriComponenti.L93SCX;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L9AltriComponentiDocument.L9AltriComponenti.L94CI;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L9AltriComponentiDocument.L9AltriComponenti.L95UT;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.L9AltriComponentiDocument.L9AltriComponenti.L96RCX;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.LibrettoCatastoDocument.LibrettoCatasto;
import it.csi.sigit.sigitwebn.xml.importmassivo.libretto.data.LibrettoDocument;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiAltriComponentiCIDocument.DatiAltriComponentiCI.SezCI;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiAltriComponentiRVDocument.DatiAltriComponentiRV.SezRV;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiAltriComponentiTEDocument.DatiAltriComponentiTE.SezTE;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiAltriComponentiUTDocument.DatiAltriComponentiUT.SezUT;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiConsumoCombuDocument.DatiConsumoCombu;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiConsumoCombuDocument.DatiConsumoCombu.SezCombu;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiConsumoEEDocument.DatiConsumoEE.SezConsumo;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiConsumoH2ODocument.DatiConsumoH2O;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiConsumoProdottiChimiciDocument.DatiConsumoProdottiChimici;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiInterventiControlloDocument.DatiInterventiControllo.SezInterventi;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiPrecompilatiDocument.DatiPrecompilati;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoFabbricante;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoFabbricante.Fabbricante;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoUM;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoUM.UnitaMisura;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiPrecompilatiDocument.DatiPrecompilati.SezNomine;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiRisultatiCGDocument.DatiRisultatiCG.SezCogen;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiRisultatiGFDocument.DatiRisultatiGF.SezMacchineFrigo;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiRisultatiGTDocument.DatiRisultatiGT;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiRisultatiIspezDocument.DatiRisultatiIspez.SezRisultati;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiRisultatiSCDocument.DatiRisultatiSC.SezScambiatori;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiSchedaAGDocument.DatiSchedaAG;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiSchedaAGDocument.DatiSchedaAG.SezAG;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiSchedaBRDocument.DatiSchedaBR;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiSchedaBRDocument.DatiSchedaBR.SezBR;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiSchedaCGDocument.DatiSchedaCG;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiSchedaCGDocument.DatiSchedaCG.SezCG;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiSchedaCSDocument.DatiSchedaCS;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiSchedaCSDocument.DatiSchedaCS.SezCS;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiSchedaGFDocument.DatiSchedaGF;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiSchedaGFDocument.DatiSchedaGF.SezGF;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiSchedaGTDocument.DatiSchedaGT;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiSchedaGTDocument.DatiSchedaGT.SezGruppiTermici;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiSchedaIdentificativaImpDocument.DatiSchedaIdentificativaImp;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiSchedaRCDocument.DatiSchedaRC;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiSchedaRCDocument.DatiSchedaRC.SezRC;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiSchedaSCDocument.DatiSchedaSC;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiSchedaSCDocument.DatiSchedaSC.SezSC;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiSchedaSistemaACDocument.DatiSchedaSistemaAC.SezAC;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiSchedaSistemaEmissioneDocument.DatiSchedaSistemaEmissione;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiSchedaSistemiDistribDocument.DatiSchedaSistemiDistrib;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiSchedaSistemiDistribDocument.DatiSchedaSistemiDistrib.SezPO;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiSchedaSistemiDistribDocument.DatiSchedaSistemiDistrib.SezVasi;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiSchedaSistemiRegolazDocument.DatiSchedaSistemiRegolaz;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiSchedaTrattH2ODocument.DatiSchedaTrattH2O;
import it.csi.sigit.sigitwebn.xml.libretto.data.DatiVentilazMeccanicaVMDocument.DatiVentilazMeccanicaVM.SezVM;
import it.csi.sigit.sigitwebn.xml.libretto.data.IntervControlloDocument.IntervControllo;
import it.csi.sigit.sigitwebn.xml.libretto.data.L111RowGTDocument.L111RowGT;
import it.csi.sigit.sigitwebn.xml.libretto.data.L112RowGFDocument.L112RowGF;
import it.csi.sigit.sigitwebn.xml.libretto.data.L113RowSCDocument.L113RowSC;
import it.csi.sigit.sigitwebn.xml.libretto.data.L114RowCGDocument.L114RowCG;
import it.csi.sigit.sigitwebn.xml.libretto.data.*;
import it.csi.sigit.sigitwebn.xml.libretto.data.RegolazionePrimariaDocument.RegolazionePrimaria;
import it.csi.sigit.sigitwebn.xml.libretto.data.RegolazionePrimariaDocument.RegolazionePrimaria.SezSR;
import it.csi.sigit.sigitwebn.xml.libretto.data.RegolazionePrimariaDocument.RegolazionePrimaria.SezVR;
import it.csi.sigit.sigitwebn.xml.libretto.data.RegolazioneSingoloAmbDocument.RegolazioneSingoloAmb;
import it.csi.sigit.sigitwebn.xml.libretto.data.RichiestaDocument.Richiesta;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowACDocument.RowAC;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowACsostDocument.RowACsost;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowAGDocument.RowAG;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowAGsostDocument.RowAGsost;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowBRDocument.RowBR;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowBRsostDocument.RowBRsost;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowCGDocument.RowCG;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowCGsostDocument.RowCGsost;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowCIDocument.RowCI;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowCIsostDocument.RowCIsost;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowCSDocument.RowCS;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowCSvarDocument.RowCSvar;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowCatastoDocument.RowCatasto;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowCircuitiGFDocument.RowCircuitiGF;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowCombuDocument.RowCombu;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowConsumoDocument.RowConsumo;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowConsumoEEDocument.RowConsumoEE;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowConsumoH2ODocument.RowConsumoH2O;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowConsumoPRODDocument.RowConsumoPROD;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowDateCGDocument.RowDateCG;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowDateGFDocument.RowDateGF;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowDateGTDocument.RowDateGT;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowDateSCDocument.RowDateSC;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowGFDocument.RowGF;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowGFsostDocument.RowGFsost;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowGTDocument.RowGT;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowGTsostDocument.RowGTsost;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowNomineDocument.RowNomine;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowNumModuliGTDocument.RowNumModuliGT;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowPODocument.RowPO;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowPOsostDocument.RowPOsost;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowRCDocument.RowRC;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowRCcalDocument.RowRCcal;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowRCcalsostDocument.RowRCcalsost;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowRCsostDocument.RowRCsost;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowRVDocument.RowRV;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowRVsostDocument.RowRVsost;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowRisultatiIspezDocument.RowRisultatiIspez;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowSCDocument.RowSC;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowSCcalDocument.RowSCcal;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowSCcalsostDocument.RowSCcalsost;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowSCsostDocument.RowSCsost;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowSRDocument.RowSR;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowSRsostDocument.RowSRsost;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowTEDocument.RowTE;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowTEsostDocument.RowTEsost;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowUTDocument.RowUT;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowUTsostDocument.RowUTsost;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowVMDocument.RowVM;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowVMsostDocument.RowVMsost;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowVRDocument.RowVR;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowVRsostDocument.RowVRsost;
import it.csi.sigit.sigitwebn.xml.libretto.data.RowVasiDocument.RowVasi;
import it.csi.sigit.sigitwebn.xml.librettoLight.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoCombustibile;
import it.csi.sigit.sigitwebn.xml.librettoLight.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoCombustibile.Combustibile;
import it.csi.sigit.sigitwebn.xml.librettoLight.data.DatiPrecompilatiDocument.DatiPrecompilati.SezCatasto;
import it.csi.sigit.sigitwebn.xml.librettoLight.data.RowConsumoDocument;
import it.csi.sitad.tpnm.entity.Via;
import it.csi.tavt.dto.Comune;
import it.csi.tavt.dto.Provincia;
//import sun.net.www.content.text.Generic;
import test.TestPkMemConsumo;

import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.math.BigDecimal;
import java.math.BigInteger;
import java.text.ParseException;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collection;
import java.util.Collections;
import java.util.Date;
import java.util.HashMap;
import java.util.HashSet;
import java.util.List;
import java.util.Map;
import java.util.Set;
import java.util.StringTokenizer;
import java.util.stream.Stream;

import javax.xml.parsers.ParserConfigurationException;

import org.apache.commons.beanutils.PropertyUtils;
import org.apache.commons.collections.BidiMap;
import org.apache.commons.collections.bidimap.DualHashBidiMap;
import org.apache.commons.lang.StringUtils;
import org.apache.log4j.Logger;
import org.apache.xmlbeans.XmlBoolean;
import org.apache.xmlbeans.XmlException;
import org.apache.xmlbeans.XmlInteger;
import org.xml.sax.SAXException;


/**
 * Mappa DTO con gli oggetti GUI e viceversa
 * 
 */
public class MapDto {
	/**
	 * Logger da utilizzare
	 */
	private static Logger log = Logger.getLogger(Constants.APPLICATION_CODE
			+ ".util");
	
	/**
	 * Carica una lista di {@link CodeDescription} per le Provincie
	 * 
	 * @param p
	 *            Lista delle Provincie da caricare
	 * @return Lista di {@link CodeDescription}
	 */
	public static ArrayList<CodeDescription> mapSiglaProvince(Provincia[] p) {
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (p != null) {
			for (Provincia obj : p) {
				result.add(mapToCodeDescription(obj));
			}
		}
		Collections.sort(result, ComparatorUtil.compare());
		return result;
	}

	/**
	 * Carica una lista di {@link CodeDescription} per le Provincie
	 * 
	 * @param p
	 *            Lista delle Provincie da caricare
	 * @return Lista di {@link CodeDescription}
	 */
	public static ArrayList<CodeDescription> mapIstatProvince(Provincia[] p) {
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (p != null) {
			for (Provincia obj : p) {
				result.add(mapToIstatDescription(obj));
			}
		}
		Collections.sort(result, ComparatorUtil.compare());
		return result;
	}

	/**
	 * Carica una lista di {@link CodeDescription} per le Provincie
	 * 
	 * @param p
	 *            Lista delle Provincie da caricare
	 * @return Lista di {@link CodeDescription}
	 */
	public static ArrayList<CodeDescription> mapProvince(Provincia[] p) {
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (p != null) {
			for (Provincia obj : p) {
				result.add(mapToCodeDescriptionDesc(obj));
			}
		}
		Collections.sort(result, ComparatorUtil.compare());
		return result;
	}
	
	
	public static ArrayList<CodeDescription> mapComuni(Comune[] c) {
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (c != null) {
			for (Comune obj : c) {
				if (obj.getDataStop() == null)
					result.add(mapToCodeDescription(obj));
			}
		}
		Collections.sort(result, ComparatorUtil.compare());
		return result;
	}
	
	/**
	 * Carica una lista di {@link CodeDescription} per gli Stati Impianto
	 * 
	 * @param p
	 *            Lista degli Stato Impianto
	 * @return Lista di {@link CodeDescription}
	 */
	public static ArrayList<CodeDescription> mapStatiImpianto(List<SigitDStatoImpDto> statiImp) {
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (statiImp != null) {
			for (SigitDStatoImpDto obj : statiImp) {
				result.add(mapToCodeDescription(obj));
			}
		}
		Collections.sort(result, ComparatorUtil.compare());
		return result;
	}
	
	/**
	 * Carica una lista di {@link CodeDescription} per gli Stati Impianto
	 * 
	 * @param p
	 *            Lista degli Stato Impianto
	 * @return Lista di {@link CodeDescription}
	 */
	public static ArrayList<CodeDescription> mapStatiPg(List<SigitDStatoPgDto> statiPg) {
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (statiPg != null) {
			for (SigitDStatoPgDto obj : statiPg) {
				result.add(mapToCodeDescription(obj));
			}
		}
		Collections.sort(result, ComparatorUtil.compare());
		return result;
	}

	/**
	 * Carica una lista di {@link CodeDescription} di numeri bollino
	 * 
	 * @param p
	 *            Lista degli Stato Impianto
	 * @return Lista di {@link CodeDescription}
	 */
	/*
	public static ArrayList<CodeDescription> mapToNumeriBollino(List<SigitTTransazioneBollByElencoNumeriBollinoByPersGiuridicaDto>  listaNumeriBoll) {
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (listaNumeriBoll != null) {
			for (SigitTTransazioneBollByElencoNumeriBollinoByPersGiuridicaDto obj : listaNumeriBoll) {
				result.add(mapToCodeDescription(obj));
			}
		}
		Collections.sort(result, ComparatorUtil.compare());
		return result;
	}
	*/
	
	/**
	 * Carica una lista di {@link CodeDescription} di tipi documento allegata
	 * 
	 * @param p
	 *            Lista dei tipi documento
	 * @return Lista di {@link CodeDescription}
	 */
	public static ArrayList<CodeDescription> mapToTipoDocAgg(List<SigitDTipoDocAggDto>  listaTipoDocAgg) {
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (listaTipoDocAgg != null) {
			for (SigitDTipoDocAggDto obj : listaTipoDocAgg) {
				result.add(mapToCodeDescription(obj));
			}
		}
		//Collections.sort(result, ComparatorUtil.compare());
		return result;
	}
	
	/**
	 * Carica una lista di {@link CodeDescription} di combustibili
	 * 
	 * @param p
	 *            Lista dei combustibili
	 * @return Lista di {@link CodeDescription}
	 */
	public static ArrayList<CodeDescription> mapToCombustibili(List<SigitDCombustibileDto>  listaCombustibili) {
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (listaCombustibili != null) {
			for (SigitDCombustibileDto obj : listaCombustibili) {
				result.add(mapToCodeDescription(obj));
			}
		}
		//Collections.sort(result, ComparatorUtil.compare());
		return result;
	}
	
	/**
	 * Carica una lista di {@link CodeDescription} di combustibili
	 * 
	 * @param p
	 *            Lista dei combustibili
	 * @return Lista di {@link CodeDescription}
	 */
	public static ArrayList<CodeDescription> mapToCat(List<SigitTPersonaGiuridicaDto>  listaPgCat) {
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (listaPgCat != null) {
			for (SigitTPersonaGiuridicaDto obj : listaPgCat) {
				result.add(mapToCodeDescription(obj));
			}
		}
		//Collections.sort(result, ComparatorUtil.compare());
		return result;
	}
	
	public static ArrayList<IdDescription> mapToTipoVerifiche(List<SigitDTipoVerificaDto>  listaVerifiche) {
		ArrayList<IdDescription> result = new ArrayList<IdDescription>();
		if (listaVerifiche != null) {
			for (SigitDTipoVerificaDto obj : listaVerifiche) {
				//dcosta: Visualizzare solo i valori con id>0
				if (obj.getIdTipoVerifica() != Constants.DATO_NON_DISPONIBILE) {
					IdDescription cd = new IdDescription();
					cd.setId(obj.getIdTipoVerifica());
					cd.setDescription(obj.getDesTipoVerifica());
					result.add(cd);
				}
			}
		}
		return result;
	}
	
	public static ArrayList<IdDescription> mapToStatoAccertamento(List<SigitDStatoAccertamentoDto>  listaAccertamenti) {
		ArrayList<IdDescription> result = new ArrayList<IdDescription>();
		if (listaAccertamenti != null) {
			for (SigitDStatoAccertamentoDto obj : listaAccertamenti) {

				if (obj.getIdStatoAccertamento() != Constants.DATO_NON_DISPONIBILE)
				{

					IdDescription cd = new IdDescription();
					cd.setId(obj.getIdStatoAccertamento());
					cd.setDescription(obj.getDesStatoAccertamento());

					result.add(cd);
				}
			}
		}
		return result;
	}
	
	public static ArrayList<CodeDescription> mapToTipoAnomalie(List<SigitDTipoAnomaliaDto>  listaAnomalie) {
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (listaAnomalie != null) {
			for (SigitDTipoAnomaliaDto obj : listaAnomalie) {
				
				if (obj.getIdTipoAnomalia() != Constants.DATO_NON_DISPONIBILE)
				{
					CodeDescription cd = new CodeDescription();
					cd.setCode(ConvertUtil.convertToString(obj.getIdTipoAnomalia()));
					cd.setDescription(obj.getDesTipoAnomalia());
	
					result.add(cd);
				}
			}
		}
		return result;
	}
	
	public static ArrayList<CodeDescription> mapToPFtoRuolo(List<SigitTPersonaFisicaDaRuoloPADto>  listaPFConRuoloPA, boolean cfKey) {
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (listaPFConRuoloPA != null) {
			for (SigitTPersonaFisicaDaRuoloPADto obj : listaPFConRuoloPA) {

				String cf = ConvertUtil.isNullOrEmpty(obj.getPfCodiceFiscale()) ? "" : "(" + obj.getPfCodiceFiscale() +")";
				
				CodeDescription cd = new CodeDescription();
				if (cfKey) {
					cd.setCode(obj.getPfCodiceFiscale());
				} else {
					cd.setCode(ConvertUtil.convertToString(obj.getPfIdPersonaFisica()));
				}
				
				cd.setDescription(ConvertUtil.getStringByConcat(" ", obj.getPfCognome(), obj.getPfNome(), cf));

				result.add(cd);
			}
		}
		return result;
	}
	
	public static ArrayList<IdDescription> mapToTipoConclusioni(List<SigitDTipoConclusioneDto>  listaConclusioni) {
		ArrayList<IdDescription> result = new ArrayList<IdDescription>();
		if (listaConclusioni != null) {
			for (SigitDTipoConclusioneDto obj : listaConclusioni) {
				
				if (obj.getIdTipoConclusione() != Constants.DATO_NON_DISPONIBILE)
				{
					IdDescription cd = new IdDescription();
					cd.setId(obj.getIdTipoConclusione());
					cd.setDescription(obj.getDesTipoConclusione());
	
					result.add(cd);
				}
			}
		}
		return result;
	}
	
	public static ArrayList<IdDescription> mapToStatiIspezione(List<SigitDStatoIspezioneDto>  listaStatiIspezioni) {
		ArrayList<IdDescription> result = new ArrayList<IdDescription>();
		if (listaStatiIspezioni != null) {
			for (SigitDStatoIspezioneDto obj : listaStatiIspezioni) {
				
				if (ConvertUtil.convertToInteger(obj.getIdStatoIspezione()) != Constants.DATO_NON_DISPONIBILE)
				{
					IdDescription cd = new IdDescription();
					cd.setId(ConvertUtil.convertToInteger(obj.getIdStatoIspezione()));
					cd.setDescription(obj.getDesStatoIspezione());
	
					result.add(cd);
				}
			}
		}
		return result;
	}
	
	public static ArrayList<IdDescription> mapToStatiSanzione(List<SigitDStatoSanzioneDto>  listaStatiSanzione) {
		ArrayList<IdDescription> result = new ArrayList<IdDescription>();
		if (listaStatiSanzione != null) {
			for (SigitDStatoSanzioneDto obj : listaStatiSanzione) {
				
				if (obj.getIdStatoSanzione() != Constants.DATO_NON_DISPONIBILE)
				{
					IdDescription cd = new IdDescription();
					cd.setId(obj.getIdStatoSanzione());
					cd.setDescription(obj.getDesStatoSanzione());
	
					result.add(cd);
				}
			}
		}
		return result;
	}
	public static Verifica mapToVerifica(SigitTVerificaDto verificaEntity) {
		if (verificaEntity == null) {
			return null;
		} 
		
		Verifica verificaDto = new Verifica();
		verificaDto.setCfUtenteCaricamento(verificaEntity.getCfUtenteCaricamento());
		verificaDto.setCodiceImpianto(verificaEntity.getCodiceImpianto() == null || verificaEntity.getCodiceImpianto().intValue() == 0 ? "" : ConvertUtil.convertToString(verificaEntity.getCodiceImpianto()));
		verificaDto.setDataCaricamento(ConvertUtil.convertToString(verificaEntity.getDtCaricamento()));
		verificaDto.setDataSvegliaDes(verificaEntity.getDtSveglia() == null ? "Nessuna" : ConvertUtil.convertToString(verificaEntity.getDtSveglia()));
		verificaDto.setDataSveglia(ConvertUtil.convertToString(verificaEntity.getDtSveglia()));
		verificaDto.setDenomUtenteCaricamento(verificaEntity.getDenomUtenteCaricamento());
		verificaDto.setIdDatoDistributore(verificaEntity.getFkDatoDistrib() == null || verificaEntity.getFkDatoDistrib().intValue() == 0 ? "" : ConvertUtil.convertToString(verificaEntity.getFkDatoDistrib()));
		verificaDto.setIdAllegato(verificaEntity.getFkAllegato() == null || verificaEntity.getFkAllegato().intValue() == 0 ? "" : ConvertUtil.convertToString(verificaEntity.getFkAllegato()));
		verificaDto.setIdentificativo(ConvertUtil.convertToString(verificaEntity.getIdVerifica()));
		if (GenericUtil.isNotNullOrEmpty(verificaDto.getIdentificativo())) {
			verificaDto.setIdentificativoExtended("VERIFICA-" + verificaDto.getIdentificativo());
		}
		verificaDto.setNote(verificaEntity.getNote());
		verificaDto.setNoteSveglia(verificaEntity.getNoteSveglia());
		String numeroBollinoString = ConvertUtil.convertToString(verificaEntity.getNumeroBollino());
		verificaDto.setNumeroBollino(numeroBollinoString);
		verificaDto.setSiglaBollino(verificaEntity.getSiglaBollino());
		verificaDto.setTipoVerifica(verificaEntity.getFkTipoVerifica());
		//PARTE DI UTILITY PER PARTE GRAFICA
		
		if (GenericUtil.isNotNullOrEmpty(verificaEntity.getDenomUtenteCaricamento()))
		{
			verificaDto.setEseguitoDa(ConvertUtil.getStringByConcat(" ", verificaEntity.getDenomUtenteCaricamento(), "("+verificaEntity.getCfUtenteCaricamento()+")"));
		}
		
		verificaDto.setRisultatoBollino(ConvertUtil.getStringByConcat(" ", verificaEntity.getSiglaBollino() , "0".equals(numeroBollinoString) ? "" : numeroBollinoString));
		verificaDto.setDescrizioneSveglia(ConvertUtil.getStringByConcat(" ", ConvertUtil.convertToString(verificaEntity.getDtSveglia()) , verificaEntity.getNoteSveglia()));
		if (verificaEntity instanceof SigitExtVerificaDto) {
			SigitExtVerificaDto verificaExt = (SigitExtVerificaDto) verificaEntity;
			verificaDto.setIdAccertamento(ConvertUtil.convertToString(verificaExt.getFkAccertamento()));
			verificaDto.setIdIspezione(ConvertUtil.convertToString(verificaExt.getFkIspezione()));
		}
		
		return verificaDto;
	}
	
	public static Accertamento mapToAccertamento(SigitTAccertamentoDto accertamentoEntity, SigitVRicercaImpiantiDto impiantoEntity) {
		if (accertamentoEntity == null) {
			return null;
		} 
		Accertamento accertamentoDto = new Accertamento();
		accertamentoDto.setCfUtenteCaricamento(accertamentoEntity.getCfUtenteAssegn());

		accertamentoDto.setIdentificativo(ConvertUtil.convertToString(accertamentoEntity.getIdAccertamento()));
		accertamentoDto.setIdVerifica(ConvertUtil.convertToString(accertamentoEntity.getFkVerifica()));

		if (accertamentoEntity.getCodiceImpianto() != null && accertamentoEntity.getCodiceImpianto().intValue() != Constants.COD_IMPIANTO_VUOTO)
		{
			accertamentoDto.setCodiceImpianto(ConvertUtil.convertToString(accertamentoEntity.getCodiceImpianto()));
			
			if (impiantoEntity != null)
			{
				accertamentoDto.setIndirizzoImpianto(getIndirizzoCompleto(impiantoEntity.getDenominazioneComune(), impiantoEntity.getIndirizzoUnitaImmob(), impiantoEntity.getCivico(), impiantoEntity.getSiglaProvincia()));
				accertamentoDto.setSiglaProv(impiantoEntity.getSiglaProvincia());
				accertamentoDto.setCodIstatProv(GenericUtil.getCodIstatProvByCodIstatComune(impiantoEntity.getIstatComune()));
			}
			else
			{
				accertamentoDto.setSiglaProv(accertamentoEntity.getSiglaProvCompetenza());
				accertamentoDto.setCodIstatProv(accertamentoEntity.getIstatProvCompetenza());
			}
		}
		
		accertamentoDto.setDataCreazione(ConvertUtil.convertToString(accertamentoEntity.getDtCreazione()));
		accertamentoDto.setDataConclusione(ConvertUtil.convertToString(accertamentoEntity.getDtConclusione()));
		accertamentoDto.setDataSvegliaDes(accertamentoEntity.getDtSveglia() == null ? "Nessuna" : ConvertUtil.convertToString(accertamentoEntity.getDtSveglia()));
		accertamentoDto.setDataSveglia(ConvertUtil.convertToString(accertamentoEntity.getDtSveglia()));
		//accertamentoDto.setDenomUtenteCaricamento(accertamentoEntity.getDenomUtenteCaricamento());
		accertamentoDto.setIdTipoAnomalia(ConvertUtil.convertToString(accertamentoEntity.getFkTipoAnomalia()));
		accertamentoDto.setIdStatoAccertamento(accertamentoEntity.getFkStatoAccertamento());
		accertamentoDto.setIdTipoConclusione(accertamentoEntity.getFkTipoConclusione());
		
		if (GenericUtil.isNotNullOrEmpty(accertamentoEntity.getDenomUtenteAssegn()))
		{
			accertamentoDto.setAssegnatario(ConvertUtil.getStringByConcat(" ", accertamentoEntity.getDenomUtenteAssegn(), "("+accertamentoEntity.getCfUtenteAssegn()+")"));
		}
		
		if (GenericUtil.isNotNullOrEmpty(accertamentoDto.getIdentificativo())) {
			accertamentoDto.setIdentificativoExtended("ACCERTAMENTO-" + accertamentoDto.getIdentificativo());
		}
		accertamentoDto.setNote(accertamentoEntity.getNote());
		accertamentoDto.setNoteSveglia(accertamentoEntity.getNoteSveglia());
		//PARTE DI UTILITY PER PARTE GRAFICA
		//accertamentoDto.setEseguitoDa(ConvertUtil.getStringByConcat(" ", accertamentoEntity.getDenomUtenteAssegn(), accertamentoEntity.getCfUtenteAssegn()));
		accertamentoDto.setDescrizioneSveglia(ConvertUtil.getStringByConcat(" ", ConvertUtil.convertToString(accertamentoEntity.getDtSveglia()) , accertamentoEntity.getNoteSveglia()));
		accertamentoDto.setIdIspezione(null);//DA MODIFICARE
		
		return accertamentoDto;
	}
	
	public static IspezioneAccertamento mapToIspezioneAccertamento(SigitTIspezione2018Dto ispezioneEntity, Map<Integer, String> mappaStatoIspezione) {
		if (ispezioneEntity == null) {
			return null;
		} 
		IspezioneAccertamento ispezione = new IspezioneAccertamento();
		ispezione.setIdIspezione(ispezioneEntity.getIdIspezione2018());
		ispezione.setIdStatoIspezione(ConvertUtil.convertToInteger(ispezioneEntity.getFkStatoIspezione()));
		ispezione.setDescStatoIspezione(mappaStatoIspezione.get(ConvertUtil.convertToInteger(ispezioneEntity.getFkStatoIspezione())));

		Boolean isPagamentoBoolean = ConvertUtil.convertToBoolean(ispezioneEntity.getFlgIspPagamento());

		ispezione.setDescIspPagamento(isPagamentoBoolean == null ? "" : isPagamentoBoolean ? Constants.LABEL_SI : Constants.LABEL_NO);

		return ispezione;
	}
	
	
	public static Sanzione mapToSanzione(SigitTSanzioneDto sanzioneEntity, Map<Integer, String> mappaStatoSanzione, SigitTPersonaFisicaDto sanzionatoFisico, SigitTPersonaGiuridicaDto sanzionatoGiuridico) {
		if (sanzioneEntity == null) {
			return null;
		} 
		Sanzione sanzione = new Sanzione();
		sanzione.setIdSanzione(sanzioneEntity.getIdSanzione());
		sanzione.setDataCreazione(ConvertUtil.convertToString(sanzioneEntity.getDtCreazione()));
		sanzione.setDescMotivoSanzione(sanzioneEntity.getMotivazioneSanzione());
		if (mappaStatoSanzione != null) {
			sanzione.setDescStatoSanzione(mappaStatoSanzione.get(sanzioneEntity.getFkStatoSanzione()));
		}
		
		sanzione.setIdStatoSanzione(sanzioneEntity.getFkStatoSanzione());
		
		sanzione.setAccertamentoAssociato(MapDto.convertByMandatoryFk(ConvertUtil.convertToString(sanzioneEntity.getFkAccertamento())));
		sanzione.setDataAnnullamento(ConvertUtil.convertToString(sanzioneEntity.getDtAnnullamento()));
		sanzione.setDataComunicazione(ConvertUtil.convertToString(sanzioneEntity.getDtComunicazione()));
		sanzione.setDataCreazione(ConvertUtil.convertToString(sanzioneEntity.getDtCreazione()));
		sanzione.setDataPagamento(ConvertUtil.convertToString(sanzioneEntity.getDtPagamento()));
		sanzione.setDescMotivoAnnullamento(sanzioneEntity.getMotivoAnnullamento());
		sanzione.setDescSveglia(ConvertUtil.getStringByConcat(" ", ConvertUtil.convertToString(sanzioneEntity.getDtSveglia()), sanzioneEntity.getNoteSveglia()));
		sanzione.setIspezioneAssociata(MapDto.convertByMandatoryFk(ConvertUtil.convertToString(sanzioneEntity.getFkIspezione2018())));
		sanzione.setNote(sanzioneEntity.getNote());
		if (sanzioneEntity.getFkPfSanzionata() != null && ConvertUtil.convertToInteger(sanzioneEntity.getFkPfSanzionata()) != 0 && sanzionatoFisico != null) {
			sanzione.setPfSanzionata(creaInfoSanzionato(sanzionatoFisico, null));
		} else if (sanzioneEntity.getFkPgSanzionata() != null && ConvertUtil.convertToInteger(sanzioneEntity.getFkPgSanzionata()) != 0 && sanzionatoGiuridico != null) {
			sanzione.setPgSanzionata(creaInfoSanzionato(null, sanzionatoGiuridico));
		}
		
		if (GenericUtil.isNotNullOrEmpty(sanzioneEntity.getDenomUtResponsabile()))
		{
			sanzione.setResponsabilePA(ConvertUtil.getStringByConcat(" ", sanzioneEntity.getDenomUtResponsabile(), "("+sanzioneEntity.getCfResponsabile()+")"));
		}
		
		sanzione.setValore(ConvertUtil.convertToString(sanzioneEntity.getValoreSanzione()));
		
		return sanzione;
	}
	
	public static String creaInfoSanzionato (SigitTPersonaFisicaDto sanzionatoFisico, SigitTPersonaGiuridicaDto sanzionatoGiuridico) {
		String indirizzo = "";
		if (sanzionatoFisico != null) {
			
			if (ConvertUtil.convertToBooleanAllways(sanzionatoFisico.getFlgIndirizzoEstero())){
				indirizzo = MapDto.getIndirizzoEsteroCompleto(sanzionatoFisico.getStatoEstero(), sanzionatoFisico.getCittaEstero(), sanzionatoFisico.getIndirizzoEstero(), sanzionatoFisico.getCivico());
			}
			else {
				indirizzo = MapDto.getIndirizzoCompleto(sanzionatoFisico.getComune(), sanzionatoFisico.getIndirizzoSitad(), sanzionatoFisico.getIndirizzoNonTrovato(), 
						sanzionatoFisico.getCivico(), sanzionatoFisico.getSiglaProv());
			}
			
			return ConvertUtil.getStringByConcat(" - ", costruisciCognomeNomeCF(sanzionatoFisico.getCognome(), sanzionatoFisico.getNome(), sanzionatoFisico.getCodiceFiscale()), indirizzo);
			
		} else if (sanzionatoGiuridico != null) {
			if (ConvertUtil.convertToBooleanAllways(sanzionatoGiuridico.getFlgIndirizzoEstero())) {
				indirizzo = MapDto.getIndirizzoEsteroCompleto(sanzionatoGiuridico.getStatoEstero(), sanzionatoGiuridico.getCittaEstero(), sanzionatoGiuridico.getIndirizzoEstero(), sanzionatoGiuridico.getCivico());
			} else {
				indirizzo = MapDto.getIndirizzoCompleto(sanzionatoGiuridico.getComune(), sanzionatoGiuridico.getIndirizzoSitad(), sanzionatoGiuridico.getIndirizzoNonTrovato(), 
						sanzionatoGiuridico.getCivico(), sanzionatoGiuridico.getSiglaProv());
			}
			
			String denominazioneCompleta = ConvertUtil.getStringByConcat(" ", sanzionatoGiuridico.getDenominazione(), "("+sanzionatoGiuridico.getCodiceFiscale()+")");
			return ConvertUtil.getStringByConcat(" - ", denominazioneCompleta, indirizzo);
		}
		
		return "";
		
	}
	
	private static String convertToMandatoryFk(String stringFieldFk) {
		if (stringFieldFk == null || StringUtils.isBlank(stringFieldFk)) {
			return Constants.DATO_NON_DISPONIBILE_S;
		}
		
		return stringFieldFk;
	}
	
	private static Integer convertToMandatoryFk(Integer integerFieldFk) {
		if (integerFieldFk == null) {
			return new Integer(0);
		}
		
		return integerFieldFk;
	}
	
	private static String convertByMandatoryFk(String stringFieldFk) {
		if (Constants.DATO_NON_DISPONIBILE_S.equals(stringFieldFk)) {
			return null;
		}
		
		return stringFieldFk;
	}
	
	
	
	public static SigitTSanzioneDto mapToSigitTSanzioneDTO (DatiInserimentoSanzione dto, Integer idStato) {
		SigitTSanzioneDto sanzioneDb = new SigitTSanzioneDto();
//		sanzioneDb.setDtAnnullamento(dto.get);
//		sanzioneDb.setDtComunicazione(dto.getd);
		sanzioneDb.setDtCreazione(ConvertUtil.convertToSqlDate(dto.getDataCreazione()));
//		sanzioneDb.setDtPagamento(dto.getd);
		sanzioneDb.setFkAccertamento(ConvertUtil.convertToInteger(MapDto.convertToMandatoryFk(dto.getAccertamentoAssociato())));
		sanzioneDb.setFkIspezione2018(ConvertUtil.convertToInteger(MapDto.convertToMandatoryFk(dto.getIspezioneAssociata())));

		sanzioneDb.setFkPfSanzionata(ConvertUtil.convertToBigDecimal(MapDto.convertToMandatoryFk(dto.getIdSanzionatoFisico())));
		sanzioneDb.setFkPgSanzionata(ConvertUtil.convertToBigDecimal(MapDto.convertToMandatoryFk(dto.getIdSanzionatoGiuridico())));
		sanzioneDb.setFkStatoSanzione(idStato);
		sanzioneDb.setIdSanzione(dto.getIdSanzione());
		sanzioneDb.setMotivazioneSanzione(dto.getMotivoSanzione());
//		sanzioneDb.setMotivoAnnullamento();
		sanzioneDb.setNote(dto.getNote());
		sanzioneDb.setValoreSanzione(ConvertUtil.convertToBigDecimal(dto.getValore()));
		
		sanzioneDb.setCfResponsabile(dto.getCodFisRespPA());
		sanzioneDb.setDenomUtResponsabile(dto.getDenomRespPA());

		return sanzioneDb;
	}
	
	
	public static DatiInserimentoSanzione mapToDatiInserimentoSanzione(SigitTSanzioneDto sanzioneDb, SigitTPersonaFisicaDto fisica, SigitTPersonaGiuridicaDto giuridica) {
		if (sanzioneDb == null) {
			return null;
		}
		
		DatiInserimentoSanzione sanzione = new DatiInserimentoSanzione();
		sanzione.setAccertamentoAssociato(MapDto.convertByMandatoryFk(ConvertUtil.convertToString(sanzioneDb.getFkAccertamento())));
		sanzione.setDataCreazione(ConvertUtil.convertToString(sanzioneDb.getDtCreazione()));
		sanzione.setIdSanzione(sanzioneDb.getIdSanzione());
		sanzione.setIspezioneAssociata(MapDto.convertByMandatoryFk(ConvertUtil.convertToString(sanzioneDb.getFkIspezione2018())));
		sanzione.setMotivoSanzione(sanzioneDb.getMotivazioneSanzione());
		sanzione.setNote(sanzioneDb.getNote());
		
		if (GenericUtil.isNotNullOrEmpty(sanzioneDb.getDenomUtResponsabile()))
		{
			sanzione.setResponsabilePA(ConvertUtil.getStringByConcat(" ", sanzioneDb.getDenomUtResponsabile(), "("+sanzioneDb.getCfResponsabile()+")"));
		}
		sanzione.setCodFisRespPA(sanzioneDb.getCfResponsabile());
		sanzione.setDenomRespPA(sanzioneDb.getDenomUtResponsabile());
		sanzione.setValore(ConvertUtil.convertToString(sanzioneDb.getValoreSanzione()));
		
		if (sanzioneDb.getFkPfSanzionata() != null && ConvertUtil.convertToInteger(sanzioneDb.getFkPfSanzionata()) != 0) {
			
			sanzione.setIdSanzionatoFisico(ConvertUtil.convertToInteger(fisica.getIdPersonaFisica()));
			
			sanzione.setCapEstero(fisica.getCapEstero());
			sanzione.setCivico(fisica.getCivico());
			sanzione.setCivicoEstero(fisica.getCittaEstero());
			sanzione.setCodiceFiscale(fisica.getCodiceFiscale());
			sanzione.setComuneEstero(fisica.getCittaEstero());
			sanzione.setDenominazione(fisica.getCognome());
			sanzione.setFlgEnteImpresa(Boolean.FALSE);
			sanzione.setFlgIndirizzoEstero(ConvertUtil.convertToBoolean(fisica.getFlgIndirizzoEstero()));
			sanzione.setIndirizzo(fisica.getIndirizzoSitad());
			sanzione.setIndirizzoNoStradario(fisica.getIndirizzoNonTrovato());
			sanzione.setIdIndirizzo(ConvertUtil.convertToString(fisica.getFkL2()));
			sanzione.setNome(fisica.getNome());
			sanzione.setStatoEstero(fisica.getStatoEstero());
			sanzione.setIdProvincia(fisica.getSiglaProv());
			sanzione.setIdComune(fisica.getIstatComune());
		} else if (sanzioneDb.getFkPgSanzionata() != null && ConvertUtil.convertToInteger(sanzioneDb.getFkPgSanzionata()) != 0) {
			
			sanzione.setIdSanzionatoGiuridico(ConvertUtil.convertToInteger(giuridica.getIdPersonaGiuridica()));
			
			sanzione.setCapEstero(giuridica.getCapEstero());
			sanzione.setCivico(giuridica.getCivico());
			sanzione.setCivicoEstero(giuridica.getCittaEstero());
			sanzione.setCodiceFiscale(giuridica.getCodiceFiscale());
			sanzione.setComuneEstero(giuridica.getCittaEstero());
			sanzione.setDenominazione(giuridica.getDenominazione());
			sanzione.setFlgEnteImpresa(Boolean.TRUE);
			sanzione.setFlgIndirizzoEstero(ConvertUtil.convertToBoolean(giuridica.getFlgIndirizzoEstero()));
			sanzione.setIndirizzo(giuridica.getIndirizzoSitad());
			sanzione.setIdIndirizzo(ConvertUtil.convertToString(giuridica.getFkL2()));
			sanzione.setIndirizzoNoStradario(giuridica.getIndirizzoNonTrovato());
			sanzione.setNome("");
			sanzione.setStatoEstero(giuridica.getStatoEstero());
			sanzione.setIdProvincia(giuridica.getSiglaProv());
			sanzione.setIdComune(giuridica.getIstatComune());
		}
		
		
		return sanzione;
	}
	
	public static RisultatoRicerca mapToRisultatoRicercaSanzione (SigitTSanzioneDto sanzioneEntity, Map<Integer, String> mappaStatoSanzione) {
		
		if (sanzioneEntity == null) {
			return null;
		}
		
		RisultatoRicerca sanzione = new RisultatoRicerca();
		if (GenericUtil.isNotNullOrEmpty(sanzioneEntity.getDenomUtResponsabile()))
		{
			sanzione.setAssegnatario(ConvertUtil.getStringByConcat(" ", sanzioneEntity.getDenomUtResponsabile(), "("+sanzioneEntity.getCfResponsabile()+")"));
		}
		sanzione.setDataAnnullamento(ConvertUtil.convertToString(sanzioneEntity.getDtAnnullamento()));
		sanzione.setDataComunicazione(ConvertUtil.convertToString(sanzioneEntity.getDtComunicazione()));
		sanzione.setDataCreazione(ConvertUtil.convertToString(sanzioneEntity.getDtCreazione()));
		sanzione.setDataPagamento(ConvertUtil.convertToString(sanzioneEntity.getDtPagamento()));
		sanzione.setIdSanzione(sanzioneEntity.getIdSanzione());
		sanzione.setImporto(ConvertUtil.convertToString(sanzioneEntity.getValoreSanzione()));
		if (mappaStatoSanzione != null) {
			sanzione.setStato(mappaStatoSanzione.get(sanzioneEntity.getFkStatoSanzione()));
		}
		
		return sanzione;
		
		
	}
	
	public static String getRisultatoBollinoExtended(SigitVRicercaAllegatiDto risultatoBollino) {
		if (risultatoBollino != null) {
			
			String dataControllo = risultatoBollino.getDataControllo() == null ? "" : "DATA CONTROLLO= " + ConvertUtil.convertToString(risultatoBollino.getDataControllo());
			String codiceImpianto = risultatoBollino.getCodiceImpianto() == null ? "" : "CODICE IMPIANTO= " +  ConvertUtil.convertToString(risultatoBollino.getCodiceImpianto());
			
			/*
			String ubicazione = GenericUtil.isNullOrEmpty(risultatoBollino.getIndirizzoUnitaImmob()) ? "" : "UBICAZIONE= " + risultatoBollino.getIndirizzoUnitaImmob();
			
			String risultato = ConvertUtil.getStringByConcat(" ", dataControllo,
					codiceImpianto,
					ubicazione,
					risultatoBollino.getCivicoUnitaImmob(),
					risultatoBollino.getComuneImpianto(),
					risultatoBollino.getSiglaProvImpianto()
					);
			*/
			
			String risultato = ConvertUtil.getStringByConcat(" ", dataControllo,
					codiceImpianto);
			
			return risultato;
		}
		return null;
		
	}
	
	public static String getRisultatoDistributore(SigitTDatoDistribDto risultatoDistributore, SigitTImportDistribRicevutaByIdImportDistribDto distribDto, String descComuneDatoDistributore) {
		if (risultatoDistributore != null) {
			String stato = distribDto.getSdDesStatoDistrib() == null ? "" : "STATO= " + distribDto.getSdDesStatoDistrib();
			String annoRif = risultatoDistributore.getAnnoRif() == null ? "" : "ANNO RIFERIMENTO= " + ConvertUtil.convertToString(risultatoDistributore.getAnnoRif());
			String datiUtente = GenericUtil.isNullOrEmpty(risultatoDistributore.getCognomeDenom()) ? "" : "DATI UTENTE=" + risultatoDistributore.getCognomeDenom();
			
			String risultato =  ConvertUtil.getStringByConcat(" ", stato, annoRif, 
					datiUtente, 
					risultatoDistributore.getDug(),
					risultatoDistributore.getIndirizzo(),
					risultatoDistributore.getCivico(),
					descComuneDatoDistributore);
					
			return risultato;
		}
		return null;
	}
	
	public static String getdatoDistributoreAnnoRiferimentoDatiUtente(SigitTDatoDistribDto risultatoDistributore) {
		if (risultatoDistributore != null) {
			String annoRif = risultatoDistributore.getAnnoRif() == null ? "" : "ANNO RIFERIMENTO= " + ConvertUtil.convertToString(risultatoDistributore.getAnnoRif());
			String datiUtente = GenericUtil.isNullOrEmpty(risultatoDistributore.getCognomeDenom()) ? "" : "DATI UTENTE=" + risultatoDistributore.getCognomeDenom();
			
			String risultato = ConvertUtil.getStringByConcat(" ", annoRif, datiUtente);
					
			return risultato;
		}
		return null;
	}
	
	public static String getRisultatoImpianto(SigitVTotImpiantoCercaUbicazioneImpiantoDto risultatoImpianto) {
		if (risultatoImpianto != null) {
			return MapDto.getIndirizzoCompleto(risultatoImpianto.getComune(), risultatoImpianto.getIndirizzo(), risultatoImpianto.getCivico(), risultatoImpianto.getSiglaProvincia());
		}
		return null;
	}
	
	/**
	 * Carica una lista di {@link CodeDescription} di apparecchiature
	 * 
	 * @param p
	 *            Lista dei apparecchiature
	 * @return Lista di {@link CodeDescription}
	 */
//	public static ArrayList<CodeDescription> mapToApparecchiature(List<SigitTComp4Dto> listaComponenti) {
//		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
//		if (listaComponenti != null) {
//			for (SigitTComp4Dto obj : listaComponenti) {
//				result.add(mapToCodeDescription(obj));
//			}
//		}
//		Collections.sort(result, ComparatorUtil.compare());
//		return result;
//	}
	
	/**
	 * Carica una lista di {@link CodeDescription} di componenti
	 * 
	 * @param p
	 *            Lista dei componenti
	 * @return Lista di {@link CodeDescription}
	 */
	public static ArrayList<CodeDescription> mapToComponenti(List<SigitExtComponenteDto> listaComponenti, boolean isSubentro) {
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (listaComponenti != null) {
			for (SigitExtComponenteDto obj : listaComponenti) {
				
				if (isSubentro)
					result.add(mapToCodeDescriptionSub(obj));
				else
					result.add(mapToCodeDescription(obj));
			}
		}
		Collections.sort(result, ComparatorUtil.compare());
		return result;
	}
	
	public static ArrayList<CodeDescription> mapToComponenti(List<SigitVRicercaCompComponentiByFilterDto> tipoDocumento) {
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (tipoDocumento != null) {
			for (SigitVRicercaCompComponentiByFilterDto obj : tipoDocumento) {
				result.add(mapToCodeDescription(obj));
			}
		}
		Collections.sort(result, ComparatorUtil.compare());
		return result;
	}
	
	/**
	 * Carica una lista di {@link CodeDescription} per gli Stati degli allegati
	 * 
	 * @param p
	 *            Lista degli Stati degli allegati
	 * @return Lista di {@link CodeDescription}
	 */
	public static ArrayList<CodeDescription> mapStatiAllegato(List<SigitDStatoRappDto> statiAllegato) {
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (statiAllegato != null) {
			for (SigitDStatoRappDto obj : statiAllegato) {
				result.add(mapToCodeDescription(obj));
			}
		}
		Collections.sort(result, ComparatorUtil.compare());
		return result;
	}
	
	/**
	 * Carica una lista di {@link CodeDescription} per il tipo di allegati
	 * 
	 * @param p
	 *            Lista per il tipo di allegati
	 * @return Lista di {@link CodeDescription}
	 */
	public static ArrayList<CodeDescription> mapTipoAllegato(List<SigitDTipoDocumentoDto> tipoAllegato) {
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (tipoAllegato != null) {
			for (SigitDTipoDocumentoDto obj : tipoAllegato) {
				result.add(mapToCodeDescription(obj));
			}
		}
		Collections.sort(result, ComparatorUtil.compareCode());
		return result;
	}
	
	public static ArrayList<CodeDescription> mapTipoDocumento(List<SigitDTipoDocumentoByRuoloFunzionaleDto> tipoDocumento) {
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (tipoDocumento != null) {
			for (SigitDTipoDocumentoByRuoloFunzionaleDto obj : tipoDocumento) {
				result.add(mapToCodeDescription(obj));
			}
		}
		Collections.sort(result, ComparatorUtil.compare());
		return result;
	}
	
	public static ArrayList<CodeDescription> mapTipoDocumentoByManutentori(List<SigitDTipoDocumentoByCodiceImpiantoDto> tipoDocumento) {
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (tipoDocumento != null && tipoDocumento.size() > 0) {
			for (SigitDTipoDocumentoByCodiceImpiantoDto obj : tipoDocumento) {
				result.add(mapToCodeDescription(obj));
			}
			Collections.sort(result, ComparatorUtil.compare());
		}
		return result;
	}
	
	private static CodeDescription mapToCodeDescription(SigitDTipoDocumentoByCodiceImpiantoDto obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(ConvertUtil.convertToString(obj.getIdTipoDocumento()));
		cd.setDescription(obj.getDescTipoDocumento());
		return cd;
	}
	
	public static ArrayList<CodeDescription> mapTipoManutenzione(List<SigitDTipoManutenzioneDto> tipoDocumento) {
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (tipoDocumento != null && tipoDocumento.size() > 0) {
			for (SigitDTipoManutenzioneDto obj : tipoDocumento) {
				result.add(mapToCodeDescription(obj));
			}
			Collections.sort(result, ComparatorUtil.compareCode());
		}
		return result;
	}
	
	private static CodeDescription mapToCodeDescription(SigitDTipoManutenzioneDto obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(ConvertUtil.convertToString(obj.getIdTipoManutenzione()));
		cd.setDescription(obj.getDesTipoManutenzione());
		return cd;
	}
	
	private static CodeDescription mapToCodeDescription(SigitDTipoInterventoDto obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(ConvertUtil.convertToString(obj.getIdTipoIntervento()));
		cd.setDescription(obj.getDesTipoIntervento());
		return cd;
	}
	
	private static CodeDescription mapToCodeDescription(SigitDCategoriaDto obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(obj.getIdCategoria());
		String codDes = obj.getIdCategoria() + " - " + obj.getDesCategoria(); 
		cd.setDescription(codDes);
		return cd;
	}
	
	private static CodeDescription mapToCodeDescription(SigitDTipoDocAggDto obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(ConvertUtil.convertToString(obj.getIdTipoDocAgg()));
		cd.setDescription(obj.getDesTipoDocAgg());
		return cd;
	}
	
	private static CodeDescription mapToCodeDescription(SigitDStatoPgDto obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(ConvertUtil.convertToString(obj.getIdStatoPg()));
		cd.setDescription(obj.getDesStatoPg());
		return cd;
	}
	
	
	private static CodeDescription mapToCodeDescription(SigitDRuoloAccredDto obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(ConvertUtil.convertToString(obj.getIdRuoloAccred()));
		cd.setDescription(obj.getDesRuoloAccred());
		return cd;
	}
	
	/*
	private static CodeDescription mapToCodeDescription(SigitDDm37_2008Dto obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(obj.getTipoDm372008());
		cd.setDescription(obj.getDesTipoDm372008());
		return cd;
	}
	*/
	
	private static CodeDescription mapToCodeDescription(SigitTPersonaGiuridicaDto obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(ConvertUtil.convertToString(obj.getIdPersonaGiuridica()));
		cd.setDescription(obj.getDenominazione());
		return cd;
	}
	
	private static CodeDescription mapToCodeDescription(SigitTDettTipo1Dto obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(ConvertUtil.convertToString(obj.getENModuloTermico()));
		cd.setDescription(ConvertUtil.convertToString(obj.getENModuloTermico()));
		return cd;
	}
	
	private static CodeDescription mapToCodeDescription(SigitTDettIspezGtDto obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(obj.getS8aNModuloTermico());
		cd.setDescription(obj.getS8aNModuloTermico());
		return cd;
	}
	
	private static CodeDescription mapToCodeDescription(SigitTDettIspezGfDto obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(obj.getS8aNCircuito());
		cd.setDescription(obj.getS8aNCircuito());
		return cd;
	}
	
	private static CodeDescription mapToCodeDescription(SigitTDettTipo2Dto obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(obj.getENCircuito());
		cd.setDescription(obj.getENCircuito());
		return cd;
	}
	
//	private static CodeDescription mapToCodeDescription(SigitTComp4Dto obj) {
//		CodeDescription cd = new CodeDescription();
//		cd.setCode(ConvertUtil.convertToString(obj.getProgressivo()));
//		cd.setDescription(obj.getIdTipoComponente()+"-"+obj.getProgressivo()+" ("+obj.getModello()+")");
//		return cd;
//	}
	
	private static CodeDescription mapToCodeDescription(SigitExtComponenteDto obj) {
		CodeDescription cd = new CodeDescription();
		//cd.setCode(obj.getFkPersonaGiuridica()+"-"+ConvertUtil.convertToString(obj.getProgressivo()));
		cd.setCode(obj.getIdRComp4Manut()+Constants.INTERVAL_SEP_HASH+obj.getFkPersonaGiuridica()+Constants.INTERVAL_SEP_HASH+ConvertUtil.convertToString(obj.getProgressivo()));
		cd.setDescription(obj.getIdTipoComponente()+"-"+obj.getProgressivo()+" ("+obj.getDesMarca() + " - " +  obj.getModello()+")");
		return cd;
	}
	
	private static CodeDescription mapToCodeDescriptionSub(SigitExtComponenteDto obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(ConvertUtil.convertToString(obj.getProgressivo()));
		cd.setDescription(obj.getIdTipoComponente()+"-"+obj.getProgressivo()+" ("+obj.getDesMarca() + " - " +  obj.getModello()+")");
		return cd;
	}

	private static CodeDescription mapToCodeDescription(SigitVRicercaCompComponentiByFilterDto obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(obj.getRcIdTipoComponente()+Constants.INTERVAL_SEP_HASH+ConvertUtil.convertToString(obj.getRcProgressivo()));
		cd.setDescription(obj.getRcIdTipoComponente()+"-"+obj.getRcProgressivo()+" ("+obj.getMDesMarca() + " - " +  obj.getRcModello()+")");
		return cd;
	}
	
	private static CodeDescription mapToCodeDescription(SigitDCombustibileDto obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(ConvertUtil.convertToString(obj.getIdCombustibile()));
		cd.setDescription(obj.getDesCombustibile());
		return cd;
	}
	
	/*
	private static CodeDescription mapToCodeDescription(SigitTTransazioneBollByElencoNumeriBollinoByPersGiuridicaDto obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(ConvertUtil.convertToString(obj.getNumeroBollino()));
		cd.setDescription(ConvertUtil.convertToString(obj.getNumeroBollino()));
		return cd;
	}
	*/
	
	private static CodeDescription mapToCodeDescription(SigitDTipoDocumentoByRuoloFunzionaleDto obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(ConvertUtil.convertToString(obj.getIdTipoDocumento()));
		cd.setDescription(normalizeString(obj.getDescTipoDocumento()));
		return cd;
	}
	/**
	 * Carica un {@link CodeDescription} con una transazione bollino
	 * 
	 * @param obj
	 *            sigla bollino da caricare
	 * @return {@link CodeDescription} caricato
	 */
	/*
	public static CodeDescription mapToCodeDescription(SigitTTransazioneBollDto obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(normalizeString(obj.getSiglaBollino()));
		cd.setDescription(normalizeString(obj.getSiglaBollino()));
		return cd;
	}
	*/
	
	/**
	 * Restituisce un oggetto di tipo CodeDescription a partire da una Via
	 * 
	 * @param via
	 *            Via del servizio di Toponomastica
	 * @return CodeDescription con idL2 e nome della via
	 */
	public static CodeDescription mapToCodeDescription(Via dto) {
		CodeDescription obj = new CodeDescription();
		obj.setCode(ConvertUtil.convertToString(dto.getIdL2()));
//		StringBuffer indirizzo = new StringBuffer();
//		indirizzo.append(dto.getIndirizzo().getTipoVia());
//		indirizzo.append(" ");
//		indirizzo.append(dto.getIndirizzo().getNomeVia());
		obj.setDescription(costruisciDescVia(dto));
		return obj;
	}
	
	
	/**
	 * Carica un {@link CodeDescription} con una Provincia
	 * 
	 * @param obj
	 *            Provincia da caricare
	 * @return {@link CodeDescription} caricato
	 */
	private static CodeDescription mapToCodeDescription(Provincia obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(normalizeString(obj.getSiglaProvincia()));
		cd.setDescription(normalizeString(obj.getSiglaProvincia()));
		return cd;
	}

	private static CodeDescription mapToIstatDescription(Provincia obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(normalizeString(obj.getIstatProvincia()));
		cd.setDescription(normalizeString(obj.getDescProvincia()));
		return cd;
	}

	private static CodeDescription mapToCodeDescriptionDesc(Provincia obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(normalizeString(obj.getSiglaProvincia()));
		cd.setDescription(normalizeString(obj.getDescProvincia()));
		return cd;
	}
	
	private static CodeDescription mapToCodeDescription(Comune obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(obj.getIstatComune());
		cd.setDescription(normalizeString(obj.getDescComune()));
		return cd;
	}
	
	
	private static CodeDescription mapToCodeDescription(SigitDStatoImpDto obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(ConvertUtil.convertToString(obj.getIdStato()));
		cd.setDescription(normalizeString(obj.getDesStato()));
		return cd;
	}
	
	private static CodeDescription mapToCodeDescription(SigitDStatoRappDto obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(ConvertUtil.convertToString(obj.getIdStatoRapp()));
		cd.setDescription(normalizeString(obj.getDesStatoRapp()));
		return cd;
	}
	
	private static CodeDescription mapToCodeDescription(SigitDTipoDocumentoDto obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(ConvertUtil.convertToString(obj.getIdTipoDocumento()));
		cd.setDescription(normalizeString(obj.getDesTipoDocumento()));
		return cd;
	}
	
	private static CodeDescription mapToCodeDescription(SigitDRuoloDto obj) {
		
		CodeDescription cd = new CodeDescription();
		cd.setCode(ConvertUtil.convertToString(obj.getIdRuolo()));
		cd.setDescription(normalizeString(obj.getDesRuolo()));
		return cd;
	}

	public static ArrayList<CodeDescription> mapToCodeDescription(List<SigitDRuoloDto> objList) {
		
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (objList != null) {
			for (SigitDRuoloDto obj : objList) {
				result.add(mapToCodeDescription(obj));
			}
		}
		Collections.sort(result, ComparatorUtil.compare());
		return result;
	}
	
	/*
	public static ArrayList<CodeDescription> mapToCodeDescriptionDM(List<SigitDDm37_2008Dto> objList) {
		
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (objList != null) {
			for (SigitDDm37_2008Dto obj : objList) {
				result.add(mapToCodeDescription(obj));
			}
		}
		Collections.sort(result, ComparatorUtil.compare());
		return result;
	}
	*/
	
	public static ArrayList<CodeDescription> mapToCodeDescriptionRuoloAcc(List<SigitDRuoloAccredDto> objList) {
		
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (objList != null) {
			for (SigitDRuoloAccredDto obj : objList) {
				result.add(mapToCodeDescription(obj));
			}
		}
		Collections.sort(result, ComparatorUtil.compare());
		return result;
	}

	/**
	 * Carica una lista di {@link CodeDescription} per gli Stati Impianto
	 * 
	 * @param p
	 *            Lista degli Stato Impianto
	 * @return Lista di {@link CodeDescription}
	 */
	/*
	public static ArrayList<CodeDescription> mapMetodiPagamento(AppGateway[] metodiPag) {
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (metodiPag != null) {
			for (AppGateway obj : metodiPag) {
				result.add(mapToCodeDescription(obj));
			}
		}
		Collections.sort(result, ComparatorUtil.compare());
		return result;
	}
	
	
	public static TransazioneApp convertToTransazioneApp (it.csi.mdp.core.business.dto.Transazione o) {
		TransazioneApp ret = null;
		if (o != null) {
			ret = new TransazioneApp();
			ret = (TransazioneApp) getToSet(it.csi.mdp.core.business.dto.Transazione.class, TransazioneApp.class, o, ret);
		}
		return ret;
	}
	
	public static it.csi.mdp.core.business.dto.Transazione convertToTransazione (TransazioneApp o) {
		it.csi.mdp.core.business.dto.Transazione ret = null;
		if (o != null) {
			ret = new it.csi.mdp.core.business.dto.Transazione();
			ret = (it.csi.mdp.core.business.dto.Transazione) getToSet(TransazioneApp.class, it.csi.mdp.core.business.dto.Transazione.class, o, ret);
		}
		return ret;
	}
	*/
	/**
	 * Restituisce un oggetto di tipo CodeDescription a partire da una Via
	 * 
	 * @param via
	 *            Via del servizio di Toponomastica
	 * @return CodeDescription con idL2 e nome della via
	 */
	/*
	public static CodeDescription mapToCodeDescription(AppGateway dto) {
		CodeDescription obj = new CodeDescription();
		
		String cod = dto.getGatewayId()
				+ Constants.DIVIDE_IDS
				+ dto.getPaymentmodeId();
		String nome = dto.getGatewayDescription()
				+ Constants.DIVIDE_IDS
				+ dto.getPaymentmodeDescription();
		obj.setCode(cod);
		obj.setDescription(nome);
		
		return obj;
	}
	*/
	
	public static PersonaFisica mapToPersonaFisica(SigitTPersonaFisicaDto obj) {
		PersonaFisica pf = new PersonaFisica();
		pf.setIdPersonaFisica(ConvertUtil.convertToInteger(obj.getIdPersonaFisica()));
		pf.setCodiceFiscale(obj.getCodiceFiscale());
		pf.setCognome(obj.getCognome());
		pf.setNome(obj.getNome());
		pf.setDenominazione(costruisciCognomeNome(obj.getCognome(), obj.getNome()));

		pf.setFlgAccreditato(Constants.FLAG_ACCREDITATO_A.equalsIgnoreCase(obj.getFlgAccreditato()));
		
		pf.setFlgIndirizzoEst(ConvertUtil.getNumberAsBoolean(obj.getFlgIndirizzoEstero()));

		if (pf.getFlgIndirizzoEst())
		{
			pf.setEstStato(obj.getStatoEstero());
			pf.setEstCitta(obj.getCittaEstero());
			pf.setEstIndirizzo(obj.getIndirizzoEstero());
			pf.setEstCap(obj.getCapEstero());
		}
		else
		{
			pf.setIdProvinciaSelez(obj.getSiglaProv());
			pf.setIdComuneSelez(obj.getIstatComune());
			pf.setProvincia(obj.getProvincia());
			pf.setComune(obj.getComune());
			pf.setCap(obj.getCap());
			pf.setIdIndirizzoSel(ConvertUtil.convertToString(obj.getFkL2()));
			pf.setIndirizzo(obj.getIndirizzoSitad());
			pf.setIndirizzoNonTrovato(obj.getIndirizzoNonTrovato());
		}
		
		// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
		pf.setCivico(obj.getCivico());
		pf.setEmail(obj.getEmail());
		return pf;
	}
	
	public static SigitTPersonaFisicaDto mapToSigitTPersonaFisicaDto(PersonaFisica pf) {
		SigitTPersonaFisicaDto obj = new SigitTPersonaFisicaDto();
		obj.setIdPersonaFisica(ConvertUtil.convertToBigDecimal(pf.getIdPersonaFisica()));
		obj.setCodiceFiscale(pf.getCodiceFiscale());
		obj.setCognome(pf.getCognome());
		obj.setNome(pf.getNome());
		obj.setSiglaProv(pf.getIdProvinciaSelez());
		obj.setIstatComune(pf.getIdComuneSelez());
		obj.setCap(pf.getCap());
		obj.setCivico(pf.getCivico());
		obj.setComune(pf.getComune());
		obj.setEmail(pf.getEmail());
		obj.setProvincia(pf.getProvincia());
		obj.setIndirizzoNonTrovato(GenericUtil.getStringUpperSql(pf.getIndirizzoNonTrovato()));
		obj.setIndirizzoSitad(pf.getIndirizzo());
		obj.setFkL2(ConvertUtil.convertToBigDecimal(pf.getIdIndirizzoSel()));

		//TODO controllo flagAccreditato: dobbiamo impostare il valore?
//		obj.setFlgAccreditato(pf.getFlgAccreditato() ? Constants.FLAG_ACCREDITATO_A : "");
		
		return obj;
	}
	
	public static PersonaGiuridica mapToPersonaGiuridica(SigitTPersonaGiuridicaDto dto) {
		PersonaGiuridica obj = new PersonaGiuridica();
		obj.setIdPersonaGiuridica(ConvertUtil.convertToInteger(dto.getIdPersonaGiuridica()));
		obj.setCodiceFiscale(dto.getCodiceFiscale());
		obj.setDenominazione(dto.getDenominazione());
		obj.setSiglaRea(dto.getSiglaRea());
		obj.setNumeroRea(ConvertUtil.convertToUDTPositiveInteger(dto.getNumeroRea()));
		obj.setCodiceRea(getCodiceRea(obj.getSiglaRea(), ConvertUtil.convertToInteger(obj.getNumeroRea())));
		
//		obj.setFlgInstallatore(ConvertUtil.convertToBooleanAllways(dto.getFlgInstallatore()));
//		obj.setFlgManutentore(ConvertUtil.convertToBooleanAllways(dto.getFlgManutentore()));
		obj.setFlgAmministratore(ConvertUtil.convertToBooleanAllways(dto.getFlgAmministratore()));
		obj.setFlgTerzoResponsabile(ConvertUtil.convertToBooleanAllways(dto.getFlgTerzoResponsabile()));
		obj.setFlgDistributore(ConvertUtil.convertToBooleanAllways(dto.getFlgDistributore()));
		obj.setFlgCat(ConvertUtil.convertToBooleanAllways(dto.getFlgCat()));
		obj.setFlgDm37LetteraC(ConvertUtil.convertToBooleanAllways(dto.getFlgDm37Letterac()));
		obj.setFlgDm37LetteraD(ConvertUtil.convertToBooleanAllways(dto.getFlgDm37Letterad()));
		obj.setFlgDm37LetteraE(ConvertUtil.convertToBooleanAllways(dto.getFlgDm37Letterae()));
		obj.setFlgFGas(ConvertUtil.convertToBooleanAllways(dto.getFlgFgas()));
		obj.setFlgConduttore(ConvertUtil.convertToBooleanAllways(dto.getFlgConduttore()));
		obj.setFlgSoggIncaricato(ConvertUtil.convertToBooleanAllways(dto.getFlgSoggIncaricato()));
		obj.setFlgAltraImpresa(obj.getFlgAmministratore() || obj.getFlgSoggIncaricato());
		obj.setDelegaSoggIncaricato(dto.getDelegaSoggIncaricato());
		obj.setDescFlgAmministratore(obj.getFlgAmministratore() ? Constants.SI : Constants.NO);
//		obj.setDescFlgInstallatore(obj.getFlgInstallatore() ? Constants.SI : Constants.NO);
//		obj.setDescFlgManutentore(obj.getFlgManutentore() ? Constants.SI : Constants.NO);
		obj.setDescFlgTerzoResponsabile(obj.getFlgTerzoResponsabile() ? Constants.SI : Constants.NO);
		obj.setDescFlgDistributore(obj.getFlgDistributore() ? Constants.SI : Constants.NO);
		obj.setDescFlgCat(obj.getFlgCat() ? Constants.SI : Constants.NO);
		obj.setDescFlgDm37LetteraC(obj.getFlgDm37LetteraC() ? Constants.SI : Constants.NO);
		obj.setDescFlgDm37LetteraD(obj.getFlgDm37LetteraD() ? Constants.SI : Constants.NO);
		obj.setDescFlgDm37LetteraE(obj.getFlgDm37LetteraE() ? Constants.SI : Constants.NO);
		obj.setDescFlgFGas(obj.getFlgFGas() ? Constants.SI : Constants.NO);
		obj.setDescFlgConduttore(obj.getFlgConduttore() ? Constants.SI : Constants.NO);
		obj.setDescFlgSoggIncaricato(obj.getFlgSoggIncaricato() ? Constants.SI : Constants.NO);
		obj.setDescFlgAltraImpresa(obj.getFlgAltraImpresa() ? Constants.SI : Constants.NO);
		obj.setFlgIndirizzoEst(ConvertUtil.getNumberAsBoolean(dto.getFlgIndirizzoEstero()));
		obj.setDtCreazioneToken(ConvertUtil.convertToString(dto.getDtCreazioneToken()));
		obj.setDtScadenzaToken(ConvertUtil.convertToString(dto.getDtScadenzaToken()));
		obj.setToken(dto.getToken());
		
		if (obj.getFlgIndirizzoEst())
		{
			obj.setEstStato(dto.getStatoEstero());
			obj.setEstCitta(dto.getCittaEstero());
			obj.setEstIndirizzo(dto.getIndirizzoEstero());
			obj.setEstCap(dto.getCapEstero());
		}
		else
		{
			obj.setIdProvinciaSelez(dto.getSiglaProv());
			obj.setProvincia(dto.getProvincia());
			obj.setIdComuneSelez(dto.getIstatComune());
			obj.setComune(dto.getComune());
			obj.setIdIndirizzoSel(ConvertUtil.convertToString(dto.getFkL2()));
			obj.setIndirizzo(dto.getIndirizzoSitad());
			obj.setIndirizzoNonTrovato(dto.getIndirizzoNonTrovato());
			obj.setCap(dto.getCap());
		}

		// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
		obj.setCivico(dto.getCivico());
		

		obj.setDataCessazione(ConvertUtil.convertToString(dto.getDataCessazione()));
		obj.setDataInizioAttivita(ConvertUtil.convertToString(dto.getDataInizioAttivita()));
		obj.setEmail(dto.getEmail());
		
		obj.setIdStatoPg(dto.getFkStatoPg());
		obj.setIdStatoPgOld(dto.getFkStatoPg());
		return obj;
	}
	
	
	
	public static PersonaGiuridica mapToPersonaGiuridica(SigitTPersonaGiuridicaByParamDto dto) {
		PersonaGiuridica obj = new PersonaGiuridica();
		obj.setIdPersonaGiuridica(ConvertUtil.convertToInteger(dto.getPgIdPersonaGiuridica()));
		obj.setCodiceFiscale(dto.getPgCodiceFiscale());
		obj.setDenominazione(dto.getPgDenominazione());
		obj.setSiglaRea(dto.getPgSiglaRea());
		obj.setNumeroRea(ConvertUtil.convertToUDTPositiveInteger(dto.getPgNumeroRea()));
		obj.setCodiceRea(getCodiceRea(obj.getSiglaRea(), ConvertUtil.convertToInteger(obj.getNumeroRea())));
		
//		obj.setFlgInstallatore(ConvertUtil.convertToBooleanAllways(dto.getPgFlgInstallatore()));
//		obj.setFlgManutentore(ConvertUtil.convertToBooleanAllways(dto.getPgFlgManutentore()));
		obj.setFlgAmministratore(ConvertUtil.convertToBooleanAllways(dto.getPgFlgAmministratore()));
		obj.setFlgTerzoResponsabile(ConvertUtil.convertToBooleanAllways(dto.getPgFlgTerzoResponsabile()));
		obj.setFlgDistributore(ConvertUtil.convertToBooleanAllways(dto.getPgFlgDistributore()));
		obj.setFlgCat(ConvertUtil.convertToBooleanAllways(dto.getPgFlgCat()));
		obj.setFlgDm37LetteraC(ConvertUtil.convertToBooleanAllways(dto.getPgFlgDm37Letterac()));
		obj.setFlgSoggIncaricato(ConvertUtil.convertToBooleanAllways(dto.getPgFlgSoggIncaricato()));
		obj.setFlgAltraImpresa(obj.getFlgAmministratore() || obj.getFlgSoggIncaricato());

		obj.setDescFlgAmministratore(obj.getFlgAmministratore() ? Constants.SI : Constants.NO);
//		obj.setDescFlgInstallatore(obj.getFlgInstallatore() ? Constants.SI : Constants.NO);
//		obj.setDescFlgManutentore(obj.getFlgManutentore() ? Constants.SI : Constants.NO);
		obj.setDescFlgTerzoResponsabile(obj.getFlgTerzoResponsabile() ? Constants.SI : Constants.NO);
		obj.setDescFlgDistributore(obj.getFlgDistributore() ? Constants.SI : Constants.NO);
		obj.setDescFlgCat(obj.getFlgCat() ? Constants.SI : Constants.NO);
		obj.setDescFlgDm37LetteraC(obj.getFlgDm37LetteraC() ? Constants.SI : Constants.NO);
		obj.setDescFlgSoggIncaricato(obj.getFlgSoggIncaricato() ? Constants.SI : Constants.NO);
		obj.setDescFlgAltraImpresa(obj.getFlgAltraImpresa() ? Constants.SI : Constants.NO);
		
		obj.setDescStatoPg(dto.getDsDesStatoPg());
		return obj;
	}
	
	public static SigitTPersonaGiuridicaDto mapToSigitTPersonaGiuridicaDto(PersonaGiuridica dto, SigitTPersonaGiuridicaDto obj, String cfUtenteMod) {
		
		obj.setCodiceFiscale(dto.getCodiceFiscale());
		obj.setDenominazione(dto.getDenominazione());
		obj.setSiglaRea(dto.getSiglaRea());
		obj.setNumeroRea(ConvertUtil.convertToBigDecimal(dto.getNumeroRea()));
		
		obj.setFkStatoPg(dto.getIdStatoPg());
		
		obj.setDataInizioAttivita(ConvertUtil.convertToSqlDate(dto.getDataInizioAttivita()));

		// Se e' cambiato lo stato in Cessata e prima era in un altro stato
		if (dto.getIdStatoPg() != null && dto.getIdStatoPgOld().intValue() != Constants.ID_STATO_IMPRESA_CESSATA && dto.getIdStatoPg().intValue() == Constants.ID_STATO_IMPRESA_CESSATA)
		{
			obj.setDataCessazione(ConvertUtil.convertToSqlDate(dto.getDataVariazione()));	
		}
//		else
//		{
//			obj.setDataCessazione(null);
//		}
		

//		if (GenericUtil.isNotNullOrEmpty(dto.getDataVariazione()))
//		{
//			obj.setDataCessazione(ConvertUtil.convertToSqlDate(dto.getDataVariazione()));
//		}
		

		obj.setFlgIndirizzoEstero(ConvertUtil.convertToBigDecimal(dto.getFlgIndirizzoEst()));

	
		if (dto.getFlgIndirizzoEst())
		{
			obj.setStatoEstero(dto.getEstStato());
			obj.setCittaEstero(dto.getEstCitta());
			obj.setIndirizzoEstero(dto.getEstIndirizzo());
			obj.setCapEstero(dto.getEstCap());
			
			obj.setSiglaProv(null);
			obj.setIstatComune(null);
			obj.setProvincia(null);
			obj.setComune(null);
			obj.setFkL2(null);
			obj.setIndirizzoNonTrovato(null);
			obj.setIndirizzoSitad(null);
			obj.setCap(null);
		}
		else
		{
			obj.setSiglaProv(dto.getIdProvinciaSelez());
			obj.setProvincia(dto.getProvincia());

			obj.setIstatComune(dto.getIdComuneSelez());
			obj.setComune(dto.getComune());
			
			
			if (GenericUtil.isNotNullOrEmpty(dto.getIdIndirizzoSel())) {
				//PATCH PROBLEMA TOPE
				if(!dto.getIdIndirizzoSel().equals(Constants.DATO_NON_DISPONIBILE_S)){
					obj.setFkL2(ConvertUtil.convertToBigDecimal(dto.getIdIndirizzoSel()));
					obj.setIndirizzoNonTrovato(null);
					obj.setIndirizzoSitad(dto.getDescIndirizzoSel());
				}else{
					obj.setFkL2(null);
					obj.setIndirizzoNonTrovato(GenericUtil.getStringUpperSql(dto.getIndirizzoNonTrovato()));
					obj.setIndirizzoSitad(null);
				}
			}else{
				obj.setFkL2(null);
				obj.setIndirizzoNonTrovato(GenericUtil.getStringUpperSql(dto.getIndirizzoNonTrovato()));
				obj.setIndirizzoSitad(null);
			}
			
//			obj.setIndirizzoSitad(dto.getIndirizzo());
//			obj.setIndirizzoNonTrovato(dto.getIndirizzoNonTrovato());
			
			
			
			obj.setCap(dto.getCap());
			
			obj.setStatoEstero(null);
			obj.setCittaEstero(null);
			obj.setIndirizzoEstero(null);
			obj.setCapEstero(null);
		}

		// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
		obj.setCivico(dto.getCivico());

//		obj.setFlgInstallatore(ConvertUtil.convertToBigDecimal(dto.getFlgInstallatore()));
//		obj.setFlgManutentore(ConvertUtil.convertToBigDecimal(dto.getFlgManutentore()));
		obj.setFlgAmministratore(ConvertUtil.convertToBigDecimal(dto.getFlgAmministratore()));
		obj.setFlgTerzoResponsabile(ConvertUtil.convertToBigDecimal(dto.getFlgTerzoResponsabile()));
		obj.setFlgDistributore(ConvertUtil.convertToBigDecimal(dto.getFlgDistributore()));
		obj.setFlgCat(ConvertUtil.convertToBigDecimal(dto.getFlgCat()));
		obj.setFlgDm37Letterac(ConvertUtil.convertToBigDecimal(dto.getFlgDm37LetteraC()));
		obj.setFlgDm37Letterad(ConvertUtil.convertToBigDecimal(dto.getFlgDm37LetteraD()));
		obj.setFlgDm37Letterae(ConvertUtil.convertToBigDecimal(dto.getFlgDm37LetteraE()));
		obj.setFlgFgas(ConvertUtil.convertToBigDecimal(dto.getFlgFGas()));
		obj.setFlgConduttore(ConvertUtil.convertToBigDecimal(dto.getFlgConduttore()));
		obj.setFlgSoggIncaricato(ConvertUtil.convertToBigDecimal(dto.getFlgSoggIncaricato()));
		obj.setDelegaSoggIncaricato(dto.getDelegaSoggIncaricato());
		obj.setEmail(dto.getEmail());
		
		obj.setUtenteUltMod(cfUtenteMod);
		obj.setDataUltMod(DateUtil.getSqlDataCorrente());
		
		
		return obj;
	}
	
	public static Responsabile mapToResponsabile(SigitVPfPgDto dto) {
		Responsabile obj = new Responsabile();
		
		obj.setIdResponsabile(ConvertUtil.convertToInteger(dto.getIdPersona()));
		obj.setCodiceFiscale(dto.getCodiceFiscale());
		obj.setCognome(dto.getDenominazione());
		obj.setNome(dto.getNome());
		obj.setDenomCompleta(costruisciCognomeNome(dto.getDenominazione(), dto.getNome()));

		obj.setIdSiglaRea(dto.getSiglaRea());
		obj.setNumeroRea(ConvertUtil.convertToUDTPositiveInteger(dto.getNumeroRea()));
		
		if (GenericUtil.isNotNullOrEmpty(dto.getSiglaRea()))
			obj.setCodiceRea(getCodiceRea(dto.getSiglaRea(), ConvertUtil.convertToInteger(dto.getNumeroRea())));
		
		obj.setDataInizioResp(ConvertUtil.convertToString(dto.getDataInizioAttivita()));
		obj.setDataFineResp(ConvertUtil.convertToString(dto.getDataCessazione()));
		
		obj.setFlgIndirizzoEst(ConvertUtil.getNumberAsBoolean(dto.getFlgIndirizzoEstero()));

		if (obj.getFlgIndirizzoEst()) {
			obj.setEstStato(dto.getStatoEstero());
			obj.setEstCitta(dto.getCittaEstero());
			obj.setEstIndirizzo(dto.getIndirizzoEstero());
			obj.setEstCap(dto.getCapEstero());
			obj.setDsIndirizzoCompleto(getIndirizzo(dto.getIndirizzoEstero(), dto.getCivico()));
			obj.setDescComuneProv(getComuneProvincia(dto.getCittaEstero(), dto.getStatoEstero()));
		}
		else {
			obj.setIdProvincia(dto.getSiglaProv());
			obj.setIdComune(dto.getIstatComune());
			
			if (dto.getFkL2() != null && ConvertUtil.convertToInteger(dto.getFkL2()) != Constants.ID_INDIRIZZO_VUOTO) {
				obj.setIdIndirizzo(ConvertUtil.convertToString(dto.getFkL2()));
				obj.setIndirizzoSitad(dto.getIndirizzoSitad());
				obj.setIndirizzo(dto.getIndirizzoSitad());
				obj.setIndirizzoNoStrad(null);
			} else {
				obj.setIdIndirizzo(null);
				obj.setIndirizzoNoStrad(dto.getIndirizzoNonTrovato());
				obj.setIndirizzo(dto.getIndirizzoNonTrovato());

			}			
			obj.setDsIndirizzoCompleto(getIndirizzo(dto.getIndirizzoSitad(), dto.getIndirizzoNonTrovato(), dto.getCivico()));
			obj.setDescComuneProv(getComuneProvincia(dto.getComune(), dto.getSiglaProv()));
			obj.setCap(dto.getCap());
		}

		// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
		obj.setCivico(dto.getCivico());
		
		
		obj.setEmail(dto.getEmail());

		
		obj.setFlgImpresa(dto.getPfPg().equalsIgnoreCase(Constants.LABEL_PG));
		
		return obj;
	}
	
	public static Responsabile mapToResponsabile(SigitTPersonaGiuridicaDto dto) {
		Responsabile obj = new Responsabile();
		
		obj.setIdResponsabile(ConvertUtil.convertToInteger(dto.getIdPersonaGiuridica()));
		obj.setCodiceFiscale(dto.getCodiceFiscale());
		obj.setCognome(dto.getDenominazione());
		
		
		obj.setDataInizioResp(ConvertUtil.convertToString(dto.getDataInizioAttivita()));
		obj.setDataFineResp(ConvertUtil.convertToString(dto.getDataCessazione()));
		
		obj.setIdProvincia(dto.getSiglaProv());
		obj.setIdComune(dto.getIstatComune());
		
		if (dto.getFkL2() != null && ConvertUtil.convertToInteger(dto.getFkL2()) != Constants.ID_INDIRIZZO_VUOTO) {
			obj.setIdIndirizzo(ConvertUtil.convertToString(dto.getFkL2()));
			obj.setIndirizzoSitad(dto.getIndirizzoSitad());
			obj.setIndirizzo(dto.getIndirizzoSitad());
			obj.setIndirizzoNoStrad(null);
		} else {
			obj.setIdIndirizzo(null);
			obj.setIndirizzoNoStrad(dto.getIndirizzoNonTrovato());
			obj.setIndirizzo(dto.getIndirizzoNonTrovato());

		}
		obj.setCivico(dto.getCivico());

		
		obj.setDsIndirizzoCompleto(getIndirizzo(dto.getIndirizzoSitad(), dto.getIndirizzoNonTrovato(), dto.getCivico()));
		obj.setDescComuneProv(getComuneProvincia(dto.getComune(), dto.getSiglaProv()));
		
		obj.setCap(dto.getCap());
		obj.setEmail(dto.getEmail());
		
		obj.setFlgImpresa(true);

		return obj;
	}
	
	public static Responsabile mapToResponsabile(SigitTPersonaGiuridicaDto dto, RisultatoRicResponsabile responsabileSelez, List<SigitRPfPgDelegaDto> deleghePG) {
		Responsabile obj = new Responsabile();

		obj.setIdImpResp(responsabileSelez.getIdImpResp());
		obj.setIdResponsabile(ConvertUtil.convertToInteger(dto.getIdPersonaGiuridica()));
		
		obj.setIdTitolo(ConvertUtil.convertToString(responsabileSelez.getIdTitolo()));
		
		obj.setIdSiglaRea(dto.getSiglaRea());
		obj.setNumeroRea(ConvertUtil.convertToUDTPositiveInteger(dto.getNumeroRea()));
		obj.setCodiceFiscale(dto.getCodiceFiscale());
		obj.setCognome(dto.getDenominazione());
		
		obj.setFlgIndirizzoEst(ConvertUtil.getNumberAsBoolean(dto.getFlgIndirizzoEstero()));

		if (obj.getFlgIndirizzoEst())
		{
			obj.setEstStato(dto.getStatoEstero());
			obj.setEstCitta(dto.getCittaEstero());
			obj.setEstIndirizzo(dto.getIndirizzoEstero());
			obj.setEstCap(dto.getCapEstero());
		}
		else
		{
			obj.setIdProvincia(dto.getSiglaProv());
			obj.setIdComune(dto.getIstatComune());
			
			if (dto.getFkL2() != null && ConvertUtil.convertToInteger(dto.getFkL2()) != Constants.ID_INDIRIZZO_VUOTO) {
				obj.setIdIndirizzo(ConvertUtil.convertToString(dto.getFkL2()));
				obj.setIndirizzoSitad(dto.getIndirizzoSitad());
				obj.setIndirizzo(dto.getIndirizzoSitad());
				obj.setIndirizzoNoStrad(null);
			} else {
				obj.setIdIndirizzo(null);
				obj.setIndirizzoNoStrad(dto.getIndirizzoNonTrovato());
				obj.setIndirizzo(dto.getIndirizzoNonTrovato());

			}

			obj.setCap(dto.getCap());
		}
		
		// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
		obj.setCivico(dto.getCivico());
		
		obj.setFlgAccreditato(deleghePG != null && deleghePG.size() > 0);
		
		obj.setEmail(dto.getEmail());
		
		obj.setDataInizioResp(responsabileSelez.getDataRespDal());
		obj.setDataFineResp(responsabileSelez.getDataRespAl());
		
		obj.setFlgImpresa(true);
		obj.setFlgResponsabile(true);

		return obj;
	}

	public static RisultatoRicResponsabile mapToRisultatoRicResponsabile(SigitExtRespImpDto dto) {
		RisultatoRicResponsabile pg = new RisultatoRicResponsabile();

		pg.setIdImpResp(ConvertUtil.convertToInteger(dto.getIdImpRuoloPfpg()));
		
		if (GenericUtil.isNotNullOrEmpty(dto.getFkPersonaGiuridica()))
		{
			pg.setDenominazione(dto.getDenominazione());
			pg.setIsImpresa(Constants.LABEL_SI);
			pg.setIdPersona(ConvertUtil.convertToInteger(dto.getFkPersonaGiuridica()));
		}
		else
		{
			pg.setDenominazione(costruisciCognomeNome(dto.getCognome(), dto.getNome()));
			pg.setIsImpresa(Constants.LABEL_NO);
			pg.setIdPersona(ConvertUtil.convertToInteger(dto.getFkPersonaFisica()));
		}
		
		pg.setIdTitolo(ConvertUtil.convertToInteger(dto.getFkRuolo()));
		pg.setDescTitolo(dto.getDesRuolo());
		
		pg.setDataRespDal(ConvertUtil.convertToString(dto.getDataInizio()));
		pg.setDataRespAl(ConvertUtil.convertToString(dto.getDataFine()));

		return pg;
	}
	
	public static RisultatoRicManutentore mapToRisultatoRicManutentore(SigitRImpRuoloPfpgManutentoriByCodiceImpiantoDto dto) {
		RisultatoRicManutentore obj = new RisultatoRicManutentore();
		
		obj.setCodiceFiscale(dto.getPgCodiceFiscale());
		obj.setDenomDitta(dto.getPgDenominazione());
		
		obj.setCodiceRea(getCodiceRea(dto.getPgSiglaRea(), ConvertUtil.convertToInteger(dto.getPgNumeroRea())));
		obj.setTipoAllegato(dto.getTdDesTipoDocumento());
		
		return obj;
	}
	
	public static RisultatoRicManutentore mapToRisultatoRicManutentoreNew(SigitRComp4ManutManutentoriByCodiceImpiantoDto dto) {
		RisultatoRicManutentore obj = new RisultatoRicManutentore();
		
		obj.setCodiceFiscale(dto.getPgCodiceFiscale());
		obj.setDenomDitta(dto.getPgDenominazione());
		
		obj.setCodiceRea(getCodiceRea(dto.getPgSiglaRea(), ConvertUtil.convertToInteger(dto.getPgNumeroRea())));
		obj.setTipoAllegato(dto.getTdDesTipoDocumento());
		
		//obj.setComponente(dto.getComponente());
		
		return obj;
	}

	/*
	public static RisultatoRicTransazione mapToRisultatoRicTransazione(SigitTTransazioneImpByTransazioneFilterDto dto) {
		
		RisultatoRicTransazione obj = new RisultatoRicTransazione();
		obj.setIdTransazione(ConvertUtil.convertToInteger(dto.getTranIdTransazione()));
		obj.setCodiceRea(getCodiceRea(dto.getPgSiglaRea(), ConvertUtil.convertToInteger(dto.getPgNumeroRea())));
		
		obj.setCodiceFiscale(dto.getPgCodiceFiscale());
		obj.setDenominazione(dto.getPgDenominazione());
		obj.setCodiceFiscaleOp(dto.getTranCfUtente());
		
		
		obj.setDataTransazione(ConvertUtil.convertToString(dto.getTranDataTransazione()));
		
		int codiciDa = ConvertUtil.convertToInteger(dto.getTranImpiantoDa());
		int codiciA = ConvertUtil.convertToInteger(dto.getTranImpiantoA());
		
		int codiciTot = codiciA-codiciDa+1;
		
		obj.setTotCodici(ConvertUtil.convertToString(codiciTot));
		
		obj.setTotCodiciLiberi(ConvertUtil.convertToString(codiciTot-dto.getCountUsati()));
		//obj.setTotCodiciLiberi(ConvertUtil.convertToString(codiciTot-numCodImpUtilz));
		
		obj.setIntervalloCodici(costruisciIntervalloCodici(codiciDa, codiciA));
		
		return obj;
	}
	*/
	
	/*
	public static RisultatoRicTransazione mapToRisultatoRicTransazione(SigitTTransazioneBollByTransazioneFilterDto dto) {
		
		RisultatoRicTransazione obj = new RisultatoRicTransazione();
		obj.setIdTransazione(ConvertUtil.convertToInteger(dto.getTranIdTransazioneBoll()));
		obj.setCodiceRea(getCodiceRea(dto.getPgSiglaRea(), ConvertUtil.convertToInteger(dto.getPgNumeroRea())));
		
		obj.setCodiceFiscale(dto.getPgCodiceFiscale());
		obj.setDenominazione(dto.getPgDenominazione());
		obj.setCodiceFiscaleOp(dto.getTranCfUtente());
		
		
		obj.setDataTransazione(ConvertUtil.convertToString(dto.getTranDataTransazione()));
		
		int codiciDa = ConvertUtil.convertToInteger(dto.getTranBollinoDa());
		int codiciA = ConvertUtil.convertToInteger(dto.getTranBollinoA());
		
		int codiciTot = codiciA-codiciDa+1;
		
		obj.setTotCodici(ConvertUtil.convertToString(codiciTot));
		
		obj.setIntervalloCodici(costruisciIntervalloCodici(codiciDa, codiciA));
		
		obj.setSiglaBollino(dto.getTranSiglaBollino());
		
		return obj;
	}
	*/

	public static DettaglioTerzoResponsabile mapToDettaglio3Responsabile(SigitExtContrattoImpDto dto,  boolean isValSuper, SigitTUnitaImmobiliareDto unitaImmobiliare) {
		
		DettaglioTerzoResponsabile obj = new DettaglioTerzoResponsabile();
		
		obj.setIdPersonaGiuridica(ConvertUtil.convertToInteger(dto.getFkPg3Resp()));
		obj.setIdContratto(ConvertUtil.convertToInteger(dto.getIdContratto()));
		
		obj.setCodImpianto(ConvertUtil.convertToString(dto.getCodiceImpianto()));
		obj.setDenominazioneImp(dto.getTerzoRespDenominazione() + " - " +dto.getCodiceFiscale3Resp() + " - " + getCodiceRea(dto.getTerzoRespSiglaRea(), dto.getTerzoRespNumeroRea()));
		
		obj.setResponsabile(getGeneralita(dto.getRespDenominazione(), dto.getRespNome()) + " - " + dto.getRespCodiceFiscale());

		obj.setDataInizioContratto(ConvertUtil.convertToString(dto.getDataInizioContratto()));
		obj.setDataFineContratto(ConvertUtil.convertToString(dto.getDataFineContratto()));
		
		obj.setFlgTacitoRinnovo(ConvertUtil.convertToBooleanAllways(dto.getFlagTacitoRinnovo()));
		obj.setDescTacitoRinnovo(ConvertUtil.convertToBooleanAllways(dto.getFlagTacitoRinnovo())?Constants.LABEL_SI:Constants.LABEL_NO);
		
		obj.setDataRevoca(ConvertUtil.convertToString(dto.getDataCessazione()));
		
		if (ConvertUtil.convertToInteger(dto.getIdTipoCessazione()) != Constants.DATO_NON_DISPONIBILE)
		{
			obj.setIdTipoCessazione(ConvertUtil.convertToInteger(dto.getIdTipoCessazione()));
			obj.setDesTipoCessazione(dto.getDesTipoCessazione());
			obj.setMotivoCessazione(dto.getMotivoCessazione());
		}

		obj.setNote(dto.getNote());
		
		//obj.setUbicazione(ConvertUtil.getStringByConcat(" ", unitaImmobiliare.getIndirizzoSitad(), unitaImmobiliare.getCivico(), dto.getDenomComuneImpianto(), dto.getDenomProvImpianto()));
		obj.setUbicazione(getIndirizzoCompleto(dto.getDenomComuneImpianto(), unitaImmobiliare.getIndirizzoSitad(), unitaImmobiliare.getIndirizzoNonTrovato(), unitaImmobiliare.getCivico(), dto.getDenomProvImpianto()));
		obj.setCodiceFiscale(dto.getCodiceFiscale3Resp());
		obj.setCodiceRea(ConvertUtil.getStringByConcat(" ", dto.getTerzoRespSiglaRea(), ConvertUtil.convertToString(dto.getTerzoRespNumeroRea())));
		
		if (isValSuper)
		{
			obj.setDataCaricContratto(ConvertUtil.convertToString(dto.getDataCaricamento()));
			obj.setDataCaricRevoca(ConvertUtil.convertToString(dto.getDataInserimentoCessazione()));
		}
		else
		{
			obj.setDataCaricContratto(Constants.LABEL_ND);
			obj.setDataCaricRevoca(Constants.LABEL_ND);
		}
		
		return obj;
	}
	
	/*
	public static RisultatoRicCodImpiantoLib mapToRisultatoRicCodImpiantoLib(RisultatoRicTransazione codImp, SigitTCodiceImpDto dto) {
		
		RisultatoRicCodImpiantoLib obj = new RisultatoRicCodImpiantoLib();
		obj.setCodiceRea(codImp.getCodiceRea());
		
		obj.setCodiceFiscale(codImp.getCodiceFiscale());
		obj.setDenominazione(codImp.getDenominazione());
		
		obj.setCodiceImpianto(ConvertUtil.convertToString(dto.getCodiceImpianto()));
		
		//String flgPregresso = "";
		
		if (ConvertUtil.convertToInteger(dto.getFlgPregresso()).intValue() == Constants.SI_1)
		{
			obj.setFlgPotLibero(Constants.FLAG_X);
		}
		
		return obj;
	}
	*/
	
	public static Responsabile mapToResponsabile(SigitTPersonaFisicaDto dto, RisultatoRicResponsabile responsabileSelez) {
		Responsabile obj = new Responsabile();
		obj.setIdImpResp(responsabileSelez.getIdImpResp());
		obj.setIdResponsabile(ConvertUtil.convertToInteger(dto.getIdPersonaFisica()));

		obj.setIdTitolo(ConvertUtil.convertToString(responsabileSelez.getIdTitolo()));

		obj.setCodiceFiscale(dto.getCodiceFiscale());
		obj.setCognome(dto.getCognome());
		obj.setNome(dto.getNome());
		
		//pg.setDataInizioResp(ConvertUtil.convertToString(obj.getDataCessazione()InizioAttivita()));
		//pg.setDataFineResp(ConvertUtil.convertToString(obj.getDataCessazione()));
		
		obj.setIdProvincia(dto.getSiglaProv());
		obj.setIdComune(dto.getIstatComune());
		
		obj.setFlgIndirizzoEst(ConvertUtil.getNumberAsBoolean(dto.getFlgIndirizzoEstero()));

		if (obj.getFlgIndirizzoEst())
		{
			obj.setEstStato(dto.getStatoEstero());
			obj.setEstCitta(dto.getCittaEstero());
			obj.setEstIndirizzo(dto.getIndirizzoEstero());
			obj.setEstCap(dto.getCapEstero());
		}
		else
		{
			if (dto.getFkL2() != null && ConvertUtil.convertToInteger(dto.getFkL2()) != Constants.ID_INDIRIZZO_VUOTO) {
				obj.setIdIndirizzo(ConvertUtil.convertToString(dto.getFkL2()));
				obj.setIndirizzoSitad(dto.getIndirizzoSitad());
				obj.setIndirizzo(dto.getIndirizzoSitad());
				obj.setIndirizzoNoStrad(null);
			} else {
				obj.setIdIndirizzo(null);
				obj.setIndirizzo(dto.getIndirizzoNonTrovato());
				obj.setIndirizzoNoStrad(dto.getIndirizzoNonTrovato());
			}	
			obj.setCap(dto.getCap());
		}
		
		// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
		obj.setCivico(dto.getCivico());
		
		obj.setFlgAccreditato(Constants.FLAG_ACCREDITATO_A.equalsIgnoreCase(dto.getFlgAccreditato()));
		obj.setEmail(dto.getEmail());
		
		obj.setDataInizioResp(responsabileSelez.getDataRespDal());
		obj.setDataFineResp(responsabileSelez.getDataRespAl());
		
		obj.setFlgImpresa(false);
		obj.setFlgResponsabile(true);

		return obj;
	}

	public static SigitTPersonaFisicaDto mapToSigitTPersonaFisicaDto(Responsabile obj, String cfUtenteMod) {
		SigitTPersonaFisicaDto dto = new SigitTPersonaFisicaDto();
		
		dto.setIdPersonaFisica(ConvertUtil.convertToBigDecimal(obj.getIdResponsabile()));

		dto.setCodiceFiscale(obj.getCodiceFiscale());
		dto.setCognome(obj.getCognome());
		dto.setNome(obj.getNome());
		
		dto.setFlgIndirizzoEstero(ConvertUtil.convertToBigDecimal(obj.getFlgIndirizzoEst()));
		
		if (obj.getFlgIndirizzoEst())
		{
			dto.setStatoEstero(obj.getEstStato());
			dto.setCittaEstero(obj.getEstCitta());
			dto.setIndirizzoEstero(obj.getEstIndirizzo());
			dto.setCapEstero(obj.getEstCap());
		}
		else
		{
			
			dto.setSiglaProv(obj.getIdProvincia());
			dto.setIstatComune(obj.getIdComune());
			
			dto.setProvincia(obj.getDescProvincia());
			dto.setComune(obj.getDescComune());
			
			if (GenericUtil.isNotNullOrEmpty(obj.getIdIndirizzo())) {
				//PATCH PROBLEMA TOPE
				if(!obj.getIdIndirizzo().equals(Constants.DATO_NON_DISPONIBILE_S)){
					dto.setFkL2(ConvertUtil.convertToBigDecimal(obj.getIdIndirizzo()));
					dto.setIndirizzoNonTrovato(null);
					dto.setIndirizzoSitad(obj.getIndirizzoSitad());
	
				}else{
					dto.setFkL2(null);
					dto.setIndirizzoNonTrovato(GenericUtil.getStringUpperSql(obj.getIndirizzoNoStrad()));
					dto.setIndirizzoSitad(null);
	
				}
			}else{
				dto.setFkL2(null);
				dto.setIndirizzoNonTrovato(GenericUtil.getStringUpperSql(obj.getIndirizzoNoStrad()));
				dto.setIndirizzoSitad(null);
	
			}
			
			dto.setCap(obj.getCap());
		}
		
		// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
		dto.setCivico(obj.getCivico());
		
		
		
		dto.setFlgGdpr(ConvertUtil.convertToBigDecimal(Constants.SI_1));
		
		dto.setEmail(GenericUtil.getStringSql(obj.getEmail()));
		
		dto.setUtenteUltMod(cfUtenteMod);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		
		return dto;
	}
	
	public static SigitTPersonaFisicaDto margeMapToSigitTPersonaFisicaDto(Responsabile obj, SigitTPersonaFisicaDto dto, String cfUtenteMod) {
//		SigitTPersonaFisicaDto dto = new SigitTPersonaFisicaDto();
//		
//		dto.setIdPersonaFisica(ConvertUtil.convertToBigDecimal(obj.getIdResponsabile()));
//
//		dto.setCodiceFiscale(obj.getCodiceFiscale());
		// Nel caso in cui la persona fisica non provenga dall'accreditamento e' possibile modificare anche il nome e il cognome
		dto.setCognome(obj.getCognome());
		dto.setNome(obj.getNome());

		dto.setFlgIndirizzoEstero(ConvertUtil.convertToBigDecimal(obj.getFlgIndirizzoEst()));

		if (obj.getFlgIndirizzoEst())
		{
			dto.setStatoEstero(obj.getEstStato());
			dto.setCittaEstero(obj.getEstCitta());
			dto.setIndirizzoEstero(obj.getEstIndirizzo());
			dto.setCapEstero(obj.getEstCap());

			dto.setSiglaProv(null);
			dto.setIstatComune(null);
			dto.setProvincia(null);
			dto.setComune(null);
			dto.setFkL2(null);
			dto.setIndirizzoNonTrovato(null);
			dto.setIndirizzoSitad(null);
			dto.setCap(null);
		}
		else
		{
			dto.setSiglaProv(obj.getIdProvincia());
			dto.setIstatComune(obj.getIdComune());

			dto.setProvincia(obj.getDescProvincia());
			dto.setComune(obj.getDescComune());

			if (GenericUtil.isNotNullOrEmpty(obj.getIdIndirizzo())) {
				//PATCH PROBLEMA TOPE
				if(!obj.getIdIndirizzo().equals(Constants.DATO_NON_DISPONIBILE_S)){
					dto.setFkL2(ConvertUtil.convertToBigDecimal(obj.getIdIndirizzo()));
					dto.setIndirizzoNonTrovato(null);
					dto.setIndirizzoSitad(obj.getIndirizzoSitad());
				}else{
					dto.setFkL2(null);
					dto.setIndirizzoNonTrovato(GenericUtil.getStringUpperSql(obj.getIndirizzoNoStrad()));
					dto.setIndirizzoSitad(null);
				}
			}else{
				dto.setFkL2(null);
				dto.setIndirizzoNonTrovato(GenericUtil.getStringUpperSql(obj.getIndirizzoNoStrad()));
				dto.setIndirizzoSitad(null);
			}

			dto.setCap(obj.getCap());
			dto.setStatoEstero(null);
			dto.setCittaEstero(null);
			dto.setIndirizzoEstero(null);
			dto.setCapEstero(null);

		}

		// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
		dto.setCivico(obj.getCivico());
		
		dto.setEmail(GenericUtil.getStringSql(obj.getEmail()));
		
		dto.setUtenteUltMod(cfUtenteMod);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		
		return dto;
	}
	
	
	public static SigitTPersonaGiuridicaDto mapToSigitTPersonaGiuridicaDto(DatiInserimentoSanzione sanzione, 
			String cfUtenteMod, 
			SigitTPersonaGiuridicaDto dtoFromDb) {
		
		SigitTPersonaGiuridicaDto dto = null;
		
		if (dtoFromDb == null) {
			dto = new SigitTPersonaGiuridicaDto();
			dto.setIdPersonaGiuridica(ConvertUtil.convertToBigDecimal(sanzione.getIdSanzionatoGiuridico()));
			dto.setCodiceFiscale(sanzione.getCodiceFiscale());
			dto.setDenominazione(sanzione.getDenominazione());
		} else {
			dto = dtoFromDb;
		}
		
		dto.setSiglaProv(sanzione.getIdProvincia());
		dto.setIstatComune(sanzione.getIdComune());
		dto.setComune(sanzione.getDescComune());
		dto.setProvincia(sanzione.getDescProvincia());
		
		dto.setFlgIndirizzoEstero(ConvertUtil.convertToBigDecimal(sanzione.getFlgIndirizzoEstero()));
		
		if (sanzione.getFlgIndirizzoEstero())
		{
			dto.setStatoEstero(sanzione.getStatoEstero());
			dto.setCittaEstero(sanzione.getComuneEstero());
			dto.setIndirizzoEstero(sanzione.getIndirizzoEstero());
			dto.setCapEstero(sanzione.getCapEstero());
		}
		else
		{
			if (GenericUtil.isNotNullOrEmpty(sanzione.getIdIndirizzo())) {
				//PATCH PROBLEMA TOPE
				if(!sanzione.getIdIndirizzo().equals(Constants.DATO_NON_DISPONIBILE_S)){
					dto.setFkL2(ConvertUtil.convertToBigDecimal(sanzione.getIdIndirizzo()));
					dto.setIndirizzoNonTrovato(null);
					dto.setIndirizzoSitad(sanzione.getDescIndirizzo());
				}else{
					dto.setFkL2(null);
					dto.setIndirizzoNonTrovato(GenericUtil.getStringUpperSql(sanzione.getIndirizzoNoStradario()));
					dto.setIndirizzoSitad(null);
				}
			}else{
				dto.setFkL2(null);
				dto.setIndirizzoNonTrovato(GenericUtil.getStringUpperSql(sanzione.getIndirizzoNoStradario()));
				dto.setIndirizzoSitad(null);
			}
			
//			dto.setCap();
		}
		
		// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
		dto.setCivico(sanzione.getCivico());
		
//		dto.setEmail(obj.getEmail());
		
		dto.setFkStatoPg(Constants.ID_STATO_IMPRESA_ATTIVA);
		
		dto.setUtenteUltMod(cfUtenteMod);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		
		return dto;
	}
	
	
	public static SigitTPersonaFisicaDto mapToSigitTPersonaFisicaDto(DatiInserimentoSanzione sanzione, 
			String cfUtenteMod, 
			SigitTPersonaFisicaDto dtoFromDb) {
		
		SigitTPersonaFisicaDto dto = null;
		
		if (dtoFromDb == null) {
			dto = new SigitTPersonaFisicaDto();
			dto.setIdPersonaFisica(ConvertUtil.convertToBigDecimal(sanzione.getIdSanzionatoFisico()));
			dto.setCodiceFiscale(sanzione.getCodiceFiscale());
			dto.setCognome(sanzione.getDenominazione());
			dto.setNome(sanzione.getNome());
		} else {
			dto = dtoFromDb;
		}
		
		dto.setFlgIndirizzoEstero(ConvertUtil.convertToBigDecimal(sanzione.getFlgIndirizzoEstero()));
		
		if (sanzione.getFlgIndirizzoEstero())
		{
			dto.setStatoEstero(sanzione.getStatoEstero());
			dto.setCittaEstero(sanzione.getComuneEstero());
			dto.setIndirizzoEstero(sanzione.getIndirizzoEstero());
			dto.setCapEstero(sanzione.getCapEstero());
		}
		else
		{
			
			dto.setSiglaProv(sanzione.getIdProvincia());
			dto.setIstatComune(sanzione.getIdComune());
			dto.setComune(sanzione.getDescComune());
			dto.setProvincia(sanzione.getDescProvincia());
			
			
			if (GenericUtil.isNotNullOrEmpty(sanzione.getIdIndirizzo())) {
				//PATCH PROBLEMA TOPE
				if(!sanzione.getIdIndirizzo().equals("0")){
					dto.setFkL2(ConvertUtil.convertToBigDecimal(sanzione.getIdIndirizzo()));
					dto.setIndirizzoNonTrovato(null);
					dto.setIndirizzoSitad(sanzione.getDescIndirizzo());
					
				}else{
					dto.setFkL2(null);
					dto.setIndirizzoNonTrovato(GenericUtil.getStringUpperSql(sanzione.getIndirizzoNoStradario()));
					dto.setIndirizzoSitad(null);
	
				}
			}else{
				dto.setFkL2(null);
				dto.setIndirizzoNonTrovato(GenericUtil.getStringUpperSql(sanzione.getIndirizzoNoStradario()));
				dto.setIndirizzoSitad(null);
	
			}
			
//			dto.setCap(obj.getCap());
		}
		
		// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
		dto.setCivico(sanzione.getCivico());
		
		
//		dto.setEmail(obj.getEmail());
		
		dto.setFlgGdpr(ConvertUtil.convertToBigDecimal(Constants.SI_1));


		dto.setUtenteUltMod(cfUtenteMod);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		
		return dto;
	}
	
	public static SigitTPersonaGiuridicaDto mapToSigitTPersonaGiuridicaDto(Responsabile obj, String cfUtenteMod) {
		SigitTPersonaGiuridicaDto dto = new SigitTPersonaGiuridicaDto();
		dto.setIdPersonaGiuridica(ConvertUtil.convertToBigDecimal(obj.getIdResponsabile()));
		
		// Beppe - questi due campi sono stati aggiunti il 21/11/2019 - Jira SIGIT-639
		dto.setSiglaRea(obj.getIdSiglaRea());
		dto.setNumeroRea(ConvertUtil.convertToBigDecimal(obj.getNumeroRea()));
		
		dto.setCodiceFiscale(obj.getCodiceFiscale());
		dto.setDenominazione(obj.getCognome());
		
		dto.setSiglaProv(obj.getIdProvincia());
		dto.setIstatComune(obj.getIdComune());
		
		dto.setProvincia(obj.getDescProvincia());
		dto.setComune(obj.getDescComune());
		
		
		dto.setFlgIndirizzoEstero(ConvertUtil.convertToBigDecimal(obj.getFlgIndirizzoEst()));
		
		if (obj.getFlgIndirizzoEst())
		{
			dto.setStatoEstero(obj.getEstStato());
			dto.setCittaEstero(obj.getEstCitta());
			dto.setIndirizzoEstero(obj.getEstIndirizzo());
			dto.setCapEstero(obj.getEstCap());
		}
		else
		{
			if (GenericUtil.isNotNullOrEmpty(obj.getIdIndirizzo())) {
				//PATCH PROBLEMA TOPE
				if(!obj.getIdIndirizzo().equals("0")){
					dto.setFkL2(ConvertUtil.convertToBigDecimal(obj.getIdIndirizzo()));
					dto.setIndirizzoNonTrovato(null);
					dto.setIndirizzoSitad(obj.getIndirizzoSitad());
				}else{
					dto.setFkL2(null);
					dto.setIndirizzoNonTrovato(GenericUtil.getStringUpperSql(obj.getIndirizzoNoStrad()));
					dto.setIndirizzoSitad(null);
				}
			}else{
				dto.setFkL2(null);
				dto.setIndirizzoNonTrovato(GenericUtil.getStringUpperSql(obj.getIndirizzoNoStrad()));
				dto.setIndirizzoSitad(null);
			}
			
			dto.setCap(GenericUtil.getStringSql(obj.getCap()));
		}
		
		// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
		dto.setCivico(obj.getCivico());
		
		dto.setEmail(GenericUtil.getStringSql(obj.getEmail()));
		
		dto.setFkStatoPg(Constants.ID_STATO_IMPRESA_ATTIVA);
		
		dto.setUtenteUltMod(cfUtenteMod);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		
		return dto;
	}
	
	public static SigitTPersonaGiuridicaDto margeMapToSigitTPersonaGiuridicaDto(Responsabile obj, SigitTPersonaGiuridicaDto dto, String cfUtenteMod) {
		//dto.setIdPersonaGiuridica(ConvertUtil.convertToBigDecimal(obj.getIdResponsabile()));
		//dto.setCodiceFiscale(obj.getCodiceFiscale());
		//dto.setDenominazione(obj.getCognome());
		
		
		dto.setFlgIndirizzoEstero(ConvertUtil.convertToBigDecimal(obj.getFlgIndirizzoEst()));
		
		if (obj.getFlgIndirizzoEst())
		{
			dto.setStatoEstero(obj.getEstStato());
			dto.setCittaEstero(obj.getEstCitta());
			dto.setIndirizzoEstero(obj.getEstIndirizzo());
			dto.setCapEstero(obj.getEstCap());
			
			dto.setSiglaProv(null);
			dto.setIstatComune(null);
			dto.setProvincia(null);
			dto.setComune(null);
			dto.setFkL2(null);
			dto.setIndirizzoNonTrovato(null);
			dto.setIndirizzoSitad(null);
			dto.setCap(null);
		}
		else
		{
			
			dto.setSiglaProv(obj.getIdProvincia());
			dto.setIstatComune(obj.getIdComune());
			
			dto.setProvincia(obj.getDescProvincia());
			dto.setComune(obj.getDescComune());
	
			if (GenericUtil.isNotNullOrEmpty(obj.getIdIndirizzo())) {
				//PATCH PROBLEMA TOPE
				if(!obj.getIdIndirizzo().equals("0")){
					dto.setFkL2(ConvertUtil.convertToBigDecimal(obj.getIdIndirizzo()));
					dto.setIndirizzoNonTrovato(null);
					dto.setIndirizzoSitad(obj.getIndirizzoSitad());
				}else{
					dto.setFkL2(null);
					dto.setIndirizzoNonTrovato(GenericUtil.getStringUpperSql(obj.getIndirizzoNoStrad()));
					dto.setIndirizzoSitad(null);
				}
			}else{
				dto.setFkL2(null);
				dto.setIndirizzoNonTrovato(GenericUtil.getStringUpperSql(obj.getIndirizzoNoStrad()));
				dto.setIndirizzoSitad(null);
			}

			dto.setCap(obj.getCap());
			
			dto.setStatoEstero(null);
			dto.setCittaEstero(null);
			dto.setIndirizzoEstero(null);
			dto.setCapEstero(null);
		
		}
		
		// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
		dto.setCivico(obj.getCivico());
		
		dto.setEmail(GenericUtil.getStringSql(obj.getEmail()));
		
		dto.setUtenteUltMod(cfUtenteMod);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		
		return dto;
	}
	
	/*
	public static SigitTTransazioneImpDto mapToSigitTtransazioneImpDto(AcquisizioneCodici obj, String cfUtenteMod) {
		
		SigitTTransazioneImpDto dto = new SigitTTransazioneImpDto();
		//dto.setCfUtente(obj.getCodiceFiscale());
		dto.setCfUtente(cfUtenteMod);
		dto.setDataTransazione(ConvertUtil.convertToSqlDate(obj.getDataConsegna()));
		
		dto.setFkPersonaGiuridica(ConvertUtil.convertToBigDecimal(obj.getIdInstallatore()));
		
		dto.setUtenteUltMod(cfUtenteMod);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		
		return dto;
	}
	*/
	
	public static Impianto mapToImpianto(SigitTImpiantoDto dto) {
		Impianto obj = new Impianto();
		obj.setImpId(ConvertUtil.convertToInteger(dto.getCodiceImpianto()));
		obj.setImpCodImpianto(ConvertUtil.convertToString(dto.getCodiceImpianto()));
		obj.setImpIdStatoImp(ConvertUtil.convertToString(dto.getFkStato()));
		obj.setImpIdStatoImpOld(ConvertUtil.convertToString(dto.getFkStato()));
		obj.setImpDataAssegnazione(ConvertUtil.convertToString(dto.getDataAssegnazione()));
		obj.setImpDataDismissione(ConvertUtil.convertToString(dto.getDataDismissione()));
		obj.setImpDataDismissioneOld(ConvertUtil.convertToString(dto.getDataDismissione()));
		obj.setImpMotivazione(dto.getMotivazione());
		obj.setImpMotivazioneOld(dto.getMotivazione());
		
		obj.setImpTipoImpianto(dto.getFlgTipoImpianto());
		obj.setImpFlgAppareccUiExt(ConvertUtil.convertToBoolean(dto.getFlgAppareccUiExt()));
		obj.setImpFlgContabilizzatore(ConvertUtil.convertToBoolean(dto.getFlgContabilizzazione()));
		
		obj.setImpLocIdComune(dto.getIstatComune());
		obj.setImpLocIdProvincia(dto.getSiglaProvincia());
		obj.setImpLocDescComune(dto.getDenominazioneComune());
		obj.setImpLocDescProvincia(dto.getDenominazioneProvincia());
		obj.setVisuProprietario(ConvertUtil.convertToBoolean(dto.getFlgVisuProprietario()));
		obj.setImpLocNote(dto.getNote());

		return obj;
	}
	
	public static SigitTImpiantoDto mapToSigitTImpiantoDto(Impianto obj, boolean isInsert, String cfUtenteMod) {
		
		SigitTImpiantoDto dto = new SigitTImpiantoDto();

		if (log.isDebugEnabled())
			GenericUtil.stampa(obj, true, 3);
		
		dto.setCodiceImpianto(ConvertUtil.convertToBigDecimal(obj.getImpCodImpianto()));
		
		dto.setFkStato(ConvertUtil.convertToBigDecimal(obj.getImpIdStatoImp()));
		dto.setDataAssegnazione(ConvertUtil.convertToSqlDate(obj.getImpDataAssegnazione()));
		dto.setDataDismissione(ConvertUtil.convertToSqlDate(obj.getImpDataDismissione()));
		
		dto.setFlgTipoImpianto(ConvertUtil.getStringSql(obj.getImpTipoImpianto()));
		dto.setFlgAppareccUiExt(ConvertUtil.convertToBigDecimal(obj.getImpFlgAppareccUiExt()));
		dto.setFlgContabilizzazione(ConvertUtil.convertToBigDecimal(obj.getImpFlgContabilizzatore()));
		
		dto.setIstatComune(ConvertUtil.getStringSql(obj.getImpLocIdComune()));
		dto.setSiglaProvincia(ConvertUtil.getStringSql(obj.getImpLocIdProvincia()));
		dto.setDenominazioneComune(ConvertUtil.getStringSql(obj.getImpLocDescComune()));
		dto.setDenominazioneProvincia(ConvertUtil.getStringSql(obj.getImpLocDescProvincia()));
		dto.setMotivazione(obj.getImpMotivazione());
		//dto.setProprietario(obj.getImpLocProprietario());
		dto.setNote(GenericUtil.getStringSql(obj.getImpLocNote()));
		if (isInsert)
		{
			dto.setDataInserimento(DateUtil.getSqlDataCorrente());
			dto.setFlgNoOpendata(ConvertUtil.convertToBigDecimal(false));
		}
		
		dto.setUtenteUltMod(cfUtenteMod);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		dto.setFlgVisuProprietario(ConvertUtil.convertToBigDecimal(obj.getVisuProprietario()));
		return dto;
	}
	
	
	
	public static SigitTUnitaImmobiliareDto mapToSigitTUnitaImmobiliareDto(Impianto obj, BigDecimal idImpianto, String cfUtenteMod) {
		SigitTUnitaImmobiliareDto dto = new SigitTUnitaImmobiliareDto();
		
		dto.setIdUnitaImm(ConvertUtil.convertToBigDecimal(obj.getImpIdUnitaImm()));
		
		if (idImpianto != null)
		{
			dto.setCodiceImpianto(idImpianto);
		}
		else
		{
			dto.setCodiceImpianto(ConvertUtil.convertToBigDecimal(obj.getImpId()));
		}
		
		//dto.setCap(obj.getImpLocCap());
		
		if (GenericUtil.isNotNullOrEmpty(obj.getImpLocIdIndirizzo())) {
			//PATCH PROBLEMA TOPE
			if(!obj.getImpLocIdIndirizzo().equals(Constants.DATO_NON_DISPONIBILE_S)){
				dto.setFkL2(ConvertUtil.convertToBigDecimal(obj.getImpLocIdIndirizzo()));
				dto.setIndirizzoNonTrovato(null);
				dto.setIndirizzoSitad(ConvertUtil.getStringSql(obj.getImpLocIndirizzoSitad()));
			}else{
				dto.setFkL2(null);
				dto.setIndirizzoNonTrovato(ConvertUtil.getStringUpperSql(obj.getImpLocIndirizzoNoStrad()));
				dto.setIndirizzoSitad(null);
			}
		}else{
			dto.setFkL2(null);
			dto.setIndirizzoNonTrovato(ConvertUtil.getStringUpperSql(obj.getImpLocIndirizzoNoStrad()));
			dto.setIndirizzoSitad(null);
		}

		
		dto.setCivico(ConvertUtil.getStringSql(obj.getImpLocCivico()));
		dto.setCap(obj.getImpLocCap());
		dto.setInterno(ConvertUtil.getStringSql(obj.getImpLocInterno()));
		dto.setScala(ConvertUtil.getStringSql(obj.getImpLocScala()));
		dto.setPalazzo(ConvertUtil.getStringSql(obj.getImpLocPalazzo()));
		dto.setSezione(ConvertUtil.getStringSql(obj.getImpLocSezione()));
		dto.setFoglio(ConvertUtil.getStringSql(obj.getImpLocFoglio()));
		dto.setParticella(ConvertUtil.getStringSql(obj.getImpLocParticella()));
		dto.setSubalterno(ConvertUtil.getStringSql(obj.getImpLocSubalterno()));
		dto.setFlgNoaccatastato(ConvertUtil.convertToBigDecimal(obj.getImpLocEdifNonAcc()));
		dto.setPodElettrico(ConvertUtil.getStringSql(obj.getImpLocPod()));
		dto.setPdrGas(ConvertUtil.getStringSql(obj.getImpLocPdr()));
		dto.setFlgNopdr(ConvertUtil.convertToBigDecimal(obj.getImpLocPdrNonPres()));
		
		dto.setFlgPrincipale(ConvertUtil.convertToBigDecimal(Constants.SI_1));
		
		dto.setUtenteUltMod(cfUtenteMod);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		
		return dto;
	}
	
	public static SigitTUnitaImmobiliareDto mapToSigitTUnitaImmobiliareDto(Subentro obj) {
		SigitTUnitaImmobiliareDto dto = new SigitTUnitaImmobiliareDto();
		
		
		dto.setCodiceImpianto(ConvertUtil.convertToBigDecimal(obj.getImpCodImpianto()));
		
		if (GenericUtil.isNotNullOrEmpty(obj.getImpLocIdIndirizzo())) {
			//PATCH PROBLEMA TOPE
			if(!obj.getImpLocIdIndirizzo().equals(Constants.DATO_NON_DISPONIBILE_S)){
				dto.setFkL2(ConvertUtil.convertToBigDecimal(obj.getImpLocIdIndirizzo()));
				dto.setIndirizzoNonTrovato(null);
				dto.setIndirizzoSitad(obj.getImpLocIndirizzoSitad());
			}else{
				dto.setFkL2(null);
				dto.setIndirizzoNonTrovato(GenericUtil.getStringUpperSql(obj.getImpLocIndirizzoNoStrad()));
				dto.setIndirizzoSitad(null);
			}
		}else{
			dto.setFkL2(null);
			dto.setIndirizzoNonTrovato(GenericUtil.getStringUpperSql(obj.getImpLocIndirizzoNoStrad()));
			dto.setIndirizzoSitad(null);
		}

		
		dto.setCivico(obj.getImpLocCivico());
		
		dto.setFlgPrincipale(ConvertUtil.convertToBigDecimal(Constants.SI_1));
		return dto;
	}
	
	
	
	public static Delegato mapToDelegato(SigitRPfPgDelegaPersonaFisicaByIdPersonaGiuridicaDto dto) {
		
		Delegato obj = new Delegato();
		
		String dataInizio = ConvertUtil.convertToString(dto.getDDataInizio());
		obj.setIdDelegato(costruisciChiaveDelegato(dto.getDIdPersonaFisica(), dto.getDIdPersonaGiuridica(), dataInizio));
		
		obj.setCodiceFiscale(dto.getPfCodiceFiscale());
		obj.setCognome(dto.getPfCognome());
		obj.setNome(dto.getPfNome());
		obj.setDataDelegaDal(dataInizio);
		obj.setDataDelegaAl(ConvertUtil.convertToString(dto.getDDataFine()));
		
		if (GenericUtil.isNotNullOrEmpty(dto.getDFlgDelega()))
		{
			if (dto.getDFlgDelega().equalsIgnoreCase(Constants.FLAG_ACCREDITATO_A))
			{
				obj.setIdTipoLegame(Constants.FLAG_ACCREDITATO_A);
				obj.setDescTipoLegame(Constants.LABEL_ACCREDITATO_A);
			}
			else if (dto.getDFlgDelega().equalsIgnoreCase(Constants.FLAG_ACCREDITATO_D))
			{
				obj.setIdTipoLegame(Constants.FLAG_ACCREDITATO_D);
				obj.setDescTipoLegame(Constants.LABEL_ACCREDITATO_D);
			}
		}
		
		return obj;
	}
	
	
	
	public static Incaricato mapToIncaricoCat(SigitRPgPgNominaPersonaGiuridicaCatByIdPersonaGiuridicaDto dto) {
		
		Incaricato obj = new Incaricato();
		
		String dataInizio = ConvertUtil.convertToString(dto.getDDataInizio());
		obj.setIdIncaricato(costruisciChiaveDelegato(dto.getDIdPersonaGiuridicaCat(), dto.getDIdPersonaGiuridicaImpresa(), dataInizio));
		
		obj.setCodiceFiscale(dto.getPgCodiceFiscale());
		obj.setDenominazione(dto.getPgDenominazione());
		obj.setDataIncaricoDal(dataInizio);
		obj.setDataIncaricoAl(ConvertUtil.convertToString(dto.getDDataFine()));
		
		return obj;
	}
	
	public static Delegato mapToDelegato(SigitVPfPgDto dto) {
		
		Delegato obj = new Delegato();
		
		obj.setIdDelegato(ConvertUtil.convertToString(dto.getIdPersona()));
		
		obj.setCodiceFiscale(dto.getCodiceFiscale());
		obj.setCognome(dto.getDenominazione());
		obj.setNome(dto.getNome());
		
		return obj;
	}
	
	public static DettaglioImportDistributori mapToImportDistributori(SigitTImportDistribByIdPersonaGiuridicaDto dto) {
		
		DettaglioImportDistributori obj = new DettaglioImportDistributori();

		obj.setIdFileInviato(dto.getIdIdImportDistrib());

		obj.setDataInizioElab(ConvertUtil.convertToString(dto.getIdDataInizioElab()));
		obj.setDataFineElab(ConvertUtil.convertToString(dto.getIdDataFineElab()));
		obj.setDataAnnullamento(ConvertUtil.convertToString(dto.getIdDataAnnullamento()));
		
		obj.setNomeFile(dto.getIdNomeFileImport());
		obj.setAnnoRiferimento(ConvertUtil.convertToString(dto.getIdAnnoRiferimento()));
		obj.setDescStato(dto.getSdDesStatoDistrib());
		obj.setTotElaborati(ConvertUtil.convertToInteger(dto.getIdTotRecordElaborati()));
		obj.setTotScartati(ConvertUtil.convertToInteger(dto.getIdTotRecordScartati()));
		
		return obj;
	}
	
	public static DettaglioErrore mapToDettaglioErrore(SigitTLogDistribDto dto) {
		
		DettaglioErrore obj = new DettaglioErrore();

		obj.setIdErrore(dto.getIdLogDistrib());
		obj.setDescErrore(dto.getMsgErrore());

		return obj;
	}

	/*
	public static SigitTStoricoVariazStatoDto mapToSigitTStoricoVariazStatoDto(SigitTImpiantoDto dtoOld, String newStato) {
		
		SigitTStoricoVariazStatoDto dto = new SigitTStoricoVariazStatoDto();

		GenericUtil.stampa(dtoOld, true, 3);
		
		dto.setCodiceImpianto(dtoOld.getCodiceImpianto());
		dto.setDataVariazione(DateUtil.getSqlDataCorrente());
		
		dto.setOldDataDismissione(dtoOld.getDataDismissione());
		dto.setOldMotivazione(ConvertUtil.getStringSql(dtoOld.getMotivazione()));
		dto.setStatoDa(dtoOld.getFkStato());
		dto.setStatoA(ConvertUtil.convertToBigDecimal(newStato));
		
		return dto;
	}
	*/
	
	public static SigitTStoricoVariazStatoDto mapToSigitTStoricoVariazStatoDto(Impianto impianto, String cfUtenteMod) {
		
		SigitTStoricoVariazStatoDto dto = new SigitTStoricoVariazStatoDto();

		if (log.isDebugEnabled())
			GenericUtil.stampa(impianto, true, 3);
		
		dto.setCodiceImpianto(ConvertUtil.convertToBigDecimal(impianto.getImpCodImpianto()));
		dto.setDtEvento(DateUtil.getSqlDataCorrente());
		
		dto.setDtInizioVariazione(ConvertUtil.convertToSqlDate(impianto.getImpDataDismissione()));
		dto.setMotivo(impianto.getImpMotivazione());
		dto.setStatoDa(ConvertUtil.convertToBigDecimal(impianto.getImpIdStatoImpOld()));
		dto.setStatoA(ConvertUtil.convertToBigDecimal(impianto.getImpIdStatoImp()));
		dto.setUtenteUltMod(cfUtenteMod);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		return dto;
	}

	public static SigitTDocAggiuntivaDto mapToSigitTDocAggiuntivaDto(ImportDocumentoFilter docFilter, String descAltroDoc, String cfUtenteMod) {
		
		SigitTDocAggiuntivaDto dto = new SigitTDocAggiuntivaDto();

		//GenericUtil.stampa(documento, true, 3);
		
		dto.setCodiceImpianto(ConvertUtil.convertToBigDecimal(docFilter.getCodImpianto()));
		dto.setFkTipoDocagg(ConvertUtil.convertToBigDecimal(docFilter.getIdTipoDocumento()));
		//dto.setFkImpRuoloPfpg(ConvertUtil.convertToBigDecimal(docFilter.getIdImpRuoloPfpg()));
		dto.setNomeDocOriginale(docFilter.getNomeFile());
		dto.setDataUpload(DateUtil.getSqlDataCorrente());
		dto.setDesAltroTipodoc(GenericUtil.getStringSql(descAltroDoc));
		dto.setUtenteUltMod(cfUtenteMod);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		
		return dto;
	}
	

	public static SigitTDocAllegatoDto mapToSigitTDocAllegatoDto(ImportDocumentoFilter docFilter, String cfUtenteMod) {
		
		SigitTDocAllegatoDto dto = new SigitTDocAllegatoDto();

		//GenericUtil.stampa(documento, true, 3);
		dto.setFkAllegato(ConvertUtil.convertToBigDecimal(docFilter.getIdAllegato()));
		//dto.setIdDocAllegato(ConvertUtil.convertToInteger(docFilter.getIdAllegato()));
		dto.setNomeDocOriginale(docFilter.getNomeFile());
		dto.setDataUpload(DateUtil.getSqlDataCorrente());
		dto.setDescrizione(GenericUtil.getStringSql(docFilter.getDescrizione()));
		dto.setUtenteUltMod(cfUtenteMod);
		dto.setDataUltMod(DateUtil.getSqlCurrentDate());
		
		return dto;
	}

	/*
	public static SigitTAllRespintoDto mapToSigittAllRespinto(SigitTAllegatoDto obj, String cfUtenteMod) {
		SigitTAllRespintoDto dto = new SigitTAllRespintoDto();
		
		dto.setDataControllo(obj.getDataControllo());
		dto.setIdImpRuoloPfpg(obj.getFkImpRuoloPfpg());
		dto.setIdAllegato(obj.getIdAllegato());
		dto.setFkTipoDocumento(obj.getFkTipoDocumento());
		dto.setSiglaBollino(obj.getFkSiglaBollino());
		dto.setNumeroBollino(obj.getFkNumeroBollino());
//FIXME		dto.setXmlAllegato(obj.getXmlAllegato());
		dto.setNomeAllegato(obj.getNomeAllegato());
		dto.setDataRespinta(DateUtil.getSqlCurrentDate());
		dto.setDataInvio(obj.getDataInvio());
		dto.setFOsservazioni(obj.getFOsservazioni());
		dto.setFRaccomandazioni(obj.getFRaccomandazioni());
		dto.setFPrescrizioni(obj.getFPrescrizioni());
		dto.setFInterventoEntro(obj.getFInterventoEntro());
		dto.setUtenteUltMod(cfUtenteMod);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());

		return dto;
	}
	*/
	
	/*
	public static SigitTAllRespTxtDto mapToSigitAllRespTxt(SigitTAllTxtDto obj, SigitTAllegatoDto objAllegato) {
		SigitTAllRespTxtDto dto = new SigitTAllRespTxtDto();
		
		dto.setDataControllo(objAllegato.getDataControllo());
		dto.setIdImpRuoloPfpg(objAllegato.getFkImpRuoloPfpg());
		dto.setIdAllegato(objAllegato.getIdAllegato());
		dto.setXmlAllegato(obj.getXmlAllegato());

		return dto;
	}
	*/
	
	public static Impianto mapToImpianto(Impianto obj, SigitTUnitaImmobiliareDto dto) {
		
		obj.setImpIdUnitaImm(ConvertUtil.convertToInteger(dto.getIdUnitaImm()));

		if (dto.getFkL2() == null) {
			obj.setImpLocIndirizzoNoStrad(normalizeString(dto.getIndirizzoNonTrovato()));
		} else {
			obj.setImpLocIdIndirizzo(ConvertUtil.convertToString(dto.getFkL2().intValue()));
			obj.setImpLocIndirizzoSitad(normalizeString(dto.getIndirizzoSitad()));
		}
		
		
		obj.setImpLocCivico(dto.getCivico());
		obj.setImpLocCap(dto.getCap());

		obj.setImpLocInterno(dto.getInterno());
		obj.setImpLocScala(dto.getScala());
		obj.setImpLocPalazzo(dto.getPalazzo());
		obj.setImpLocSezione(dto.getSezione());
		obj.setImpLocFoglio(dto.getFoglio());
		obj.setImpLocParticella(dto.getParticella());
		obj.setImpLocSubalterno(dto.getSubalterno());
		obj.setImpLocEdifNonAcc(ConvertUtil.convertToBoolean(dto.getFlgNoaccatastato()));
		obj.setImpLocPod(dto.getPodElettrico());
		obj.setImpLocPdr(dto.getPdrGas());
		obj.setImpLocPdrNonPres(ConvertUtil.convertToBoolean(dto.getFlgNopdr()));
		
		return obj;
	}
	
	
	public static SigitRImpRuoloPfpgDto mapToSigitRImpRuoloPfpgDto(Impianto obj, BigDecimal idImpianto, UtenteLoggato utenteLoggato) {
		
		log.debug("mapToSigitRImpRuoloPfpgDto");
		SigitRImpRuoloPfpgDto dto = new SigitRImpRuoloPfpgDto();
		dto.setFkRuolo(ConvertUtil.convertToBigDecimal(Constants.ID_RUOLO_CARICATORE));
		dto.setCodiceImpianto(idImpianto);
		dto.setDataInizio(DateUtil.getSqlCurrentDate());
		
		
//		if (log.isDebugEnabled())
//		{
//			GenericUtil.stampa(utenteLoggato, true, 3);
//			GenericUtil.stampa(utenteLoggato.getRuolo(), true, 3);
//			
//		}
		
		if (utenteLoggato.getRuolo() != null && GenericUtil.isNotNullOrEmpty(utenteLoggato.getRuolo().getIdPersonaGiuridica()))
		{
			log.debug("getIdPersonaGiuridica: "+utenteLoggato.getRuolo().getIdPersonaGiuridica());
			dto.setFkPersonaGiuridica(ConvertUtil.convertToBigDecimal(utenteLoggato.getRuolo().getIdPersonaGiuridica()));
		}
		else
		{
			log.debug("getIdPersonaFisica: "+utenteLoggato.getIdPersonaFisica());
			dto.setFkPersonaFisica(ConvertUtil.convertToBigDecimal(utenteLoggato.getIdPersonaFisica()));
		}
		
		dto.setFlgPrimoCaricatore(ConvertUtil.convertToBigDecimal(obj.getInstPrimoCaricatore()));
		
		dto.setUtenteUltMod(utenteLoggato.getCodiceFiscale());
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		
		return dto;
	}
	
	public static SigitRImpRuoloPfpgDto mapToSigitRImpRuoloPfpgDto(SigitRImpRuoloPfpgDto dto, boolean flgPrimoCaricatore, String cfUtenteMod) {
		
		dto.setFlgPrimoCaricatore(ConvertUtil.convertToBigDecimal(flgPrimoCaricatore));
		
		dto.setUtenteUltMod(cfUtenteMod);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		
		return dto;
	}
	
	public static SigitRImpRuoloPfpgDto mapToSigitRImpRuoloPfpgDto(Responsabile obj, String codiceImpianto, String cfUtenteMod) {
		
		SigitRImpRuoloPfpgDto dto = new SigitRImpRuoloPfpgDto();
		dto.setIdImpRuoloPfpg(ConvertUtil.convertToBigDecimal(obj.getIdImpResp()));
		dto.setFkRuolo(ConvertUtil.convertToBigDecimal(obj.getIdTitolo()));
		dto.setCodiceImpianto(ConvertUtil.convertToBigDecimal(codiceImpianto));
		dto.setDataInizio(ConvertUtil.convertToSqlDate(obj.getDataInizioResp()));
		dto.setDataFine(ConvertUtil.convertToSqlDate(obj.getDataFineResp()));
		
		if (obj.getFlgImpresa())
		{
			dto.setFkPersonaGiuridica(ConvertUtil.convertToBigDecimal(obj.getIdResponsabile()));
		}
		else
		{
			dto.setFkPersonaFisica(ConvertUtil.convertToBigDecimal(obj.getIdResponsabile()));
		}
		
		dto.setUtenteUltMod(cfUtenteMod);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		
		return dto;
	}
	
	
	//public static Impianto mapToImpianto(SigitTImpiantoDto dtoImp, SigitTPersonaGiuridicaDto dtoPg, SigitTUnitaImmobiliareDto dtoUImm, Proprietario proprietario, String dataConsolidamento, boolean isInModifica) {
	public static Impianto mapToImpianto(SigitTImpiantoDto dtoImp, SigitTPersonaGiuridicaDto caricatorePG, SigitTPersonaFisicaDto caricatorePF, SigitTUnitaImmobiliareDto dtoUImm, Proprietario proprietario, String dataConsolidamento, boolean isInModifica) {
		
		if (log.isDebugEnabled())
			GenericUtil.stampa(dtoImp, true, 3);
		
		Impianto obj = mapToImpianto(dtoImp);
		
		
		if (proprietario != null)
		{
			obj.setProprietario(proprietario);
		}
		
		
		if (caricatorePG != null)
		{
			obj.setInstId(ConvertUtil.convertToInteger(caricatorePG.getIdPersonaGiuridica()));
			obj.setInstCf(caricatorePG.getCodiceFiscale());
			obj.setInstIdSiglaRea(caricatorePG.getSiglaRea());
			obj.setInstNumeroRea(ConvertUtil.convertToUDTPositiveInteger(caricatorePG.getNumeroRea()));
			obj.setInstImpresa(caricatorePG.getDenominazione());
			//obj.setInstPrimoCaricatore(isPrimoInstallatore);
			
		}
		else if (caricatorePF != null)
		{
			obj.setInstId(ConvertUtil.convertToInteger(caricatorePF.getIdPersonaFisica()));
			obj.setInstCf(caricatorePF.getCodiceFiscale());
			obj.setInstIdSiglaRea(null);
			obj.setInstNumeroRea(null);
			obj.setInstImpresa(costruisciCognomeNome(caricatorePF.getCognome(), caricatorePF.getNome()));
			//obj.setInstPrimoCaricatore(isPrimoInstallatore);
			
		}
		
		
		/*
		if (dataConsolidamento != null)
		{
			obj.setLibDataRilascio(dataConsolidamento);
		}
		
		obj.setLibIsModifica(ConvertUtil.convertToString(isInModifica));
		*/
		
		obj = mapToImpianto(obj, dtoUImm);
		
		// DA COMPLETARE
		return obj;
	}
	
	public static ImpiantoFilter mapToImpiantoFilter(RicercaImpianti dto, String descRuolo) {
		
		ImpiantoFilter filter = new ImpiantoFilter();
		
		filter.setCodiceImpianto(ConvertUtil.convertToInteger(dto.getCodiceImpianto()));
		
		filter.setSiglaProvincia(dto.getIdProvincia());
		filter.setSiglaComune(dto.getIdComune());
		filter.setDescComune(dto.getDescComune());
		
		filter.setIndirizzo(normalizeString(dto.getIndirizzo()));
		filter.setCivico(dto.getCivico());
		filter.setCfResponsabile(normalizeString(dto.getCfResponsabile()));
		filter.setCf3Responsabile(normalizeString(dto.getCf3Responsabile()));
		filter.setCfProprietario(normalizeString(dto.getCfProprietario()));
		filter.setMatricola(dto.getMatricolaApparecchiatura());
		filter.setSiglaRea(dto.getIdSiglaRea());
		filter.setNumeroRea(ConvertUtil.convertToInteger(dto.getNumeroRea()));

		filter.setCfDitta(normalizeString(dto.getCfImpresa()));

		filter.setPod(dto.getPod());
		filter.setPdr(dto.getPdr());

		filter.setDescRuoloFuonz(descRuolo);
		
		if (descRuolo.equalsIgnoreCase(Constants.RUOLO_PROPRIETARIO) || 
				descRuolo.equalsIgnoreCase(Constants.RUOLO_PROPRIETARIO_IMPRESA)) {
			filter.setFlagVisuProprietario(ConvertUtil.convertToBigDecimal(true));
		}

		
		return filter;
	}
	
	public static ImpiantoFiltro mapToImpiantoFiltro(RicercaImpianti dto, String descRuolo) {
		
		ImpiantoFiltro filter = new ImpiantoFiltro();
		
		filter.setCodiceImpianto(ConvertUtil.convertToInteger(dto.getCodiceImpianto()));
		
		filter.setSiglaProvincia(dto.getIdProvincia());
		filter.setIstatComune(dto.getIdComune());
		filter.setDescComune(dto.getDescComune());
		
		filter.setIndirizzo(normalizeString(dto.getIndirizzo()));
		filter.setCivico(dto.getCivico());
		filter.setCfResponsabile(normalizeString(dto.getCfResponsabile()));
		filter.setCf3Responsabile(normalizeString(dto.getCf3Responsabile()));
		filter.setCfProprietario(normalizeString(dto.getCfProprietario()));
		filter.setSiglaRea(dto.getIdSiglaRea());
		filter.setNumeroRea(ConvertUtil.convertToInteger(dto.getNumeroRea()));

		filter.setCfImpresa(normalizeString(dto.getCfImpresa()));		

		filter.setPod(dto.getPod());
		filter.setPdr(dto.getPdr());
		
		filter.setFkStato(ConvertUtil.convertToInteger(dto.getIdStatoImp()));
		
		if (descRuolo.equalsIgnoreCase(Constants.RUOLO_PROPRIETARIO) || 
				descRuolo.equalsIgnoreCase(Constants.RUOLO_PROPRIETARIO_IMPRESA)) {
			filter.setFlagVisuProprietario(true);
		}
		
		return filter;
	}
	
	public static Impianto mapToImpianto(Subentro objSub) {
		
		if (log.isDebugEnabled())
			GenericUtil.stampa(objSub, true, 3);
		
		Impianto objImp = new Impianto();
		
		if (objSub != null)
		{
			
			objImp.setInstId(objSub.getRespImpId());
			objImp.setInstIdSiglaRea(objSub.getRespImpIdSiglaRea());
			objImp.setInstNumeroRea(objSub.getRespImpNumeroRea());
			objImp.setInstCf(normalizeString(objSub.getRespImpCf()));
			objImp.setInstImpresa(objSub.getRespImpImpresa());
			
			
			if (GenericUtil.isNotNullOrEmpty(objSub.getImpLocIdIndirizzo())) {
				objImp.setImpLocIdIndirizzo(objSub.getImpLocIdIndirizzo());
				objImp.setImpLocIndirizzoSitad(normalizeString(objSub.getImpLocIndirizzoSitad()));
			} else {
				objImp.setImpLocIndirizzoNoStrad(normalizeString(objSub.getImpLocIndirizzoNoStrad()));
			}
			
			
			objImp.setImpLocIdProvincia(objSub.getImpLocIdProvincia());
			objImp.setImpLocIdComune(objSub.getImpLocIdComune());
			
			objImp.setImpLocCivico(objSub.getImpLocCivico());
			
			objImp.setImpCodImpianto(objSub.getImpCodImpianto());
			
			objImp.setImpIdStatoImp(ConvertUtil
					.convertToString(Constants.ID_STATO_IMP_VALIDO));
			objImp.setImpIdStatoImpOld(ConvertUtil
					.convertToString(Constants.ID_STATO_IMP_VALIDO));
			objImp.setImpDataDismissione(DateUtil.getDataCorrenteFormat());
			objImp.setImpDataDismissioneOld(DateUtil.getDataCorrenteFormat());
			objImp.setImpMotivazione(Constants.MOTIVAZIONE_STATO_IMPIANTO_DEFAULT);
			objImp.setImpMotivazioneOld(Constants.MOTIVAZIONE_STATO_IMPIANTO_DEFAULT);
		}
		
		
		return objImp;
	}
	
	/*
	public static RisultatoRicImpianto mapToRisultatoRicImpianto(SigitVTotImpiantoDto dto) {
		
		RisultatoRicImpianto obj = new RisultatoRicImpianto();
		
		obj.setCodiceImpianto(ConvertUtil.convertToString(dto.getCodiceImpianto()));
		
		obj.setDescComune(getComuneProvincia(dto.getDenominazioneProvincia(), dto.getDenominazioneComune()));
		obj.setIndirizzo(getIndirizzo(dto.getIndirizzoSitad(), dto.getIndirizzoNonTrovato(), dto.getCivico()));
		
		obj.setDenomResponsabile(getDenominazionePersona(dto.getNome(), dto.getDenominazione()));
		
		obj.setDenom3Responsabile(dto.getDenominazione3r());
		
		
		return obj;
	}
	*/
	
	/*
	public static SigitTTransazioneBollDto mapToSigitTTransazioneBollDto(AcquistoBollini acquistoBoll, TransazioneApp transazioneApp, UtenteLoggato utenteLoggato) {
		
		SigitTTransazioneBollDto dto = new SigitTTransazioneBollDto();

		if (transazioneApp != null)
		{
			// Vuol dire e' a pagamento
			dto.setFkTipoPagamento(ConvertUtil.convertToBigDecimal(Constants.ID_TIPO_PAGAMENTO_CC));
			dto.setNumTransazione(transazioneApp.getTransactionId());
		}
		else
		{
			// Vuol dire che e' gratuito
			dto.setFkTipoPagamento(ConvertUtil.convertToBigDecimal(Constants.ID_TIPO_PAGAMENTO_GRATUITO));
		}

		dto.setIdStatoTransazione(ConvertUtil.convertToBigDecimal(Constants.TRANSAZIONE_MDP_INIZIALIZED));
		dto.setDataTransazione(ConvertUtil.convertToSqlDate(acquistoBoll.getDataAcquisto()));
//		dto.setQtaminore35(ConvertUtil.convertToBigDecimal(acquistoBoll.getQtaMinore35()));
//		dto.setQta35116(ConvertUtil.convertToBigDecimal(acquistoBoll.getQta35_116()));
//		dto.setQta116350(ConvertUtil.convertToBigDecimal(acquistoBoll.getQta116_350()));
//		dto.setQtamaggiore350(ConvertUtil.convertToBigDecimal(acquistoBoll.getQtaMaggiore350()));
		
		
		//dto.setCfUtente(utenteLoggato.getCodiceFiscale());
		dto.setCfUtente(acquistoBoll.getCodiceFiscaleOp());
		
		//dto.setFkPersonaGiuridica(ConvertUtil.convertToBigDecimal(utenteLoggato.getRuolo().getIdPersonaGiuridica()));
		dto.setFkPersonaGiuridica(ConvertUtil.convertToBigDecimal(acquistoBoll.getIdInstallatore()));
		
		dto.setUtenteUltMod(utenteLoggato.getCodiceFiscale());
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		//adesso sul client e' stata valorizzata con una costante
		dto.setSiglaBollino(acquistoBoll.getSiglaBollino());
		
		return dto;
	}
	*/
	
	/*
	public static TransazioneBollini mapToTransazioneBollini(SigitTTransazioneBollDto dto) {
		
		TransazioneBollini obj = new TransazioneBollini();
		
		obj.setIdTransazione(ConvertUtil.convertToLong(dto.getIdTransazioneBoll()));
		obj.setIdStatoTransazione(ConvertUtil.convertToInteger(dto.getIdStatoTransazione()));
		
		return obj;
	}
	*/
	
	public static AbilitazioniRuoloFunz mapToAbilitazioniRuoloFunz(SigitWrkRuoloFunzDto dto) {
		
		AbilitazioniRuoloFunz obj = new AbilitazioniRuoloFunz();
		
		obj.setFlgAcqBollino(ConvertUtil.convertToBoolean(dto.getFlgAcqBollino()));
		obj.setFlgAcqCodImp(ConvertUtil.convertToBoolean(dto.getFlgAcqCodImp()));
		obj.setFlgAcqBollTrans(ConvertUtil.convertToBoolean(dto.getFlgAcqBollTrans()));
		obj.setFlgImpianto(ConvertUtil.convertToBoolean(dto.getFlgImpianto()));
		obj.setFlgAllegato(ConvertUtil.convertToBoolean(dto.getFlgAllegato()));
		obj.setFlgConsultazione(ConvertUtil.convertToBoolean(dto.getFlgConsultazione()));
		obj.setFlgIspezione(ConvertUtil.convertToBoolean(dto.getFlgIspezione()));
		obj.setFlgImportMassAllegato(ConvertUtil.convertToBoolean(dto.getFlgImportMassAllegato()));
		obj.setFlgSubentro(ConvertUtil.convertToBoolean(dto.getFlgSubentro()));
		obj.setFlgDelega(ConvertUtil.convertToBoolean(dto.getFlgDelega()));
		obj.setFlg3responsabile(ConvertUtil.convertToBoolean(dto.getFlg3responsabile()));
		obj.setFlgRicercaAvanzataImpianto(ConvertUtil.convertToBoolean(dto.getFlgRicAvzImpianti()));
		obj.setFlgDistributore(ConvertUtil.convertToBoolean(dto.getFlgDistributori()));
		obj.setFlgIncaricoCat(ConvertUtil.convertToBoolean(dto.getFlgIncarichiCat()));
		obj.setFlgImpresa(ConvertUtil.convertToBoolean(dto.getFlgImpresa()));
		obj.setFlgExpXmlModol(ConvertUtil.convertToBoolean(dto.getFlgExpXmlModol()));

		return obj;
	}
	
	
	
	/*
	public static SigitRTransAcqBollQtaDto mapToSigitRTransAcqBollQtaDto(Long idTransazione, AcquistoBolliniQuantita acqBolliniQta, UtenteLoggato utenteLoggato) {
		
		SigitRTransAcqBollQtaDto dto = new SigitRTransAcqBollQtaDto();
		
		dto.setIdTransazioneBoll(ConvertUtil.convertToBigDecimal(idTransazione));
		dto.setIdPotenza(ConvertUtil.convertToBigDecimal(acqBolliniQta.getIdPotenza()));
		dto.setIdPrezzo(ConvertUtil.convertToBigDecimal(acqBolliniQta.getIdPrezzo()));
		dto.setDtInizioAcquisto(ConvertUtil.convertToSqlDate(acqBolliniQta.getDataInizioAcquisto()));
		dto.setQuantita(ConvertUtil.convertToBigDecimal(acqBolliniQta.getQuantita()));
		
		dto.setUtenteUltMod(utenteLoggato.getCodiceFiscale());
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		
		return dto;
	}
	*/
	
	public static SigitWrkLogDto mapToSigitWrkLogDto(String cfUtenteMod, String tabella, String idRecord) {
		
		SigitWrkLogDto dto = new SigitWrkLogDto();
		
		dto.setCodiceFiscale(cfUtenteMod);
		dto.setDataOperazione(DateUtil.getSqlDataCorrente());
		dto.setTblImpattata(tabella);
		dto.setIdRecord(idRecord);
		dto.setTipoOperazione(Constants.TIPO_OPERAZIONE_DB_DELETE);
		
		return dto;
	}

	public static MODDocument mapToMODDocument(byte[] theXml){
		try {
			log.debug("[MapDto::mapToMODDocument] start");
			String theXmlString = ModolXFAReader.getXMLData(theXml, "data:MOD");
			//log.debug("theXmlString " + theXmlString);
			InputStream is = new ByteArrayInputStream(XmlBeanUtils.readString(theXmlString));
			MODDocument librettoDoc = MODDocument.Factory.parse(is);
			//Richiesta richiesta = librettoDoc.getMOD().getRichiesta();
			
			//GenericUtil.stampa(richiesta, false, 3);
			
			log.debug("[MapDto::mapToMODDocument] end");
			return librettoDoc;
		} catch (XmlException e) {
			log.error("Errore mapToMODDocument - XmlException",e);
			return null;
		} catch (IOException e) {
			log.error("Errore mapToMODDocument - IOException",e);
			return null;
		} catch (ParserConfigurationException e) {
			log.error("Errore mapToMODDocument - ParserConfigurationException",e);
			return null;
		} catch (SAXException e) {
			log.error("Errore mapToMODDocument - SAXException",e);
			return null;
		}		
	}

	public static it.csi.sigit.sigitwebn.xml.librettoLight.data.MODDocument mapToMODDocumentLight(byte[] theXml){
		try {
			log.debug("[MapDto::mapToMODDocumentLight] start");
			String theXmlString = ModolXFAReader.getXMLData(theXml, "data:MOD");
			InputStream is = new ByteArrayInputStream(XmlBeanUtils.readString(theXmlString));
			it.csi.sigit.sigitwebn.xml.librettoLight.data.MODDocument librettoDoc = it.csi.sigit.sigitwebn.xml.librettoLight.data.MODDocument.Factory.parse(is);
			log.debug("[MapDto::mapToMODDocumentLight] end");
			return librettoDoc;
		} catch (Exception e) {
			log.error("Errore mapToMODDocument - Exception",e);
			return null;
		}		
	}
	
	
	public static LibrettoDocument mapToLibrettoDocument(byte[] theXml){
		try {
			log.debug("[MapDto::mapToLibrettoDocument] start");
			
			String theXmlString = ModolXFAReader.getXMLData(theXml, "libretto");
			//log.debug("theXmlString " + theXmlString);

			InputStream is = new ByteArrayInputStream(XmlBeanUtils.readString(theXmlString));
			
			LibrettoDocument librettoDoc = LibrettoDocument.Factory.parse(is);
			//Richiesta richiesta = librettoDoc.getMOD().getRichiesta();
			//GenericUtil.stampa(richiesta, false, 3);
			
			log.debug("[MapDto::mapToLibrettoDocument] end");
			return librettoDoc;
		} catch (XmlException e) {
			log.error("Errore mapToLibrettoDocument - XmlException",e);
			
			return null;
		} catch (IOException e) {
			log.error("Errore mapToLibrettoDocument - IOException",e);
			
			return null;
		} catch (ParserConfigurationException e) {
			log.error("Errore mapToLibrettoDocument - ParserConfigurationException",e);
			
			return null;
		} catch (SAXException e) {
			log.error("Errore mapToLibrettoDocument - SAXException",e);
			
			return null;
		}		
	}

	/*
	public static MODDocument margeLibrettoDocumentToMODDocument(MODDocument document, LibrettoDocument librettoImport)
	{
		log.debug("[MapDto::margeLibrettoDocumentToMODDocument] start");

		Richiesta richiesta = document.getMOD().getRichiesta();

		LibrettoCatasto librettoCat = librettoImport.getLibretto().getLibrettoCatasto();
		L2TrattamentoAcqua l2TrattamentoAcqua = librettoCat.getL2TrattamentoAcqua();
		
		L5SistemiRegolazioneContabilizzazione l5SistRegCont = librettoCat.getL5SistemiRegolazioneContabilizzazione();

		if (l2TrattamentoAcqua != null)
		{
			//MapDto.mapToSchedaTrattH2o(l2TrattamentoAcqua, richiesta.addNewDatiSchedaTrattH2O());
			MapDto.mapToL2TrattamentoAcquaImport(l2TrattamentoAcqua, richiesta.addNewDatiSchedaTrattH2O());
		}
		
		if (l5SistRegCont != null)
		{
			//5.1
			//MapDto.mapToSchedaSistemiRegolarizzazionePrimaria(richiesta.addNewDatiSchedaSistemiRegolaz().addNewRegolazionePrimaria(), compXSemplice);
			// 5.2 5.3 5.4
			//MapDto.mapToSchedaSistemiRegolarizzazioneSingoloAmbiente(richiesta.getDatiSchedaSistemiRegolaz().addNewRegolazioneSingoloAmb(), compXSemplice);
			// 5.1 5.2 5.3 5.4
			MapDto.mapToL5SistRegCont(l5SistRegCont, richiesta.addNewDatiSchedaSistemiRegolaz().addNewRegolazioneSingoloAmb());
			
			//DA COMPLETARE IL 5 ci sono delle sezioni che si aprono
		}
		
		L6SistemiDistribuzione l6SistDistr = librettoCat.getL6SistemiDistribuzione();
		
		if (l6SistDistr != null)
		{
			
		}
		
		xxxxx
		
		
		log.debug("[MapDto::margeLibrettoDocumentToMODDocument] end");
		return document;
	}
	
	
	public static XmlBoolean getXmlFlgDecimaleTypeFlg(FlgDecimaleType type)
	{
		Boolean valRet = null; 
		
		if (type != null)
		{
			valRet = type.getFlg();
		}
		
		return getXmlBoolean(ConvertUtil.convertToBooleanAllways(valRet));
	}
	
	public static BigDecimal getXmlFlgDecimaleTypeDecimal(FlgDecimaleType type)
	{
		BigDecimal valRet = null; 
		
		if (type != null)
		{
			valRet = type.getDecimale();
		}
		
		return valRet;
	}
	
	public static XmlBoolean getXmlFlgDescrizioneDecimaleTypeFlg(FlgDescrizioneDecimaleType type)
	{
		Boolean valRet = null; 
		
		if (type != null)
		{
			valRet = type.getFlg();
		}
		
		return getXmlBoolean(ConvertUtil.convertToBooleanAllways(valRet));
	}
	
	public static BigDecimal getXmlFlgDescrizioneDecimaleTypeDecimal(FlgDescrizioneDecimaleType type)
	{
		BigDecimal valRet = null; 
		
		if (type != null)
		{
			valRet = type.getDecimale();
		}
		
		return valRet;
	}
	
	public static String getXmlFlgDescrizioneDecimaleTypeDesc(FlgDescrizioneDecimaleType type)
	{
		String valRet = null; 
		
		if (type != null)
		{
			valRet = type.getDescrizione();
		}
		
		return valRet;
	}
	
	public static XmlBoolean getXmlFlgPercentoDecimaleTypeFlg(FlgPercentoDecimaleType type)
	{
		Boolean valRet = null; 
		
		if (type != null)
		{
			valRet = type.getFlg();
		}
		
		return getXmlBoolean(ConvertUtil.convertToBooleanAllways(valRet));
	}
	
	/*
	public static BigDecimal getXmlFlgPercentoDecimaleTypePerc(FlgPercentoDecimaleType type)
	{
		BigDecimal valRet = null; 
		
		if (type != null)
		{
			valRet = type.getPercento();
		}
		
		return valRet;
	}
	
	public static BigDecimal getXmlFlgPercentoDecimaleTypeDecimal(FlgPercentoDecimaleType type)
	{
		BigDecimal valRet = null; 
		
		if (type != null)
		{
			valRet = type.getDecimale();
		}
		
		return valRet;
	}
	*/
	
	public static XmlBoolean getXmlFlgDescrizioneTypeFlg(FlgDescrizioneType type)
	{
		Boolean valRet = null; 
		
		if (type != null)
		{
			valRet = type.getFlg();
		}
		
		return getXmlBoolean(ConvertUtil.convertToBooleanAllways(valRet));
	}
	
	public static String getXmlFlgDescrizioneTypeDesc(FlgDescrizioneType type)
	{
		String valRet = null; 
		
		if (type != null)
		{
			valRet = type.getDescrizione();
		}
		
		return valRet;
	}
	
	/*
	public static void mapToL1SchedaIdentificativa(L1SchedaIdentificativa dto, DatiSchedaIdentificativaImp datiH2o)
	{
		//BEPPE
		log.debug("[MapDto::mapToL1SchedaIdentificativa] start");

		datiH2o.setL21ContenutoH2OimpClima(dto.getL21ContenutoAcqua());
		datiH2o.setL22DurezzaTotaleH2O(dto.getL22DurezzaAcqua());
		
		if (dto.getL23TrattamentoAcquaAddolcimento() != null)
		{
			datiH2o.setL23DurezzaTotaleH2O(getXmlFlgDecimaleTypeDecimal(dto.getL23TrattamentoAcquaAddolcimento().getFlgDecimaleType())); 
			datiH2o.xsetL23FlagAddolcimento(getXmlFlgDecimaleTypeFlg(dto.getL23TrattamentoAcquaAddolcimento().getFlgDecimaleType()));
		}
		
		datiH2o.xsetL23FlagAssenteH2Oclima(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL23TrattAcquaAssente())));
		datiH2o.xsetL23FlagAssenteProtGelo(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL23TrattAcquaGeloAssente())));
		
		if (dto.getL23TrattAcquaGeloEtilenico() != null)
		{
			datiH2o.xsetL23FlagGlicoleEtilenic(getXmlFlgPercentoDecimaleTypeFlg(dto.getL23TrattAcquaGeloEtilenico().getFlgPercentoDecimaleType()));
			datiH2o.setL23PercConcentrazEtilenic(getXmlFlgPercentoDecimaleTypePerc(dto.getL23TrattAcquaGeloEtilenico().getFlgPercentoDecimaleType()));
			datiH2o.setL23PHconcentrazEtilenic(getXmlFlgPercentoDecimaleTypeDecimal(dto.getL23TrattAcquaGeloEtilenico().getFlgPercentoDecimaleType()));
		}
		
		
		
		if (dto.getL23TrattAcquaGeloPropilenico() != null)
		{
			datiH2o.xsetL23FlagGlicolePropLenic(getXmlFlgPercentoDecimaleTypeFlg(dto.getL23TrattAcquaGeloPropilenico().getFlgPercentoDecimaleType()));
			datiH2o.setL23PercConcentrazPropLenic(getXmlFlgPercentoDecimaleTypePerc(dto.getL23TrattAcquaGeloPropilenico().getFlgPercentoDecimaleType()));
			datiH2o.setL23PHconcentrazPropLenic(getXmlFlgPercentoDecimaleTypeDecimal(dto.getL23TrattAcquaGeloPropilenico().getFlgPercentoDecimaleType()));
			
		}
		
			
		datiH2o.xsetL23FlagCondizChimico(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL23TrattAcquaChimico())));
		datiH2o.xsetL23FlagFiltrazione(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL23TrattAcquaFiltrazione())));
		
		if (dto.getL24TrattamentoAcquaAcsAddolcimento() != null)
		{
			datiH2o.setL24DurezzaTotaleAddolcit(getXmlFlgDecimaleTypeDecimal(dto.getL24TrattamentoAcquaAcsAddolcimento().getFlgDecimaleType()));
			datiH2o.xsetL24FlagAddolcimento(getXmlFlgDecimaleTypeFlg(dto.getL24TrattamentoAcquaAcsAddolcimento().getFlgDecimaleType()));
		}
		
		datiH2o.xsetL24FlagAssente(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL24TrattAcquaAcsAssente())));
		datiH2o.xsetL24FlagCondizChimico(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL24TrattAcquaAcsChimico())));
		datiH2o.xsetL24FlagFiltrazione(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL24TrattAcquaAcsFiltrazione())));
		
		if (dto.getL25CondChimicoAltro() != null)
		{
			datiH2o.setL25CondChimAltro(getXmlFlgDescrizioneTypeDesc(dto.getL25CondChimicoAltro().getFlgDescrizioneType()));
		}
		
		datiH2o.xsetL25FlagAcquaSuperficiale(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25AcquaSuperficiale())));
		datiH2o.xsetL25FlagAcquedotto(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25Acquedotto())));
		
		datiH2o.xsetL25FlagAssente(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25TrattAcquaRaffreddamentoAssente())));
		
		datiH2o.xsetL25FlagCondChimAltro(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL25CondChimicoAltro())));
		datiH2o.xsetL25FlagCondChimAnticorr(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25CondChimicoAnticorrosiva())));
		datiH2o.xsetL25FlagCondChimAnticrosta(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25CondChimicoAnticrostante())));
		datiH2o.xsetL25FlagCondChimAnticrostaAntiCorr(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25CondChimicoAnticrostanteAnticorrosiva())));
		datiH2o.xsetL25FlagCondChimBiocida(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25CondChimicoBioacida())));
		datiH2o.xsetL25FlagCondChimNoTrattam(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25CondChimicoNessunTrattamento())));
		datiH2o.xsetL25FlagCondizChimico(getXmlBoolean(datiH2o.getL25FlagCondChimAltro() || datiH2o.getL25FlagCondChimAnticorr() || datiH2o.getL25FlagCondChimAnticrosta()
				|| datiH2o.getL25FlagCondChimAnticrostaAntiCorr() || datiH2o.getL25FlagCondChimBiocida() || datiH2o.getL25FlagCondChimNoTrattam()));
		
		if (dto.getL25FiltrazioneAltro() != null)
		{
			datiH2o.setL25FiltrazioneAltro(getXmlFlgDescrizioneTypeDesc(dto.getL25FiltrazioneAltro().getFlgDescrizioneType()));
		}
		
		datiH2o.xsetL25FlagFiltrazAltro(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL25FiltrazioneAltro())));
		datiH2o.xsetL25FlagFiltrazMasse(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25FiltrazioneMasse())));
		datiH2o.xsetL25FlagFiltrazNoTrattam(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25FiltrazioneNessunTrattamento())));
		datiH2o.xsetL25FlagFiltrazSicurezza(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25FiltrazioneSicurezza())));
		datiH2o.xsetL25FlagFiltrazione(getXmlBoolean(datiH2o.getL25FlagFiltrazAltro() || datiH2o.getL25FlagFiltrazMasse() ||
				datiH2o.getL25FlagFiltrazNoTrattam() || datiH2o.getL25FlagFiltrazSicurezza()));
		datiH2o.xsetL25FlagPozzo(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25Pozzo())));
		
		
		if (dto.getL25TorreRaffreddamento() != null)
		{
			datiH2o.xsetL25FlagPrefSpurgoAutom(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25TorreRaffreddamento().getL25Flg())));
			
			datiH2o.setL25ConducibH2Oingresso(dto.getL25TorreRaffreddamento().getL25Conducibilita());
			datiH2o.setL25TaraturaSpurgo(dto.getL25TorreRaffreddamento().getL25Taratura());
		}
		
		datiH2o.xsetL25FlagRecupTermParz(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25RecuperoTermicoParziale())));
		datiH2o.xsetL25FlagRecupTermTot(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25RecuperoTermicoTotale())));
		datiH2o.xsetL25FlagSenzaRecupTerm(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25SenzaRecuperoTermico())));
		datiH2o.xsetL25FlagTrattAddolcim(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25TrattAcquaAddolcimento())));
		
		if (dto.getL25TrattAcquaAltro() != null)
		{
			datiH2o.setL25TrattamentoAltro(getXmlFlgDescrizioneTypeDesc(dto.getL25TrattAcquaAltro().getFlgDescrizioneType()));
		}
		
		datiH2o.xsetL25FlagTrattAltro(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL25TrattAcquaAltro())));
		datiH2o.xsetL25FlagTrattDemineralizz(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25TrattAcquaDemineraliz())));
		datiH2o.xsetL25FlagTrattNoTrattam(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25TrattAcquaNessunTrattamento())));
		datiH2o.xsetL25FlagTrattOsmosi(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25TrattAcquaOsmosi())));
		datiH2o.xsetL25FlagTrattamentoH2O(getXmlBoolean(datiH2o.getL25FlagTrattAddolcim() || datiH2o.getL25FlagTrattAltro() || datiH2o.getL25FlagTrattDemineralizz()
				|| datiH2o.getL25FlagTrattNoTrattam() || datiH2o.getL25FlagTrattOsmosi()));

		log.debug("[MapDto::mapToL1SchedaIdentificativa] end");

	}
	*/
	
	public static void mapToL2TrattamentoAcquaImport(L2TrattamentoAcqua dto, DatiSchedaTrattH2O datiH2o)
	{
		log.debug("[MapDto::mapToL2TrattamentoAcquaImport] start");

		datiH2o.setL21ContenutoH2OimpClima(dto.getL21ContenutoAcqua());
		datiH2o.setL22DurezzaTotaleH2O(dto.getL22DurezzaAcqua());
		
		if (GenericUtil.isNotNullOrEmpty(dto.getL23TrattamentoAcquaAddolcimento()))
		{
			datiH2o.xsetL23FlagAddolcimento(getXmlBoolean(true));
			datiH2o.setL23DurezzaTotaleH2O(dto.getL23TrattamentoAcquaAddolcimento()); 
		}
		
		datiH2o.xsetL23FlagAssenteH2Oclima(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL23TrattAcquaAssente())));
		datiH2o.xsetL23FlagAssenteProtGelo(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL23TrattAcquaGeloAssente())));
		
		if (dto.getL23TrattAcquaGeloEtilenico() != null && dto.getL23TrattAcquaGeloEtilenico().getPercentoDecimaleType() != null)
		{
			if (GenericUtil.isNotNullOrEmpty(dto.getL23TrattAcquaGeloEtilenico().getPercentoDecimaleType().getPercento()))
			{
				datiH2o.xsetL23FlagGlicoleEtilenic(getXmlBoolean(true));
				datiH2o.setL23PercConcentrazEtilenic(dto.getL23TrattAcquaGeloEtilenico().getPercentoDecimaleType().getPercento());
			}
			
			if (GenericUtil.isNotNullOrEmpty(dto.getL23TrattAcquaGeloEtilenico().getPercentoDecimaleType().getPh()))
			{
				datiH2o.xsetL23FlagGlicoleEtilenic(getXmlBoolean(true));
				datiH2o.setL23PHconcentrazEtilenic(dto.getL23TrattAcquaGeloEtilenico().getPercentoDecimaleType().getPh());
			}
			
			
		}
		
		
		if (dto.getL23TrattAcquaGeloPropilenico() != null && dto.getL23TrattAcquaGeloPropilenico().getPercentoDecimaleType() != null)
		{
			if (GenericUtil.isNotNullOrEmpty(dto.getL23TrattAcquaGeloPropilenico().getPercentoDecimaleType().getPercento()))
			{
				datiH2o.xsetL23FlagGlicolePropLenic(getXmlBoolean(true));
				datiH2o.setL23PercConcentrazPropLenic(dto.getL23TrattAcquaGeloPropilenico().getPercentoDecimaleType().getPercento());
			}
			
			if (GenericUtil.isNotNullOrEmpty(dto.getL23TrattAcquaGeloPropilenico().getPercentoDecimaleType().getPh()))
			{
				datiH2o.xsetL23FlagGlicolePropLenic(getXmlBoolean(true));
				datiH2o.setL23PHconcentrazPropLenic(dto.getL23TrattAcquaGeloPropilenico().getPercentoDecimaleType().getPh());
			}
		}
		
		datiH2o.xsetL23FlagCondizChimico(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL23TrattAcquaChimico())));
		datiH2o.xsetL23FlagFiltrazione(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL23TrattAcquaFiltrazione())));
		
		if (GenericUtil.isNotNullOrEmpty(dto.getL24TrattamentoAcquaAcsAddolcimento()))
		{
			datiH2o.xsetL24FlagAddolcimento(getXmlBoolean(true));
			datiH2o.setL24DurezzaTotaleAddolcit(dto.getL24TrattamentoAcquaAcsAddolcimento());
		}
		
		datiH2o.xsetL24FlagAssente(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL24TrattAcquaAcsAssente())));
		datiH2o.xsetL24FlagCondizChimico(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL24TrattAcquaAcsChimico())));
		datiH2o.xsetL24FlagFiltrazione(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL24TrattAcquaAcsFiltrazione())));
		
		
		datiH2o.xsetL25FlagAssente(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25TrattAcquaRaffreddamentoAssente())));
		
		datiH2o.xsetL25FlagSenzaRecupTerm(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25SenzaRecuperoTermico())));
		datiH2o.xsetL25FlagRecupTermParz(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25RecuperoTermicoParziale())));
		datiH2o.xsetL25FlagRecupTermTot(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25RecuperoTermicoTotale())));
		
		
		datiH2o.xsetL25FlagAcquedotto(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25Acquedotto())));
		datiH2o.xsetL25FlagPozzo(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25Pozzo())));
		datiH2o.xsetL25FlagAcquaSuperficiale(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25AcquaSuperficiale())));

		
		datiH2o.xsetL25FlagFiltrazSicurezza(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25FiltrazioneSicurezza())));
		datiH2o.xsetL25FlagFiltrazMasse(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25FiltrazioneMasse())));
		
		if (GenericUtil.isNotNullOrEmpty(dto.getL25FiltrazioneAltro()))
		{
			datiH2o.xsetL25FlagFiltrazAltro(getXmlBoolean(true));
			datiH2o.setL25FiltrazioneAltro(dto.getL25FiltrazioneAltro());
		}
		
		datiH2o.xsetL25FlagFiltrazNoTrattam(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25FiltrazioneNessunTrattamento())));

		datiH2o.xsetL25FlagFiltrazione(getXmlBoolean(datiH2o.getL25FlagFiltrazAltro() || datiH2o.getL25FlagFiltrazMasse() ||
				datiH2o.getL25FlagFiltrazNoTrattam() || datiH2o.getL25FlagFiltrazSicurezza()));

		
		
		datiH2o.xsetL25FlagTrattAddolcim(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25TrattAcquaAddolcimento())));
		datiH2o.xsetL25FlagTrattOsmosi(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25TrattAcquaOsmosi())));
		datiH2o.xsetL25FlagTrattDemineralizz(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25TrattAcquaDemineraliz())));

		if (GenericUtil.isNotNullOrEmpty(dto.getL25TrattAcquaAltro()))
		{
			datiH2o.xsetL25FlagTrattAltro(getXmlBoolean(true));
			datiH2o.setL25TrattamentoAltro(dto.getL25TrattAcquaAltro());
		}

		datiH2o.xsetL25FlagTrattNoTrattam(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25TrattAcquaNessunTrattamento())));

		datiH2o.xsetL25FlagTrattamentoH2O(getXmlBoolean(datiH2o.getL25FlagTrattAddolcim() || datiH2o.getL25FlagTrattAltro() || datiH2o.getL25FlagTrattDemineralizz()
				|| datiH2o.getL25FlagTrattNoTrattam() || datiH2o.getL25FlagTrattOsmosi()));
		

		datiH2o.xsetL25FlagCondChimAnticrosta(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25CondChimicoAnticrostante())));
		datiH2o.xsetL25FlagCondChimAnticorr(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25CondChimicoAnticorrosiva())));
		datiH2o.xsetL25FlagCondChimAnticrostaAntiCorr(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25CondChimicoAnticrostanteAnticorrosiva())));
		datiH2o.xsetL25FlagCondChimBiocida(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25CondChimicoBioacida())));
		
		if (GenericUtil.isNotNullOrEmpty(dto.getL25CondChimicoAltro()))
		{
			datiH2o.xsetL25FlagCondChimAltro(getXmlBoolean(true));
			datiH2o.setL25CondChimAltro(dto.getL25CondChimicoAltro());
		}
		
		datiH2o.xsetL25FlagCondChimNoTrattam(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25CondChimicoNessunTrattamento())));

		datiH2o.xsetL25FlagCondizChimico(getXmlBoolean(datiH2o.getL25FlagCondChimAltro() || datiH2o.getL25FlagCondChimAnticorr() || datiH2o.getL25FlagCondChimAnticrosta()
				|| datiH2o.getL25FlagCondChimAnticrostaAntiCorr() || datiH2o.getL25FlagCondChimBiocida() || datiH2o.getL25FlagCondChimNoTrattam()));
		


		if (dto.getL25TorreRaffreddamento() != null)
		{
			if (GenericUtil.isNotNullOrEmpty(dto.getL25TorreRaffreddamento().getL25Conducibilita()))
			{

				datiH2o.xsetL25FlagPrefSpurgoAutom(getXmlBoolean(true));

				datiH2o.setL25ConducibH2Oingresso(dto.getL25TorreRaffreddamento().getL25Conducibilita());
			}

			if (GenericUtil.isNotNullOrEmpty(dto.getL25TorreRaffreddamento().getL25Taratura()))
			{

				datiH2o.xsetL25FlagPrefSpurgoAutom(getXmlBoolean(true));

				datiH2o.setL25TaraturaSpurgo(dto.getL25TorreRaffreddamento().getL25Taratura());
			}
		}

		log.debug("[MapDto::mapToL2TrattamentoAcquaImport] end");

	}
	
	public static void mapToL5SistRegCont(L5SistemiRegolazioneContabilizzazione l5SistRegCont, RegolazionePrimaria regolazionePrimaria) {
		if(l5SistRegCont!=null)
		{
			regolazionePrimaria.setL51DescrSistema(l5SistRegCont.getL51DescrizioneAltroSistemaRegolazione());
			regolazionePrimaria.xsetL51FlagAltriSistRegPrim(getXmlBoolean(ConvertUtil.convertToBooleanAllways(l5SistRegCont.getL51FlagAltroSistemaRegolazione())));
			regolazionePrimaria.xsetL51FlagRegInverter(getXmlBoolean(ConvertUtil.convertToBooleanAllways(l5SistRegCont.getL51FlagSistemaRegolazioneInverter())));
			regolazionePrimaria.xsetL51FlagRegMultiGrad(getXmlBoolean(ConvertUtil.convertToBooleanAllways(l5SistRegCont.getL51FlagSistemaRegolazioneMultigradino())));
			regolazionePrimaria.xsetL51FlagRegolazCurvaIndipen(getXmlBoolean(ConvertUtil.convertToBooleanAllways(l5SistRegCont.getL51FlagRegolazioneCurvaIndipendente())));
			regolazionePrimaria.xsetL51FlagRegolazCurvaIntegr(getXmlBoolean(ConvertUtil.convertToBooleanAllways(l5SistRegCont.getL51FlagRegolazioneCurvaIntegrata())));
			regolazionePrimaria.xsetL51FlagRegolazOnOff(getXmlBoolean(ConvertUtil.convertToBooleanAllways(l5SistRegCont.getL51FlagRegolazioneOnOff())));
			regolazionePrimaria.xsetL51FlagValvoleReg(getXmlBoolean(ConvertUtil.convertToBooleanAllways(l5SistRegCont.getL51FlagValvoleRegolazione())));
			
			mapToL5SistRegContSchedaSR(l5SistRegCont.getL51SRList(), regolazionePrimaria.addNewSezSR());
			mapToL5SistRegContSchedaVR(l5SistRegCont.getL51VRList(), regolazionePrimaria.addNewSezVR());
		}
	}
	
	
	public static void mapToL5SistRegContSchedaSR(List<L51SR> srList, SezSR sezSR) {
		log.debug("mapToSchedaSR: START");

		List<RowSR> listSr = new ArrayList<RowSR>();
		RowSR sr = null;
		List<RowSRsost> listSost = new ArrayList<RowSRsost>();
		
		log.debug("mapping scheda SR");
		int numInProgr = 1;
		
		for (int i=0; i<srList.size();i++) {
			log.debug("i="+i +", posInProgr = " + numInProgr);
			
			L51SR dto = srList.get(i);
			
			sr = mapToRowSR(dto.getL51SistemaRegolazione(), dto.getL51Numero());

			
			List<L51SistemaRegolazioneSostituito> l51SRSostList = dto.getL51SistemaRegolazioneSostituitoList();
			if (l51SRSostList != null && l51SRSostList.size() > 0)
			{
				for (L51SistemaRegolazioneSostituito l51SistemaRegolazioneSostituito : l51SRSostList) {
					
					listSost.add(mapToRowSRSost(l51SistemaRegolazioneSostituito));
					
				}
				sr.addNewSezSRsostituite();
				sr.getSezSRsostituite().getRowSRsostList().addAll(listSost);
				listSost = new ArrayList<RowSRsost>();
				
			}
			
			listSr.add(sr);
			
		}
		sezSR.getRowSRList().addAll(listSr);

		log.debug("mapToSchedaSR: END");
	}
	
	public static void mapToL5SistRegContSchedaVR(List<L51VR> vrList, SezVR sezVR) {
		log.debug("mapToSchedaSR: START");

		List<RowVR> listVr = new ArrayList<RowVR>();
		RowVR vr = null;
		List<RowVRsost> listSost = new ArrayList<RowVRsost>();
		
		
		log.debug("mapping scheda SR");
		
		int numInProgr = 1;
		
		for (int i=0; i<vrList.size();i++) {
			
			log.debug("i="+i +", posInProgr = " + numInProgr);
			
			L51VR dto = vrList.get(i);
			
			vr = mapToRowVR(dto.getL51ValvolaRegolazione(), dto.getL51Numero());

			
			List<L51ValvolaRegolazioneSostituito> l51VRSostList = dto.getL51ValvolaRegolazioneSostituitoList();
			if (l51VRSostList != null && l51VRSostList.size() > 0)
			{
				for (L51ValvolaRegolazioneSostituito l51ValvolaRegolazioneSostituito : l51VRSostList) {
					
					listSost.add(mapToRowVRSost(l51ValvolaRegolazioneSostituito));
					
				}
				vr.addNewSezVRsostituite();
				vr.getSezVRsostituite().getRowVRsostList().addAll(listSost);
				listSost.clear();
			}
			
			listVr.add(vr);
		}
		sezVR.getRowVRList().addAll(listVr);
			
		log.debug("mapToSchedaSR: END");
	}
	
	private static RowSR mapToRowSR(L51SistemaRegolazione dto, BigInteger progressivo) {
		RowSR row = RowSR.Factory.newInstance();
		row.setL51DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL51DataDismissione()));
		row.setL51DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL51DataInstallazione()));
		row.setL51Fabbricante(ConvertUtil.convertToString(dto.getL51Fabbricante()));
		row.setL51Modello(dto.getL51Modello());
		
		if (dto.getL51NumeroLivelliTemp() != 0)
		{
			row.setL51NumLivTemp(ConvertUtil.convertToBigInteger(dto.getL51NumeroLivelliTemp()));
		}
		
		if (dto.getL51NumeroPuntiRegolazione() != 0)
		{
			row.setL51NumPuntiReg(ConvertUtil.convertToBigInteger(dto.getL51NumeroPuntiRegolazione()));
		}
		
		row.setL51NumSR(progressivo);
		
		row.xsetFlagDismissione(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL51DataDismissione())));
		return row;
	}

	private static RowSRsost mapToRowSRSost(L51SistemaRegolazioneSostituito dto) {
		RowSRsost row = RowSRsost.Factory.newInstance();
		row.setL51DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL51DataDismissione()));
		row.setL51DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL51DataInstallazione()));
		row.setL51Fabbricante(ConvertUtil.convertToString(dto.getL51Fabbricante()));
		row.setL51Modello(dto.getL51Modello());

		if (dto.getL51NumeroLivelliTemp() != 0)
		{
			row.setL51NumLivTemp(ConvertUtil.convertToBigInteger(dto.getL51NumeroLivelliTemp()));
		}
		
		if (dto.getL51NumeroPuntiRegolazione() != 0)
		{
			row.setL51NumPuntiReg(ConvertUtil.convertToBigInteger(dto.getL51NumeroPuntiRegolazione()));
		}
		
		return row;
	}
	
	private static RowVR mapToRowVR(L51ValvolaRegolazione dto, BigInteger progressivo) {
		RowVR row = RowVR.Factory.newInstance();
		row.setL51DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL51DataDismissione()));
		row.setL51DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL51DataInstallazione()));
		row.setL51Fabbricante(ConvertUtil.convertToString(dto.getL51Fabbricante()));
		row.setL51Modello(dto.getL51Modello());
		
		if (dto.getL51NumeroVie() != 0)
		{
			row.setL51NumVie(ConvertUtil.convertToBigInteger(dto.getL51NumeroVie()));
		}
		
		row.setL51Servomotore(dto.getL51Servomotore());
		row.setL51NumVR(progressivo);
		
		row.xsetFlagDismissione(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL51DataDismissione())));
		return row;
	}

	private static RowVRsost mapToRowVRSost(L51ValvolaRegolazioneSostituito dto) {
		RowVRsost row = RowVRsost.Factory.newInstance();
		row.setL51DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL51DataDismissione()));
		row.setL51DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL51DataInstallazione()));
		row.setL51Fabbricante(ConvertUtil.convertToString(dto.getL51Fabbricante()));
		row.setL51Modello(dto.getL51Modello());

		if (dto.getL51NumeroVie() != 0)
		{
			row.setL51NumVie(ConvertUtil.convertToBigInteger(dto.getL51NumeroVie()));
		}
		
		row.setL51Servomotore(dto.getL51Servomotore());
		return row;
	}
	
	private static RowAC mapToRowAC(L81Accumulo dto, BigInteger progressivo) {
		RowAC row = RowAC.Factory.newInstance();
		row.setL81DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL81DataInstallazione()));
		row.setL81DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL81DataDismissione()));
		
		if (dto.getL81Fabbricante() != 0)
		{
			row.setL81Fabbricante(ConvertUtil.convertToString(dto.getL81Fabbricante()));
		}
		
		row.setL81Modello(dto.getL81Modello());
		row.setL81Matricola(dto.getL81Matricola());
		row.setL81Capacita(dto.getL81Capacita());
		
		row.xsetL81FlagACS(getXmlBoolean(dto.getL81ACS()));

		row.xsetL81FlagRiscald(getXmlBoolean(dto.getL81Riscaldamento()));
		row.xsetL81FlagRaffresc(getXmlBoolean(dto.getL81Raffrescamento()));
		
		if (dto.xgetL81CoibentazioneAssente() != null)
		{
			row.xsetL81FlagCoibentNO(getXmlBoolean(dto.getL81CoibentazioneAssente()));
			row.xsetL81FlagCoibentSI(getXmlBoolean(!dto.getL81CoibentazioneAssente()));
		}
		
		row.setL81NumAC(progressivo);
		
		row.xsetFlagDismissione(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL81DataDismissione())));
		return row;
	}

	private static RowACsost mapToRowACSost(L81AccumuloSostituito dto) {
		RowACsost row = RowACsost.Factory.newInstance();
		row.setL81DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL81DataInstallazione()));
		row.setL81DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL81DataDismissione()));
		
		if (dto.getL81Fabbricante() != 0)
		{
			row.setL81Fabbricante(ConvertUtil.convertToString(dto.getL81Fabbricante()));
		}
		
		row.setL81Modello(dto.getL81Modello());
		row.setL81Matricola(dto.getL81Matricola());
		row.setL81Capacita(dto.getL81Capacita());
		
		row.xsetL81FlagACS(getXmlBoolean(dto.getL81ACS()));

		row.xsetL81FlagRiscald(getXmlBoolean(dto.getL81Riscaldamento()));
		row.xsetL81FlagRaffresc(getXmlBoolean(dto.getL81Raffrescamento()));
		
		if (dto.xgetL81CoibentazioneAssente() != null)
		{
			row.xsetL81FlagCoibentNO(getXmlBoolean(dto.getL81CoibentazioneAssente()));
			row.xsetL81FlagCoibentSI(getXmlBoolean(!dto.getL81CoibentazioneAssente()));
		}
		
		return row;
	}
	
	public static void mapToL5SistRegCont(L5SistemiRegolazioneContabilizzazione l5SistRegCont, RegolazioneSingoloAmb singAmb) {
		
		try
		{
		singAmb.xsetL52FlagControlEntalpico(getXmlBoolean(ConvertUtil.convertToBooleanAllways(l5SistRegCont.getL52ControlloEntalpico())));
		singAmb.xsetL52FlagControlPortata(getXmlBoolean(ConvertUtil.convertToBooleanAllways(l5SistRegCont.getL52ControlloPortata())));
		singAmb.xsetL52FlagTermostatoOnOff(getXmlBoolean(ConvertUtil.convertToBooleanAllways(l5SistRegCont.getL52TermostatoControlloOnOff())));
		singAmb.xsetL52FlagTermostatoProporz(getXmlBoolean(ConvertUtil.convertToBooleanAllways(l5SistRegCont.getL52TermostatoControlloProporzionale())));
		
		singAmb.xsetL52FlagValvDueVieNO(getXmlBoolean(ConvertUtil.convertToBooleanAllways(!l5SistRegCont.getL52Valvole2ViePresenti())));
		singAmb.xsetL52FlagValvDueVieSI(getXmlBoolean(ConvertUtil.convertToBooleanAllways(l5SistRegCont.getL52Valvole2ViePresenti())));
		
		singAmb.xsetL52FlagValvTermostNO(getXmlBoolean(ConvertUtil.convertToBooleanAllways(!l5SistRegCont.getL52ValvoleTermostatichePresenti())));
		singAmb.xsetL52FlagValvTermostSI(getXmlBoolean(ConvertUtil.convertToBooleanAllways(l5SistRegCont.getL52ValvoleTermostatichePresenti())));
		
		singAmb.xsetL52FlagValvTreVieNO(getXmlBoolean(ConvertUtil.convertToBooleanAllways(!l5SistRegCont.getL52Valvole3ViePresenti())));
		singAmb.xsetL52FlagValvTreVieSI(getXmlBoolean(ConvertUtil.convertToBooleanAllways(l5SistRegCont.getL52Valvole3ViePresenti())));
		
		singAmb.setL52Note(l5SistRegCont.getL52Note());
		
		singAmb.xsetL53FlagTeleGestioneNO(getXmlBoolean(!l5SistRegCont.getL53TelegestionePresenti()));
		singAmb.xsetL53FlagTeleGestioneSI(getXmlBoolean(l5SistRegCont.getL53TelegestionePresenti()));
		
		singAmb.xsetL53FlagTeleLetturaNO(getXmlBoolean(!l5SistRegCont.getL53TeleletturaPresenti()));
		singAmb.xsetL53FlagTeleLetturaSI(getXmlBoolean(l5SistRegCont.getL53TeleletturaPresenti()));
		
		singAmb.setL53DescrSistema(l5SistRegCont.getL53DescSistemaPrimaInstall());
		try{singAmb.setL53DataSostituzione(ConvertUtil.convertToXmlCalendar(l5SistRegCont.getL53DataSostituzione()));}catch(Exception e){singAmb.setL53DataSostituzione(null);}
		singAmb.setL53DescrSistemaSost(l5SistRegCont.getL53DescSistemaSost());
		
		singAmb.xsetL54FlagUIcontabilizzNO(getXmlBoolean(l5SistRegCont.getL54UIContabilizzateNO()));
		
		if (l5SistRegCont.getL54UIContabilizzateSI() != null)
		{
			singAmb.xsetL54FlagUIcontabilizzSI(getXmlBoolean(l5SistRegCont.getL54UIContabilizzateSI().getL54Flag()));
			
			singAmb.xsetL54FlagRiscald(getXmlBoolean(ConvertUtil.convertToBooleanAllways(l5SistRegCont.getL54UIContabilizzateSI().getL54Riscaldamento())));
			singAmb.xsetL54FlagRaffresc(getXmlBoolean(ConvertUtil.convertToBooleanAllways(l5SistRegCont.getL54UIContabilizzateSI().getL54Raffrescamento())));
			singAmb.xsetL54FlagACS(getXmlBoolean(ConvertUtil.convertToBooleanAllways(l5SistRegCont.getL54UIContabilizzateSI().getL54Acs())));
		}
		
		if (l5SistRegCont.xgetL54TipoSistemaDiretto() != null)
		{
			singAmb.xsetL54FlagSistemaDiretto(getXmlBoolean(l5SistRegCont.getL54TipoSistemaDiretto()));
			singAmb.xsetL54FlagSistemaIndiretto(getXmlBoolean(!l5SistRegCont.getL54TipoSistemaDiretto()));
		}
		
		singAmb.setL54DescrSistema(l5SistRegCont.getL54DescSistemaPrimaInstall());

		try{singAmb.setL54DataSostituzione(ConvertUtil.convertToXmlCalendar(l5SistRegCont.getL54DataSostituzione()));}catch(Exception e){singAmb.setL54DataSostituzione(null);}
		singAmb.setL54DescrSistemaSost(l5SistRegCont.getL54DescSistemaSost());
		
		}catch (Exception x)
		{
			x.printStackTrace();
		}
	}
	
	public static void mapToL6SistDistribuzione(L6SistemiDistribuzione l6SistDistrib, DatiSchedaSistemiDistrib sistDistrib) {
		
		if (l6SistDistrib.getL61TipoDistribuzione() != null)
		{
			switch (l6SistDistrib.getL61TipoDistribuzione().intValue()) {
			case 1: sistDistrib.xsetL61FlagVerticale(getXmlBoolean(true));
				break;
			case 2: sistDistrib.xsetL61FlagOrizzontale(getXmlBoolean(true));
				break;
			case 3: sistDistrib.xsetL61FlagCanaliAria(getXmlBoolean(true));
				break;
			}
		}
		
//		sistDistrib.xsetL61FlagVerticale(getXmlBoolean(l6SistDistrib.getL61DistribuzioneVerticale()));		
//		sistDistrib.xsetL61FlagOrizzontale(getXmlBoolean(l6SistDistrib.getL61DistribuzioneOrizzontale()));		
//		sistDistrib.xsetL61FlagCanaliAria(getXmlBoolean(l6SistDistrib.getL61DistribuzioneCanali()));
		
		if (GenericUtil.isNotNullOrEmpty(l6SistDistrib.getL61DistribuzioneAltro()))
		{
			sistDistrib.xsetL61FlagAltro(getXmlBoolean(true));
			sistDistrib.setL61DescrAltro(l6SistDistrib.getL61DistribuzioneAltro());		
		}
		
		if (l6SistDistrib.xgetL62CoibentazioneAssente() != null)
		{
			sistDistrib.xsetL62FlagCoibentNO(getXmlBoolean(l6SistDistrib.getL62CoibentazioneAssente()));
			sistDistrib.xsetL62FlagCoibentSI(getXmlBoolean(!l6SistDistrib.getL62CoibentazioneAssente()));
		}
		
		sistDistrib.setL62Note(l6SistDistrib.getL62Note());
		
		
		//sistDistrib.setL63Note(l6SistDistrib.getL63);
		
		List<L63VX> vxList = l6SistDistrib.getL63VXList();
		if(vxList!=null && !vxList.isEmpty())
		{
			MapDto.mapToL63Vasi(sistDistrib.addNewSezVasi(), vxList);
		}
		
		//PO
		List<L64PO> poList = l6SistDistrib.getL64POList();
		if(poList!=null && !poList.isEmpty())
		{
			MapDto.mapToL64PO(sistDistrib.addNewSezPO(), poList);
		}
		
		
		
	}
	
	
	public static void mapToL7SistDistribuzione(L7SistemiEmissione l6SistDistrib, DatiSchedaSistemaEmissione sistEmiss) {
		
		
		sistEmiss.xsetL7FlagRadiatori(getXmlBoolean(l6SistDistrib.getL71Radiatori()));
		sistEmiss.xsetL7FlagTermoConvett(getXmlBoolean(l6SistDistrib.getL71Termoconvettori()));
		sistEmiss.xsetL7FlagVentilConvett(getXmlBoolean(l6SistDistrib.getL71Ventilconvettori()));
		sistEmiss.xsetL7FlagPannelRadianti(getXmlBoolean(l6SistDistrib.getL71PanelliRadianti()));
		sistEmiss.xsetL7FlagBocchette(getXmlBoolean(l6SistDistrib.getL71Bocchette()));
		sistEmiss.xsetL7FlagStrisce(getXmlBoolean(l6SistDistrib.getL71StrisceRadianti()));
		sistEmiss.xsetL7FlagTravi(getXmlBoolean(l6SistDistrib.getL71TraviFredde()));
		
		
		if (GenericUtil.isNotNullOrEmpty(l6SistDistrib.getL71Altro()))
		{
			sistEmiss.xsetL7FlagAltro(getXmlBoolean(true));	
			sistEmiss.setL7DescrAltro(l6SistDistrib.getL71Altro());
		}
		
	}

	
	public static void mapToL8SistAccSezAC(List<L81AC> vrList, SezAC sezVR) {
		log.debug("mapToL8SistAccSezAC: START");
		List<RowAC> listVr = new ArrayList<RowAC>();
		RowAC vr = null;
		
		List<RowACsost> listSost = new ArrayList<RowACsost>();
		
		for (int i=0; i<vrList.size();i++) {
			
			
			L81AC dto = vrList.get(i);
			
			vr = mapToRowAC(dto.getL81Accumulo(), dto.getL81Numero());

			
			List<L81AccumuloSostituito> l81ACSostList = dto.getL81AccumuloSostituitoList();
			if (l81ACSostList != null && l81ACSostList.size() > 0)
			{
				for (L81AccumuloSostituito l81ACSost : l81ACSostList) {
					
					listSost.add(mapToRowACSost(l81ACSost));
					
				}
				vr.addNewSezACsostituite();
				vr.getSezACsostituite().getRowACsostList().addAll(listSost);
				listSost.clear();
			}
			
			listVr.add(vr);
		}
		sezVR.getRowACList().addAll(listVr);
			
		log.debug("mapToL8SistAccSezAC: END");
	}
	
	public static void mapToL9AltriCompSezTE(List<L91TE> vrList, SezTE sezTE) {
		log.debug("mapToL9AltriCompSezTE: START");
		List<RowTE> listVr = new ArrayList<RowTE>();
		RowTE vr = null;
		
		List<RowTEsost> listSost = new ArrayList<RowTEsost>();
		
		for (int i=0; i<vrList.size();i++) {
			
			
			L91TE dto = vrList.get(i);
			
			vr = mapToRowTE(dto.getL91Torre(), dto.getL91Numero());

			
			List<L91TorreSostituito> l91TESostList = dto.getL91TorreSostituitoList();
			if (l91TESostList != null && l91TESostList.size() > 0)
			{
				for (L91TorreSostituito l91TESost : l91TESostList) {
					
					listSost.add(mapToRowTESost(l91TESost));
					
				}
				vr.addNewSezTEsostituite();
				vr.getSezTEsostituite().getRowTEsostList().addAll(listSost);
				listSost.clear();
			}
			
			listVr.add(vr);
		}
		sezTE.getRowTEList().addAll(listVr);
			
		log.debug("mapToL9AltriCompSezTE: END");
	}

	private static RowTE mapToRowTE(L91Torre dto, BigInteger progressivo) {
		RowTE row = RowTE.Factory.newInstance();
		row.setL91DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL91DataInstallazione()));
		row.setL91DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL91DataDismissione()));
		if (dto.getL91Fabbricante() != 0)
		{
			row.setL91Fabbricante(ConvertUtil.convertToString(dto.getL91Fabbricante()));
		}
		row.setL91Modello(dto.getL91Modello());
		row.setL91Matricola(dto.getL91Matricola());
		row.setL91Capacita(dto.getL91Capacita());
		
		if (dto.getL91NumeroVentilatori() != 0)
		{
			row.setL91NumVentilatori(ConvertUtil.convertToBigDecimal(dto.getL91NumeroVentilatori()));
		}
		
		row.setL91TipoVentilatori(dto.getL91TipoVentilatori());
		
		row.setL91NumTE(progressivo);
		
		row.xsetFlagDismissione(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL91DataDismissione())));
		return row;
	}

	private static RowTEsost mapToRowTESost(L91TorreSostituito dto) {
		RowTEsost row = RowTEsost.Factory.newInstance();
		row.setL91DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL91DataInstallazione()));
		row.setL91DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL91DataDismissione()));
		if (dto.getL91Fabbricante() != 0)
		{
			row.setL91Fabbricante(ConvertUtil.convertToString(dto.getL91Fabbricante()));
		}
		row.setL91Modello(dto.getL91Modello());
		row.setL91Matricola(dto.getL91Matricola());
		row.setL91Capacita(dto.getL91Capacita());
		
		if (dto.getL91NumeroVentilatori() != 0)
		{
			row.setL91NumVentilatori(ConvertUtil.convertToBigDecimal(dto.getL91NumeroVentilatori()));
		}
		
		row.setL91TipoVentilatori(dto.getL91TipoVentilatori());
		
		return row;
	}
	
	
	public static void mapToL9AltriCompSezRV(List<L92RV> vrList, SezRV sezRV) {
		log.debug("mapToL9AltriCompSezRV: START");
		List<RowRV> listVr = new ArrayList<RowRV>();
		RowRV vr = null;
		
		List<RowRVsost> listSost = new ArrayList<RowRVsost>();
		
		for (int i=0; i<vrList.size();i++) {
			
			
			L92RV dto = vrList.get(i);
			
			vr = mapToRowRV(dto.getL92Raffreddatore(), dto.getL92Numero());

			
			List<L92RaffreddatoreSostituito> l92RVSostList = dto.getL92RaffreddatoreSostituitoList();
			if (l92RVSostList != null && l92RVSostList.size() > 0)
			{
				for (L92RaffreddatoreSostituito l92RVSost : l92RVSostList) {
					
					listSost.add(mapToRowRVSost(l92RVSost));
					
				}
				vr.addNewSezRVsostituite();
				vr.getSezRVsostituite().getRowRVsostList().addAll(listSost);
				listSost.clear();
			}
			
			listVr.add(vr);
		}
		sezRV.getRowRVList().addAll(listVr);
			
		log.debug("mapToL9AltriCompSezRV: END");
	}

	private static RowRV mapToRowRV(L92Raffreddatore dto, BigInteger progressivo) {
		RowRV row = RowRV.Factory.newInstance();
		row.setL92DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL92DataInstallazione()));
		row.setL92DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL92DataDismissione()));
		if (dto.getL92Fabbricante() != 0)
		{
			row.setL92Fabbricante(ConvertUtil.convertToString(dto.getL92Fabbricante()));
		}
		row.setL92Modello(dto.getL92Modello());
		row.setL92Matricola(dto.getL92Matricola());
		
		if (dto.getL92NumeroVentilatori() != 0)
		{
			row.setL92NumVentilatori(ConvertUtil.convertToBigDecimal(dto.getL92NumeroVentilatori()));
		}
		row.setL92TipoVentilatori(dto.getL92TipoVentilatori());
		
		row.setL92NumRV(progressivo);
		
		row.xsetFlagDismissione(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL92DataDismissione())));
		return row;
	}

	private static RowRVsost mapToRowRVSost(L92RaffreddatoreSostituito dto) {
		RowRVsost row = RowRVsost.Factory.newInstance();
		row.setL92DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL92DataInstallazione()));
		row.setL92DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL92DataDismissione()));
		if (dto.getL92Fabbricante() != 0)
		{
			row.setL92Fabbricante(ConvertUtil.convertToString(dto.getL92Fabbricante()));
		}
		row.setL92Modello(dto.getL92Modello());
		row.setL92Matricola(dto.getL92Matricola());
		
		if (dto.getL92NumeroVentilatori() != 0)
		{
			row.setL92NumVentilatori(ConvertUtil.convertToBigDecimal(dto.getL92NumeroVentilatori()));
		}
		row.setL92TipoVentilatori(dto.getL92TipoVentilatori());
		
		return row;
	}
	
	
	public static void mapToL9AltriCompSezSC(List<L93SCX> vrList, it.csi.sigit.sigitwebn.xml.libretto.data.DatiAltriComponentiSCDocument.DatiAltriComponentiSC.SezSC sezSC) {
		log.debug("mapToL9AltriCompSezSC: START");
		List<RowSCcal> listVr = new ArrayList<RowSCcal>();
		RowSCcal vr = null;
		
		List<RowSCcalsost> listSost = new ArrayList<RowSCcalsost>();
		
		for (int i=0; i<vrList.size();i++) {
			
			
			L93SCX dto = vrList.get(i);
			
			vr = mapToRowSCcal(dto.getL93ScambiatoreIntermedio(), dto.getL93Numero());

			
			List<L93ScambiatoreIntermedioSostituito> l92SCXSostList = dto.getL93ScambiatoreIntermedioSostituitoList();
			if (l92SCXSostList != null && l92SCXSostList.size() > 0)
			{
				for (L93ScambiatoreIntermedioSostituito l93SCSost : l92SCXSostList) {
					
					listSost.add(mapToRowSCcalSost(l93SCSost));
					
				}
				vr.addNewSezSCsostituite();
				vr.getSezSCsostituite().getRowSCcalsostList().addAll(listSost);
				listSost.clear();
			}
			
			listVr.add(vr);
		}
		sezSC.getRowSCcalList().addAll(listVr);
			
		log.debug("mapToL9AltriCompSezSC: END");
	}

	private static RowSCcal mapToRowSCcal(L93ScambiatoreIntermedio dto, BigInteger progressivo) {
		RowSCcal row = RowSCcal.Factory.newInstance();
		row.setL93DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL93DataInstallazione()));
		row.setL93DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL93DataDismissione()));
		
		if (dto.getL93Fabbricante() != 0)
		{
			row.setL93Fabbricante(ConvertUtil.convertToString(dto.getL93Fabbricante()));
		}
		row.setL93Modello(dto.getL93Modello());
		
		row.setL93NumSC(progressivo);
		
		row.xsetFlagDismissione(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL93DataDismissione())));
		return row;
	}

	private static RowSCcalsost mapToRowSCcalSost(L93ScambiatoreIntermedioSostituito dto) {
		RowSCcalsost row = RowSCcalsost.Factory.newInstance();
		
		row.setL93DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL93DataInstallazione()));
		row.setL93DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL93DataDismissione()));
		if (dto.getL93Fabbricante() != 0)
		{
			row.setL93Fabbricante(ConvertUtil.convertToString(dto.getL93Fabbricante()));
		}
		row.setL93Modello(dto.getL93Modello());
		
		return row;
	}
	
	
	public static void mapToL9AltriCompSezCI(List<L94CI> ciList, SezCI sezCI) {
		log.debug("mapToL9AltriCompSezCI: START");
		List<RowCI> listVr = new ArrayList<RowCI>();
		RowCI vr = null;
		
		List<RowCIsost> listSost = new ArrayList<RowCIsost>();
		
		for (int i=0; i<ciList.size();i++) {
			
			
			L94CI dto = ciList.get(i);
			
			vr = mapToRowCI(dto.getL94Circuito(), dto.getL94Numero());

			
			List<L94CircuitoSostituito> l94CISostList = dto.getL94CircuitoSostituitoList();
			if (l94CISostList != null && l94CISostList.size() > 0)
			{
				for (L94CircuitoSostituito l94CISost : l94CISostList) {
					
					listSost.add(mapToRowCISost(l94CISost));
					
				}
				vr.addNewSezCIsostituite();
				vr.getSezCIsostituite().getRowCIsostList().addAll(listSost);
				listSost.clear();
			}
			
			listVr.add(vr);
		}
		sezCI.getRowCIList().addAll(listVr);
			
		log.debug("mapToL9AltriCompSezCI: END");
	}

	private static RowCI mapToRowCI(L94Circuito dto, BigInteger progressivo) {
		RowCI row = RowCI.Factory.newInstance();
		row.setL94DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL94DataInstallazione()));
		row.setL94DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL94DataDismissione()));
		row.setL94LungCircuito(dto.getL94LunghezzaCircuito());
		row.setL94SuperfScamb(dto.getL94SupScambiatore());
		row.setL94ProfInstallaz(dto.getL94Profondita());
		
		row.setL94NumCI(progressivo);
		
		row.xsetFlagDismissione(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL94DataDismissione())));
		return row;
	}

	private static RowCIsost mapToRowCISost(L94CircuitoSostituito dto) {
		RowCIsost row = RowCIsost.Factory.newInstance();
		row.setL94DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL94DataInstallazione()));
		row.setL94DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL94DataDismissione()));
		row.setL94LungCircuito(dto.getL94LunghezzaCircuito());
		row.setL94SuperfScamb(dto.getL94SupScambiatore());
		row.setL94ProfInstallaz(dto.getL94Profondita());
		
		return row;
	}
	
	
	public static void mapToL9AltriCompSezUT(List<L95UT> vrList, SezUT sezUT) {
		log.debug("mapToL9AltriCompSezUT: START");
		List<RowUT> listVr = new ArrayList<RowUT>();
		RowUT vr = null;

		List<RowUTsost> listSost = new ArrayList<RowUTsost>();

		for (int i=0; i<vrList.size();i++) {


			L95UT dto = vrList.get(i);

			vr = mapToRowUT(dto.getL95UnitaTrattAria(), dto.getL95Numero());


			List<L95UnitaTrattAriaSostituito> l95UTSostList = dto.getL95UnitaTrattAriaSostituitoList();
			if (l95UTSostList != null && l95UTSostList.size() > 0)
			{
				for (L95UnitaTrattAriaSostituito l95UTSost : l95UTSostList) {

					listSost.add(mapToRowUTSost(l95UTSost));

				}
				vr.addNewSezUTsostituite();
				vr.getSezUTsostituite().getRowUTsostList().addAll(listSost);
				listSost.clear();
			}

			listVr.add(vr);
		}
		sezUT.getRowUTList().addAll(listVr);

		log.debug("mapToL9AltriCompSezUT: END");
	}

	private static RowUT mapToRowUT(L95UnitaTrattAria dto, BigInteger progressivo) {
		RowUT row = RowUT.Factory.newInstance();
		row.setL95DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL95DataInstallazione()));
		row.setL95DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL95DataDismissione()));
		if (dto.getL95Fabbricante() != 0)
		{
			row.setL95Fabbricante(ConvertUtil.convertToString(dto.getL95Fabbricante()));
		}
		row.setL95Modello(dto.getL95Modello());
		row.setL95Matricola(dto.getL95Matricola());
		
		row.setL95PortataVentMandata(dto.getL95PortataMandata());
		row.setL95PortataVentRipresa(dto.getL95PortataRipresa());
		
		row.setL95PotenzaVentMandata(dto.getL95PotenzaMandata());
		row.setL95PotenzaVentRipresa(dto.getL95PotenzaRipresa());
		
		row.setL95NumUT(progressivo);

		row.xsetFlagDismissione(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL95DataDismissione())));
		return row;
	}

	private static RowUTsost mapToRowUTSost(L95UnitaTrattAriaSostituito dto) {
		RowUTsost row = RowUTsost.Factory.newInstance();
		row.setL95DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL95DataInstallazione()));
		row.setL95DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL95DataDismissione()));
		if (dto.getL95Fabbricante() != 0)
		{
			row.setL95Fabbricante(ConvertUtil.convertToString(dto.getL95Fabbricante()));
		}
		row.setL95Modello(dto.getL95Modello());
		row.setL95Matricola(dto.getL95Matricola());
		
		row.setL95PortataVentMandata(dto.getL95PortataMandata());
		row.setL95PortataVentRipresa(dto.getL95PortataRipresa());
		
		row.setL95PotenzaVentMandata(dto.getL95PotenzaMandata());
		row.setL95PotenzaVentRipresa(dto.getL95PotenzaRipresa());
		
		return row;
	}
	
	public static void mapToL9AltriCompSezRC(List<L96RCX> vrList, it.csi.sigit.sigitwebn.xml.libretto.data.DatiAltriComponentiRCDocument.DatiAltriComponentiRC.SezRC sezRC) {
		log.debug("mapToL9AltriCompSezRC: START");
		List<RowRCcal> listVr = new ArrayList<RowRCcal>();
		RowRCcal vr = null;
		
		List<RowRCcalsost> listSost = new ArrayList<RowRCcalsost>();
		
		for (int i=0; i<vrList.size();i++) {
			
			
			L96RCX dto = vrList.get(i);
			
			vr = mapToRowRCcal(dto.getL96RecuperatoreAriaAmb(), dto.getL96Numero());

			
			List<L96RecuperatoreAriaAmbSostituito> l96RCXSostList = dto.getL96RecuperatoreAriaAmbSostituitoList();
			if (l96RCXSostList != null && l96RCXSostList.size() > 0)
			{
				for (L96RecuperatoreAriaAmbSostituito l96RCXSost : l96RCXSostList) {
					
					listSost.add(mapToRowRCcalSost(l96RCXSost));
					
				}
				vr.addNewSezRCsostituite();
				vr.getSezRCsostituite().getRowRCcalsostList().addAll(listSost);
				listSost.clear();
			}
			
			listVr.add(vr);
		}
		sezRC.getRowRCcalList().addAll(listVr);
			
		log.debug("mapToL9AltriCompSezTE: END");
	}

	
	private static RowRCcal mapToRowRCcal(L96RecuperatoreAriaAmb dto, BigInteger progressivo) {
		RowRCcal row = RowRCcal.Factory.newInstance();
		row.setL96DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL96DataInstallazione()));
		row.setL96DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL96DataDismissione()));
		
		row.setL96Tipologia(dto.getL96Tipologia());
		
		if (dto.xgetL96Installato() != null)
		{
			row.xsetL96FlagInstallato(getXmlBoolean(dto.getL96Installato()));
			row.xsetL96FlagIndipendente(getXmlBoolean(!dto.getL96Installato()));
		}
		
		row.setL96PortataVentMandata(dto.getL96PortataMandata());
		row.setL96PortataVentRipresa(dto.getL96PortataRipresa());
		
		row.setL96PotenzaVentMandata(dto.getL96PotenzaMandata());
		row.setL96PotenzaVentRipresa(dto.getL96PotenzaRipresa());
		
		row.setL96NumRC(progressivo);
		
		row.xsetFlagDismissione(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL96DataDismissione())));
		return row;
	}

	private static RowRCcalsost mapToRowRCcalSost(L96RecuperatoreAriaAmbSostituito dto) {
		RowRCcalsost row = RowRCcalsost.Factory.newInstance();
		
		row.setL96DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL96DataInstallazione()));
		row.setL96DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL96DataDismissione()));
		
		row.setL96Tipologia(dto.getL96Tipologia());
		
		if (dto.xgetL96Installato() != null)
		{
			row.xsetL96FlagInstallato(getXmlBoolean(dto.getL96Installato()));
			row.xsetL96FlagIndipendente(getXmlBoolean(!dto.getL96Installato()));
		}
		
		row.setL96PortataVentMandata(dto.getL96PortataMandata());
		row.setL96PortataVentRipresa(dto.getL96PortataRipresa());
		
		row.setL96PotenzaVentMandata(dto.getL96PotenzaMandata());
		row.setL96PotenzaVentRipresa(dto.getL96PotenzaRipresa());
		
		return row;
	}
	


	public static void mapToL10VentilazioneSezVM(List<L101VM> vmList, SezVM sezVM) {
		log.debug("mapToL10VentilazioneSezVM: START");
		List<RowVM> listVm = new ArrayList<RowVM>();
		RowVM vm = null;

		List<RowVMsost> listSost = new ArrayList<RowVMsost>();

		for (int i=0; i<vmList.size();i++) {


			L101VM dto = vmList.get(i);

			vm = mapToRowVM(dto.getL101VentilazioneMeccanica(), dto.getL101Numero());


			List<L101VentilazioneMeccanicaSostituito> l101VMSostList = dto.getL101VentilazioneMeccanicaSostituitoList();
			if (l101VMSostList != null && l101VMSostList.size() > 0)
			{
				for (L101VentilazioneMeccanicaSostituito l101VMSost : l101VMSostList) {

					listSost.add(mapToRowVMSost(l101VMSost));

				}
				vm.addNewSezVMsostituite();
				vm.getSezVMsostituite().getRowVMsostList().addAll(listSost);
				listSost.clear();
			}

			listVm.add(vm);
		}
		sezVM.getRowVMList().addAll(listVm);

		log.debug("mapToL10VentilazioneSezVM: END");
	}

	private static RowVM mapToRowVM(L101VentilazioneMeccanica dto, BigInteger progressivo) {
		RowVM row = RowVM.Factory.newInstance();
		row.setL101DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL101DataInstallazione()));
		row.setL101DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL101DataDismissione()));
		row.setL101Fabbricante(ConvertUtil.convertToString(dto.getL101Fabbricante()));
		row.setL101Modello(dto.getL101Modello());

		if (dto.getL101Tipologia() != null)
		{
			switch (dto.getL101Tipologia().intValue()) {
			case 1: row.xsetL101FlagSolaEstraz(getXmlBoolean(true));
				break;
			case 2: row.xsetL101FlagFlussoIncrociato(getXmlBoolean(true));
				break;
			case 3: row.xsetL101FlagFlussoTermoDinamico(getXmlBoolean(true));
				break;
			}
		}
		
		if (GenericUtil.isNotNullOrEmpty(dto.getL101TipologiaAltro()))
		{
			row.setL101DescrAltro(dto.getL101TipologiaAltro());
			row.xsetL101FlagAltro(getXmlBoolean(true));
		}
		
		row.setL101MaxPortataAria(dto.getL101PortataMax());
		row.setL101RendimentoRecupero(dto.getL101RendimentoRecupero());

		row.setL101NumVM(progressivo);

		row.xsetFlagDismissione(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL101DataDismissione())));
		return row;
	}

	private static RowVMsost mapToRowVMSost(L101VentilazioneMeccanicaSostituito dto) {
		RowVMsost row = RowVMsost.Factory.newInstance();
		row.setL101DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL101DataInstallazione()));
		row.setL101DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL101DataDismissione()));
		row.setL101Fabbricante(ConvertUtil.convertToString(dto.getL101Fabbricante()));
		row.setL101Modello(dto.getL101Modello());

		if (dto.getL101Tipologia() != null)
		{
			switch (dto.getL101Tipologia().intValue()) {
			case 1: row.xsetL101FlagSolaEstraz(getXmlBoolean(true));
				break;
			case 2: row.xsetL101FlagFlussoIncrociato(getXmlBoolean(true));
				break;
			case 3: row.xsetL101FlagFlussoTermoDinamico(getXmlBoolean(true));
				break;
			}
		}
		
		if (GenericUtil.isNotNullOrEmpty(dto.getL101TipologiaAltro()))
		{
			row.setL101DescrAltro(dto.getL101TipologiaAltro());
			row.xsetL101FlagAltro(getXmlBoolean(true));
		}

		row.setL101MaxPortataAria(dto.getL101PortataMax());
		row.setL101RendimentoRecupero(dto.getL101RendimentoRecupero());

		return row;
	}


	public static void mapToL4GeneratoriSezGT(List<L41GT> gtList, SezGruppiTermici sezGT) {
		log.debug("mapToL4GeneratoriSezGT: START");
		List<RowGT> listGt = new ArrayList<RowGT>();
		RowGT vr = null;
		
		List<RowGTsost> listSost = new ArrayList<RowGTsost>();
		
		for (int i=0; i<gtList.size();i++) {
			
			
			L41GT dto = gtList.get(i);
			
			vr = mapToRowGT(dto.getL41GruppoTermico(), dto.getL41Numero());

			
			List<L41GruppoTermicoSostituito> l41GTSostList = dto.getL41GruppoTermicoSostituitoList();
			if (l41GTSostList != null && l41GTSostList.size() > 0)
			{
				for (L41GruppoTermicoSostituito l41GTSost : l41GTSostList) {
					
					listSost.add(mapToRowGTSost(l41GTSost));
					
				}
				vr.addNewSezGTsostituite();
				vr.getSezGTsostituite().getRowGTsostList().addAll(listSost);
				listSost.clear();
			}
			
			listGt.add(vr);
		}
		sezGT.getRowGTList().addAll(listGt);
			
		log.debug("mapToL4GeneratoriSezGT: END");
	}

	private static RowGT mapToRowGT(L41GruppoTermico dto, BigInteger progressivo) {
		RowGT row = RowGT.Factory.newInstance();
		row.setL41DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL41DataInstallazione()));
		row.setL41DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL41DataDismissione()));
		row.setL41Fabbricante(ConvertUtil.convertToString(dto.getL41Fabbricante()));
		row.setL41Modello(dto.getL41Modello());
		row.setL41Matricola(dto.getL41Matricola());
		row.setL41Combustibile(ConvertUtil.convertToString(dto.getL41Combustibile()));
		
		
		row.setL41FluidoTermoVett(ConvertUtil.convertToString(dto.getL41Fluido()));
		
		row.setL41PotTermUtileMax(dto.getL41Potenza());
		row.setL41PercRendimTermUtileMax(dto.getL41Rendimento());
		
		if (dto.getL41TipoGruppoTermico() != null)
		{
			switch (dto.getL41TipoGruppoTermico().intValue()) {
			case 1: row.xsetL41GTsingolo(getXmlBoolean(true));
				break;
			case 2: row.xsetL41TupoRadiante(getXmlBoolean(true));
				break;
			case 3: row.xsetL41GenAriaCalda(getXmlBoolean(true));
				break;
			}
		}
		
//		row.xsetL41GTsingolo(getXmlBoolean(dto.getL41GruppoTermicoSingolo()));
//		row.xsetL41TupoRadiante(getXmlBoolean(dto.getL41TuboNastroRadiante()));
//		row.xsetL41GenAriaCalda(getXmlBoolean(dto.getL41GeneratoreAriaCalda()));
		
		if (dto.getL41NumeroAnalisiFumi() != 0)
		{
			row.xsetL41GTModulare(getXmlBoolean(true));
			row.xsetL41NumAnalisiFumi(getXmlInteger(dto.getL41NumeroAnalisiFumi()));
		}
		
		row.setL41NumGT(progressivo);
		
		row.xsetFlagDismissione(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL41DataDismissione())));
		return row;
	}

	private static RowGTsost mapToRowGTSost(L41GruppoTermicoSostituito dto) {
		RowGTsost row = RowGTsost.Factory.newInstance();
		row.setL41DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL41DataInstallazione()));
		row.setL41DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL41DataDismissione()));
		row.setL41Fabbricante(ConvertUtil.convertToString(dto.getL41Fabbricante()));
		row.setL41Modello(dto.getL41Modello());
		row.setL41Matricola(dto.getL41Matricola());
		row.setL41Combustibile(ConvertUtil.convertToString(dto.getL41Combustibile()));
		
		
		row.setL41FluidoTermoVett(ConvertUtil.convertToString(dto.getL41Fluido()));
		
		row.setL41PotTermUtileMax(dto.getL41Potenza());
		row.setL41PercRendimTermUtileMax(dto.getL41Rendimento());
		
		if (dto.getL41TipoGruppoTermico() != null)
		{
			switch (dto.getL41TipoGruppoTermico().intValue()) {
			case 1: row.xsetL41GTsingolo(getXmlBoolean(true));
				break;
			case 2: row.xsetL41TupoRadiante(getXmlBoolean(true));
				break;
			case 3: row.xsetL41GenAriaCalda(getXmlBoolean(true));
				break;
			}
		}
		
//		row.xsetL41GTsingolo(getXmlBoolean(dto.getL41GruppoTermicoSingolo()));
//		row.xsetL41TupoRadiante(getXmlBoolean(dto.getL41TuboNastroRadiante()));
//		row.xsetL41GenAriaCalda(getXmlBoolean(dto.getL41GeneratoreAriaCalda()));
		
		if (dto.getL41NumeroAnalisiFumi() != 0)
		{
			row.xsetL41GTModulare(getXmlBoolean(true));
			row.xsetL41NumAnalisiFumi(getXmlInteger(dto.getL41NumeroAnalisiFumi()));
		}
		
		
		return row;
	}
	
	public static void mapToL4GeneratoriSezBR(List<L42BR> gtList, SezBR sezBR) {
		log.debug("mapToL4GeneratoriSezGT: START");
		List<RowBR> listBR = new ArrayList<RowBR>();
		RowBR vr = null;

		List<RowBRsost> listSost = new ArrayList<RowBRsost>();

		for (int i=0; i<gtList.size();i++) {


			L42BR dto = gtList.get(i);

			vr = mapToRowBR(dto.getL42Bruciatore(), dto.getL42Numero(), dto.getL42GtCollegato());


			List<L42BruciatoreSostituito> l42BRSostList = dto.getL42BruciatoreSostituitoList();
			if (l42BRSostList != null && l42BRSostList.size() > 0)
			{
				for (L42BruciatoreSostituito l42BRSost : l42BRSostList) {

					listSost.add(mapToRowBRSost(l42BRSost, dto.getL42GtCollegato()));

				}
				vr.addNewSezBRsostituite();
				vr.getSezBRsostituite().getRowBRsostList().addAll(listSost);
				listSost.clear();
			}

			listBR.add(vr);
		}
		sezBR.getRowBRList().addAll(listBR);

		log.debug("mapToL4GeneratoriSezGT: END");
	}

	private static RowBR mapToRowBR(L42Bruciatore dto, BigInteger progressivo, BigInteger progressivoGT) {
		RowBR row = RowBR.Factory.newInstance();
		row.setL42DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL42DataInstallazione()));
		row.setL42DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL42DataDismissione()));
		row.setL42Fabbricante(ConvertUtil.convertToString(dto.getL42Fabbricante()));
		row.setL42Modello(dto.getL42Modello());
		row.setL42Matricola(dto.getL42Matricola());
		row.setL42Tipologia(dto.getL42Tipologia());
		
		if (dto.getL42Combustibile() != 0)
		{
			row.setL42Combustibile(ConvertUtil.convertToString(dto.getL42Combustibile()));
		}

		row.setL42PortataTermMaxNom(dto.getL42PortataMaxNominale());
		row.setL42PortataTermMinNom(dto.getL42PortataMinNominale());

		row.setL42NumGT(progressivoGT);
		row.setL42NumBR(progressivo);

		row.xsetFlagDismissione(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL42DataDismissione())));
		return row;
	}

	private static RowBRsost mapToRowBRSost(L42BruciatoreSostituito dto, BigInteger progressivoGT) {
		RowBRsost row = RowBRsost.Factory.newInstance();
		row.setL42DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL42DataInstallazione()));
		row.setL42DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL42DataDismissione()));
		row.setL42Fabbricante(ConvertUtil.convertToString(dto.getL42Fabbricante()));
		row.setL42Modello(dto.getL42Modello());
		row.setL42Matricola(dto.getL42Matricola());
		row.setL42Tipologia(dto.getL42Tipologia());

		if (dto.getL42Combustibile() != 0)
		{
			row.setL42Combustibile(ConvertUtil.convertToString(dto.getL42Combustibile()));
		}

		row.setL42PortataTermMaxNom(dto.getL42PortataMaxNominale());
		row.setL42PortataTermMinNom(dto.getL42PortataMinNominale());

		row.setL42NumGT(progressivoGT);

		return row;
	}

	public static void mapToL4GeneratoriSezRC(List<L43RC> gtList, SezRC sezRC) {
		log.debug("mapToL4GeneratoriSezGT: START");
		List<RowRC> listRc = new ArrayList<RowRC>();
		RowRC rc = null;

		List<RowRCsost> listSost = new ArrayList<RowRCsost>();

		for (int i=0; i<gtList.size();i++) {


			L43RC dto = gtList.get(i);

			rc = mapToRowRC(dto.getL43Recuperatore(), dto.getL43Numero(), dto.getL43GtCollegato());


			List<L43RecuperatoreSostituito> l43RCSostList = dto.getL43RecuperatoreSostituitoList();
			if (l43RCSostList != null && l43RCSostList.size() > 0)
			{
				for (L43RecuperatoreSostituito l41GTSost : l43RCSostList) {

					listSost.add(mapToRowRCSost(l41GTSost, dto.getL43GtCollegato()));

				}
				rc.addNewSezRCsostituite();
				rc.getSezRCsostituite().getRowRCsostList().addAll(listSost);
				listSost.clear();
			}

			listRc.add(rc);
		}
		sezRC.getRowRCList().addAll(listRc);

		log.debug("mapToL4GeneratoriSezGT: END");
	}

	private static RowRC mapToRowRC(L43Recuperatore dto, BigInteger progressivo, BigInteger progressivoGT) {
		RowRC row = RowRC.Factory.newInstance();
		row.setL43DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL43DataInstallazione()));
		row.setL43DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL43DataDismissione()));
		row.setL43Fabbricante(ConvertUtil.convertToString(dto.getL43Fabbricante()));
		row.setL43Modello(dto.getL43Modello());
		row.setL43Matricola(dto.getL43Matricola());
		
		row.setL43PotTermNomTot(dto.getL43PotenzaNominaleTotale());

		row.setL43NumGT(progressivoGT);
		
		row.setL43NumRC(progressivo);

		row.xsetFlagDismissione(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL43DataDismissione())));
		return row;
	}

	private static RowRCsost mapToRowRCSost(L43RecuperatoreSostituito dto, BigInteger progressivoGT) {
		RowRCsost row = RowRCsost.Factory.newInstance();
		row.setL43DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL43DataInstallazione()));
		row.setL43DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL43DataDismissione()));
		row.setL43Fabbricante(ConvertUtil.convertToString(dto.getL43Fabbricante()));
		row.setL43Modello(dto.getL43Modello());
		row.setL43Matricola(dto.getL43Matricola());
		
		row.setL43PotTermNomTot(dto.getL43PotenzaNominaleTotale());

		row.setL43NumGT(progressivoGT);
		
		return row;
	}

	public static void mapToL4GeneratoriSezGF(List<L44GF> gtList, SezGF sezGF) {
		log.debug("mapToL4GeneratoriSezGF: START");
		List<RowGF> listGf = new ArrayList<RowGF>();
		RowGF vr = null;

		List<RowGFsost> listSost = new ArrayList<RowGFsost>();

		for (int i=0; i<gtList.size();i++) {


			L44GF dto = gtList.get(i);

			vr = mapToRowGF(dto.getL44GruppoFrigo(), dto.getL44Numero());


			List<L44GruppoFrigoSostituito> l44GFSostList = dto.getL44GruppoFrigoSostituitoList();
			if (l44GFSostList != null && l44GFSostList.size() > 0)
			{
				for (L44GruppoFrigoSostituito l44GFSost : l44GFSostList) {

					listSost.add(mapToRowGFSost(l44GFSost));

				}
				vr.addNewSezGFsostituite();
				vr.getSezGFsostituite().getRowGFsostList().addAll(listSost);
				listSost.clear();
			}

			listGf.add(vr);
		}
		sezGF.getRowGFList().addAll(listGf);

		log.debug("mapToL4GeneratoriSezGF: END");
	}

	private static RowGF mapToRowGF(L44GruppoFrigo dto, BigInteger progressivo) {
		RowGF row = RowGF.Factory.newInstance();
		row.setL44DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL44DataInstallazione()));
		row.setL44DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL44DataDismissione()));
		row.setL44Fabbricante(ConvertUtil.convertToString(dto.getL44Fabbricante()));
		row.setL44Modello(dto.getL44Modello());
		row.setL44Matricola(dto.getL44Matricola());
		row.xsetL44FlagSorgARIA(getXmlBoolean(dto.getL44SorgenteExtAria()));
		row.xsetL44FlagSorgARIA(getXmlBoolean(dto.getL44SorgenteExtAria()));
		row.setL44FluidoFrigo(dto.getL44FluidoFrigorigeno());

		row.xsetL44FlagFluidoARIA(getXmlBoolean(dto.getL44FluidoUtenzeAria()));
		row.xsetL44FlagFluidoACQUA(getXmlBoolean(dto.getL44FluidoUtenzeAcqua()));
		
		row.xsetL44FlagRecupCalore(getXmlBoolean(dto.getL44AssorbimentoPerRecupero()));
		
		if (dto.getL44CombustibileAssorbimentoFiammaDiretta() != 0)
		{
			row.xsetL44FlagFiammaDiretta(getXmlBoolean(true));
			row.setL44TipoCombustibile(ConvertUtil.convertToString(dto.getL44CombustibileAssorbimentoFiammaDiretta()));
		}
		
		row.xsetL44FlagCicloCompress(getXmlBoolean(dto.getL44CompressioneMotoreElettrico()));

		row.setL44NumCircuiti(ConvertUtil.convertToBigInteger(dto.getL44NumCircuiti()));
		row.setL44Raffrescam(dto.getL44RaffEER());
		row.setL44PotFrigoNom(dto.getL44RaffPotenzaAssNominale());
		row.setL44PotFrigoAssorb(dto.getL44RaffPotenzaAssNominale());
		row.setL44Riscaldam(dto.getL44RiscCOP());
		row.setL44PotTermNom(dto.getL44RiscPotenzaNominale());
		row.setL44PotTermAssorb(dto.getL44RiscPotenzaAssNominale());

		row.setL44NumGF(progressivo);

		row.xsetFlagDismissione(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL44DataDismissione())));
		return row;
	}

	private static RowGFsost mapToRowGFSost(L44GruppoFrigoSostituito dto) {
		RowGFsost row = RowGFsost.Factory.newInstance();
		row.setL44DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL44DataInstallazione()));
		row.setL44DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL44DataDismissione()));
		row.setL44Fabbricante(ConvertUtil.convertToString(dto.getL44Fabbricante()));
		row.setL44Modello(dto.getL44Modello());
		row.setL44Matricola(dto.getL44Matricola());
		row.xsetL44FlagSorgARIA(getXmlBoolean(dto.getL44SorgenteExtAria()));
		row.xsetL44FlagSorgARIA(getXmlBoolean(dto.getL44SorgenteExtAria()));
		row.setL44FluidoFrigo(dto.getL44FluidoFrigorigeno());

		row.xsetL44FlagFluidoARIA(getXmlBoolean(dto.getL44FluidoUtenzeAria()));
		row.xsetL44FlagFluidoACQUA(getXmlBoolean(dto.getL44FluidoUtenzeAcqua()));
		
		row.xsetL44FlagRecupCalore(getXmlBoolean(dto.getL44AssorbimentoPerRecupero()));
		
		if (dto.getL44CombustibileAssorbimentoFiammaDiretta() != 0)
		{
			row.xsetL44FlagFiammaDiretta(getXmlBoolean(true));
			row.setL44TipoCombustibile(ConvertUtil.convertToString(dto.getL44CombustibileAssorbimentoFiammaDiretta()));
		}
		
		row.xsetL44FlagCicloCompress(getXmlBoolean(dto.getL44CompressioneMotoreElettrico()));

		row.setL44NumCircuiti(ConvertUtil.convertToBigInteger(dto.getL44NumCircuiti()));
		row.setL44Raffrescam(dto.getL44RaffEER());
		row.setL44PotFrigoNom(dto.getL44RaffPotenzaAssNominale());
		row.setL44PotFrigoAssorb(dto.getL44RaffPotenzaAssNominale());
		row.setL44Riscaldam(dto.getL44RiscCOP());
		row.setL44PotTermNom(dto.getL44RiscPotenzaNominale());
		row.setL44PotTermAssorb(dto.getL44RiscPotenzaAssNominale());

		return row;
	}

	public static void mapToL4GeneratoriSezSC(List<L45SC> gtList, SezSC sezSC) {
		log.debug("mapToL4GeneratoriSezGT: START");
		List<RowSC> listSc = new ArrayList<RowSC>();
		RowSC vr = null;

		List<RowSCsost> listSost = new ArrayList<RowSCsost>();

		for (int i=0; i<gtList.size();i++) {


			L45SC dto = gtList.get(i);

			vr = mapToRowSC(dto.getL45Scambiatore(), dto.getL45Numero());


			List<L45ScambiatoreSostituito> l45SCSostList = dto.getL45ScambiatoreSostituitoList();
			if (l45SCSostList != null && l45SCSostList.size() > 0)
			{
				for (L45ScambiatoreSostituito l45SCSost : l45SCSostList) {

					listSost.add(mapToRowSCSost(l45SCSost));

				}
				vr.addNewSezSCsostituite();
				vr.getSezSCsostituite().getRowSCsostList().addAll(listSost);
				listSost.clear();
			}

			listSc.add(vr);
		}
		sezSC.getRowSCList().addAll(listSc);

		log.debug("mapToL4GeneratoriSezGT: END");
	}

	private static RowSC mapToRowSC(L45Scambiatore dto, BigInteger progressivo) {
		RowSC row = RowSC.Factory.newInstance();
		row.setL45DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL45DataInstallazione()));
		row.setL45DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL45DataDismissione()));
		row.setL45Fabbricante(ConvertUtil.convertToString(dto.getL45Fabbricante()));
		row.setL45Modello(dto.getL45Modello());
		row.setL45Matricola(dto.getL45Matricola());
		
		row.setL45PotTermNomTot(dto.getL45PotenzaNominaleTotale());

		row.setL45NumSC(progressivo);

		row.xsetFlagDismissione(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL45DataDismissione())));
		return row;
	}

	private static RowSCsost mapToRowSCSost(L45ScambiatoreSostituito dto) {
		RowSCsost row = RowSCsost.Factory.newInstance();
		row.setL45DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL45DataInstallazione()));
		row.setL45DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL45DataDismissione()));
		row.setL45Fabbricante(ConvertUtil.convertToString(dto.getL45Fabbricante()));
		row.setL45Modello(dto.getL45Modello());
		row.setL45Matricola(dto.getL45Matricola());
		
		row.setL45PotTermNomTot(dto.getL45PotenzaNominaleTotale());


		return row;
	}

	public static void mapToL4GeneratoriSezCG(List<L46CG> gtList, SezCG sezCG) {
		log.debug("mapToL4GeneratoriSezGT: START");
		List<RowCG> listCg = new ArrayList<RowCG>();
		RowCG vr = null;

		List<RowCGsost> listSost = new ArrayList<RowCGsost>();

		for (int i=0; i<gtList.size();i++) {


			L46CG dto = gtList.get(i);

			vr = mapToRowCG(dto.getL46Cogeneratore(), dto.getL46Numero());


			List<L46CogeneratoreSostituito> l46CGSostList = dto.getL46CogeneratoreSostituitoList();
			if (l46CGSostList != null && l46CGSostList.size() > 0)
			{
				for (L46CogeneratoreSostituito l46CGSost : l46CGSostList) {

					listSost.add(mapToRowCGSost(l46CGSost));

				}
				vr.addNewSezCGsostituite();
				vr.getSezCGsostituite().getRowCGsostList().addAll(listSost);
				listSost.clear();
			}

			listCg.add(vr);
		}
		sezCG.getRowCGList().addAll(listCg);

		log.debug("mapToL4GeneratoriSezGT: END");
	}

	private static RowCG mapToRowCG(L46Cogeneratore dto, BigInteger progressivo) {
		RowCG row = RowCG.Factory.newInstance();
		row.setL46DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL46DataInstallazione()));
		row.setL46DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL46DataDismissione()));
		row.setL46Fabbricante(ConvertUtil.convertToString(dto.getL46Fabbricante()));
		row.setL46Modello(dto.getL46Modello());
		row.setL46Matricola(dto.getL46Matricola());
		
		row.setL46Tipologia(dto.getL46Tipologia());

		if (dto.getL46Alimentazione() != 0)
		{
			row.setL46Combustibile(ConvertUtil.convertToString(dto.getL46Alimentazione()));
		}
		
		row.setL46PotTermNom(dto.getL46PotenzaTermicaNominale());
		row.setL46PotElettrNom(dto.getL46PotenzaElettricaNominale());
		row.setL46TempAcquaUscitaMIN(dto.getL46TempAcquaUscitaMin());
		row.setL46TempAcquaUscitaMAX(dto.getL46TempAcquaUscitaMax());
		row.setL46TempFumiValleMIN(dto.getL46TempFumiValleMin());
		row.setL46TempFumiValleMAX(dto.getL46TempFumiValleMax());
		row.setL46TempAcquaIngressoMIN(dto.getL46TempAcquaIngressoMin());
		row.setL46TempAcquaIngressoMAX(dto.getL46TempAcquaIngressoMax());
		row.setL46TempFumiMonteMIN(dto.getL46TempFumiMonteMin());
		row.setL46TempFumiMonteMAX(dto.getL46TempFumiMonteMax());
		row.setL46TempAcquaMotoreMIN(dto.getL46TempAcquaMotoreMin());
		row.setL46TempAcquaMotoreMAX(dto.getL46TempAcquaMotoreMax());
		row.setL46EmissioniMonossidoMIN(dto.getL46EmissioniCOMin());
		row.setL46EmissioniMonossidoMAX(dto.getL46EmissioniCOMax());
		
		row.setL46NumCG(progressivo);

		row.xsetFlagDismissione(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL46DataDismissione())));
		return row;
	}

	private static RowCGsost mapToRowCGSost(L46CogeneratoreSostituito dto) {
		RowCGsost row = RowCGsost.Factory.newInstance();
		row.setL46DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL46DataInstallazione()));
		row.setL46DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL46DataDismissione()));
		row.setL46Fabbricante(ConvertUtil.convertToString(dto.getL46Fabbricante()));
		row.setL46Modello(dto.getL46Modello());
		row.setL46Matricola(dto.getL46Matricola());
		
		row.setL46Tipologia(dto.getL46Tipologia());
		
		if (dto.getL46Alimentazione() != 0)
		{
			row.setL46Combustibile(ConvertUtil.convertToString(dto.getL46Alimentazione()));
		}
		
		row.setL46PotTermNom(dto.getL46PotenzaTermicaNominale());
		row.setL46PotElettrNom(dto.getL46PotenzaElettricaNominale());
		row.setL46TempAcquaUscitaMIN(dto.getL46TempAcquaUscitaMin());
		row.setL46TempAcquaUscitaMAX(dto.getL46TempAcquaUscitaMax());
		row.setL46TempFumiValleMIN(dto.getL46TempFumiValleMin());
		row.setL46TempFumiValleMAX(dto.getL46TempFumiValleMax());
		row.setL46TempAcquaIngressoMIN(dto.getL46TempAcquaIngressoMin());
		row.setL46TempAcquaIngressoMAX(dto.getL46TempAcquaIngressoMax());
		row.setL46TempFumiMonteMIN(dto.getL46TempFumiMonteMin());
		row.setL46TempFumiMonteMAX(dto.getL46TempFumiMonteMax());
		row.setL46TempAcquaMotoreMIN(dto.getL46TempAcquaMotoreMin());
		row.setL46TempAcquaMotoreMAX(dto.getL46TempAcquaMotoreMax());
		row.setL46EmissioniMonossidoMIN(dto.getL46EmissioniCOMin());
		row.setL46EmissioniMonossidoMAX(dto.getL46EmissioniCOMax());
		

		return row;
	}

	public static void mapToL4GeneratoriSezCS(List<L47CS> gtList, SezCS sezCS) {
		log.debug("mapToL4GeneratoriSezCS: START");
		List<RowCS> listCs = new ArrayList<RowCS>();
		RowCS vr = null;

		List<RowCSvar> listSost = new ArrayList<RowCSvar>();

		for (int i=0; i<gtList.size();i++) {


			L47CS dto = gtList.get(i);

			vr = mapToRowCS(dto.getL47CampoSolareTermico(), dto.getL47Numero());


			List<L47CampoSolareTermicoSostituito> l47CSSostList = dto.getL47CampoSolareTermicoSostituitoList();
			if (l47CSSostList != null && l47CSSostList.size() > 0)
			{
				for (L47CampoSolareTermicoSostituito l47CSSost : l47CSSostList) {

					listSost.add(mapToRowCSVar(l47CSSost));

				}
				vr.addNewSezCSvariate();
				vr.getSezCSvariate().getRowCSvarList().addAll(listSost);
				listSost.clear();
			}

			listCs.add(vr);
		}
		sezCS.getRowCSList().addAll(listCs);

		log.debug("mapToL4GeneratoriSezCS: END");
	}

	private static RowCS mapToRowCS(L47CampoSolareTermico dto, BigInteger progressivo) {
		RowCS row = RowCS.Factory.newInstance();
		
		row.setL47DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL47DataInstallazione()));
		row.setL47DataDismissione(ConvertUtil.convertToXmlCalendar(dto.getL47DataDismissione()));
		row.setL47Fabbricante(ConvertUtil.convertToString(dto.getL47Fabbricante()));

		if (dto.getL47Collettori() != 0)
		{
			row.setL47Collettori(ConvertUtil.convertToString(dto.getL47Collettori()));
		}
		
		row.setL47SuperfTotApertura(dto.getL47SupTotaleApertura());
		
		row.setL47NumCS(progressivo);

		row.xsetFlagDismissione(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL47DataDismissione())));
		return row;
	}

	private static RowCSvar mapToRowCSVar(L47CampoSolareTermicoSostituito dto) {
		RowCSvar row = RowCSvar.Factory.newInstance();
		row.setL47DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL47DataInstallazione()));
		row.setL47DataDismissione(ConvertUtil.convertToXmlCalendar(dto.getL47DataDismissione()));
		row.setL47Fabbricante(ConvertUtil.convertToString(dto.getL47Fabbricante()));
		
		if (dto.getL47Collettori() != 0)
		{
			row.setL47Collettori(ConvertUtil.convertToString(dto.getL47Collettori()));
		}
		
		row.setL47SuperfTotApertura(dto.getL47SupTotaleApertura());


		return row;
	}

	public static void mapToL4GeneratoriSezAG(List<L48AG> gtList, SezAG sezAG) {
		log.debug("mapToL4GeneratoriSezAG: START");
		List<RowAG> listAg = new ArrayList<RowAG>();
		RowAG vr = null;

		List<RowAGsost> listSost = new ArrayList<RowAGsost>();

		for (int i=0; i<gtList.size();i++) {


			L48AG dto = gtList.get(i);

			vr = mapToRowAG(dto.getL48AltroGeneratore(), dto.getL48Numero());


			List<L48AltroGeneratoreSostituito> l48AGSostList = dto.getL48AltroGeneratoreSostituitoList();
			if (l48AGSostList != null && l48AGSostList.size() > 0)
			{
				for (L48AltroGeneratoreSostituito l48AGSost : l48AGSostList) {

					listSost.add(mapToRowAGSost(l48AGSost));

				}
				vr.addNewSezAGsostituite();
				vr.getSezAGsostituite().getRowAGsostList().addAll(listSost);
				listSost.clear();
			}

			listAg.add(vr);
		}
		sezAG.getRowAGList().addAll(listAg);

		log.debug("mapToL4GeneratoriSezAG: END");
	}

	private static RowAG mapToRowAG(L48AltroGeneratore dto, BigInteger progressivo) {
		RowAG row = RowAG.Factory.newInstance();
		row.setL48DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL48DataInstallazione()));
		row.setL48DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL48DataDismissione()));
		row.setL48Fabbricante(ConvertUtil.convertToString(dto.getL48Fabbricante()));
		row.setL48Modello(dto.getL48Modello());
		row.setL48Matricola(dto.getL48Matricola());
		
		row.setL48Tipologia(dto.getL48Tipologia());
		row.setL48PotUtile(dto.getL48PotenzaNominaleTotale());

		row.setL48NumAG(progressivo);

		row.xsetFlagDismissione(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL48DataDismissione())));
		return row;
	}

	private static RowAGsost mapToRowAGSost(L48AltroGeneratoreSostituito dto) {
		RowAGsost row = RowAGsost.Factory.newInstance();
		row.setL48DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL48DataInstallazione()));
		row.setL48DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL48DataDismissione()));
		row.setL48Fabbricante(ConvertUtil.convertToString(dto.getL48Fabbricante()));
		row.setL48Modello(dto.getL48Modello());
		row.setL48Matricola(dto.getL48Matricola());
		
		row.setL48Tipologia(dto.getL48Tipologia());
		row.setL48PotUtile(dto.getL48PotenzaNominaleTotale());

		return row;
	}

	public static void mapToL14ConsumiSezCombu(List<L141ConsumoCombustibile> vmList, SezCombu sezVM) {
		log.debug("mapToL14ConsumiSezCombu: START");
		List<RowCombu> listVm = new ArrayList<RowCombu>();
		RowCombu vm = null;

		for (int i=0; i<vmList.size();i++) {


			L141ConsumoCombustibile dto = vmList.get(i);

			vm = mapToRowCombu(dto);

			listVm.add(vm);
		}
		sezVM.getRowCombuList().addAll(listVm);

		log.debug("mapToL14ConsumiSezCombu: END");
	}

	private static RowCombu mapToRowCombu(L141ConsumoCombustibile dto) {
		RowCombu row = RowCombu.Factory.newInstance();
		List<RowConsumo> rowConsumoList = new ArrayList<RowConsumo>();
		RowConsumo rowConsumo = null;
		
		row.setL141TipoCombu(ConvertUtil.convertToString(dto.getL141Combustibile()));
		row.setL141UnitaMisura(ConvertUtil.convertToString(dto.getL141UnitaMisura()));

		List <L141DatiConsumoCombustibile> datiConsComb = dto.getL141DatiConsumoCombustibileList();
		
		for (L141DatiConsumoCombustibile l141DatiConsumoCombustibile : datiConsComb) {
			
			rowConsumo = mapToRowConsumo(l141DatiConsumoCombustibile);
			rowConsumoList.add(rowConsumo);
		}
		
		row.addNewSezRowConsumo().setRowConsumoArray(rowConsumoList.toArray(new RowConsumo[]{}));

		return row;
	}
	
	private static RowConsumo mapToRowConsumo(L141DatiConsumoCombustibile dto) {
		RowConsumo row = RowConsumo.Factory.newInstance();

		row.setL141Esercizio1(dto.getL141EsercizioDa());
		row.setL141Esercizio2(dto.getL141EsercizioA());
		
		row.setL141Acquisti(dto.getL141Acquisti());

		row.setL141LetturaIniz(dto.getL141LetturaIniziale());
		row.setL141LetturaFinale(dto.getL141LetturaFinale());

		row.setL141Consumo(dto.getL141Consumo());

		return row;
	}
	
	public static void mapToL14ConsumiSezEE(L142ConsumoEnergiaElettrica consumoEE, SezConsumo sezVM) {
		log.debug("mapToL14ConsumiSezEE: START");
		
		if (consumoEE != null)
		{
			List<L142DatiConsumoEnergiaElettrica> vmList = consumoEE.getL142DatiConsumoEnergiaElettricaList();
			List<RowConsumoEE> listVm = new ArrayList<RowConsumoEE>();
			RowConsumoEE vm = null;
	
			for (int i=0; i<vmList.size();i++) {
	
	
				L142DatiConsumoEnergiaElettrica dto = vmList.get(i);
	
				vm = mapToRowConsumoEE(dto);
	
				listVm.add(vm);
			}
			sezVM.getRowConsumoEEList().addAll(listVm);
		}
		
		log.debug("mapToL14ConsumiSezEE: END");
	}

	private static RowConsumoEE mapToRowConsumoEE(L142DatiConsumoEnergiaElettrica dto) {
		RowConsumoEE row = RowConsumoEE.Factory.newInstance();
		
		row.setL142Esercizio1(dto.getL142EsercizioDa());
		row.setL142Esercizio2(dto.getL142EsercizioA());
		
		row.setL142LetturaIniz(dto.getL142LetturaIniziale());
		row.setL142LetturaFinale(dto.getL142LetturaFinale());

		row.setL142ConsumoTot(dto.getL142Consumo());

		return row;
	}
	
	public static void mapToL14ConsumiSezH2O(L143ConsumoAcqua consumoH2O, DatiConsumoH2O datiConsumoH2O) {
		log.debug("mapToL14ConsumiSezH2O: START");
		DatiConsumoH2O.SezConsumo sezConsumo = datiConsumoH2O.addNewSezConsumo();

		RowConsumoH2O vm = null;
		
		if (consumoH2O != null)
		{


			List<L143DatiConsumoAcqua> datiConsH2OList = consumoH2O.getL143DatiConsumoAcquaList();

			for (L143DatiConsumoAcqua l143DatiConsumoAcqua : datiConsH2OList) {
				
			
				vm = mapToRowConsumoH2O(l143DatiConsumoAcqua);
	
				datiConsumoH2O.setL143UnitaMisura(ConvertUtil.convertToString(consumoH2O.getL143UnitaMisura()));
				sezConsumo.getRowConsumoH2OList().add(vm);
			}
		}

		log.debug("mapToL14ConsumiSezH2O: END");
	}
	
	
	
	
	
	private static RowConsumoH2O mapToRowConsumoH2O(L143DatiConsumoAcqua dto) {
		RowConsumoH2O row = RowConsumoH2O.Factory.newInstance();

		row.setL143Esercizio1(dto.getL143EsercizioDa());
		row.setL143Esercizio2(dto.getL143EsercizioA());

		row.setL143LetturaIniz(dto.getL143LetturaIniziale());
		row.setL143LetturaFinale(dto.getL143LetturaFinale());

		row.setL143ConsumoTot(dto.getL143Consumo());

		return row;
	}
	
	public static void mapToL14ConsumiSezPChim(L144ConsumoProdottiChimici consProdChim, DatiConsumoProdottiChimici.SezConsumo sezVM) {
		log.debug("mapToL14ConsumiSezPChim: START");
		List<RowCombu> listVm = new ArrayList<RowCombu>();
		
		if (consProdChim != null)
		{
			//sezVM.addNewRowConsumoPROD();
			
			List<L144DatiConsumoProdottiChimici> vmList = consProdChim.getL144DatiConsumoProdottiChimiciList();
			RowConsumoPROD vm = null;
	
			for (int i=0; i<vmList.size();i++) {
	
	
				L144DatiConsumoProdottiChimici dto = vmList.get(i);
	
				vm = mapToRowConsumoPROD(dto);
	
				sezVM.getRowConsumoPRODList().add(vm);
			}
		}
		log.debug("mapToL14ConsumiSezPChim: END");
	}
	
	private static RowConsumoPROD mapToRowConsumoPROD(L144DatiConsumoProdottiChimici dto) {
		RowConsumoPROD row = RowConsumoPROD.Factory.newInstance();

		row.setL144Esercizio1(dto.getL144EsercizioDa());
		row.setL144Esercizio2(dto.getL144EsercizioA());

		row.xsetL144FlagCircuitoIT(getXmlBoolean(dto.getL144CircuitoImpiantoTermico()));
		row.xsetL144FlagCircuitoACS(getXmlBoolean(dto.getL144CircuitoACS()));
		row.xsetL144FlagCircuitoAltri(getXmlBoolean(dto.getL144CircuitoAltro()));

		
		row.setL144NomeProdotto(dto.getL144NomeProdotto());
		row.setL144QtaConsumata(dto.getL144Consumo());
		row.setL144UnitaMisura(ConvertUtil.convertToString(dto.getL144UnitaMisura()));


		return row;
	}
	
	//per ogni tipo di modulo devo eseguire questo metodo
	public static MODIIDocument mapToMODIIDocument(byte[] theXml){
		try {
			log.debug("[MapDto::mapToMODIIDocument] start");
			String theXmlString = ModolXFAReader.getXMLData(theXml, "data:MODII");
			InputStream is = new ByteArrayInputStream(XmlBeanUtils.readString(theXmlString));
			MODIIDocument allegatoDoc = MODIIDocument.Factory.parse(is);
			log.debug("[MapDto::mapToMODIIDocument] end");
			return allegatoDoc;
		} catch (XmlException e) {
			log.error("Errore mapToMODIIDocument - XmlException",e);
			return null;
		} catch (IOException e) {
			log.error("Errore mapToMODIIDocument - IOException",e);
			return null;
		} catch (ParserConfigurationException e) {
			log.error("Errore mapToMODIIDocument - ParserConfigurationException",e);
			return null;
		} catch (SAXException e) {
			log.error("Errore mapToMODIIDocument - SAXException",e);
			return null;
		}		
	}
	

	public static MODIIIDocument mapToMODIIIDocument(byte[] theXml){
		try {
			log.debug("[MapDto::mapToMODIIIDocument] start");
			String theXmlString = ModolXFAReader.getXMLData(theXml, "data:MODIII");
			InputStream is = new ByteArrayInputStream(XmlBeanUtils.readString(theXmlString));
			MODIIIDocument allegatoDoc = MODIIIDocument.Factory.parse(is);
			log.debug("[MapDto::mapToMODIIIDocument] end");
			return allegatoDoc;
		} catch (XmlException e) {
			log.error("Errore mapToMODIIIDocument - XmlException",e);
			return null;
		} catch (IOException e) {
			log.error("Errore mapToMODIIIDocument - IOException",e);
			return null;
		} catch (ParserConfigurationException e) {
			log.error("Errore mapToMODIIIDocument - ParserConfigurationException",e);
			return null;
		} catch (SAXException e) {
			log.error("Errore mapToMODIIIDocument - SAXException",e);
			return null;
		}		
	}
	
	
	
	public static MODIVDocument mapToMODIVDocument(byte[] theXml){
		try {
			log.debug("[MapDto::mapToMODIVDocument] start");
			String theXmlString = ModolXFAReader.getXMLData(theXml, "data:MODIV");
			InputStream is = new ByteArrayInputStream(XmlBeanUtils.readString(theXmlString));
			MODIVDocument allegatoDoc = MODIVDocument.Factory.parse(is);
			log.debug("[MapDto::mapToMODIVDocument] end");
			return allegatoDoc;
		} catch (XmlException e) {
			log.error("Errore mapToMODIVDocument - XmlException",e);
			return null;
		} catch (IOException e) {
			log.error("Errore mapToMODIVDocument - IOException",e);
			return null;
		} catch (ParserConfigurationException e) {
			log.error("Errore mapToMODIVDocument - ParserConfigurationException",e);
			return null;
		} catch (SAXException e) {
			log.error("Errore mapToMODIVDocument - SAXException",e);
			return null;
		}		
	}
	
	
	public static MODVDocument mapToMODVDocument(byte[] theXml){
		try {
			log.debug("[MapDto::mapToMODVDocument] start");
			String theXmlString = ModolXFAReader.getXMLData(theXml, "data:MODV");
			InputStream is = new ByteArrayInputStream(XmlBeanUtils.readString(theXmlString));
			MODVDocument allegatoDoc = MODVDocument.Factory.parse(is);
			log.debug("[MapDto::mapToMODVDocument] end");
			return allegatoDoc;
		} catch (XmlException e) {
			log.error("Errore mapToMODVDocument - XmlException",e);
			return null;
		} catch (IOException e) {
			log.error("Errore mapToMODVDocument - IOException",e);
			return null;
		} catch (ParserConfigurationException e) {
			log.error("Errore mapToMODVDocument - ParserConfigurationException",e);
			return null;
		} catch (SAXException e) {
			log.error("Errore mapToMODVDocument - SAXException",e);
			return null;
		}		
	}
	
	public static String getCodiceRea(String siglaRea, Integer numeroRea) {
		return getCodiceRea(siglaRea, ConvertUtil.convertToString(numeroRea));
	}
	
	public static String getCodiceRea(String siglaRea, BigDecimal numeroRea) {
		return getCodiceRea(siglaRea, ConvertUtil.convertToString(numeroRea));
	}
	
	public static String getCodiceRea(String siglaRea, String numeroRea) {
		return normalizeString(GenericUtil.getStringValid(siglaRea) + Constants.INTERVAL_SEP + GenericUtil.getStringValid(numeroRea));
	}
	
	public static String costruisciCognomeNome(String cognome, String nome) {
		return GenericUtil.getStringValid(cognome) + " " + GenericUtil.getStringValid(nome);
	}
	
	public static String costruisciCognomeNomeCF(String cognome, String nome, String cf) {
		return GenericUtil.getStringValid(cognome) + " " + GenericUtil.getStringValid(nome) +  Constants.VALUE_ENTER_HTML + "(" + GenericUtil.getStringValid(cf) + ")";
	}
	
	public static String costruisciIntervalloCodici(int codiciDa, int codiciA) {
		return normalizeString(codiciDa + Constants.INTERVAL_SEP + codiciA);
	}
	
	public static String costruisciCodiceBollino(String siglaBollino, BigDecimal numeroBollino) {
		
		String codiceBollino = "";
		
		if (GenericUtil.isNotNullOrEmpty(numeroBollino))
		{
			codiceBollino = GenericUtil.getStringValid(siglaBollino) + Constants.INTERVAL_SEP + ConvertUtil.convertToString(numeroBollino);
		}
		
		return codiceBollino;
	}
	
	public static String costruisciChiaveDelegato(BigDecimal idPF, BigDecimal idPG, String dataInizio) {
		log.debug("costruisciChiaveDelegato");
		log.debug("idPF: "+idPF);
		log.debug("idPG: "+idPG);
		log.debug("dataInizio: "+dataInizio);

		return normalizeString(idPF + Constants.INTERVAL_SEP_CHIAVI + idPG + Constants.INTERVAL_SEP_CHIAVI + dataInizio);
	}
	
	public static String costruisciChiaveIncaricato(BigDecimal idPF, BigDecimal idPG, String dataInizio) {
		log.debug("costruisciChiaveDelegato");
		log.debug("idPG: "+idPG);
		log.debug("idPG: "+idPG);
		log.debug("dataInizio: "+dataInizio);

		return normalizeString(idPF + Constants.INTERVAL_SEP_CHIAVI + idPG + Constants.INTERVAL_SEP_CHIAVI + dataInizio);
	}
	
	public static String costruisciEmissioniMonossido(BigDecimal coMin, BigDecimal coMax) {
		
		String eMonos = null;
		
		eMonos = ConvertUtil.convertToString(coMin);
		
		if (coMax != null)
		{
			eMonos = eMonos != null? eMonos + Constants.INTERVAL_SEP_SLASH + ConvertUtil.convertToString(coMax) : ConvertUtil.convertToString(coMax);
		}
		
		return eMonos;
	}
	
	public static String costruisciDescVia(Via via)
	{
		StringBuffer indirizzo = new StringBuffer();
		indirizzo.append(via.getIndirizzo().getTipoVia());
		indirizzo.append(" ");
		indirizzo.append(via.getIndirizzo().getNomeVia().getNome_via());
		
		
		//via.getLocalita().getComune().getToponimo()
		log.debug("---> Localita.getComune().getToponimo() oggetto "+via.getLocalita().getComune().getToponimo());
		
		if (!via.getLocalita().getNome().equalsIgnoreCase(via.getLocalita().getComune().getToponimo()))
		{
			// devo aggiungere la localita (es a Villanova d'Asti per il nome via: Buttigliera ritorna 3 vie valide uguali ma con localita' diversa {STAZIONE - SAVI - VILLANOVA D'ASTI})
			indirizzo.append(" Loc. ");
			indirizzo.append(via.getLocalita().getNome());
		}
		
		
		
		// devo aggiungere che se una via non e' in stato 'V' allora aggiungo nella descrizione 'DEPRECATO'
		if (!via.getStatoVia().equals(Constants.COD_STATO_VIA_VALIDA))
		{
			indirizzo.append(" (");
			indirizzo.append(Constants.DESC_STATO_VIA_DEPRECATO);
			indirizzo.append(")");
		}
		
		return indirizzo.toString();
	}
	
	public static String costruisciEnteCpompetenteIspettore(DettaglioIspezione dettaglioIspezione) {
		return dettaglioIspezione.getIspettoreCognome() + " per conto dell'ente competente " + dettaglioIspezione.getEnteCompetente();
	}
	
	public static String costruisciTipoComponente(String idTipoComponente, BigDecimal progressivo) {
		return idTipoComponente + Constants.INTERVAL_SEP + progressivo;
	}
	
	public static Responsabile margeResponsabili(Responsabile responsabileOld, Responsabile responsabileNew) {
		

		if (log.isDebugEnabled())
		{
			GenericUtil.stampa(responsabileOld, true, 3);
			GenericUtil.stampa(responsabileNew, true, 3);
		}
		
		responsabileOld.setIdResponsabile(responsabileNew
				.getIdResponsabile());

		responsabileOld.setCodiceFiscale(responsabileNew
				.getCodiceFiscale());
		
		responsabileOld.setIdSiglaRea(responsabileNew.getIdSiglaRea());
		responsabileOld.setNumeroRea(responsabileNew.getNumeroRea());
		
		responsabileOld.setNome(responsabileNew.getNome());
		responsabileOld.setCognome(responsabileNew.getCognome());

		
		responsabileOld.setFlgIndirizzoEst(responsabileNew.getFlgIndirizzoEst());

		
		responsabileOld.setIdProvincia(responsabileNew
				.getIdProvincia());

		responsabileOld.setIdComune(responsabileNew.getIdComune());

		responsabileOld.setIdIndirizzo(responsabileNew
				.getIdIndirizzo());

		responsabileOld.setIndirizzoSitad(responsabileNew
				.getIndirizzoSitad());

		responsabileOld.setIndirizzoNoStrad(responsabileNew
				.getIndirizzoNoStrad());

		responsabileOld.setIndirizzo(responsabileNew
				.getIndirizzo());
		
		responsabileOld.setCivico(responsabileNew.getCivico());
		
		responsabileOld.setCap(responsabileNew.getCap());
		

		responsabileOld.setEstStato(responsabileNew.getEstStato());
		responsabileOld.setEstCitta(responsabileNew.getEstCitta());
		responsabileOld.setEstIndirizzo(responsabileNew.getEstIndirizzo());
		responsabileOld.setEstCap(responsabileNew.getEstCap());
		
		
		responsabileOld.setEmail(responsabileNew.getEmail());
		//responsabileOld.setFlgImpresa(responsabileNew.getFlgImpresa());
		
		responsabileOld.setFlgAccreditato(responsabileNew.getFlgAccreditato());
		
		return responsabileOld;
	}
	
	

	/**
	 * Restituisce l'indirizzo
	 * 
	 * @param indirizzo
	 *            Indirizzo
	 * @param indirizzoNonTrovato
	 *            Indirizzo non trovato
	 * @param civico
	 *            Numero civico
	 * @return Indirizzo
	 */
	public static String getIndirizzo(String indirizzo,
			String indirizzoNonTrovato, String civico) {
		return (GenericUtil.isNotNullOrEmpty(indirizzo) ? indirizzo : GenericUtil.getStringValid(indirizzoNonTrovato)) + " "
				+ GenericUtil.getStringValid(civico);
	}
	
	/**
	 * Restituisce l'indirizzo
	 * 
	 * @param indirizzo
	 *            Indirizzo
	 * @param civico
	 *            Numero civico
	 * @return Indirizzo
	 */
	public static String getIndirizzo(String indirizzo,
			String civico) {
		return GenericUtil.getStringValid(indirizzo) + " "
				+ GenericUtil.getStringValid(civico);
	}
	
	/**
	 * Restituisce l'indirizzo completo comprensivo di provincia
	 * 
	 * @param comune
	 *            Comune
	 * @param indirizzo
	 *            Indirizzo
	 * @param indirizzoNonTrovato
	 *            Indirizzo non trovato
	 * @param civico
	 *            Numero civico
	 * @param provincia
	 *            Sigla provincia
	 * @return Indirizzo
	 */
	public static String getIndirizzoCompleto(String comune, String indirizzo,
			String indirizzoNonTrovato, String civico, String siglaProvincia) {
		return getIndirizzo(indirizzo, indirizzoNonTrovato, civico) + ", "
				+ GenericUtil.getStringValid(comune) + " ("+GenericUtil.getStringValid(siglaProvincia)+")";
	}
	
	public static String getIndirizzoCompleto(String comune, String indirizzo,
			String civico, String siglaProvincia) {
		return getIndirizzo(indirizzo, civico) + ", "
				+ GenericUtil.getStringValid(comune) + " ("+GenericUtil.getStringValid(siglaProvincia)+")";
	}
	
	public static String getComuneProvincia(String comune,
			String provincia) {
		return GenericUtil.getStringValid(comune) + " ("+GenericUtil.getStringValid(provincia)+")";
	}

	public static String getIndirizzoEsteroCompleto(String stato, String citta, String indirizzo,
			String civico) {
		return GenericUtil.getStringValid(indirizzo) + " "
				+ GenericUtil.getStringValid(civico) + ", "
				+ GenericUtil.getStringValid(citta) + " ("+GenericUtil.getStringValid(stato)+")";
	}

	public static String getIndirizzoCompletoAaep(Ubicazione ubicazione) {
		return GenericUtil.getStringValid(ubicazione.getToponimo()) + " " + GenericUtil.getStringValid(ubicazione.getIndirizzo()) + " " + GenericUtil.getStringValid(ubicazione.getNumeroCivico()) + ", "
				+ GenericUtil.getStringValid(ubicazione.getDescrComune()) + " ("+GenericUtil.getStringValid(ubicazione.getSiglaProvincia())+")";
	}
	
	public static String getResponsabile(String cognome, String nome, String descRuolo) {
		return GenericUtil.getStringValid(cognome) + " "
				+ GenericUtil.getStringValid(nome) + " ("+GenericUtil.getStringValid(descRuolo)+")";
	}

	public static String getGeneralita(String cognome, String nome) {
		return GenericUtil.getStringValid(cognome) + " "
				+ GenericUtil.getStringValid(nome);
	}
	
	public static String getApparecchiatura(String idTipo,
			BigDecimal progressivo) {
		return GenericUtil.getStringValid(idTipo) + Constants.INTERVAL_SEP + GenericUtil.getStringValid(ConvertUtil.convertToString(progressivo));
	}
	
	public static String getApparecchiatura(String idTipo,
			Integer progressivo) {
		return GenericUtil.getStringValid(idTipo) + Constants.INTERVAL_SEP + GenericUtil.getStringValid(ConvertUtil.convertToString(progressivo));
	}
	
	public static String getAbilitazioniAaep(List<AlboRuolo> alboList) 
	{
		StringBuffer alboSB = new StringBuffer();
		for (AlboRuolo albo : alboList) {
			
			alboSB.append(GenericUtil.getStringValid(albo.getIdRuolo()));
			alboSB.append(") ");
			
			alboSB.append("Tipo ruolo: ");
			alboSB.append(GenericUtil.getStringValid(albo.getDescrTipoRuolo()));
			// Ancora manca
			//alboSB.append(GenericUtil.getStringValid(albo.getDscrTipoRuolo()));
			alboSB.append(Constants.VALUE_ENTER_HTML);
			alboSB.append("Provincia: ");
			alboSB.append(GenericUtil.getStringValid(albo.getSiglaProvRuolo()));
			alboSB.append(Constants.VALUE_ENTER_HTML);
			alboSB.append("Data Accertamento: ");
			alboSB.append(GenericUtil.getStringValid(albo.getDataDomandaIscrRuolo()));
			alboSB.append(Constants.VALUE_ENTER_HTML);
			alboSB.append("Ente: ");
			alboSB.append(GenericUtil.getStringValid(albo.getDescrEnte()));
			alboSB.append(Constants.VALUE_ENTER_HTML);
			alboSB.append(Constants.VALUE_ENTER_HTML);

		}
		
		return alboSB.toString();
	}
	
	public static String getCaricheAaep(List<Carica> caricaList) 
	{
		StringBuffer caricaSB = new StringBuffer();
		caricaSB.append("Lista cariche: ");
		caricaSB.append(Constants.VALUE_ENTER_HTML);
		for (int i = 0; i < caricaList.size(); i++) {
			
			Carica carica = caricaList.get(i);
			
			caricaSB.append(i+1).append(") ");
			caricaSB.append("Carica: ");
			caricaSB.append(GenericUtil.getStringValid(carica.getDescrCarica()));
			caricaSB.append(Constants.VALUE_ENTER_HTML);
			caricaSB.append("Nominato il: ");
			caricaSB.append(GenericUtil.getStringValid(carica.getDataInizioCarica()));
			caricaSB.append(Constants.VALUE_ENTER_HTML);
			caricaSB.append("Durata in carica: ");
			caricaSB.append(GenericUtil.getStringValid(carica.getDescrDurataCarica()));
			caricaSB.append(Constants.VALUE_ENTER_HTML);
			caricaSB.append(Constants.VALUE_ENTER_HTML);
		}
		
		return caricaSB.toString();
	}
	
	public static String getDescrizioneConcatenata(List<String> descrizione) 
	{
		StringBuffer descSB = new StringBuffer();
		
		for (String desc : descrizione) {
			descSB.append(GenericUtil.getStringValid(desc));
			descSB.append(" ");
		}
		return descSB.toString();
	}
	
//	public static String getDenominazionePersona(String nome,
//			String cognome) {
//		return (GenericUtil.isNotNullOrEmpty(nome) ? nome + " " : "") 
//				+ cognome;
//	}
	
	public static String getDescrizioneComplPotenza(String descPotenza,
			BigDecimal prezzo) {
		ConvertUtil.convertToString(prezzo, Constants.NUMERO_DECIMALI);
		
		return descPotenza + " ("+ ConvertUtil.convertToString(prezzo, Constants.NUMERO_DECIMALI) + ")";
	}
	
	/**
	 * Normalizza una stringa trasformandola nella corrispettiva stringa tutta
	 * in maiuscolo
	 * 
	 * @param s
	 *            Stringa da normalizzare
	 * @return Stringa normalizzata
	 */
	private static String normalizeString(String s) {
		return GenericUtil.normalizeString(s);
	}
	
	public static Object getToSet(Class<?> co,
			Class<?> cRet, Object o, Object ret) {
		try {
		Method[] array = co.getDeclaredMethods();			
		for (Method m: array) {
			String methodName = m.getName().replaceFirst("get", "set");
			if (m.getName().startsWith("get")) {
				Object r;
				r = m.invoke(o);
				if (r != null) {
					Method set = null;
					try {
						set = cRet.getDeclaredMethod(methodName, r.getClass());										
					} catch (java.lang.NoSuchMethodException e) {
						set = cRet.getDeclaredMethod(methodName, getBoxedToPrimitive(r.getClass()));
					} finally {				
						set.invoke(ret, r);
					}
				}
				
			}
		}
		} catch (Exception e) {
			//getlogger.error("Errore", e);
		}
		
		return ret;
		
	}
	

	private static Class<?> getBoxedToPrimitive(Class<?> boxed)
	{
	  if (boxed.equals(java.lang.Boolean.class))
	  {
	   return boolean.class;
	  }
	  else
	  {
	    if (boxed.equals(java.lang.Byte.class))
	    {
	      return byte.class;
	    }
	    else
	    {
	      if (boxed.equals(java.lang.Character.class))
	      {
	        return char.class;
	      }
	      else
	      {
	        if (boxed.equals(java.lang.Double.class))
	        {
	         return double.class;
	        }
	        else
	        {
	          if (boxed.equals(java.lang.Float.class))
	          {
	            return float.class;
	          }
	          else
	          {
	            if (boxed.equals(java.lang.Integer.class))
	            {
	              return int.class;
	            }
	            else
	            {
	              if (boxed.equals(java.lang.Long.class))
	              {
	            	  return long.class;
	              }
	              else
	              {
	                if (boxed.equals(java.lang.Short.class))
	                {
	                	 return short.class;
	                } else
		              {
		                if (boxed.equals(java.sql.Timestamp.class))
		                {
		                	 return java.util.Date.class;
		                }else
			              {
			                if (boxed.equals(java.sql.Date.class))
			                {
			                	 return java.util.Date.class;
			                }
			              }
		              }
	              }
	            }
	          }
	        }
	      }
	    }
	  }
	  return null;
	}

	public static List<SigitTUnitaImmobiliareDto> getUnitaImmobiliareSecondarie(String idImpianto, Richiesta richiesta)
	{
		List<SigitTUnitaImmobiliareDto> output = new ArrayList<SigitTUnitaImmobiliareDto>();

		DatiPrecompilati dp = richiesta.getDatiPrecompilati();
		List<RowCatasto> catastoList = dp.getSezCatasto().getRowCatastoList();
		for (RowCatasto rowCatasto : catastoList) {
			SigitTUnitaImmobiliareDto dto2 = new SigitTUnitaImmobiliareDto();
			dto2.setCodiceImpianto(new BigDecimal(idImpianto));
			dto2.setSezione(rowCatasto.getL12Sezione());
			dto2.setFoglio(rowCatasto.getL12Foglio());
			dto2.setParticella(rowCatasto.getL12Particella());
			dto2.setSubalterno(rowCatasto.getL12Sub());
			dto2.setPodElettrico(rowCatasto.getL12Pod());
			dto2.setPdrGas(rowCatasto.getL12Pdr());
			dto2.setDataUltMod(DateUtil.getSqlDataCorrente());
			dto2.setFlgPrincipale(ConvertUtil.convertToBigDecimal(false));
			if(GenericUtil.isNullOrEmpty(dto2.getFoglio()))//per evitare di inserire righe vuote
				continue;
			output.add(dto2);
		}
		return output;
	}

	public static List<SigitTUnitaImmobiliareDto> getUnitaImmobiliareSecondarieLight(String idImpianto, it.csi.sigit.sigitwebn.xml.librettoLight.data.RichiestaDocument.Richiesta richiesta)
	{
		List<SigitTUnitaImmobiliareDto> output = new ArrayList<SigitTUnitaImmobiliareDto>();
		
		it.csi.sigit.sigitwebn.xml.librettoLight.data.DatiPrecompilatiDocument.DatiPrecompilati dp = richiesta.getDatiPrecompilati();
		List<it.csi.sigit.sigitwebn.xml.librettoLight.data.RowCatastoDocument.RowCatasto> catastoList = dp.getSezCatasto().getRowCatastoList();
		for (it.csi.sigit.sigitwebn.xml.librettoLight.data.RowCatastoDocument.RowCatasto rowCatasto : catastoList) {
			SigitTUnitaImmobiliareDto dto2 = new SigitTUnitaImmobiliareDto();
			dto2.setCodiceImpianto(new BigDecimal(idImpianto));
			dto2.setSezione(rowCatasto.getL12Sezione());
			dto2.setFoglio(rowCatasto.getL12Foglio());
			dto2.setParticella(rowCatasto.getL12Particella());
			dto2.setSubalterno(rowCatasto.getL12Sub());
			dto2.setPodElettrico(rowCatasto.getL12Pod());
			dto2.setPdrGas(rowCatasto.getL12Pdr());
			dto2.setDataUltMod(DateUtil.getSqlDataCorrente());
			dto2.setFlgPrincipale(ConvertUtil.convertToBigDecimal(false));
			if(GenericUtil.isNullOrEmpty(dto2.getFoglio()))//per evitare di inserire righe vuote
				continue;
			output.add(dto2);
		}
		return output;
	}

	public static SigitTUnitaImmobiliareDto getUnitaImmobiliarePrincipale(SigitTUnitaImmobiliareDto uiPrincipale, DatiSchedaIdentificativaImp datiImp)
	{
		try {
			uiPrincipale.setL12FlgSingolaUnita(ConvertUtil.convertToBigDecimal(datiImp.getL12FlagUnitaImmSingle()));
		} catch (Exception e) {uiPrincipale.setL12FlgSingolaUnita(null);}
		try {
			uiPrincipale.setL12VolRiscM3(datiImp.getL12VolLordoRisc());
		} catch (Exception e) {uiPrincipale.setL12VolRiscM3(null);}
		try {
			uiPrincipale.setL12VolRaffM3(datiImp.getL12VolLordoRaffr());
		} catch (Exception e) {uiPrincipale.setL12VolRaffM3(null);}
		String categoria = null;
		if(datiImp.getL12FlagE1())
			categoria = Constants.ID_UNITA_IMMOB_CATEGORIA_E1;
		if(datiImp.getL12FlagE2())
			categoria = Constants.ID_UNITA_IMMOB_CATEGORIA_E2;
		if(datiImp.getL12FlagE3())
			categoria = Constants.ID_UNITA_IMMOB_CATEGORIA_E3;
		if(datiImp.getL12FlagE4())
			categoria = Constants.ID_UNITA_IMMOB_CATEGORIA_E4;
		if(datiImp.getL12FlagE5())
			categoria = Constants.ID_UNITA_IMMOB_CATEGORIA_E5;
		if(datiImp.getL12FlagE6())
			categoria = Constants.ID_UNITA_IMMOB_CATEGORIA_E6;
		if(datiImp.getL12FlagE7())
			categoria = Constants.ID_UNITA_IMMOB_CATEGORIA_E7;
		if(datiImp.getL12FlagE8())
			categoria = Constants.ID_UNITA_IMMOB_CATEGORIA_E8;
		uiPrincipale.setL12FkCategoria(categoria);
		return uiPrincipale;
	}

	public static SigitTUnitaImmobiliareDto getUnitaImmobiliarePrincipaleLight(SigitTUnitaImmobiliareDto uiPrincipale, it.csi.sigit.sigitwebn.xml.librettoLight.data.DatiSchedaIdentificativaImpDocument.DatiSchedaIdentificativaImp datiImp)
	{
		try {
			uiPrincipale.setL12FlgSingolaUnita(ConvertUtil.convertToBigDecimal(datiImp.getL12FlagUnitaImmSingle()));
		} catch (Exception e) {uiPrincipale.setL12FlgSingolaUnita(null);}
		try {
			uiPrincipale.setL12VolRiscM3(datiImp.getL12VolLordoRisc());
		} catch (Exception e) {uiPrincipale.setL12VolRiscM3(null);}
		try {
			uiPrincipale.setL12VolRaffM3(datiImp.getL12VolLordoRaffr());
		} catch (Exception e) {uiPrincipale.setL12VolRaffM3(null);}
		String categoria = null;
		log.debug("dati impianto: " + datiImp);
		log.debug("categoria: " + datiImp.getL12FlagE1());
		if(datiImp.getL12FlagE1())
			categoria = Constants.ID_UNITA_IMMOB_CATEGORIA_E1;
		if(datiImp.getL12FlagE2())
			categoria = Constants.ID_UNITA_IMMOB_CATEGORIA_E2;
		if(datiImp.getL12FlagE3())
			categoria = Constants.ID_UNITA_IMMOB_CATEGORIA_E3;
		if(datiImp.getL12FlagE4())
			categoria = Constants.ID_UNITA_IMMOB_CATEGORIA_E4;
		if(datiImp.getL12FlagE5())
			categoria = Constants.ID_UNITA_IMMOB_CATEGORIA_E5;
		if(datiImp.getL12FlagE6())
			categoria = Constants.ID_UNITA_IMMOB_CATEGORIA_E6;
		if(datiImp.getL12FlagE7())
			categoria = Constants.ID_UNITA_IMMOB_CATEGORIA_E7;
		if(datiImp.getL12FlagE8())
			categoria = Constants.ID_UNITA_IMMOB_CATEGORIA_E8;
		uiPrincipale.setL12FkCategoria(categoria);
		return uiPrincipale;
	}
	
	public static SigitTImpiantoDto getSigitTImpianto(SigitTImpiantoDto impiantoDb, DatiSchedaIdentificativaImp datiImp)
	{
		impiantoDb.setL13Altro(datiImp.getL13DescrAltro());
		try {
			impiantoDb.setL13PotClimaEstKw(datiImp.getL13PotUtileClimaEst());
		} catch (Exception e) {
			impiantoDb.setL13PotClimaEstKw(null);
		}
		try {
			impiantoDb.setL13PotClimaInvKw(datiImp.getL13PotUtileClimaInv());
		} catch (Exception e) {
			impiantoDb.setL13PotClimaInvKw(null);
		}
		try {
			impiantoDb.setL13PotH2oKw(datiImp.getL13PotUtileACS());
		} catch (Exception e) {
			impiantoDb.setL13PotH2oKw(null);
		}
		impiantoDb.setL14FlgH2o(ConvertUtil.convertToBigDecimal(datiImp.getL14FlagH2O()));
		impiantoDb.setL14Altro(datiImp.getL14DescrAltro());
		impiantoDb.setL14FlgAria(ConvertUtil.convertToBigDecimal(datiImp.getL14FlagAria()));
		impiantoDb.setL15Altro(datiImp.getL15DescrAltro());
		impiantoDb.setL15AltroDesc(datiImp.getL15DescrAltroPer());
		impiantoDb.setL15AltroIntegrazione(datiImp.getL15DescrAltrIntegraz());
		try {
			impiantoDb.setL15AltroIntegrPotKw(datiImp.getL15PotUtile());
		} catch (Exception e) {
			impiantoDb.setL15AltroIntegrPotKw(null);
		}
		impiantoDb.setL15FlgAltroAcs(ConvertUtil.convertToBigDecimal(datiImp.getL15FlagProdACS()));
		impiantoDb.setL15FlgAltroClimaEstate(ConvertUtil.convertToBigDecimal(datiImp.getL15FlagClimaEst()));
		impiantoDb.setL15FlgAltroClimaInv(ConvertUtil.convertToBigDecimal(datiImp.getL15FlagClimaInv()));
		impiantoDb.setL15FlgCogeneratore(ConvertUtil.convertToBigDecimal(datiImp.getL15FlagCogener()));
		impiantoDb.setL15FlgFrigo(ConvertUtil.convertToBigDecimal(datiImp.getL15FlagMaccFrigo()));
		impiantoDb.setL15FlgGeneratore(ConvertUtil.convertToBigDecimal(datiImp.getL15FlagGeneratCombu()));
		impiantoDb.setL15FlgPompa(ConvertUtil.convertToBigDecimal(datiImp.getL15FlagPompaCal()));
		impiantoDb.setL15FlgTeleraffr(ConvertUtil.convertToBigDecimal(datiImp.getL15FlagTeleraffr()));
		impiantoDb.setL15FlgTelerisc(ConvertUtil.convertToBigDecimal(datiImp.getL15FlagTelerisc()));
		try {
			impiantoDb.setL15SupPannelliSolM2(datiImp.getL15SuperfLordaTot());
		} catch (Exception e) {
			impiantoDb.setL15SupPannelliSolM2(null);
		}
		return impiantoDb;
	}

	public static SigitTImpiantoDto getSigitTImpiantoLight(SigitTImpiantoDto impiantoDb, it.csi.sigit.sigitwebn.xml.librettoLight.data.DatiSchedaIdentificativaImpDocument.DatiSchedaIdentificativaImp datiImp)
	{
		impiantoDb.setL13Altro(datiImp.getL13DescrAltro());
		try {impiantoDb.setL13PotClimaEstKw(datiImp.getL13PotUtileClimaEst());} catch (Exception e) {
			impiantoDb.setL13PotClimaEstKw(null);}
		try {impiantoDb.setL13PotClimaInvKw(datiImp.getL13PotUtileClimaInv());} catch (Exception e) {
			impiantoDb.setL13PotClimaInvKw(null);}
		try {impiantoDb.setL13PotH2oKw(datiImp.getL13PotUtileACS());} catch (Exception e) {
			impiantoDb.setL13PotH2oKw(null);}
		impiantoDb.setL14FlgH2o(ConvertUtil.convertToBigDecimal(datiImp.getL14FlagH2O()));
		impiantoDb.setL14Altro(datiImp.getL14DescrAltro());
		impiantoDb.setL14FlgAria(ConvertUtil.convertToBigDecimal(datiImp.getL14FlagAria()));
		impiantoDb.setL15Altro(datiImp.getL15DescrAltro());
		impiantoDb.setL15AltroDesc(datiImp.getL15DescrAltroPer());
		impiantoDb.setL15AltroIntegrazione(datiImp.getL15DescrAltrIntegraz());
		try {impiantoDb.setL15AltroIntegrPotKw(datiImp.getL15PotUtile());} catch (Exception e) {
			impiantoDb.setL15AltroIntegrPotKw(null);}
		impiantoDb.setL15FlgAltroAcs(ConvertUtil.convertToBigDecimal(datiImp.getL15FlagProdACS()));
		impiantoDb.setL15FlgAltroClimaEstate(ConvertUtil.convertToBigDecimal(datiImp.getL15FlagClimaEst()));
		impiantoDb.setL15FlgAltroClimaInv(ConvertUtil.convertToBigDecimal(datiImp.getL15FlagClimaInv()));
		impiantoDb.setL15FlgCogeneratore(ConvertUtil.convertToBigDecimal(datiImp.getL15FlagCogener()));
		impiantoDb.setL15FlgFrigo(ConvertUtil.convertToBigDecimal(datiImp.getL15FlagMaccFrigo()));
		impiantoDb.setL15FlgGeneratore(ConvertUtil.convertToBigDecimal(datiImp.getL15FlagGeneratCombu()));
		impiantoDb.setL15FlgPompa(ConvertUtil.convertToBigDecimal(datiImp.getL15FlagPompaCal()));
		impiantoDb.setL15FlgTeleraffr(ConvertUtil.convertToBigDecimal(datiImp.getL15FlagTeleraffr()));
		impiantoDb.setL15FlgTelerisc(ConvertUtil.convertToBigDecimal(datiImp.getL15FlagTelerisc()));
		try {impiantoDb.setL15SupPannelliSolM2(datiImp.getL15SuperfLordaTot());} catch (Exception e) {
			impiantoDb.setL15SupPannelliSolM2(null);}
		return impiantoDb;
	}
	
	public static SigitTTrattH2ODto getSigitTTrattH2o(String codImpianto, DatiSchedaTrattH2O datiH)
	{
		SigitTTrattH2ODto dto = new SigitTTrattH2ODto();
		dto.setCodiceImpianto(new BigDecimal(codImpianto));
		try {
			dto.setL21H2oClimaM3(datiH.getL21ContenutoH2OimpClima());
		} catch (Exception e) {dto.setL21H2oClimaM3(null);}
		try {
			dto.setL22DurezzaH2oFr(datiH.getL22DurezzaTotaleH2O());
		} catch (Exception e) {dto.setL22DurezzaH2oFr(null);}
		
		try {
			dto.setL23DurezzaTotH2oFr(datiH.getL23DurezzaTotaleH2O());
		} catch (Exception e) {dto.setL23DurezzaTotH2oFr(null);}
		dto.setL23FlgTrattClimaAddolc(ConvertUtil.convertToBigDecimal(datiH.getL23FlagAddolcimento()));
		dto.setL23FlgTrattClimaAssente(ConvertUtil.convertToBigDecimal(datiH.getL23FlagAssenteH2Oclima()));
		dto.setL23FlgTrattClimaChimico(ConvertUtil.convertToBigDecimal(datiH.getL23FlagCondizChimico()));
		dto.setL23FlgTrattClimaFiltr(ConvertUtil.convertToBigDecimal(datiH.getL23FlagFiltrazione()));
		dto.setL23FlgTrattGeloAssente(ConvertUtil.convertToBigDecimal(datiH.getL23FlagAssenteProtGelo()));
		dto.setL23FlgTrattGeloGliEtil(ConvertUtil.convertToBigDecimal(datiH.getL23FlagGlicoleEtilenic()));
		dto.setL23FlgTrattGeloGliProp(ConvertUtil.convertToBigDecimal(datiH.getL23FlagGlicolePropLenic()));
		try {
			dto.setL23PercGliEtil(datiH.getL23PercConcentrazEtilenic());
		} catch (Exception e) {dto.setL23PercGliEtil(null);}
		try {
			dto.setL23PercGliProp(datiH.getL23PercConcentrazPropLenic());
		} catch (Exception e) {dto.setL23PercGliProp(null);}
		try {
			dto.setL23PhGliEtil(datiH.getL23PHconcentrazEtilenic());
		} catch (Exception e) {dto.setL23PhGliEtil(null);}
		try {
			dto.setL23PhGliProp(datiH.getL23PHconcentrazPropLenic());
		} catch (Exception e) {dto.setL23PhGliProp(null);}
		
		try {
			dto.setL24DurezzaAddolcFr(datiH.getL24DurezzaTotaleAddolcit());
		} catch (Exception e) {dto.setL24DurezzaAddolcFr(null);}
		dto.setL24FlgTrattAcsAddolc(ConvertUtil.convertToBigDecimal(datiH.getL24FlagAddolcimento()));
		dto.setL24FlgTrattAcsAssente(ConvertUtil.convertToBigDecimal(datiH.getL24FlagAssente()));
		dto.setL24FlgTrattAcsChimico(ConvertUtil.convertToBigDecimal(datiH.getL24FlagCondizChimico()));
		dto.setL24FlgTrattAcsFiltr(ConvertUtil.convertToBigDecimal(datiH.getL24FlagFiltrazione()));
		
		try {
			dto.setL25ConducH2oIng(datiH.getL25ConducibH2Oingresso());
		} catch (Exception e) {dto.setL25ConducH2oIng(null);}
		dto.setL25FlgSpurgoAutom(ConvertUtil.convertToBigDecimal(datiH.getL25FlagPrefSpurgoAutom()));
		try {
			dto.setL25TrattCAltro(datiH.getL25CondChimAltro());
		} catch (Exception e) {dto.setL25TrattCAltro(null);}
		dto.setL25FlgTrattCAaa(ConvertUtil.convertToBigDecimal(datiH.getL25FlagCondChimAnticrostaAntiCorr()));
		dto.setL25FlgTrattCBiocida(ConvertUtil.convertToBigDecimal(datiH.getL25FlagCondChimBiocida()));
		dto.setL25FlgTrattCNoTratt(ConvertUtil.convertToBigDecimal(datiH.getL25FlagCondChimNoTrattam()));
		dto.setL25FlgTrattCPaanticorr(ConvertUtil.convertToBigDecimal(datiH.getL25FlagCondChimAnticorr()));
		dto.setL25FlgTrattCPaantincro(ConvertUtil.convertToBigDecimal(datiH.getL25FlagCondChimAnticrosta()));
		dto.setL25TrattFAltro(datiH.getL25FiltrazioneAltro());
		dto.setL25FlgTrattFFiltMas(ConvertUtil.convertToBigDecimal(datiH.getL25FlagFiltrazMasse()));
		dto.setL25FlgTrattFFiltSic(ConvertUtil.convertToBigDecimal(datiH.getL25FlagFiltrazSicurezza()));
		dto.setL25FlgTrattFNoTratt(ConvertUtil.convertToBigDecimal(datiH.getL25FlagFiltrazNoTrattam()));
		dto.setL25FlgTrattRaffAcq(ConvertUtil.convertToBigDecimal(datiH.getL25FlagAcquedotto()));
		dto.setL25FlgTrattRaffAssente(ConvertUtil.convertToBigDecimal(datiH.getL25FlagAssente()));
		dto.setL25FlgTrattRaffH2oSup(ConvertUtil.convertToBigDecimal(datiH.getL25FlagAcquaSuperficiale()));
		dto.setL25FlgTrattRaffNoRt(ConvertUtil.convertToBigDecimal(datiH.getL25FlagSenzaRecupTerm()));
		dto.setL25FlgTrattRaffPzz(ConvertUtil.convertToBigDecimal(datiH.getL25FlagPozzo()));
		dto.setL25FlgTrattRaffRtp(ConvertUtil.convertToBigDecimal(datiH.getL25FlagRecupTermParz()));
		dto.setL25FlgTrattRaffRtt(ConvertUtil.convertToBigDecimal(datiH.getL25FlagRecupTermTot()));

		dto.setL25TrattTAltro(datiH.getL25TrattamentoAltro());
		dto.setL25FlgTrattTAddolc(ConvertUtil.convertToBigDecimal(datiH.getL25FlagTrattAddolcim()));
		dto.setL25FlgTrattTDemin(ConvertUtil.convertToBigDecimal(datiH.getL25FlagTrattDemineralizz()));
		dto.setL25FlgTrattTNoTratt(ConvertUtil.convertToBigDecimal(datiH.getL25FlagTrattNoTrattam()));
		dto.setL25FlgTrattTOsmosi(ConvertUtil.convertToBigDecimal(datiH.getL25FlagTrattOsmosi()));
		
		try {
			dto.setL25Taratura(datiH.getL25TaraturaSpurgo());
		} catch (Exception e) {dto.setL25Taratura(null);}
		
		return dto;
	}
	
	public static SigitTComp4Dto getSigitTComp4(BigDecimal codImpianto, RowGT gt)
	{
		SigitTComp4Dto dto = new SigitTComp4Dto();
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_GT);
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(gt.getL41NumGT()));
//		try{dto.setDataInstall(DateUtil.getSqlDate(gt.getL41DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
//		try{dto.setDataDismiss(DateUtil.getSqlDate(gt.getL41DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
//		dto.setFkMarca(ConvertUtil.convertToBigDecimal(gt.getL41Fabbricante()));
//		dto.setModello(gt.getL41Modello());
//		dto.setMatricola(gt.getL41Matricola());
//		dto.setFkCombustibile(ConvertUtil.convertToBigDecimal(gt.getL41Combustibile()));
//		try {dto.setPotenzaTermicaKw(gt.getL41PotTermUtileMax());} catch (Exception e) {dto.setPotenzaTermicaKw(null);}
//		dto.setFlgDismissione(ConvertUtil.convertToBigDecimal(gt.getFlagDismissione()));
		return dto;
	}
	
	public static SigitTComp4Dto getSigitTComp4 (SigitTComp4Pk pk) {
		SigitTComp4Dto dto = new SigitTComp4Dto();
		dto.setIdTipoComponente(pk.getIdTipoComponente());
		dto.setCodiceImpianto(pk.getCodiceImpianto());
		dto.setProgressivo(pk.getProgressivo());
		return dto;
	}

	public static SigitTComp4Dto getSigitTComp4(BigDecimal codImpianto, BigDecimal progressivo, RowGTsost gt)
	{
		SigitTComp4Dto dto = new SigitTComp4Dto();
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_GT);
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(progressivo);
//		try{dto.setDataInstall(DateUtil.getSqlDate(gt.getL41DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
//		try{dto.setDataDismiss(DateUtil.getSqlDate(gt.getL41DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
//		dto.setFkMarca(ConvertUtil.convertToBigDecimal(gt.getL41Fabbricante()));
//		dto.setModello(gt.getL41Modello());
//		dto.setMatricola(gt.getL41Matricola());
//		try {dto.setFkCombustibile(ConvertUtil.convertToBigDecimal(gt.getL41Combustibile()));} catch (Exception e) {dto.setFkCombustibile(null);}
//		try {dto.setPotenzaTermicaKw(gt.getL41PotTermUtileMax());} catch (Exception e) {dto.setPotenzaTermicaKw(null);}
		return dto;
	}
	
	public static SigitRComp4ManutDto getSigitRComp4Manut(BigDecimal codImpianto, RowGT gt, Integer idPersonaGiuridica, int idRuolo, String cfUtenteMod)
	{
		SigitRComp4ManutDto dto = new SigitRComp4ManutDto();
		dto.setFkPersonaGiuridica(ConvertUtil.convertToBigDecimal(idPersonaGiuridica));
		dto.setCodiceImpianto(codImpianto);
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_GT);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(gt.getL41NumGT()));
//		try{dto.setDataInstall(DateUtil.getSqlDate(gt.getL41DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		dto.setDataInizio(DateUtil.getSqlCurrentDate());

		dto.setFkRuolo(ConvertUtil.convertToBigDecimal(idRuolo));
		
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		dto.setUtenteUltMod(cfUtenteMod);
		
		
		return dto;
	}
	
	public static SigitRComp4ManutDto getSigitRComp4Manut(BigDecimal codImpianto, String tipoComponente, BigDecimal progressivo, int idRuolo, Integer idPersonaGiuridica, String cfUtente)
	{
		SigitRComp4ManutDto dto = new SigitRComp4ManutDto();
		dto.setFkPersonaGiuridica(ConvertUtil.convertToBigDecimal(idPersonaGiuridica));
		dto.setCodiceImpianto(codImpianto);
		dto.setIdTipoComponente(tipoComponente);
		dto.setProgressivo(progressivo);
		dto.setDataInizio(DateUtil.getSqlCurrentDate());
		dto.setFkRuolo(ConvertUtil.convertToBigDecimal(idRuolo));
		
		if (cfUtente != null) {
			//si settano i dati della modifica
			dto.setUtenteUltMod(cfUtente);
			dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		}
		
		return dto;
	}
	
	
	public static SigitRComp4ManutDto getSigitRComp4Manut(BigDecimal codImpianto, RowGF gf, Integer idPersonaGiuridica, int idRuolo, String cfUtenteMod)
	{
		SigitRComp4ManutDto dto = new SigitRComp4ManutDto();
		dto.setFkPersonaGiuridica(ConvertUtil.convertToBigDecimal(idPersonaGiuridica));
		dto.setCodiceImpianto(codImpianto);
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_GF);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(gf.getL44NumGF()));
//		try{dto.setDataInstall(DateUtil.getSqlDate(gt.getL41DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		dto.setDataInizio(DateUtil.getSqlCurrentDate());

		dto.setFkRuolo(ConvertUtil.convertToBigDecimal(idRuolo));
		
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		dto.setUtenteUltMod(cfUtenteMod);
		
		return dto;
	}
	
	public static SigitRComp4ManutDto getSigitRComp4Manut(BigDecimal codImpianto, RowSC sc, Integer idPersonaGiuridica, int idRuolo, String cfUtenteMod)
	{
		SigitRComp4ManutDto dto = new SigitRComp4ManutDto();
		dto.setFkPersonaGiuridica(ConvertUtil.convertToBigDecimal(idPersonaGiuridica));
		dto.setCodiceImpianto(codImpianto);
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_SC);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(sc.getL45NumSC()));
//		try{dto.setDataInstall(DateUtil.getSqlDate(gt.getL41DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		dto.setDataInizio(DateUtil.getSqlCurrentDate());

		dto.setFkRuolo(ConvertUtil.convertToBigDecimal(idRuolo));
		
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		dto.setUtenteUltMod(cfUtenteMod);
		
		return dto;
	}
	
	public static SigitRComp4ManutDto getSigitRComp4Manut(BigDecimal codImpianto, RowCG gt, Integer idPersonaGiuridica, int idRuolo, String cfUtenteMod)
	{
		SigitRComp4ManutDto dto = new SigitRComp4ManutDto();
		dto.setFkPersonaGiuridica(ConvertUtil.convertToBigDecimal(idPersonaGiuridica));
		dto.setCodiceImpianto(codImpianto);
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_CG);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(gt.getL46NumCG()));
//		try{dto.setDataInstall(DateUtil.getSqlDate(gt.getL41DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		dto.setDataInizio(DateUtil.getSqlCurrentDate());

		dto.setFkRuolo(ConvertUtil.convertToBigDecimal(idRuolo));
		
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		dto.setUtenteUltMod(cfUtenteMod);
		
		return dto;
	}
	
	public static SigitRComp4ManutDto getSigitRComp4Manut(BigDecimal codImpianto, BigDecimal progressivo, RowGTsost gt, Integer idPersonaGiuridica, int idRuolo)
	{
		SigitRComp4ManutDto dto = new SigitRComp4ManutDto();
		dto.setFkPersonaGiuridica(ConvertUtil.convertToBigDecimal(idPersonaGiuridica));
		dto.setCodiceImpianto(codImpianto);
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_GT);
		dto.setProgressivo(progressivo);
//		try{dto.setDataInstall(DateUtil.getSqlDate(gt.getL41DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		
		dto.setDataInizio(DateUtil.getSqlYesterdayDate());
		dto.setDataFine(DateUtil.getSqlYesterdayDate());
		dto.setFkRuolo(ConvertUtil.convertToBigDecimal(idRuolo));
		
		return dto;
	}
	
	public static SigitTCompGtDto getSigitTCompGt(BigDecimal codImpianto, RowGT gt, String cfUtenteMod)
	{
		SigitTCompGtDto dto = new SigitTCompGtDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(gt.getL41NumGT()));
		try{dto.setDataInstall(DateUtil.getSqlDate(gt.getL41DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setDataDismiss(DateUtil.getSqlDate(gt.getL41DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		dto.setFkMarca(ConvertUtil.convertToBigDecimal(gt.getL41Fabbricante()));
		dto.setModello(gt.getL41Modello());
		dto.setMatricola(gt.getL41Matricola());
		try {dto.setFkCombustibile(ConvertUtil.convertToBigDecimal(gt.getL41Combustibile()));} catch (Exception e) {dto.setFkCombustibile(null);}
		try {dto.setPotenzaTermicaKw(gt.getL41PotTermUtileMax());} catch (Exception e) {dto.setPotenzaTermicaKw(null);}
		dto.setFlgDismissione(ConvertUtil.convertToBigDecimal(gt.getFlagDismissione()));

		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_GT);
		try {dto.setFkFluido(ConvertUtil.convertToBigDecimal(gt.getL41FluidoTermoVett()));} catch (Exception e) {dto.setFkFluido(null);}
		try {dto.setNModuli(ConvertUtil.convertToBigDecimal(gt.getL41NumAnalisiFumi()));} catch (Exception e) {dto.setNModuli(null);}
		try {dto.setRendimentoPerc(gt.getL41PercRendimTermUtileMax());} catch (Exception e) {dto.setRendimentoPerc(null);}
		if(gt.getL41GTsingolo())
			dto.setFkDettaglioGt(ConvertUtil.convertToBigDecimal(Constants.ID_DETT_GT_GRUPPO_TERM_SING));
		try{if(gt.getL41GTModulare())
				dto.setFkDettaglioGt(ConvertUtil.convertToBigDecimal(Constants.ID_DETT_GT_GRUPPO_TERM_MOD));}catch (Exception e) {dto.setFkDettaglioGt(null);}
		if(gt.getL41TupoRadiante())
			dto.setFkDettaglioGt(ConvertUtil.convertToBigDecimal(Constants.ID_DETT_GT_TUBO_RADIANTE));
		if(gt.getL41GenAriaCalda())
			dto.setFkDettaglioGt(ConvertUtil.convertToBigDecimal(Constants.ID_DETT_GT_GEN_ARIA_CALDA));
		if(dto.getNModuli()==null)
			dto.setNModuli(new BigDecimal("1"));
		
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		dto.setUtenteUltMod(cfUtenteMod);
		
		return dto;
	}

	public static SigitTCompGtDto getSigitTCompGtSost(BigDecimal codImpianto, BigDecimal progressivo, RowGTsost gt, String cfUtenteMod)
	{
		SigitTCompGtDto dto = new SigitTCompGtDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(progressivo);
		try{dto.setDataInstall(DateUtil.getSqlDate(gt.getL41DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setDataDismiss(DateUtil.getSqlDate(gt.getL41DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		dto.setFkMarca(ConvertUtil.convertToBigDecimal(gt.getL41Fabbricante()));
		dto.setModello(gt.getL41Modello());
		dto.setMatricola(gt.getL41Matricola());
		try {dto.setFkCombustibile(ConvertUtil.convertToBigDecimal(gt.getL41Combustibile()));} catch (Exception e) {dto.setFkCombustibile(null);}
		try {dto.setPotenzaTermicaKw(gt.getL41PotTermUtileMax());} catch (Exception e) {dto.setPotenzaTermicaKw(null);}
		
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_GT);
		try {dto.setFkFluido(ConvertUtil.convertToBigDecimal(gt.getL41FluidoTermoVett()));} catch (Exception e) {dto.setFkFluido(null);}
		try {dto.setNModuli(ConvertUtil.convertToBigDecimal(gt.getL41NumAnalisiFumi()));} catch (Exception e) {dto.setNModuli(null);}
		try {dto.setRendimentoPerc(gt.getL41PercRendimTermUtileMax());} catch (Exception e) {dto.setRendimentoPerc(null);}
		if(gt.getL41GTsingolo())
			dto.setFkDettaglioGt(ConvertUtil.convertToBigDecimal(Constants.ID_DETT_GT_GRUPPO_TERM_SING));
		try{if(gt.getL41GTModulare())
			dto.setFkDettaglioGt(ConvertUtil.convertToBigDecimal(Constants.ID_DETT_GT_GRUPPO_TERM_MOD));
		}catch (Exception e) {dto.setFkDettaglioGt(null);}
		if(gt.getL41TupoRadiante())
			dto.setFkDettaglioGt(ConvertUtil.convertToBigDecimal(Constants.ID_DETT_GT_TUBO_RADIANTE));
		if(gt.getL41GenAriaCalda())
			dto.setFkDettaglioGt(ConvertUtil.convertToBigDecimal(Constants.ID_DETT_GT_GEN_ARIA_CALDA));
		if(dto.getNModuli()==null)
			dto.setNModuli(new BigDecimal("1"));
		
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		dto.setUtenteUltMod(cfUtenteMod);
		
		return dto;
	}

	public static SigitTCompBrRcDto getSigitTCompBrSost(BigDecimal idImpianto, BigDecimal progressivoBr, RowBRsost br, RowGT gt)
	{
		SigitTCompBrRcDto dto = new SigitTCompBrRcDto();
		dto.setCodiceImpianto(idImpianto);
		dto.setFkProgressivo(ConvertUtil.convertToBigDecimal(gt.getL41NumGT()));
		dto.setFkTipoComponente(Constants.TIPO_COMPONENTE_GT);
		try{dto.setFkDataInstall(DateUtil.getSqlDate(gt.getL41DataInstallaz()));}catch (Exception e) {dto.setFkDataInstall(null);}
		dto.setProgressivoBrRc(progressivoBr);
		try{dto.setDataInstall(DateUtil.getSqlDate(br.getL42DataInstallaz()));}catch(Exception e){dto.setDataInstall(null);}
		try{dto.setDataDismiss(DateUtil.getSqlDate(br.getL42DataDismiss()));}catch(Exception e1){dto.setDataDismiss(null);}
		dto.setFkMarca(ConvertUtil.convertToBigDecimal(br.getL42Fabbricante()));
		dto.setModello(br.getL42Modello());
		dto.setMatricola(br.getL42Matricola());
		dto.setTipologia(br.getL42Tipologia());
		dto.setTipologiaBrRc(Constants.TIPO_COMPONENTE_BR);

		try {dto.setPotTermMaxKw(br.getL42PortataTermMaxNom());} catch (Exception e) {dto.setPotTermMaxKw(null);}
		try {dto.setPotTermMinKw(br.getL42PortataTermMinNom());} catch (Exception e) {dto.setPotTermMinKw(null);}
		dto.setFkCombustibile(ConvertUtil.convertToBigDecimal(br.getL42Combustibile()));
		return dto;
	}

	public static SigitTCompBrRcDto getSigitTCompRcSost(BigDecimal idImpianto, BigDecimal progressivoBr, RowRCsost rc, RowGT gt)
	{
		SigitTCompBrRcDto dto = new SigitTCompBrRcDto();
		dto.setCodiceImpianto(idImpianto);
		dto.setFkProgressivo(ConvertUtil.convertToBigDecimal(gt.getL41NumGT()));
		dto.setFkTipoComponente(Constants.TIPO_COMPONENTE_GT);
		try{dto.setFkDataInstall(DateUtil.getSqlDate(gt.getL41DataInstallaz()));}catch (Exception e) {dto.setFkDataInstall(null);}
		dto.setProgressivoBrRc(progressivoBr);
		dto.setDataInstall(DateUtil.getSqlDate(rc.getL43DataInstallaz()));
		try {dto.setDataDismiss(DateUtil.getSqlDate(rc.getL43DataDismiss()));} catch (Exception e1) {dto.setDataDismiss(null);}
		dto.setFkMarca(ConvertUtil.convertToBigDecimal(rc.getL43Fabbricante()));
		dto.setModello(rc.getL43Modello());
		dto.setMatricola(rc.getL43Matricola());
		dto.setTipologiaBrRc(Constants.TIPO_COMPONENTE_RC);
		try {dto.setPotTermMaxKw(rc.getL43PotTermNomTot());} catch (Exception e) {dto.setPotTermMaxKw(null);}
		return dto;
	}
	
	public static CompFilter getCompFilter(SigitTComp4Dto input)
	{
		CompFilter filtro = new CompFilter();
		filtro.setCodImpianto(ConvertUtil.convertToString(input.getCodiceImpianto()));
		filtro.setTipoComponente(input.getIdTipoComponente());
		filtro.setProgressivo(ConvertUtil.convertToString(input.getProgressivo()));
		
		return filtro;
	}
	
	public static SigitTComp4Pk getSigittComp4Pk(SigitTComp4Dto input)
	{
		SigitTComp4Pk pk = new SigitTComp4Pk();
		pk.setCodiceImpianto(input.getCodiceImpianto());
//		pk.setDataInstall(input.getDataInstall());
		pk.setIdTipoComponente(input.getIdTipoComponente());
		pk.setProgressivo(input.getProgressivo());
		return pk;
	}

	
	public static SigitRComp4ManutDto getSigitrComp4ManutPk(SigitTComp4Dto input)
	{
		SigitRComp4ManutDto comp4Manut = new SigitRComp4ManutDto();
		comp4Manut.setCodiceImpianto(input.getCodiceImpianto());
//		comp4Manut.setDataInstall(compToDel.getDataInstall());
		comp4Manut.setIdTipoComponente(input.getIdTipoComponente());
		comp4Manut.setProgressivo(input.getProgressivo());
		return comp4Manut;
	}
	
	public static SigitTCompGtPk getSigittCompGtPk(SigitTCompGtDto input)
	{
		SigitTCompGtPk pk = new SigitTCompGtPk();
		pk.setCodiceImpianto(input.getCodiceImpianto());
		pk.setDataInstall(input.getDataInstall());
		pk.setIdTipoComponente(input.getIdTipoComponente());
		pk.setProgressivo(input.getProgressivo());
		return pk;
	}
	
	public static SigitTCompCgPk getSigittCompCgPk(SigitTCompCgDto input)
	{
		SigitTCompCgPk pk = new SigitTCompCgPk();
		pk.setCodiceImpianto(input.getCodiceImpianto());
		pk.setDataInstall(input.getDataInstall());
		pk.setIdTipoComponente(input.getIdTipoComponente());
		pk.setProgressivo(input.getProgressivo());
		return pk;
	}
	
	public static SigitTComp4Pk getSigittComp4Pk(SigitTCompCgDto input)
	{
		SigitTComp4Pk pk = new SigitTComp4Pk();
		pk.setCodiceImpianto(input.getCodiceImpianto());
//		pk.setDataInstall(input.getDataInstall());
		pk.setIdTipoComponente(input.getIdTipoComponente());
		pk.setProgressivo(input.getProgressivo());
		return pk;
	}

	
	public static SigitRComp4ManutDto getSigitrComp4ManutPk(SigitTCompCgDto input)
	{
		SigitRComp4ManutDto comp4Manut = new SigitRComp4ManutDto();
		comp4Manut.setCodiceImpianto(input.getCodiceImpianto());
//		comp4Manut.setDataInstall(compToDel.getDataInstall());
		comp4Manut.setIdTipoComponente(input.getIdTipoComponente());
		comp4Manut.setProgressivo(input.getProgressivo());
		return comp4Manut;
	}
	
	public static IdentificativoImpianto mapToImpiantoPerAllegati(List<SigitVTotImpiantoCercaImpiantoPerAllegatiDto> lista) {
		
		IdentificativoImpianto obj = new IdentificativoImpianto();
		
		 if(lista!=null && lista.size()>0){
			 int dimensioneImpianti = lista.size();
			 if(dimensioneImpianti == 1){
				 //ne ho solo uno di impianto non devo concatenare i responsabili
				 SigitVTotImpiantoCercaImpiantoPerAllegatiDto dto = lista.get(0);
				 obj.setCodiceImpianto(ConvertUtil.convertToString(dto.getCodiceImpianto()));
				 String responsabile = "";
				 
				 if(dto.getDenominazione()!=null)
					 responsabile = dto.getDenominazione()+" ";
				 if(dto.getNome()!=null)
					 responsabile = responsabile + dto.getNome();
				 
				 obj.setResponsabile(responsabile);
				 //obj.setUbicazione(dto.getIndirizzo()+", "+dto.getCivico()+" "+dto.getDenominazioneComune()+ " ("+dto.getSiglaProvincia()+")" );
				 obj.setUbicazione(getIndirizzoCompleto(dto.getDenominazioneComune(), dto.getIndirizzo(), dto.getCivico(), dto.getSiglaProvincia()));

			 }else{
				//devo concatenare i responsabili 
				 int count = 0;
				 String responsabile ="";
//				 String indirizzo =  "";
				 for(SigitVTotImpiantoCercaImpiantoPerAllegatiDto dtoImpianto : lista){
					 //mi chiamo il medodo di mapping
					 if(count == 0){
						 obj.setCodiceImpianto(ConvertUtil.convertToString(dtoImpianto.getCodiceImpianto()));

						 
						 //obj.setUbicazione(dtoImpianto.getIndirizzo()+", "+dtoImpianto.getCivico()+" "+dtoImpianto.getDenominazioneComune()+" ("+dtoImpianto.getSiglaProvincia()+")");
					     
						 obj.setUbicazione(getIndirizzoCompleto(dtoImpianto.getDenominazioneComune(), dtoImpianto.getIndirizzo(), dtoImpianto.getCivico(), dtoImpianto.getSiglaProvincia()));

						 
					     if(dtoImpianto.getDenominazione()!=null)
					    	 responsabile = dtoImpianto.getDenominazione()+" ";
						 if(dtoImpianto.getNome()!=null)
					    	 responsabile = responsabile + dtoImpianto.getNome()+", ";
					     
					 }else if(count == (dimensioneImpianti-1)){
					     if(dtoImpianto.getDenominazione()!=null)
					    	 responsabile = responsabile + dtoImpianto.getDenominazione()+" ";
						 if(dtoImpianto.getNome()!=null)
					    	 responsabile = responsabile + dtoImpianto.getNome();
					     
					 }else{
					     if(dtoImpianto.getDenominazione()!=null)
					    	 responsabile = responsabile + dtoImpianto.getDenominazione()+" ";
						 if(dtoImpianto.getNome()!=null)
					    	 responsabile = responsabile + dtoImpianto.getNome()+", ";
					     
					 }
					 count++;
				 }
				 obj.setResponsabile(responsabile);
			 }
			 
		 }
		
		return obj;
	}
	
	
	public static IdentificativoImpianto mapToIdentificativoImpianto(List<SigitVTotImpiantoCercaImpiantoPerAllegatiDto> lista) {
		
		IdentificativoImpianto obj = new IdentificativoImpianto();
		
		 if(lista!=null && lista.size()>0){
			 int dimensioneImpianti = lista.size();
			 if(dimensioneImpianti == 1){
				 //ne ho solo uno di impianto non devo concatenare i responsabili
				 SigitVTotImpiantoCercaImpiantoPerAllegatiDto dto = lista.get(0);
				 obj.setCodiceImpianto(ConvertUtil.convertToString(dto.getCodiceImpianto()));
				 String responsabile = "";
				 
				 if(dto.getNome()!=null)
					 responsabile = dto.getNome()+" ";
				 if(dto.getDenominazione()!=null)
					 responsabile = responsabile +dto.getDenominazione();
				 
				 obj.setResponsabile(responsabile);
				 //obj.setUbicazione(dto.getIndirizzo()+", "+dto.getCivico()+" "+dto.getDenominazioneComune()+ " ("+dto.getSiglaProvincia()+")" );
				 obj.setUbicazione(getIndirizzoCompleto(dto.getDenominazioneComune(), dto.getIndirizzo(), dto.getCivico(), dto.getSiglaProvincia()));

			 }else{
				//devo concatenare i responsabili 
				 int count = 0;
				 String responsabile ="";
//				 String indirizzo =  "";
				 for(SigitVTotImpiantoCercaImpiantoPerAllegatiDto dtoImpianto : lista){
					 //mi chiamo il medodo di mapping
					 if(count == 0){
						 obj.setCodiceImpianto(ConvertUtil.convertToString(dtoImpianto.getCodiceImpianto()));

						 
						 //obj.setUbicazione(dtoImpianto.getIndirizzo()+", "+dtoImpianto.getCivico()+" "+dtoImpianto.getDenominazioneComune()+" ("+dtoImpianto.getSiglaProvincia()+")");
					     
						 obj.setUbicazione(getIndirizzoCompleto(dtoImpianto.getDenominazioneComune(), dtoImpianto.getIndirizzo(), dtoImpianto.getCivico(), dtoImpianto.getSiglaProvincia()));

						 
						 if(dtoImpianto.getNome()!=null)
					    	 responsabile = dtoImpianto.getNome()+" ";
					     if(dtoImpianto.getDenominazione()!=null)
					    	 responsabile = responsabile + dtoImpianto.getDenominazione()+", ";
					     
					 }else if(count == (dimensioneImpianti-1)){
						 if(dtoImpianto.getNome()!=null)
					    	 responsabile = responsabile + dtoImpianto.getNome()+" ";
					     if(dtoImpianto.getDenominazione()!=null)
					    	 responsabile = responsabile + dtoImpianto.getDenominazione();
					     
					 }else{
						 if(dtoImpianto.getNome()!=null)
					    	 responsabile = responsabile + dtoImpianto.getNome()+" ";
					     if(dtoImpianto.getDenominazione()!=null)
					    	 responsabile = responsabile + dtoImpianto.getDenominazione()+", ";
					     
					 }
					 count++;
				 }
				 obj.setResponsabile(responsabile);
			 }
			 
		 }
		
		return obj;
	}

	public static IdentificativoImpianto mapToUbicazioneImpianto(SigitVTotImpiantoCercaUbicazioneImpiantoDto ubicazione) {

		IdentificativoImpianto obj = new IdentificativoImpianto();

		if(ubicazione != null){
			obj.setCodiceImpianto(ConvertUtil.convertToString(ubicazione.getCodiceImpianto()));
			//obj.setUbicazione(dto.getIndirizzo()+", "+dto.getCivico()+" "+dto.getComune()+" ("+dto.getSiglaProvincia()+")");
			obj.setUbicazione(getIndirizzoCompleto(ubicazione.getComune(), ubicazione.getIndirizzo(), ubicazione.getCivico(), ubicazione.getSiglaProvincia()));

		}
		return obj;
	}

	public static IdentificativoImpianto mapToUbicazioneIdentificativoImpianto(SigitVTotImpiantoCercaUbicazioneImpiantoDto ubicazione) {

		IdentificativoImpianto obj = new IdentificativoImpianto();

		if(ubicazione != null){
			obj.setCodiceImpianto(ConvertUtil.convertToString(ubicazione.getCodiceImpianto()));
			//obj.setUbicazione(dto.getIndirizzo()+", "+dto.getCivico()+" "+dto.getComune()+" ("+dto.getSiglaProvincia()+")");
			obj.setUbicazione(getIndirizzoCompleto(ubicazione.getComune(), ubicazione.getIndirizzo(), ubicazione.getCivico(), ubicazione.getSiglaProvincia()));

		}
		return obj;
	}

	
	public static IdentificativoImpianto mapToImpiantoPerIspezioni(List<SigitVTotImpiantoCercaImpiantoPerAllegatiDto> lista) {
		
		IdentificativoImpianto obj = new IdentificativoImpianto();
		 StringBuffer responsabile = new StringBuffer();

		 
		 for (int i = 0; i < lista.size(); i++) {
			
			 SigitVTotImpiantoCercaImpiantoPerAllegatiDto dto = lista.get(i);

			 if (i == 0)
			 {
				 obj.setCodiceImpianto(ConvertUtil.convertToString(dto.getCodiceImpianto()));
				 obj.setUbicazione(getIndirizzoCompleto(dto.getDenominazioneComune(), dto.getIndirizzo(), dto.getCivico(), dto.getSiglaProvincia()));
			 }
			 else
			 {
				 responsabile.append(", ");
			 }
			 
			 if(dto.getNome()!=null)
			 {
				 responsabile.append(dto.getNome());
				 responsabile.append(" ");
			 }
			 
			 if(dto.getDenominazione()!=null)
			 {
				 responsabile.append(dto.getDenominazione());
			 }
			 
		 }
		 obj.setResponsabile(responsabile.toString());
		 
		return obj;
	}


	public static IdentificativoImpianto mapToUbicazioneImpiantoPerIspezioni(SigitVTotImpiantoCercaUbicazioneImpiantoDto ubicazione) {
		
		IdentificativoImpianto obj = new IdentificativoImpianto();
		
		if(ubicazione!=null){
				obj.setCodiceImpianto(ConvertUtil.convertToString(ubicazione.getCodiceImpianto()));
				//obj.setUbicazione(dto.getIndirizzo()+", "+dto.getCivico()+" "+dto.getComune()+" ("+dto.getSiglaProvincia()+")");
				obj.setUbicazione(getIndirizzoCompleto(ubicazione.getComune(), ubicazione.getIndirizzo(), ubicazione.getCivico(), ubicazione.getSiglaProvincia()));
		}
		return obj;
	}

	public static ArrayList<DettaglioIspezione> mapToElencoIspezioniPerImpianto(List<SigitVRicercaIspezioniDto> lista)  throws ManagerException{
		
		ArrayList<DettaglioIspezione> arrayAllegati = new ArrayList<DettaglioIspezione>();
		if(lista!=null && lista.size()>0){
			DettaglioIspezione dettaglio = null;
			for(SigitVRicercaIspezioniDto dto : lista){
				dettaglio = new DettaglioIspezione();
				
				dettaglio.setIdIspezione(ConvertUtil.convertToInteger(dto.getIdIspezione2018()));
				dettaglio.setDataIspezione(ConvertUtil.convertToString(dto.getDtCreazione()));
				dettaglio.setEnteCompetente(dto.getEnteCompetente());
				
				dettaglio.setStatoIspezione(dto.getDesStatoIspezione());
				dettaglio.setNote(dto.getNote());
				
				dettaglio.setEsitoIspezione(dto.getFlgEsito().intValue() == Constants.SI_1?Constants.DESC_ESITO_POSITIVO: Constants.DESC_ESITO_NEGATIVO);
				dettaglio.setTipoAllegato(dto.getDesTipoDocumento());
				dettaglio.setStatoAllegato(dto.getDesStatoRapp());
				
				dettaglio.setCodiceBollino(costruisciCodiceBollino(dto.getFkSiglaBollino(), dto.getFkNumeroBollino()));
				
				arrayAllegati.add(dettaglio);
			}
		}
		
		return arrayAllegati;
	}

	
	public static ArrayList<DettaglioAllegato> mapToElencoRappProva(List<SigitTAllegatoRappProvaByIdIspezioneDto> lista)  throws ManagerException{
		
		ArrayList<DettaglioAllegato> arrayAllegati = new ArrayList<DettaglioAllegato>();
		if(lista!=null && lista.size()>0){
			DettaglioAllegato dettaglio = null;
			for(SigitTAllegatoRappProvaByIdIspezioneDto dto : lista){
				dettaglio = new DettaglioAllegato();
				
				dettaglio.setIdAllegato(ConvertUtil.convertToString(dto.getAlleIdAllegato()));
				dettaglio.setDataControllo(ConvertUtil.convertToString(dto.getAlleDataControllo()));
				dettaglio.setTipoAllegato(dto.getDocDesTipoDocumento());
				dettaglio.setIdTipoAllegato(ConvertUtil.convertToString(dto.getAlleFkTipoDocumento()));
				dettaglio.setStatoAllegato(dto.getSrDesStatoRapp());
				dettaglio.setOsservazioni(dto.getAlleFOsservazioni());
				dettaglio.setRaccomandazioni(dto.getAlleFRaccomandazioni());
				dettaglio.setPrescrizioni(dto.getAlleFPrescrizioni());
				dettaglio.setElencoApparecchiature(dto.getAlleElencoApparecchiature());
				
				if (GenericUtil.isNotNullOrEmpty(dto.getAlleUidIndexFirmato())) {
					String labelFileFirmato = ConvertUtil.getStringByConcat(": ", dettaglio.getDataControllo(), dettaglio.getElencoApparecchiature());
							
					dettaglio.setLabelFileFirmato(labelFileFirmato);
				}
				
				arrayAllegati.add(dettaglio);
			}
		}
		
		return arrayAllegati;
	}
	
	public static SigitTCompBrRcDto getSigitTCompBrRc(RowBR rowBR, BigDecimal idImpianto, RowGT gt) {
		SigitTCompBrRcDto dto = new SigitTCompBrRcDto();
		dto.setCodiceImpianto(idImpianto);
		dto.setFkProgressivo(ConvertUtil.convertToBigDecimal(rowBR.getL42NumGT()));
		dto.setFkTipoComponente(Constants.TIPO_COMPONENTE_GT);
		try{dto.setFkDataInstall(DateUtil.getSqlDate(gt.getL41DataInstallaz()));}catch (Exception e) {dto.setFkDataInstall(null);}
		dto.setProgressivoBrRc(ConvertUtil.convertToBigDecimal(rowBR.getL42NumBR()));
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowBR.getL42DataDismiss()));} catch (Exception e1) {dto.setDataDismiss(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowBR.getL42DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		dto.setFlgDismissione(ConvertUtil.convertToBigDecimal(rowBR.getFlagDismissione()));

		dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowBR.getL42Fabbricante()));
		dto.setFkCombustibile(ConvertUtil.convertToBigDecimal(rowBR.getL42Combustibile()));
		dto.setMatricola(rowBR.getL42Matricola());
		dto.setModello(rowBR.getL42Modello());
		try {
			dto.setPotTermMaxKw(rowBR.getL42PortataTermMaxNom());
		} catch (Exception e) {dto.setPotTermMaxKw(null);}
		try {
			dto.setPotTermMinKw(rowBR.getL42PortataTermMinNom());
		} catch (Exception e) {dto.setPotTermMinKw(null);}
		dto.setTipologia(rowBR.getL42Tipologia());
		dto.setTipologiaBrRc(Constants.TIPO_COMPONENTE_BR);
		return dto;
	}

	public static FiltroRicercaAllegati mapToFiltroRicercaAllegati(RicercaAllegati dto, String descRuolo) {
		
		FiltroRicercaAllegati filter = new FiltroRicercaAllegati();
		
		filter.setCodiceFiscale(dto.getCodiceFiscale());
		filter.setDataControlloA(dto.getDataControlloA());
		filter.setDataControlloDa(dto.getDataControlloDa());
		filter.setDescrizioneRuoloFunzionale(descRuolo);
		filter.setElencoCodiciImpianto(dto.getElencoCodiciImpianto());
		filter.setIdBollinoSigla(dto.getIdBollinoSigla());
		filter.setIdReaSigla(dto.getIdReaSigla());
		filter.setIdStatoAllegato(dto.getIdStatoAllegato());
		filter.setIdTipoDocumento(dto.getIdTipoDocumento());
		
		filter.setSicurezzaImpianti(ConvertUtil.convertToBoolean(dto.getSicurezzaImpianti()));
		filter.setConOsservazioni(dto.getConOsservazioni());
		filter.setConPrescrizioni(dto.getConPrescrizioni());
		filter.setConRaccomandazioni(dto.getConRaccomandazioni());		
		
		filter.setInterventoA(dto.getInterventoA());
		filter.setInterventoDa(dto.getInterventoDa());
		filter.setNumeroBollino(ConvertUtil.convertToInteger(dto.getNumeroBollino()));
		filter.setNumeroRea(ConvertUtil.convertToInteger(dto.getNumeroRea()));
		return filter;
	}

	public static SigitTCompBrRcDto getSigitTCompBrRc(RowRC rowBR, BigDecimal idImpianto, RowGT gt) {
		SigitTCompBrRcDto dto = new SigitTCompBrRcDto();
		dto.setCodiceImpianto(idImpianto);
		dto.setFkProgressivo(ConvertUtil.convertToBigDecimal(rowBR.getL43NumGT()));
		dto.setFkTipoComponente(Constants.TIPO_COMPONENTE_GT);
		try{dto.setFkDataInstall(DateUtil.getSqlDate(gt.getL41DataInstallaz()));}catch (Exception e) {dto.setFkDataInstall(null);}
		dto.setProgressivoBrRc(ConvertUtil.convertToBigDecimal(rowBR.getL43NumRC()));
		try {dto.setDataDismiss(DateUtil.getSqlDate(rowBR.getL43DataDismiss()));} catch (Exception e1) {dto.setDataDismiss(null);}
		try {dto.setDataInstall(DateUtil.getSqlDate(rowBR.getL43DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		dto.setFlgDismissione(ConvertUtil.convertToBigDecimal(rowBR.getFlagDismissione()));

		dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowBR.getL43Fabbricante()));
		dto.setMatricola(rowBR.getL43Matricola());
		dto.setModello(rowBR.getL43Modello());
		try {dto.setPotTermMaxKw(rowBR.getL43PotTermNomTot());} catch (Exception e) {dto.setPotTermMaxKw(null);}
		dto.setTipologiaBrRc(Constants.TIPO_COMPONENTE_RC);
		return dto;
	}

	public static SigitTCompBrRcPk getSigitTCompBrBc(SigitTCompBrRcDto compToDel) {
		SigitTCompBrRcPk pk = new SigitTCompBrRcPk();
		pk.setIdCompBrRc(compToDel.getIdCompBrRc());
		return pk;
	}

	public static SigitTComp4Dto getSigitTComp4(BigDecimal idImpianto, RowGF rowGF) {
		SigitTComp4Dto dto = new SigitTComp4Dto();
		dto.setCodiceImpianto(idImpianto);
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_GF);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowGF.getL44NumGF()));
//		try{dto.setDataInstall(DateUtil.getSqlDate(rowGF.getL44DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
//		try{dto.setDataDismiss(DateUtil.getSqlDate(rowGF.getL44DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
//		dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowGF.getL44Fabbricante()));
//		dto.setModello(rowGF.getL44Modello());
//		dto.setMatricola(rowGF.getL44Matricola());
//		dto.setFkCombustibile(ConvertUtil.convertToBigDecimal(rowGF.getL44TipoCombustibile()));
//		dto.setFlgDismissione(ConvertUtil.convertToBigDecimal(rowGF.getFlagDismissione()));
		return dto;
	}

	public static SigitTCompGfDto getSigitTCompGF(BigDecimal idImpianto, RowGF rowGF, String cfUtenteMod) {
		SigitTCompGfDto dto = new SigitTCompGfDto();
		dto.setCodiceImpianto(idImpianto);
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_GF);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowGF.getL44NumGF()));
		try{dto.setDataInstall(DateUtil.getSqlDate(rowGF.getL44DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowGF.getL44DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		dto.setFlgDismissione(ConvertUtil.convertToBigDecimal(rowGF.getFlagDismissione()));

		dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowGF.getL44Fabbricante()));
		dto.setModello(rowGF.getL44Modello());
		dto.setMatricola(rowGF.getL44Matricola());
		dto.setFkCombustibile(ConvertUtil.convertToBigDecimal(rowGF.getL44TipoCombustibile()));
		
		dto.setFlgSorgenteExt(rowGF.getL44FlagSorgACQUA() ? Constants.FLG_ACQUA : rowGF.getL44FlagSorgARIA() ? Constants.FLG_ARIA : null);
		dto.setFluidoFrigorigeno(rowGF.getL44FluidoFrigo());
		dto.setFlgFluidoUtenze(rowGF.getL44FlagFluidoACQUA() ? Constants.FLG_ACQUA : rowGF.getL44FlagFluidoARIA() ? Constants.FLG_ARIA : null);
		if(rowGF.getL44FlagRecupCalore())
			dto.setFkDettaglioGf(ConvertUtil.convertToBigDecimal("1"));
		if(rowGF.getL44FlagFiammaDiretta())
			dto.setFkDettaglioGf(ConvertUtil.convertToBigDecimal("2"));
		if(rowGF.getL44FlagCicloCompress())
			dto.setFkDettaglioGf(ConvertUtil.convertToBigDecimal("3"));
		try {dto.setNCircuiti(ConvertUtil.convertToBigDecimal(rowGF.getL44NumCircuiti()));} catch (Exception e) {dto.setNCircuiti(null);}
		try {dto.setRaffrescamentoEer(ConvertUtil.convertToString(rowGF.getL44Raffrescam()));} catch (Exception e) {dto.setRaffrescamentoEer(null);}
		try {dto.setRaffPotenzaKw(rowGF.getL44PotFrigoNom());} catch (Exception e) {dto.setRaffPotenzaKw(null);}
		try {dto.setRaffPotenzaAss(rowGF.getL44PotFrigoAssorb());} catch (Exception e) {dto.setRaffPotenzaAss(null);}
		try {dto.setRiscaldamentoCop(ConvertUtil.convertToString(rowGF.getL44Riscaldam()));} catch (Exception e) {dto.setRiscaldamentoCop(null);}
		try {dto.setRiscPotenzaKw(rowGF.getL44PotTermNom());} catch (Exception e) {dto.setRiscPotenzaKw(null);}
		try {dto.setRiscPotenzaAssKw(rowGF.getL44PotTermAssorb());} catch (Exception e) {dto.setRiscPotenzaAssKw(null);}
		if(dto.getNCircuiti()==null)
			dto.setNCircuiti(new BigDecimal("1"));
		
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		dto.setUtenteUltMod(cfUtenteMod);
		
		return dto;
	}

	public static SigitTComp4Dto getSigitTComp4(BigDecimal codImpianto, BigDecimal progressivo, RowGFsost gf)
	{
		SigitTComp4Dto dto = new SigitTComp4Dto();
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_GF);
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(progressivo);
//		try{dto.setDataInstall(DateUtil.getSqlDate(gf.getL44DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
//		try{dto.setDataDismiss(DateUtil.getSqlDate(gf.getL44DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
//		dto.setFkMarca(ConvertUtil.convertToBigDecimal(gf.getL44Fabbricante()));
//		dto.setModello(gf.getL44Modello());
//		dto.setMatricola(gf.getL44Matricola());
//		dto.setFkCombustibile(ConvertUtil.convertToBigDecimal(gf.getL44TipoCombustibile()));
		return dto;
	}
	
	public static SigitTCompGfDto getSigitTCompGFSost(BigDecimal idImpianto, RowGFsost rowGF, BigDecimal progressivo, String cfUtenteMod) {
		SigitTCompGfDto dto = new SigitTCompGfDto();
		dto.setCodiceImpianto(idImpianto);
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_GF);
		dto.setProgressivo(progressivo);
		try{dto.setDataInstall(DateUtil.getSqlDate(rowGF.getL44DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowGF.getL44DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowGF.getL44Fabbricante()));
		dto.setModello(rowGF.getL44Modello());
		dto.setMatricola(rowGF.getL44Matricola());
		dto.setFkCombustibile(ConvertUtil.convertToBigDecimal(rowGF.getL44TipoCombustibile()));

		dto.setFlgSorgenteExt(rowGF.getL44FlagSorgACQUA() ? Constants.FLG_ACQUA : rowGF.getL44FlagSorgARIA() ? Constants.FLG_ARIA : null);
		dto.setFluidoFrigorigeno(rowGF.getL44FluidoFrigo());
		dto.setFlgFluidoUtenze(rowGF.getL44FlagFluidoACQUA() ? Constants.FLG_ACQUA : rowGF.getL44FlagFluidoARIA() ? Constants.FLG_ARIA : null);
		if(rowGF.getL44FlagRecupCalore())
			dto.setFkDettaglioGf(ConvertUtil.convertToBigDecimal(Constants.ID_DETT_GF_ASS_REC_CALORE));
		if(rowGF.getL44FlagFiammaDiretta())
			dto.setFkDettaglioGf(ConvertUtil.convertToBigDecimal(Constants.ID_DETT_GF_ASS_FIAMM_COMB));
		if(rowGF.getL44FlagCicloCompress())
			dto.setFkDettaglioGf(ConvertUtil.convertToBigDecimal(Constants.ID_DETT_GF_CICLO_COMPRESS));
		// BUG 
		try {dto.setNCircuiti(ConvertUtil.convertToBigDecimal(rowGF.getL44NumCircuiti()));} catch (Exception e) {dto.setNCircuiti(null);}
		try {dto.setRaffrescamentoEer(ConvertUtil.convertToString(rowGF.getL44Raffrescam()));} catch (Exception e) {dto.setRaffrescamentoEer(null);}
		try {dto.setRaffPotenzaKw(rowGF.getL44PotFrigoNom());} catch (Exception e) {dto.setRaffPotenzaKw(null);}
		try {dto.setRaffPotenzaAss(rowGF.getL44PotFrigoAssorb());} catch (Exception e) {dto.setRaffPotenzaAss(null);}
		try {dto.setRiscaldamentoCop(ConvertUtil.convertToString(rowGF.getL44Riscaldam()));} catch (Exception e) {dto.setRiscaldamentoCop(null);}
		try {dto.setRiscPotenzaKw(rowGF.getL44PotTermNom());} catch (Exception e) {dto.setRiscPotenzaKw(null);}
		try {dto.setRiscPotenzaAssKw(rowGF.getL44PotTermAssorb());} catch (Exception e) {dto.setRiscPotenzaAssKw(null);}
		// BUG 
		if(dto.getNCircuiti()==null)
			dto.setNCircuiti(new BigDecimal("1"));
		
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		dto.setUtenteUltMod(cfUtenteMod);
		
		return dto;
	}

	public static SigitTCompGfPk getSigittCompGfPk(SigitTCompGfDto compToDel) {
		SigitTCompGfPk pk = new SigitTCompGfPk();
		pk.setCodiceImpianto(compToDel.getCodiceImpianto());
		pk.setDataInstall(compToDel.getDataInstall());
		pk.setIdTipoComponente(Constants.TIPO_COMPONENTE_GF);
		pk.setProgressivo(compToDel.getProgressivo());
		return pk;
	}

	public static SigitTComp4Pk getSigittComp4Pk(SigitTCompGfDto input)
	{
		SigitTComp4Pk pk = new SigitTComp4Pk();
		pk.setCodiceImpianto(input.getCodiceImpianto());
//		pk.setDataInstall(input.getDataInstall());
		pk.setIdTipoComponente(input.getIdTipoComponente());
		pk.setProgressivo(input.getProgressivo());
		return pk;
	}
	
	public static SigitRComp4ManutDto getSigitrComp4ManutPk(SigitTCompGfDto input)
	{
		SigitRComp4ManutDto comp4Manut = new SigitRComp4ManutDto();
		comp4Manut.setCodiceImpianto(input.getCodiceImpianto());
//		comp4Manut.setDataInstall(compToDel.getDataInstall());
		comp4Manut.setIdTipoComponente(input.getIdTipoComponente());
		comp4Manut.setProgressivo(input.getProgressivo());
		return comp4Manut;
	}
	
	public static SigitTComp4Dto getSigitTComp4(BigDecimal idImpianto, RowSC rowSC) {
		SigitTComp4Dto dto = new SigitTComp4Dto();
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_SC);
		dto.setCodiceImpianto(idImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowSC.getL45NumSC()));
//		try{dto.setDataInstall(DateUtil.getSqlDate(rowSC.getL45DataInstallaz()));}catch(Exception e){dto.setDataInstall(null);}
//		try{dto.setDataDismiss(DateUtil.getSqlDate(rowSC.getL45DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
//		dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowSC.getL45Fabbricante()));
//		dto.setModello(rowSC.getL45Modello());
//		dto.setMatricola(rowSC.getL45Matricola());
//		try {dto.setPotenzaTermicaKw(rowSC.getL45PotTermNomTot());} catch (Exception e) {dto.setPotenzaTermicaKw(null);}
		return dto;
	}

	public static SigitTCompScDto getSigitTCompSc(BigDecimal idImpianto, RowSC rowSC, String cfUtenteMod) {
		SigitTCompScDto dto = new SigitTCompScDto();
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_SC);
		dto.setCodiceImpianto(idImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowSC.getL45NumSC()));
		try{dto.setDataInstall(DateUtil.getSqlDate(rowSC.getL45DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowSC.getL45DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		dto.setFlgDismissione(ConvertUtil.convertToBigDecimal(rowSC.getFlagDismissione()));

		dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowSC.getL45Fabbricante()));
		dto.setModello(rowSC.getL45Modello());
		dto.setMatricola(rowSC.getL45Matricola());
		try {dto.setPotenzaTermicaKw(rowSC.getL45PotTermNomTot());} catch (Exception e) {dto.setPotenzaTermicaKw(null);}

		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		dto.setUtenteUltMod(cfUtenteMod);
		
		return dto;
	}

	public static SigitTComp4Dto getSigitTComp4(BigDecimal idImpianto, RowSCsost rowSCSost, BigDecimal progressivo) {
		SigitTComp4Dto dto = new SigitTComp4Dto();
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_SC);
		dto.setCodiceImpianto(idImpianto);
		dto.setProgressivo(progressivo);
//		try{dto.setDataInstall(DateUtil.getSqlDate(rowSCSost.getL45DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
//		try{dto.setDataDismiss(DateUtil.getSqlDate(rowSCSost.getL45DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
//		dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowSCSost.getL45Fabbricante()));
//		dto.setModello(rowSCSost.getL45Modello());
//		dto.setMatricola(rowSCSost.getL45Matricola());
//		try {dto.setPotenzaTermicaKw(rowSCSost.getL45PotTermNomTot());} catch (Exception e) {dto.setPotenzaTermicaKw(null);}
		return dto;
	}

	public static SigitTCompScDto getSigitTCompScSost(BigDecimal idImpianto, RowSCsost rowSC, BigDecimal progressivo, String cfUtenteMod) {
		SigitTCompScDto dto = new SigitTCompScDto();
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_SC);
		dto.setCodiceImpianto(idImpianto);
		dto.setProgressivo(progressivo);
		try{dto.setDataInstall(DateUtil.getSqlDate(rowSC.getL45DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowSC.getL45DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowSC.getL45Fabbricante()));
		dto.setModello(rowSC.getL45Modello());
		dto.setMatricola(rowSC.getL45Matricola());
		try {dto.setPotenzaTermicaKw(rowSC.getL45PotTermNomTot());} catch (Exception e) {dto.setPotenzaTermicaKw(null);}
		
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		dto.setUtenteUltMod(cfUtenteMod);
		
		return dto;
	}
	
	public static SigitTCompAgDto getSigitTCompAgSost(BigDecimal idImpianto, RowAGsost rowAG, BigDecimal progressivo, String cfUtenteMod) {
		SigitTCompAgDto dto = new SigitTCompAgDto();
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_AG);
		dto.setCodiceImpianto(idImpianto);
		dto.setProgressivo(progressivo);
		try{dto.setDataInstall(DateUtil.getSqlDate(rowAG.getL48DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowAG.getL48DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowAG.getL48Fabbricante()));
		dto.setModello(rowAG.getL48Modello());
		dto.setMatricola(rowAG.getL48Matricola());
		try {dto.setPotenzaTermicaKw(rowAG.getL48PotUtile());} catch (Exception e) {dto.setPotenzaTermicaKw(null);}
		dto.setTipologia(rowAG.getL48Tipologia());
		
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		dto.setUtenteUltMod(cfUtenteMod);
		
		return dto;
	}
	
	public static SigitTComp4Dto getSigitTComp4(BigDecimal idImpianto, RowCG row) {
		SigitTComp4Dto dto = new SigitTComp4Dto();
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_CG);
		dto.setCodiceImpianto(idImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(row.getL46NumCG()));
//		try{dto.setDataInstall(DateUtil.getSqlDate(row.getL46DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
//		try{dto.setDataDismiss(DateUtil.getSqlDate(row.getL46DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
//		dto.setFkMarca(ConvertUtil.convertToBigDecimal(row.getL46Fabbricante()));
//		dto.setModello(row.getL46Modello());
//		dto.setMatricola(row.getL46Matricola());
//		dto.setFkCombustibile(ConvertUtil.convertToBigDecimal(row.getL46Combustibile()));
//		try {
//			dto.setPotenzaTermicaKw(row.getL46PotTermNom());
//		} catch (Exception e) {dto.setPotenzaTermicaKw(null);}
		return dto;
	}

	public static SigitTComp4Dto getSigitTComp4(BigDecimal idImpianto, BigDecimal progressivo, RowCGsost row) {
		SigitTComp4Dto dto = new SigitTComp4Dto();
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_CG);
		dto.setCodiceImpianto(idImpianto);
		dto.setProgressivo(progressivo);
//		try{dto.setDataInstall(DateUtil.getSqlDate(row.getL46DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
//		try{dto.setDataDismiss(DateUtil.getSqlDate(row.getL46DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
//		dto.setFkMarca(ConvertUtil.convertToBigDecimal(row.getL46Fabbricante()));
//		dto.setModello(row.getL46Modello());
//		dto.setMatricola(row.getL46Matricola());
//		dto.setFkCombustibile(ConvertUtil.convertToBigDecimal(row.getL46Combustibile()));
//		try {
//			dto.setPotenzaTermicaKw(row.getL46PotTermNom());
//		} catch (Exception e) {dto.setPotenzaTermicaKw(null);}
		return dto;
	}
	
	public static SigitTCompCgDto getSigitTCompCg(BigDecimal idImpianto, RowCG row, String cfUtenteMod)
	{
		
		SigitTCompCgDto dto = new SigitTCompCgDto();
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_CG);
		dto.setCodiceImpianto(idImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(row.getL46NumCG()));
		try{dto.setDataInstall(DateUtil.getSqlDate(row.getL46DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setDataDismiss(DateUtil.getSqlDate(row.getL46DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		dto.setFlgDismissione(ConvertUtil.convertToBigDecimal(row.getFlagDismissione()));

		dto.setFkMarca(ConvertUtil.convertToBigDecimal(row.getL46Fabbricante()));
		dto.setModello(row.getL46Modello());
		dto.setMatricola(row.getL46Matricola());
		dto.setFkCombustibile(ConvertUtil.convertToBigDecimal(row.getL46Combustibile()));
		try {dto.setPotenzaTermicaKw(row.getL46PotTermNom());} catch (Exception e) {dto.setPotenzaTermicaKw(null);}

		try{dto.setPotenzaElettricaKw(row.getL46PotElettrNom());} catch (Exception e) {dto.setPotenzaElettricaKw(null);}
		try {dto.setCoMax(ConvertUtil.convertToBigDecimal(row.getL46EmissioniMonossidoMAX()));} catch (Exception e) {dto.setCoMax(null);}
		try {dto.setCoMin(ConvertUtil.convertToBigDecimal(row.getL46EmissioniMonossidoMIN()));} catch (Exception e) {dto.setCoMin(null);}
		try {dto.setTempFumiMonteMax(ConvertUtil.convertToBigDecimal(row.getL46TempFumiMonteMAX()));} catch (Exception e) {dto.setTempFumiMonteMax(null);}
		try {dto.setTempFumiMonteMin(ConvertUtil.convertToBigDecimal(row.getL46TempFumiMonteMIN()));} catch (Exception e) {dto.setTempFumiMonteMin(null);}
		try {dto.setTempFumiValleMax(ConvertUtil.convertToBigDecimal(row.getL46TempFumiValleMAX()));} catch (Exception e) {dto.setTempFumiValleMax(null);}
		try {dto.setTempFumiValleMin(ConvertUtil.convertToBigDecimal(row.getL46TempFumiValleMIN()));} catch (Exception e) {dto.setTempFumiValleMin(null);}
		try {dto.setTempH2oInMax(ConvertUtil.convertToBigDecimal(row.getL46TempAcquaIngressoMAX()));} catch (Exception e) {dto.setTempH2oInMax(null);}
		try {dto.setTempH2oInMin(ConvertUtil.convertToBigDecimal(row.getL46TempAcquaIngressoMIN()));} catch (Exception e) {dto.setTempH2oInMin(null);}
		try {dto.setTempH2oMotoreMax(ConvertUtil.convertToBigDecimal(row.getL46TempAcquaMotoreMAX()));} catch (Exception e) {dto.setTempH2oMotoreMax(null);}
		try {dto.setTempH2oMotoreMin(ConvertUtil.convertToBigDecimal(row.getL46TempAcquaMotoreMIN()));} catch (Exception e) {dto.setTempH2oMotoreMin(null);}
		try {dto.setTempH2oOutMax(ConvertUtil.convertToBigDecimal(row.getL46TempAcquaUscitaMAX()));} catch (Exception e) {dto.setTempH2oOutMax(null);}
		try {dto.setTempH2oOutMin(ConvertUtil.convertToBigDecimal(row.getL46TempAcquaUscitaMIN()));} catch (Exception e) {dto.setTempH2oOutMin(null);}
		dto.setTipologia(row.getL46Tipologia());
		
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		dto.setUtenteUltMod(cfUtenteMod);
		
		if (log.isDebugEnabled())
			GenericUtil.stampa(dto, true, 3);

		return dto;
	}

	public static SigitTCompCgDto getSigitTCompCgSost(BigDecimal idImpianto, RowCGsost row, BigDecimal progressivo, String cfUtenteMod)
	{
		SigitTCompCgDto dto = new SigitTCompCgDto();
		
		
		
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_CG);
		dto.setCodiceImpianto(idImpianto);
		dto.setProgressivo(progressivo);
		try{dto.setDataInstall(DateUtil.getSqlDate(row.getL46DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setDataDismiss(DateUtil.getSqlDate(row.getL46DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		dto.setFkMarca(ConvertUtil.convertToBigDecimal(row.getL46Fabbricante()));
		dto.setModello(row.getL46Modello());
		dto.setMatricola(row.getL46Matricola());
		dto.setFkCombustibile(ConvertUtil.convertToBigDecimal(row.getL46Combustibile()));
		try {dto.setPotenzaTermicaKw(row.getL46PotTermNom());} catch (Exception e) {dto.setPotenzaTermicaKw(null);}

		try{dto.setPotenzaElettricaKw(row.getL46PotElettrNom());} catch (Exception e) {dto.setPotenzaElettricaKw(null);}
		try {dto.setCoMax(ConvertUtil.convertToBigDecimal(row.getL46EmissioniMonossidoMAX()));} catch (Exception e) {dto.setCoMax(null);}
		try {dto.setCoMin(ConvertUtil.convertToBigDecimal(row.getL46EmissioniMonossidoMIN()));} catch (Exception e) {dto.setCoMin(null);}
		try {dto.setTempFumiMonteMax(ConvertUtil.convertToBigDecimal(row.getL46TempFumiMonteMAX()));} catch (Exception e) {dto.setTempFumiMonteMax(null);}
		try {dto.setTempFumiMonteMin(ConvertUtil.convertToBigDecimal(row.getL46TempFumiMonteMIN()));} catch (Exception e) {dto.setTempFumiMonteMin(null);}
		try {dto.setTempFumiValleMax(ConvertUtil.convertToBigDecimal(row.getL46TempFumiValleMAX()));} catch (Exception e) {dto.setTempFumiValleMax(null);}
		try {dto.setTempFumiValleMin(ConvertUtil.convertToBigDecimal(row.getL46TempFumiValleMIN()));} catch (Exception e) {dto.setTempFumiValleMin(null);}
		try {dto.setTempH2oInMax(ConvertUtil.convertToBigDecimal(row.getL46TempAcquaIngressoMAX()));} catch (Exception e) {dto.setTempH2oInMax(null);}
		try {dto.setTempH2oInMin(ConvertUtil.convertToBigDecimal(row.getL46TempAcquaIngressoMIN()));} catch (Exception e) {dto.setTempH2oInMin(null);}
		try {dto.setTempH2oMotoreMax(ConvertUtil.convertToBigDecimal(row.getL46TempAcquaMotoreMAX()));} catch (Exception e) {dto.setTempH2oMotoreMax(null);}
		try {dto.setTempH2oMotoreMin(ConvertUtil.convertToBigDecimal(row.getL46TempAcquaMotoreMIN()));} catch (Exception e) {dto.setTempH2oMotoreMin(null);}
		try {dto.setTempH2oOutMax(ConvertUtil.convertToBigDecimal(row.getL46TempAcquaUscitaMAX()));} catch (Exception e) {dto.setTempH2oOutMax(null);}
		try {dto.setTempH2oOutMin(ConvertUtil.convertToBigDecimal(row.getL46TempAcquaUscitaMIN()));} catch (Exception e) {dto.setTempH2oOutMin(null);}
		dto.setTipologia(row.getL46Tipologia());
		
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		dto.setUtenteUltMod(cfUtenteMod);
		
		return dto;
	}

	public static SigitTCompCgPk getSigittCompCgPk(SigitTComp4Dto compToDel) {
		SigitTCompCgPk pk = new SigitTCompCgPk();
		pk.setCodiceImpianto(compToDel.getCodiceImpianto());
//		pk.setDataInstall(compToDel.getDataInstall());
		pk.setIdTipoComponente(compToDel.getIdTipoComponente());
		pk.setProgressivo(compToDel.getProgressivo());
		return pk;
	}

	public static SigitTComp4Dto getSigitTComp4(BigDecimal idImpianto, RowCS row) {
		SigitTComp4Dto dto = new SigitTComp4Dto();
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_CS);
		dto.setCodiceImpianto(idImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(row.getL47NumCS()));
//		try{dto.setDataInstall(DateUtil.getSqlDate(row.getL47DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
//		dto.setFkMarca(ConvertUtil.convertToBigDecimal(row.getL47Fabbricante()));
		return dto;
	}

	public static SigitTComp4Dto getSigitTComp4(BigDecimal idImpianto, RowAG row) {
		SigitTComp4Dto dto = new SigitTComp4Dto();
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_AG);
		dto.setCodiceImpianto(idImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(row.getL48NumAG()));
//		try{dto.setDataInstall(DateUtil.getSqlDate(row.getL48DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
//		try{dto.setDataDismiss(DateUtil.getSqlDate(row.getL48DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
//		dto.setFkMarca(ConvertUtil.convertToBigDecimal(row.getL48Fabbricante()));
//		dto.setModello(row.getL48Modello());
//		dto.setMatricola(row.getL48Matricola());
//		try {dto.setPotenzaTermicaKw(row.getL48PotUtile());} catch (Exception e) {dto.setPotenzaTermicaKw(null);}
		return dto;
	}

	public static SigitTCompAgDto getSigitTCompAg(BigDecimal idImpianto, RowAG row, String cfUtenteMod) {
		SigitTCompAgDto dto = new SigitTCompAgDto();
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_AG);
		dto.setCodiceImpianto(idImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(row.getL48NumAG()));
		try{dto.setDataInstall(DateUtil.getSqlDate(row.getL48DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setDataDismiss(DateUtil.getSqlDate(row.getL48DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		dto.setFlgDismissione(ConvertUtil.convertToBigDecimal(row.getFlagDismissione()));

		dto.setFkMarca(ConvertUtil.convertToBigDecimal(row.getL48Fabbricante()));
		dto.setModello(row.getL48Modello());
		dto.setMatricola(row.getL48Matricola());
		try {dto.setPotenzaTermicaKw(row.getL48PotUtile());} catch (Exception e) {dto.setPotenzaTermicaKw(null);}
		dto.setTipologia(GenericUtil.getStringSql(row.getL48Tipologia()));
		
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		dto.setUtenteUltMod(cfUtenteMod);
		
		return dto;
	}

	public static SigitTCompCsDto getSigitTCompCsDto(BigDecimal idImpianto, RowCS row, String cfUtenteMod) {
		SigitTCompCsDto dto = new SigitTCompCsDto();
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_CS);
		dto.setCodiceImpianto(idImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(row.getL47NumCS()));
		try{dto.setDataInstall(DateUtil.getSqlDate(row.getL47DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setDataDismiss(DateUtil.getSqlDate(row.getL47DataDismissione()));}catch (Exception e) {dto.setDataDismiss(null);}
		dto.setFlgDismissione(ConvertUtil.convertToBigDecimal(row.getFlagDismissione()));
		try {dto.setNumCollettori(ConvertUtil.convertToBigDecimal(row.getL47Collettori()));} catch (Exception e) {dto.setNumCollettori(null);}
		try {dto.setSupApertura(row.getL47SuperfTotApertura());} catch (Exception e) {dto.setSupApertura(null);}
		dto.setFkMarca(ConvertUtil.convertToBigDecimal(row.getL47Fabbricante()));
		
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		dto.setUtenteUltMod(cfUtenteMod);

		return dto;
	}

	public static SigitTComp4Dto getSigitTComp4(BigDecimal idImpianto, RowCSvar row, BigDecimal progressivo) {
		SigitTComp4Dto dto = new SigitTComp4Dto();
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_CS);
		dto.setCodiceImpianto(idImpianto);
		dto.setProgressivo(progressivo);
//		try{dto.setDataInstall(DateUtil.getSqlDate(row.getL47DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
//		dto.setFkMarca(ConvertUtil.convertToBigDecimal(row.getL47Fabbricante()));
		return dto;
	}
	
	public static SigitTCompCsDto getSigitTCompCsDto(BigDecimal idImpianto, RowCSvar row, BigDecimal progressivo, String cfUtenteMod) {
		SigitTCompCsDto dto = new SigitTCompCsDto();
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_CS);
		dto.setCodiceImpianto(idImpianto);
		dto.setProgressivo(progressivo);
		try{dto.setDataInstall(DateUtil.getSqlDate(row.getL47DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setDataDismiss(DateUtil.getSqlDate(row.getL47DataDismissione()));}catch (Exception e) {dto.setDataDismiss(null);}

		try {dto.setNumCollettori(ConvertUtil.convertToBigDecimal(row.getL47Collettori()));} catch (Exception e) {dto.setNumCollettori(null);}
		dto.setSupApertura(row.getL47SuperfTotApertura());
		
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		dto.setUtenteUltMod(cfUtenteMod);
		
		return dto;
	}

	public static SigitTCompAgPk getSigittCompAgPk(SigitTComp4Dto compToDel) {
		SigitTCompAgPk pk = new SigitTCompAgPk();
		pk.setCodiceImpianto(compToDel.getCodiceImpianto());
//		pk.setDataInstall(compToDel.getDataInstall());
		pk.setIdTipoComponente(Constants.TIPO_COMPONENTE_AG);
		pk.setProgressivo(compToDel.getProgressivo());
		return pk;
	}
	
	public static SigitTCompCsPk getSigitTCompCsPk(SigitTComp4Dto compToDel) {
		SigitTCompCsPk pk = new SigitTCompCsPk();
		pk.setCodiceImpianto(compToDel.getCodiceImpianto());
		//pk.setDataInstall(compToDel.getDataInstall());
		pk.setIdTipoComponente(Constants.TIPO_COMPONENTE_CS);
		pk.setProgressivo(compToDel.getProgressivo());
		return pk;
	}
	
	/*
	public static SigitTLibrettoDto getSigitTLibretto(SigitTLibrettoDto dto, DatiSchedaIdentificativaImp datiImpianto)
	{
		dto.setDataIntervento(ConvertUtil.convertToDate(datiImpianto.getL11DataIntervento()));
		if (datiImpianto.getL11FlagNuovaInst())
		{
			dto.setFkTipoIntervento(ConvertUtil.convertToBigDecimal(Constants.ID_TIPO_INT_NUOVA_INSTALZ));
		}
		else if (datiImpianto.getL11FlagRistrutt())
		{
			dto.setFkTipoIntervento(ConvertUtil.convertToBigDecimal(Constants.ID_TIPO_INT_RISTRUTTURAZ));
		}
		else if (datiImpianto.getL11FlagSostGenerat())
		{
			dto.setFkTipoIntervento(ConvertUtil.convertToBigDecimal(Constants.ID_TIPO_INT_SOSTITUZIONE));
		}
		else if (datiImpianto.getL11FlagCompilaLibretto())
		{
			dto.setFkTipoIntervento(ConvertUtil.convertToBigDecimal(Constants.ID_TIPO_INT_COMPILAZIONE));
		}
		return dto;
	}
	*/
	
	public static SigitRPfPgDelegaDto getSigitRPfPgDelega(String chiaveDelegato, String cfUtenteMod)
	{
		SigitRPfPgDelegaDto delega = new SigitRPfPgDelegaDto();
		
		StringTokenizer tok = new StringTokenizer(
				chiaveDelegato, Constants.INTERVAL_SEP_CHIAVI);
		
		
		
		StringTokenizer tokCANCELLARE = new StringTokenizer(
				chiaveDelegato, Constants.INTERVAL_SEP_CHIAVI);
		
		log.debug("token 1: "+tokCANCELLARE.nextToken());		
		log.debug("token 2: "+tokCANCELLARE.nextToken());		
		log.debug("token 3: "+tokCANCELLARE.nextToken());		
		
		
		delega.setIdPersonaFisica(ConvertUtil.convertToBigDecimal(tok.nextToken()));
		delega.setIdPersonaGiuridica(ConvertUtil.convertToBigDecimal(tok.nextToken()));
		delega.setDataInizio(ConvertUtil.convertToSqlDate(tok.nextToken()));
		
		delega.setDataFine(DateUtil.getSqlCurrentDate());
		delega.setUtenteUltMod(cfUtenteMod);
		delega.setDataUltMod(DateUtil.getSqlDataCorrente());
		
		return delega;
	}
	
	public static SigitRPgPgNominaDto getSigitRPgPgNomina(String chiaveIncaricato, String cfUtenteMod)
	{
		SigitRPgPgNominaDto delega = new SigitRPgPgNominaDto();
		
		StringTokenizer tok = new StringTokenizer(
				chiaveIncaricato, Constants.INTERVAL_SEP_CHIAVI);
		
		
		
		StringTokenizer tokCANCELLARE = new StringTokenizer(
				chiaveIncaricato, Constants.INTERVAL_SEP_CHIAVI);
		
		log.debug("token 1: "+tokCANCELLARE.nextToken());		
		log.debug("token 2: "+tokCANCELLARE.nextToken());		
		log.debug("token 3: "+tokCANCELLARE.nextToken());		
		
		
		delega.setIdPersonaGiuridicaCat(ConvertUtil.convertToBigDecimal(tok.nextToken()));
		delega.setIdPersonaGiuridicaImpresa(ConvertUtil.convertToBigDecimal(tok.nextToken()));
		delega.setDataInizio(ConvertUtil.convertToSqlDate(tok.nextToken()));
		
		delega.setDataFine(DateUtil.getSqlCurrentDate());
		delega.setUtenteUltimaModifica(cfUtenteMod);
		delega.setDataUltimaModifica(DateUtil.getSqlCurrentDate());
		
		return delega;
	}
	
	
	public static SigitRImpRuoloPfpgDto getSigitRImpRuoloPfpgDto(DettaglioIspezione dettaglioIspezione, String cfUtenteMod)
	{
		SigitRImpRuoloPfpgDto dto = new SigitRImpRuoloPfpgDto();
		
		dto.setFkRuolo(ConvertUtil.convertToBigDecimal(Constants.ID_RUOLO_ISPETTORE));
		
		dto.setCodiceImpianto(ConvertUtil.convertToBigDecimal(dettaglioIspezione.getCodiceImpianto()));
		dto.setDataInizio(DateUtil.getSqlCurrentDate());
		dto.setDataFine(DateUtil.getSqlCurrentDate());
		dto.setFkPersonaFisica(ConvertUtil.convertToBigDecimal(dettaglioIspezione.getIspettoreId()));
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		dto.setUtenteUltMod(cfUtenteMod);

		return dto;
	}
	
	public static SigitTIspezioneDto getSigitTIspezioneDto(DettaglioIspezione dettaglioIspezione, String cfUtenteMod)
	{
		SigitTIspezioneDto dto = new SigitTIspezioneDto();
		
		dto.setIdImpRuoloPfpg(ConvertUtil.convertToBigDecimal(dettaglioIspezione.getIdIspezione()));
		dto.setFkStatoIspezione(ConvertUtil.convertToBigDecimal(Constants.ID_STATO_ISPEZIONE_BOZZA));
		dto.setEnteCompetente(dettaglioIspezione.getEnteCompetente());
		dto.setDataIspezione(ConvertUtil.convertToSqlTimestamp(dettaglioIspezione.getDataIspezione()));
		dto.setFlgEsito(ConvertUtil.convertToBigDecimal(dettaglioIspezione.getEsitoIspezione()));
		dto.setNote(dettaglioIspezione.getNote());
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		dto.setUtenteUltMod(cfUtenteMod);

		return dto;
	}
	
	
	public static void mapToSchedaIdentificativaImpianto(DatiSchedaIdentificativaImp datiImpianto, SigitTLibrettoDto libretto, 
			SigitTImpiantoDto impianto, SigitTUnitaImmobiliareDto unitaPrincipale)
	{
		datiImpianto.setL11DataIntervento(ConvertUtil.convertToXmlCalendar(impianto.getDataIntervento()));
		if(impianto.getFkTipoIntervento()!=null)
		{
			if(Constants.ID_TIPO_INT_NUOVA_INSTALZ == impianto.getFkTipoIntervento().intValue())
				datiImpianto.xsetL11FlagNuovaInst(getXmlBoolean(true));
			if(Constants.ID_TIPO_INT_RISTRUTTURAZ == impianto.getFkTipoIntervento().intValue())
				datiImpianto.xsetL11FlagRistrutt(getXmlBoolean(true));
			if(Constants.ID_TIPO_INT_SOSTITUZIONE == impianto.getFkTipoIntervento().intValue())
				datiImpianto.xsetL11FlagSostGenerat(getXmlBoolean(true));
			if(Constants.ID_TIPO_INT_COMPILAZIONE == impianto.getFkTipoIntervento().intValue())
				datiImpianto.xsetL11FlagCompilaLibretto(getXmlBoolean(true));
		}
		
		if(Constants.ID_UNITA_IMMOB_CATEGORIA_E1.equals(unitaPrincipale.getL12FkCategoria()))
			datiImpianto.xsetL12FlagE1(getXmlBoolean(true));
		if(Constants.ID_UNITA_IMMOB_CATEGORIA_E2.equals(unitaPrincipale.getL12FkCategoria()))
			datiImpianto.xsetL12FlagE2(getXmlBoolean(true));
		if(Constants.ID_UNITA_IMMOB_CATEGORIA_E3.equals(unitaPrincipale.getL12FkCategoria()))
			datiImpianto.xsetL12FlagE3(getXmlBoolean(true));
		if(Constants.ID_UNITA_IMMOB_CATEGORIA_E4.equals(unitaPrincipale.getL12FkCategoria()))
			datiImpianto.xsetL12FlagE4(getXmlBoolean(true));
		if(Constants.ID_UNITA_IMMOB_CATEGORIA_E5.equals(unitaPrincipale.getL12FkCategoria()))
			datiImpianto.xsetL12FlagE5(getXmlBoolean(true));
		if(Constants.ID_UNITA_IMMOB_CATEGORIA_E6.equals(unitaPrincipale.getL12FkCategoria()))
			datiImpianto.xsetL12FlagE6(getXmlBoolean(true));
		if(Constants.ID_UNITA_IMMOB_CATEGORIA_E7.equals(unitaPrincipale.getL12FkCategoria()))
			datiImpianto.xsetL12FlagE7(getXmlBoolean(true));
		if(Constants.ID_UNITA_IMMOB_CATEGORIA_E8.equals(unitaPrincipale.getL12FkCategoria()))
			datiImpianto.xsetL12FlagE8(getXmlBoolean(true));
		datiImpianto.xsetL12FlagUnitaImmSingle(getXmlBoolean(ConvertUtil.convertToBooleanAllways(unitaPrincipale.getL12FlgSingolaUnita())));
		datiImpianto.setL12VolLordoRaffr(unitaPrincipale.getL12VolRaffM3());
		datiImpianto.setL12VolLordoRisc(unitaPrincipale.getL12VolRiscM3());
		
		datiImpianto.setL13DescrAltro(impianto.getL13Altro());
		datiImpianto.xsetL13FlagAltro(getXmlBoolean(GenericUtil.isNotNullOrEmpty(impianto.getL13Altro())));
		datiImpianto.xsetL13FlagClimaEst(getXmlBoolean(GenericUtil.isNotNullOrEmpty(impianto.getL13PotClimaEstKw())));
		datiImpianto.setL13PotUtileClimaEst(impianto.getL13PotClimaEstKw());
		datiImpianto.xsetL13FlagClimaInv(getXmlBoolean(GenericUtil.isNotNullOrEmpty(impianto.getL13PotClimaInvKw())));
		datiImpianto.setL13PotUtileClimaInv(impianto.getL13PotClimaInvKw());
		datiImpianto.xsetL13FlagProdACS(getXmlBoolean(GenericUtil.isNotNullOrEmpty(impianto.getL13PotH2oKw())));
		datiImpianto.setL13PotUtileACS(impianto.getL13PotH2oKw());
		
		datiImpianto.setL14DescrAltro(impianto.getL14Altro());
		datiImpianto.xsetL14FlagAltro(getXmlBoolean(GenericUtil.isNotNullOrEmpty(impianto.getL14Altro())));
		datiImpianto.xsetL14FlagAria(getXmlBoolean(ConvertUtil.convertToBooleanAllways(impianto.getL14FlgAria())));
		datiImpianto.xsetL14FlagH2O(getXmlBoolean(ConvertUtil.convertToBooleanAllways(impianto.getL14FlgH2o())));

		datiImpianto.setL15DescrAltrIntegraz(impianto.getL15AltroIntegrazione());
		datiImpianto.setL15DescrAltro(impianto.getL15Altro());
		datiImpianto.setL15DescrAltroPer(impianto.getL15AltroDesc());
		datiImpianto.xsetL15FlagAltraIntegraz(getXmlBoolean(GenericUtil.isNotNullOrEmpty(impianto.getL15AltroIntegrPotKw())));
		datiImpianto.xsetL15FlagAltro(getXmlBoolean(GenericUtil.isNotNullOrEmpty(impianto.getL15Altro())));
		datiImpianto.xsetL15FlagAltroPer(getXmlBoolean(GenericUtil.isNotNullOrEmpty(impianto.getL15AltroDesc())));
		datiImpianto.xsetL15FlagClimaEst(getXmlBoolean(ConvertUtil.convertToBooleanAllways(impianto.getL15FlgAltroClimaEstate())));
		datiImpianto.xsetL15FlagClimaInv(getXmlBoolean(ConvertUtil.convertToBooleanAllways(impianto.getL15FlgAltroClimaInv())));
		datiImpianto.xsetL15FlagCogener(getXmlBoolean(ConvertUtil.convertToBooleanAllways(impianto.getL15FlgCogeneratore())));
		datiImpianto.xsetL15FlagGeneratCombu(getXmlBoolean(ConvertUtil.convertToBooleanAllways(impianto.getL15FlgGeneratore())));
		datiImpianto.xsetL15FlagMaccFrigo(getXmlBoolean(ConvertUtil.convertToBooleanAllways(impianto.getL15FlgFrigo())));
		datiImpianto.xsetL15FlagPannelliSol(getXmlBoolean(GenericUtil.isNotNullOrEmpty(impianto.getL15SupPannelliSolM2())));
		datiImpianto.xsetL15FlagPompaCal(getXmlBoolean(ConvertUtil.convertToBooleanAllways(impianto.getL15FlgPompa())));
		datiImpianto.xsetL15FlagProdACS(getXmlBoolean(ConvertUtil.convertToBooleanAllways(impianto.getL15FlgAltroAcs())));
		datiImpianto.xsetL15FlagTeleraffr(getXmlBoolean(ConvertUtil.convertToBooleanAllways(impianto.getL15FlgTeleraffr())));
		datiImpianto.xsetL15FlagTelerisc(getXmlBoolean(ConvertUtil.convertToBooleanAllways(impianto.getL15FlgTelerisc())));
		
		datiImpianto.setL15PotUtile(impianto.getL15AltroIntegrPotKw());
		datiImpianto.setL15SuperfLordaTot(impianto.getL15SupPannelliSolM2());
	}

	public static void mapToSchedaIdentificativaImpiantoLight(it.csi.sigit.sigitwebn.xml.librettoLight.data.DatiSchedaIdentificativaImpDocument.DatiSchedaIdentificativaImp datiImpianto, SigitTLibrettoDto libretto, 
			SigitTImpiantoDto impianto, SigitTUnitaImmobiliareDto unitaPrincipale)
	{
		datiImpianto.setL11DataIntervento(ConvertUtil.convertToXmlCalendar(impianto.getDataIntervento()));
		if(impianto.getFkTipoIntervento()!=null)
		{
			if(Constants.ID_TIPO_INT_NUOVA_INSTALZ == impianto.getFkTipoIntervento().intValue())
				datiImpianto.xsetL11FlagNuovaInst(getXmlBoolean(true));
			if(Constants.ID_TIPO_INT_RISTRUTTURAZ == impianto.getFkTipoIntervento().intValue())
				datiImpianto.xsetL11FlagRistrutt(getXmlBoolean(true));
			if(Constants.ID_TIPO_INT_SOSTITUZIONE == impianto.getFkTipoIntervento().intValue())
				datiImpianto.xsetL11FlagSostGenerat(getXmlBoolean(true));
			if(Constants.ID_TIPO_INT_COMPILAZIONE == impianto.getFkTipoIntervento().intValue())
				datiImpianto.xsetL11FlagCompilaLibretto(getXmlBoolean(true));
		}
		
		if(Constants.ID_UNITA_IMMOB_CATEGORIA_E1.equals(unitaPrincipale.getL12FkCategoria()))
			datiImpianto.xsetL12FlagE1(getXmlBoolean(true));
		if(Constants.ID_UNITA_IMMOB_CATEGORIA_E2.equals(unitaPrincipale.getL12FkCategoria()))
			datiImpianto.xsetL12FlagE2(getXmlBoolean(true));
		if(Constants.ID_UNITA_IMMOB_CATEGORIA_E3.equals(unitaPrincipale.getL12FkCategoria()))
			datiImpianto.xsetL12FlagE3(getXmlBoolean(true));
		if(Constants.ID_UNITA_IMMOB_CATEGORIA_E4.equals(unitaPrincipale.getL12FkCategoria()))
			datiImpianto.xsetL12FlagE4(getXmlBoolean(true));
		if(Constants.ID_UNITA_IMMOB_CATEGORIA_E5.equals(unitaPrincipale.getL12FkCategoria()))
			datiImpianto.xsetL12FlagE5(getXmlBoolean(true));
		if(Constants.ID_UNITA_IMMOB_CATEGORIA_E6.equals(unitaPrincipale.getL12FkCategoria()))
			datiImpianto.xsetL12FlagE6(getXmlBoolean(true));
		if(Constants.ID_UNITA_IMMOB_CATEGORIA_E7.equals(unitaPrincipale.getL12FkCategoria()))
			datiImpianto.xsetL12FlagE7(getXmlBoolean(true));
		if(Constants.ID_UNITA_IMMOB_CATEGORIA_E8.equals(unitaPrincipale.getL12FkCategoria()))
			datiImpianto.xsetL12FlagE8(getXmlBoolean(true));
		datiImpianto.xsetL12FlagUnitaImmSingle(getXmlBoolean(ConvertUtil.convertToBooleanAllways(unitaPrincipale.getL12FlgSingolaUnita())));
		datiImpianto.setL12VolLordoRaffr(unitaPrincipale.getL12VolRaffM3());
		datiImpianto.setL12VolLordoRisc(unitaPrincipale.getL12VolRiscM3());
		
		datiImpianto.setL13DescrAltro(impianto.getL13Altro());
		datiImpianto.xsetL13FlagAltro(getXmlBoolean(GenericUtil.isNotNullOrEmpty(impianto.getL13Altro())));
		datiImpianto.xsetL13FlagClimaEst(getXmlBoolean(GenericUtil.isNotNullOrEmpty(impianto.getL13PotClimaEstKw())));
		datiImpianto.setL13PotUtileClimaEst(impianto.getL13PotClimaEstKw());
		datiImpianto.xsetL13FlagClimaInv(getXmlBoolean(GenericUtil.isNotNullOrEmpty(impianto.getL13PotClimaInvKw())));
		datiImpianto.setL13PotUtileClimaInv(impianto.getL13PotClimaInvKw());
		datiImpianto.xsetL13FlagProdACS(getXmlBoolean(GenericUtil.isNotNullOrEmpty(impianto.getL13PotH2oKw())));
		datiImpianto.setL13PotUtileACS(impianto.getL13PotH2oKw());
		
		datiImpianto.setL14DescrAltro(impianto.getL14Altro());
		datiImpianto.xsetL14FlagAltro(getXmlBoolean(GenericUtil.isNotNullOrEmpty(impianto.getL14Altro())));
		datiImpianto.xsetL14FlagAria(getXmlBoolean(ConvertUtil.convertToBooleanAllways(impianto.getL14FlgAria())));
		datiImpianto.xsetL14FlagH2O(getXmlBoolean(ConvertUtil.convertToBooleanAllways(impianto.getL14FlgH2o())));
		
		datiImpianto.setL15DescrAltrIntegraz(impianto.getL15AltroIntegrazione());
		datiImpianto.setL15DescrAltro(impianto.getL15Altro());
		datiImpianto.setL15DescrAltroPer(impianto.getL15AltroDesc());
		datiImpianto.xsetL15FlagAltraIntegraz(getXmlBoolean(GenericUtil.isNotNullOrEmpty(impianto.getL15AltroIntegrPotKw())));
		datiImpianto.xsetL15FlagAltro(getXmlBoolean(GenericUtil.isNotNullOrEmpty(impianto.getL15Altro())));
		datiImpianto.xsetL15FlagAltroPer(getXmlBoolean(GenericUtil.isNotNullOrEmpty(impianto.getL15AltroDesc())));
		datiImpianto.xsetL15FlagClimaEst(getXmlBoolean(ConvertUtil.convertToBooleanAllways(impianto.getL15FlgAltroClimaEstate())));
		datiImpianto.xsetL15FlagClimaInv(getXmlBoolean(ConvertUtil.convertToBooleanAllways(impianto.getL15FlgAltroClimaInv())));
		datiImpianto.xsetL15FlagCogener(getXmlBoolean(ConvertUtil.convertToBooleanAllways(impianto.getL15FlgCogeneratore())));
		datiImpianto.xsetL15FlagGeneratCombu(getXmlBoolean(ConvertUtil.convertToBooleanAllways(impianto.getL15FlgGeneratore())));
		datiImpianto.xsetL15FlagMaccFrigo(getXmlBoolean(ConvertUtil.convertToBooleanAllways(impianto.getL15FlgFrigo())));
		datiImpianto.xsetL15FlagPannelliSol(getXmlBoolean(GenericUtil.isNotNullOrEmpty(impianto.getL15SupPannelliSolM2())));
		datiImpianto.xsetL15FlagPompaCal(getXmlBoolean(ConvertUtil.convertToBooleanAllways(impianto.getL15FlgPompa())));
		datiImpianto.xsetL15FlagProdACS(getXmlBoolean(ConvertUtil.convertToBooleanAllways(impianto.getL15FlgAltroAcs())));
		datiImpianto.xsetL15FlagTeleraffr(getXmlBoolean(ConvertUtil.convertToBooleanAllways(impianto.getL15FlgTeleraffr())));
		datiImpianto.xsetL15FlagTelerisc(getXmlBoolean(ConvertUtil.convertToBooleanAllways(impianto.getL15FlgTelerisc())));
		
		datiImpianto.setL15PotUtile(impianto.getL15AltroIntegrPotKw());
		datiImpianto.setL15SuperfLordaTot(impianto.getL15SupPannelliSolM2());
	}
	
	public static void mapToSchedaIdentificativaImpiantoImport(DatiSchedaIdentificativaImp datiImpianto, L1SchedaIdentificativa l1SchedaIdentificativa)
	{
//		System.out.println("l1SchedaIdentificativa: "+l1SchedaIdentificativa);
//		System.out.println("datiImpianto: "+datiImpianto);
		datiImpianto.setL11DataIntervento(ConvertUtil.convertToXmlCalendar(l1SchedaIdentificativa.getL11DataIntervento()));
		
		if(l1SchedaIdentificativa.getL11TipoIntervento()!=null)
		{
			if(Constants.ID_TIPO_INT_NUOVA_INSTALZ == l1SchedaIdentificativa.getL11TipoIntervento().intValue())
				datiImpianto.xsetL11FlagNuovaInst(getXmlBoolean(true));
			if(Constants.ID_TIPO_INT_RISTRUTTURAZ == l1SchedaIdentificativa.getL11TipoIntervento().intValue())
				datiImpianto.xsetL11FlagRistrutt(getXmlBoolean(true));
			if(Constants.ID_TIPO_INT_SOSTITUZIONE == l1SchedaIdentificativa.getL11TipoIntervento().intValue())
				datiImpianto.xsetL11FlagSostGenerat(getXmlBoolean(true));
			if(Constants.ID_TIPO_INT_COMPILAZIONE == l1SchedaIdentificativa.getL11TipoIntervento().intValue())
				datiImpianto.xsetL11FlagCompilaLibretto(getXmlBoolean(true));
		}
		
		datiImpianto.xsetL12FlagUnitaImmSingle(getXmlBoolean(l1SchedaIdentificativa.getL12FlagUnitaImmSingle()));
		
		
		if (l1SchedaIdentificativa.getL12Categoria() != null)
		{
			if(Constants.ID_UNITA_IMMOB_CATEGORIA_E1.equals(l1SchedaIdentificativa.getL12Categoria().toString()))
				datiImpianto.xsetL12FlagE1(getXmlBoolean(true));
			if(Constants.ID_UNITA_IMMOB_CATEGORIA_E2.equals(l1SchedaIdentificativa.getL12Categoria().toString()))
				datiImpianto.xsetL12FlagE2(getXmlBoolean(true));
			if(Constants.ID_UNITA_IMMOB_CATEGORIA_E3.equals(l1SchedaIdentificativa.getL12Categoria().toString()))
				datiImpianto.xsetL12FlagE3(getXmlBoolean(true));
			if(Constants.ID_UNITA_IMMOB_CATEGORIA_E4.equals(l1SchedaIdentificativa.getL12Categoria().toString()))
				datiImpianto.xsetL12FlagE4(getXmlBoolean(true));
			if(Constants.ID_UNITA_IMMOB_CATEGORIA_E5.equals(l1SchedaIdentificativa.getL12Categoria().toString()))
				datiImpianto.xsetL12FlagE5(getXmlBoolean(true));
			if(Constants.ID_UNITA_IMMOB_CATEGORIA_E6.equals(l1SchedaIdentificativa.getL12Categoria().toString()))
				datiImpianto.xsetL12FlagE6(getXmlBoolean(true));
			if(Constants.ID_UNITA_IMMOB_CATEGORIA_E7.equals(l1SchedaIdentificativa.getL12Categoria().toString()))
				datiImpianto.xsetL12FlagE7(getXmlBoolean(true));
			if(Constants.ID_UNITA_IMMOB_CATEGORIA_E8.equals(l1SchedaIdentificativa.getL12Categoria().toString()))
				datiImpianto.xsetL12FlagE8(getXmlBoolean(true));
		}
		
		datiImpianto.setL12VolLordoRisc(l1SchedaIdentificativa.getL12VolLordoRisc());
		datiImpianto.setL12VolLordoRaffr(l1SchedaIdentificativa.getL12VolLordoRaffr());
		
		if (l1SchedaIdentificativa.getL13ServizioACSList() != null &&
				l1SchedaIdentificativa.getL13ServizioACSList().size() > 0)
		{
			datiImpianto.xsetL13FlagProdACS(getXmlBoolean(true));		
			datiImpianto.setL13PotUtileACS(l1SchedaIdentificativa.getL13ServizioACSArray(0));	
		}
			
		if (l1SchedaIdentificativa.getL13ServizioClimaInvList() != null &&
				l1SchedaIdentificativa.getL13ServizioClimaInvList().size() > 0)
		{
			datiImpianto.xsetL13FlagClimaInv(getXmlBoolean(true));		
			datiImpianto.setL13PotUtileClimaInv(l1SchedaIdentificativa.getL13ServizioClimaInvArray(0));	
		}
		
		if (l1SchedaIdentificativa.getL13ServizioClimaEstList() != null &&
				l1SchedaIdentificativa.getL13ServizioClimaEstList().size() > 0)
		{
			datiImpianto.xsetL13FlagClimaEst(getXmlBoolean(true));		
			datiImpianto.setL13PotUtileClimaEst(l1SchedaIdentificativa.getL13ServizioClimaEstArray(0));	
		}
		
		if (l1SchedaIdentificativa.getL13ServizioAltroList() != null &&
				l1SchedaIdentificativa.getL13ServizioAltroList().size() > 0)
		{
			datiImpianto.xsetL13FlagAltro(getXmlBoolean(true));		
			datiImpianto.setL13DescrAltro(l1SchedaIdentificativa.getL13ServizioAltroArray(0));	
		}
		
		
		datiImpianto.xsetL14FlagH2O(getXmlBoolean(l1SchedaIdentificativa.getL14FluidoAcqua()));
		datiImpianto.xsetL14FlagAria(getXmlBoolean(l1SchedaIdentificativa.getL14FluidoAria()));
		
		if (GenericUtil.isNotNullOrEmpty(l1SchedaIdentificativa.getL14FluidoAltro()))
		{
			datiImpianto.xsetL14FlagAltro(getXmlBoolean(true));
			datiImpianto.setL14DescrAltro(l1SchedaIdentificativa.getL14FluidoAltro());
		}
		
		
		
		datiImpianto.xsetL15FlagGeneratCombu(getXmlBoolean(l1SchedaIdentificativa.getL15TipoGeneratore()));
		datiImpianto.xsetL15FlagPompaCal(getXmlBoolean(l1SchedaIdentificativa.getL15TipoPompa()));
		datiImpianto.xsetL15FlagMaccFrigo(getXmlBoolean(l1SchedaIdentificativa.getL15TipoFrigo()));
		datiImpianto.xsetL15FlagTelerisc(getXmlBoolean(l1SchedaIdentificativa.getL15TipoTelerisc()));
		datiImpianto.xsetL15FlagTeleraffr(getXmlBoolean(l1SchedaIdentificativa.getL15TipoTeleraff()));

		datiImpianto.xsetL15FlagCogener(getXmlBoolean(l1SchedaIdentificativa.getL15TipoCogen()));

		
		if (GenericUtil.isNotNullOrEmpty(l1SchedaIdentificativa.getL14FluidoAltro()))
		{
			
			datiImpianto.xsetL15FlagAltro(getXmlBoolean(true));
			datiImpianto.setL15DescrAltro(l1SchedaIdentificativa.getL15TipoAltro());
			
		}
		
		
		if (GenericUtil.isNotNullOrEmpty(l1SchedaIdentificativa.getL15TipoIntegrazionePannelli()))
		{
			datiImpianto.xsetL15FlagPannelliSol(getXmlBoolean(true));
			datiImpianto.setL15SuperfLordaTot(l1SchedaIdentificativa.getL15TipoIntegrazionePannelli());	
		}
		
		if (l1SchedaIdentificativa.getL15TipoIntegrazioneAltro() != null && l1SchedaIdentificativa.getL15TipoIntegrazioneAltro().getDescrizioneDecimaleType() != null)
		{
			if (GenericUtil.isNotNullOrEmpty(l1SchedaIdentificativa.getL15TipoIntegrazioneAltro().getDescrizioneDecimaleType().getDescrizione()))
			{
				datiImpianto.xsetL15FlagAltraIntegraz(getXmlBoolean(true));
				datiImpianto.setL15DescrAltrIntegraz(l1SchedaIdentificativa.getL15TipoIntegrazioneAltro().getDescrizioneDecimaleType().getDescrizione());	
			}
			
			if (GenericUtil.isNotNullOrEmpty(l1SchedaIdentificativa.getL15TipoIntegrazioneAltro().getDescrizioneDecimaleType().getDecimale()))
			{
				datiImpianto.xsetL15FlagAltraIntegraz(getXmlBoolean(true));
				datiImpianto.setL15PotUtile(l1SchedaIdentificativa.getL15TipoIntegrazioneAltro().getDescrizioneDecimaleType().getDecimale());	
			}
			
		}
		
		
		datiImpianto.xsetL15FlagClimaInv(getXmlBoolean(l1SchedaIdentificativa.getL15TipoPerClimaInv()));
		datiImpianto.xsetL15FlagClimaEst(getXmlBoolean(l1SchedaIdentificativa.getL15TipoPerClimaEst()));
		
		datiImpianto.xsetL15FlagProdACS(getXmlBoolean(l1SchedaIdentificativa.getL15TipoPerACS()));
		
		if (GenericUtil.isNotNullOrEmpty(l1SchedaIdentificativa.getL15TipoPerAltro()))
		{
			
			datiImpianto.xsetL15FlagAltroPer(getXmlBoolean(true));
			datiImpianto.setL15DescrAltroPer(l1SchedaIdentificativa.getL15TipoPerAltro());
			
		}
	}
	
	public static void mapToDatiPrecompilati(DatiPrecompilati datiPrecompilati, SigitTUnitaImmobiliareDto unitaImmobPrincipale, SigitTImpiantoDto impianto, List<SigitTUnitaImmobiliareDto> unitaImmobSecondarie)
	{
		if (GenericUtil.isNotNullOrEmpty(unitaImmobPrincipale.getIndirizzoSitad()))
		{
			datiPrecompilati.setL12Indirizzo(unitaImmobPrincipale.getIndirizzoSitad());
		}
		else
		{
			datiPrecompilati.setL12Indirizzo(unitaImmobPrincipale.getIndirizzoNonTrovato());
		}
		
		datiPrecompilati.setL12Civico(unitaImmobPrincipale.getCivico());
		datiPrecompilati.setL12Scala(unitaImmobPrincipale.getScala());
		datiPrecompilati.setL12Interno(unitaImmobPrincipale.getInterno());
		datiPrecompilati.setL12Comune(impianto.getDenominazioneComune());
		datiPrecompilati.setL12Prov(impianto.getSiglaProvincia());
		datiPrecompilati.setL12Palazzo(unitaImmobPrincipale.getPalazzo());

		datiPrecompilati.setCodiceCatasto(ConvertUtil.convertToString(impianto.getCodiceImpianto()));
		datiPrecompilati.setSezCatasto(it.csi.sigit.sigitwebn.xml.libretto.data.DatiPrecompilatiDocument.DatiPrecompilati.SezCatasto.Factory.newInstance());
		
		//dati sezione
		RowCatasto catastoPrincipale = RowCatasto.Factory.newInstance();
		catastoPrincipale.setL12Foglio(unitaImmobPrincipale.getFoglio());
		catastoPrincipale.setL12Particella(unitaImmobPrincipale.getParticella());
		catastoPrincipale.setL12Pdr(unitaImmobPrincipale.getPdrGas());
		catastoPrincipale.setL12Pod(unitaImmobPrincipale.getPodElettrico());
		catastoPrincipale.setL12Sezione(unitaImmobPrincipale.getSezione());
		catastoPrincipale.setL12Sub(unitaImmobPrincipale.getSubalterno());
		List<RowCatasto> rowCatastoList = datiPrecompilati.getSezCatasto().getRowCatastoList();
		rowCatastoList.add(catastoPrincipale);
		for (SigitTUnitaImmobiliareDto umSec : unitaImmobSecondarie) {
			RowCatasto catastoSec = RowCatasto.Factory.newInstance();
			catastoSec.setL12Foglio(umSec.getFoglio());
			catastoSec.setL12Particella(umSec.getParticella());
			catastoSec.setL12Pdr(umSec.getPdrGas());
			catastoSec.setL12Pod(umSec.getPodElettrico());
			catastoSec.setL12Sezione(umSec.getSezione());
			catastoSec.setL12Sub(umSec.getSubalterno());
			rowCatastoList.add(catastoSec);
		}
	}
	
	
	public static XmlBoolean getXmlBoolean(boolean b)
	{
		XmlBoolean newInstance = XmlBoolean.Factory.newInstance();
		newInstance.setStringValue( b ? "1" : "0");
		return newInstance;
	}
	
	public static XmlInteger getXmlInteger(int i)
	{
		XmlInteger newInstance = XmlInteger.Factory.newInstance();
		newInstance.setBigIntegerValue(ConvertUtil.convertToBigInteger(i));
		return newInstance;
	}
	
	public static void mapToSchedaTrattH2o(SigitTTrattH2ODto dto, DatiSchedaTrattH2O datiH2o)
	{
		datiH2o.setL21ContenutoH2OimpClima(dto.getL21H2oClimaM3());
		datiH2o.setL22DurezzaTotaleH2O(dto.getL22DurezzaH2oFr());
		datiH2o.setL23DurezzaTotaleH2O(dto.getL23DurezzaTotH2oFr());
		datiH2o.xsetL23FlagAddolcimento(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL23FlgTrattClimaAddolc())));
		datiH2o.xsetL23FlagAssenteH2Oclima(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL23FlgTrattClimaAssente())));
		datiH2o.xsetL23FlagAssenteProtGelo(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL23FlgTrattGeloAssente())));
		datiH2o.xsetL23FlagCondizChimico(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL23FlgTrattClimaChimico())));
		datiH2o.xsetL23FlagFiltrazione(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL23FlgTrattClimaFiltr())));
		datiH2o.xsetL23FlagGlicoleEtilenic(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL23FlgTrattGeloGliEtil())));
		datiH2o.xsetL23FlagGlicolePropLenic(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL23FlgTrattGeloGliProp())));
		datiH2o.setL23PercConcentrazEtilenic(dto.getL23PercGliEtil());
		datiH2o.setL23PercConcentrazPropLenic(dto.getL23PercGliProp());
		datiH2o.setL23PHconcentrazEtilenic(dto.getL23PhGliEtil());
		datiH2o.setL23PHconcentrazPropLenic(dto.getL23PhGliProp());
		
		datiH2o.setL24DurezzaTotaleAddolcit(dto.getL24DurezzaAddolcFr());
		datiH2o.xsetL24FlagAddolcimento(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL24FlgTrattAcsAddolc())));
		datiH2o.xsetL24FlagAssente(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL24FlgTrattAcsAssente())));
		datiH2o.xsetL24FlagCondizChimico(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL24FlgTrattAcsChimico())));
		datiH2o.xsetL24FlagFiltrazione(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL24FlgTrattAcsFiltr())));
		
		datiH2o.setL25CondChimAltro(dto.getL25TrattCAltro());
		datiH2o.xsetL25FlagAcquaSuperficiale(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattRaffH2oSup())));
		datiH2o.xsetL25FlagAcquedotto(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattRaffAcq())));
		datiH2o.xsetL25FlagAssente(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattRaffAssente())));
		datiH2o.xsetL25FlagCondChimAltro(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL25TrattCAltro())));
		datiH2o.xsetL25FlagCondChimAnticorr(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattCPaanticorr())));
		datiH2o.xsetL25FlagCondChimAnticrosta(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattCPaantincro())));
		datiH2o.xsetL25FlagCondChimAnticrostaAntiCorr(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattCAaa())));
		datiH2o.xsetL25FlagCondChimBiocida(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattCBiocida())));
		datiH2o.xsetL25FlagCondChimNoTrattam(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattCNoTratt())));
		datiH2o.xsetL25FlagCondizChimico(getXmlBoolean(datiH2o.getL25FlagCondChimAltro() || datiH2o.getL25FlagCondChimAnticorr() || datiH2o.getL25FlagCondChimAnticrosta()
				|| datiH2o.getL25FlagCondChimAnticrostaAntiCorr() || datiH2o.getL25FlagCondChimBiocida() || datiH2o.getL25FlagCondChimNoTrattam()));
		datiH2o.setL25FiltrazioneAltro(dto.getL25TrattFAltro());
		datiH2o.xsetL25FlagFiltrazAltro(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL25TrattFAltro())));
		datiH2o.xsetL25FlagFiltrazMasse(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattFFiltMas())));
		datiH2o.xsetL25FlagFiltrazNoTrattam(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattFNoTratt())));
		datiH2o.xsetL25FlagFiltrazSicurezza(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattFFiltSic())));
		datiH2o.xsetL25FlagFiltrazione(getXmlBoolean(datiH2o.getL25FlagFiltrazAltro() || datiH2o.getL25FlagFiltrazMasse() ||
				datiH2o.getL25FlagFiltrazNoTrattam() || datiH2o.getL25FlagFiltrazSicurezza()));
		datiH2o.xsetL25FlagPozzo(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattRaffPzz())));
		datiH2o.xsetL25FlagPrefSpurgoAutom(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25FlgSpurgoAutom())));
		datiH2o.xsetL25FlagRecupTermParz(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattRaffRtp())));
		datiH2o.xsetL25FlagRecupTermTot(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattRaffRtt())));
		datiH2o.xsetL25FlagSenzaRecupTerm(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattRaffNoRt())));
		datiH2o.xsetL25FlagTrattAddolcim(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattTAddolc())));
		datiH2o.setL25TrattamentoAltro(dto.getL25TrattTAltro());
		datiH2o.xsetL25FlagTrattAltro(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL25TrattTAltro())));
		datiH2o.xsetL25FlagTrattDemineralizz(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattTDemin())));
		datiH2o.xsetL25FlagTrattNoTrattam(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattTNoTratt())));
		datiH2o.xsetL25FlagTrattOsmosi(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattTOsmosi())));
		datiH2o.xsetL25FlagTrattamentoH2O(getXmlBoolean(datiH2o.getL25FlagTrattAddolcim() || datiH2o.getL25FlagTrattAltro() || datiH2o.getL25FlagTrattDemineralizz()
				|| datiH2o.getL25FlagTrattNoTrattam() || datiH2o.getL25FlagTrattOsmosi()));

		datiH2o.setL25ConducibH2Oingresso(dto.getL25ConducH2oIng());
		datiH2o.setL25TaraturaSpurgo(dto.getL25Taratura());
	}
	
	public static void mapToSchedaGT(List<SigitVSk4GtDto> compGtImpianto, DatiSchedaGT schedaGt)
	{
		if(compGtImpianto == null) return;
		log.debug("mapToSchedaGT: START");
		SezGruppiTermici sezGT = schedaGt.addNewSezGruppiTermici();
		BigDecimal progressivo = null;
		Date lastDataInstall = null;
		//Date maxDataControllo = null;
		List<RowGT> listGt = new ArrayList<RowGT>();
		RowGT gt = null;
		List<RowGTsost> listSost = new ArrayList<RowGTsost>();
		
		if(compGtImpianto.size()>0)
			progressivo = compGtImpianto.get(0).getProgressivo();
		
		log.debug("mapping scheda GT");
		int numInProgr = 1;
		for (int i=0; i<compGtImpianto.size();i++) {
			
			log.debug("i="+i +", posInProgr = " + numInProgr);
			
			SigitVSk4GtDto dto = compGtImpianto.get(i);
			
			log.debug("GT: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall() + ", data controllo: " + dto.getDataControllo());
			/*
			if(maxDataControllo==null)
				maxDataControllo = dto.getDataControllo();
			if(maxDataControllo!=null && dto.getDataControllo()!=null && dto.getDataControllo().after(maxDataControllo))
			{
				maxDataControllo = dto.getDataControllo();
			}
			*/
			
			if(progressivo.equals(dto.getProgressivo()) && lastDataInstall!=null && lastDataInstall.compareTo(dto.getDataInstall())==0)
			{
				log.debug("duplicato, scartato");
				continue;
			}
			
			if(!progressivo.equals(dto.getProgressivo()))
			{
				log.debug("cambio progressivo");
				if(!listSost.isEmpty())
				{
					log.debug("aggiungo gt sostituite "+listSost.size());
					gt.addNewSezGTsostituite();
					gt.getSezGTsostituite().getRowGTsostList().addAll(listSost);
				}
				listGt.add(gt);
				progressivo = dto.getProgressivo();
				listSost= new ArrayList<RowGTsost>();
				numInProgr = 1;
			}

			if(numInProgr++ == 1)
			{
				log.debug("GT principale");
				gt = mapToRowGT(dto);
				
				/*
				if(dto.getDataControllo()!=null && dto.getDataDismiss()!=null && dto.getDataDismiss().before(dto.getDataControllo()))
				{
//					il flagAnnullaDismissione sara' uguale a 0 se non posso annullare la dismissione e 1 se invece posso annullarla
					gt.xsetFlagAnnullaDismissione(getXmlBoolean(true));
				}
				else
					gt.xsetFlagAnnullaDismissione(getXmlBoolean(false));
				
				// BEPPE - Questo controllo probabilmente non deve essere piu' fatto!!
				//il flagGiaPresenteDB indica se la componente puo' essere modificata (sono modificabili tutte le componenti non controllate)
				if(dto.getDataControllo()!=null && dto.getDataControllo().compareTo(dto.getDataInstall())>=0)
					gt.setFlagGiaPresenteDB(true);
				else
					gt.setFlagGiaPresenteDB(false);
				*/
			}
			else
			{
				log.debug("GT sost");
				//sost
				listSost.add(mapToRowGTSost(dto));
			}
			lastDataInstall = dto.getDataInstall();
		}
		if(!listSost.isEmpty())
		{
			log.debug("aggiungo gt sostituite "+listSost.size());
			gt.addNewSezGTsostituite();
			gt.getSezGTsostituite().getRowGTsostList().addAll(listSost);
		}
		//schedaGt.setL41DataControllo(ConvertUtil.convertDateToXmlCalendar(maxDataControllo));
		listGt.add(gt);
		sezGT.getRowGTList().addAll(listGt);
		log.debug("mapToSchedaGT: END");
	}
	
	/*
	public static void mapToSchedaGTOld(List<SigitVCompGtDettDto> compGtImpiantoDett, DatiSchedaGT schedaGt)
	{
		if(compGtImpiantoDett == null) return;
		log.debug("mapToSchedaGT: START");
		SezGruppiTermici sezGT = schedaGt.addNewSezGruppiTermici();
		BigDecimal progressivo = null;
		Date lastDataInstall = null;
		Date maxDataControllo = null;
		List<RowGT> listGt = new ArrayList<RowGT>();
		RowGT gt = null;
		List<RowGTsost> listSost = new ArrayList<RowGTsost>();
		if(compGtImpiantoDett.size()>0)
			progressivo = compGtImpiantoDett.get(0).getProgressivo();
		log.debug("mapping scheda GT");
		int numInProgr = 1;
		for (int i=0; i<compGtImpiantoDett.size();i++) {
			log.debug("i="+i +", posInProgr = " + numInProgr);
			SigitVCompGtDettDto dto = compGtImpiantoDett.get(i);
			log.debug("GT: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall() + ", data controllo: " + dto.getDataControllo());
			if(maxDataControllo==null)
				maxDataControllo = dto.getDataControllo();
			if(maxDataControllo!=null && dto.getDataControllo()!=null && dto.getDataControllo().after(maxDataControllo))
			{
				maxDataControllo = dto.getDataControllo();
			}
			if(progressivo.equals(dto.getProgressivo()) && lastDataInstall!=null && lastDataInstall.compareTo(dto.getDataInstall())==0)
			{
				log.debug("duplicato, scartato");
				continue;
			}
			if(!progressivo.equals(dto.getProgressivo()))
			{
				log.debug("cambio progressivo");
				if(!listSost.isEmpty())
				{
					log.debug("aggiungo gt sostituite "+listSost.size());
					gt.addNewSezGTsostituite();
					gt.getSezGTsostituite().getRowGTsostList().addAll(listSost);
				}
				listGt.add(gt);
				progressivo = dto.getProgressivo();
				listSost= new ArrayList<RowGTsost>();
				numInProgr = 1;
			}
			if(numInProgr++ == 1)
			{
				log.debug("GT principale");
				gt = mapToRowGT(dto);
				
				
				if(dto.getDataControllo()!=null && dto.getDataDismiss()!=null && dto.getDataDismiss().before(dto.getDataControllo()))
				{
//					il flagAnnullaDismissione sara' uguale a 0 se non posso annullare la dismissione e 1 se invece posso annullarla
					gt.xsetFlagAnnullaDismissione(getXmlBoolean(true));
				}
				else
					gt.xsetFlagAnnullaDismissione(getXmlBoolean(false));
				
				//il flagGiaPresenteDB indica se la componente puo' essere modificata (sono modificabili tutte le componenti non controllate)
				if(dto.getDataControllo()!=null && dto.getDataControllo().compareTo(dto.getDataInstall())>=0)
					gt.setFlagGiaPresenteDB(true);
				else
					gt.setFlagGiaPresenteDB(false);
			}
			else
			{
				log.debug("GT sost");
				//sost
				listSost.add(mapToRowGTSost(dto));
			}
			lastDataInstall = dto.getDataInstall();
		}
		if(!listSost.isEmpty())
		{
			log.debug("aggiungo gt sostituite "+listSost.size());
			gt.addNewSezGTsostituite();
			gt.getSezGTsostituite().getRowGTsostList().addAll(listSost);
		}
		//schedaGt.setL41DataControllo(ConvertUtil.convertDateToXmlCalendar(maxDataControllo));
		listGt.add(gt);
		sezGT.getRowGTList().addAll(listGt);
		log.debug("mapToSchedaGT: END");
	}
	*/
	
	public static void mapToSchedaBR(List<SigitTCompBrRcDto> listBr, DatiSchedaBR schedaBr, List<SigitVSk4GtDto> compGtImpiantoDett)
	{
		if(listBr == null) return;
		log.debug("mapToSchedaBR: START");
		SezBR sezBR = schedaBr.addNewSezBR();
		BigDecimal progressivo = null;
		List<RowBR> listGt = new ArrayList<RowBR>();
		RowBR br = null;
		List<RowBRsost> listSost = new ArrayList<RowBRsost>();
		if(listBr!=null && listBr.size()>0)
			progressivo = listBr.get(0).getProgressivoBrRc();
		log.debug("mapping scheda BR");
		int numInProgr = 1;
		for (int i=0; i<listBr.size();i++) {
			log.debug("i="+i+",progressivo: "+ progressivo +", inProgr: " + numInProgr);
			SigitTCompBrRcDto dto = listBr.get(i);
			log.debug("BR: progr:"+dto.getProgressivoBrRc() + ", data install: " + dto.getDataInstall());
			if(!progressivo.equals(dto.getProgressivoBrRc()))
			{
				log.debug("cambio progressivo");
				if(!listSost.isEmpty())
				{
					log.debug("aggiungo br sostituite "+listSost.size());
					br.addNewSezBRsostituite();
					br.getSezBRsostituite().getRowBRsostList().addAll(listSost);
				}
				listGt.add(br);
				progressivo = dto.getProgressivoBrRc();
				listSost= new ArrayList<RowBRsost>();
				numInProgr = 1;//riparto dal primo
			}
//			boolean isGtControllato = isGtControllato(compGtImpiantoDett, ConvertUtil.convertToBigDecimal(br.getL42NumGT()));
			// Beppe
			boolean isGtControllato = false;
			if(numInProgr++ == 1)
			{
				log.debug("BR principale");
				br = mapToRowBR(dto);
				// Beppe
				isGtControllato = isGtControllato(compGtImpiantoDett, ConvertUtil.convertToBigDecimal(br.getL42NumGT()));
				
				br.xsetFlagAnnullaDismissione(getXmlBoolean(!isGtControllato));
			}
			else
			{
				log.debug("BR sost");
				//sost
				listSost.add(mapToRowBRSost(dto, isGtControllato));
			}
		}
		if(!listSost.isEmpty())
		{
			log.debug("aggiungo br sostituite "+listSost.size());
			br.addNewSezBRsostituite();
			br.getSezBRsostituite().getRowBRsostList().addAll(listSost);
		}
		listGt.add(br);
		sezBR.getRowBRList().addAll(listGt);
		log.debug("mapToSchedaBR: END");
	}
	
	private static boolean isGtControllato(List<SigitVSk4GtDto> gtList, BigDecimal progressivo)
	{
		for (SigitVSk4GtDto gt : gtList) {
			if(gt.getProgressivo().equals(progressivo))
				return GenericUtil.isNotNullOrEmpty(gt.getDataControllo());
		}
		return false;
	}
	

	public static void mapToSchedaRC(List<SigitTCompBrRcDto> listRc, DatiSchedaRC schedaRc, List<SigitVSk4GtDto> compGtImpiantoDett)
	{
		if(listRc == null) return;
		log.debug("mapToSchedaRC: START");
		SezRC sezRC = schedaRc.addNewSezRC();
		BigDecimal progressivo = null;
		List<RowRC> listGt = new ArrayList<RowRC>();
		RowRC rc = null;
		List<RowRCsost> listSost = new ArrayList<RowRCsost>();
		if(listRc!=null && listRc.size()>0)
			progressivo = listRc.get(0).getProgressivoBrRc();
		log.debug("mapping scheda RC");
		int numInProgr = 1;
		for (int i=0; i<listRc.size();i++) {
			log.debug("i="+i);
			SigitTCompBrRcDto dto = listRc.get(i);
			log.debug("RC: progr:"+dto.getProgressivoBrRc() + ", data install: " + dto.getDataInstall());
			if(!progressivo.equals(dto.getProgressivoBrRc()))
			{
				log.debug("cambio progressivo");
				if(!listSost.isEmpty())
				{
					log.debug("aggiungo br sostituite "+listSost.size());
					rc.addNewSezRCsostituite();
					rc.getSezRCsostituite().getRowRCsostList().addAll(listSost);
				}
				listGt.add(rc);
				progressivo = dto.getProgressivoBrRc();
				listSost= new ArrayList<RowRCsost>();
				numInProgr = 1;
			}
//			boolean isGtControllato = isGtControllato(compGtImpiantoDett, ConvertUtil.convertToBigDecimal(rc.getL43NumGT()));
			// Beppe
			boolean isGtControllato = false;
			if(numInProgr++ == 1)
			{
				log.debug("RC principale");
				rc = mapToRowRC(dto);
				// Beppe
				isGtControllato = isGtControllato(compGtImpiantoDett, ConvertUtil.convertToBigDecimal(rc.getL43NumGT()));
				rc.xsetFlagAnnullaDismissione(getXmlBoolean(!isGtControllato));
			}
			else
			{
				log.debug("RC sost");
				listSost.add(mapToRowRCSost(dto, isGtControllato));
			}
		}
		if(!listSost.isEmpty())
		{
			log.debug("aggiungo br sostituite "+listSost.size());
			rc.addNewSezRCsostituite();
			rc.getSezRCsostituite().getRowRCsostList().addAll(listSost);
		}
		listGt.add(rc);
		sezRC.getRowRCList().addAll(listGt);
		log.debug("mapToSchedaRC: END");
	}
	
	public static void mapToSchedaGF(List<SigitVSk4GfDto> comp4, DatiSchedaGF schedaGf)
	{
		if(comp4 == null) return;
		log.debug("mapToSchedaGF: START");
		SezGF sezGF = schedaGf.addNewSezGF();
		BigDecimal progressivo = null;
		Date lastDataInstall = null;
		//Date maxDataControllo = null;
		List<RowGF> listGf = new ArrayList<RowGF>();
		RowGF gf = null;
		List<RowGFsost> listSost = new ArrayList<RowGFsost>();
		if(comp4.size()>0)
			progressivo = comp4.get(0).getProgressivo();
		log.debug("mapping scheda GF");
		int numInProgr = 1;
		for (int i=0; i<comp4.size();i++) {
			log.debug("i="+i);
			SigitVSk4GfDto dto = comp4.get(i);
			log.debug("GF: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
			
			/*
			if(maxDataControllo==null)
				maxDataControllo = dto.getDataControllo();
			if(maxDataControllo!=null && dto.getDataControllo()!=null && dto.getDataControllo().after(maxDataControllo))
			{
				maxDataControllo = dto.getDataControllo();
			}
			*/
			
			if(progressivo.equals(dto.getProgressivo()) && lastDataInstall!=null && lastDataInstall.compareTo(dto.getDataInstall())==0)
			{
				log.debug("duplicato, scartato");
				continue;
			}
			if(!progressivo.equals(dto.getProgressivo()))
			{
				log.debug("cambio progressivo");
				if(!listSost.isEmpty())
				{
					log.debug("aggiungo gf sostituite "+listSost.size());
					gf.addNewSezGFsostituite();
					gf.getSezGFsostituite().getRowGFsostList().addAll(listSost);
				}
				listGf.add(gf);
				progressivo = dto.getProgressivo();
				listSost= new ArrayList<RowGFsost>();
				numInProgr = 1;
			}
			
			if(numInProgr++ == 1)
			{
				log.debug("GF principale");
				gf = mapToRowGF(dto);
				
				/*
				//aggiungere flagAnnullaDismissione
				if(dto.getDataControllo()!=null && dto.getDataDismiss()!=null && dto.getDataDismiss().before(dto.getDataControllo()))
				{
//					il flagAnnullaDismissione sara' uguale a 0 se non posso annullare la dismissione e 1 se invece posso annullarla
					gf.xsetFlagAnnullaDismissione(getXmlBoolean(true));
				}
				else
					gf.xsetFlagAnnullaDismissione(getXmlBoolean(false));
				//il flagGiaPresenteDB indica se la componente puo' essere modificata (sono modificabili tutte le componenti non controllate)
				if(dto.getDataControllo()!=null && dto.getDataControllo().compareTo(dto.getDataInstall())>=0)
					gf.setFlagGiaPresenteDB(true);
				else
					gf.setFlagGiaPresenteDB(false);
				*/
			}
			else
			{
				log.debug("GF sost");
				listSost.add(mapToRowGFSost(dto));
			}
			lastDataInstall = dto.getDataInstall();
		}
		if(!listSost.isEmpty())
		{
			log.debug("aggiungo gf sostituite "+listSost.size());
			gf.addNewSezGFsostituite();
			gf.getSezGFsostituite().getRowGFsostList().addAll(listSost);
		}
		listGf.add(gf);
		//schedaGf.setL44DataControllo(ConvertUtil.convertDateToXmlCalendar(maxDataControllo));
		sezGF.getRowGFList().addAll(listGf);
		log.debug("mapToSchedaGF: END");
	}

	public static void mapToSchedaSC(List<SigitVSk4ScDto> compScImpianto, DatiSchedaSC schedaSc)
	{
		if(compScImpianto == null) return;
		log.debug("mapToSchedaSC: START");
		SezSC sezSC = schedaSc.addNewSezSC();
		BigDecimal progressivo = null;
		Date lastDataInstall = null;
		//Date maxDataControllo = null;
		List<RowSC> listSc = new ArrayList<RowSC>();
		RowSC sc = null;
		List<RowSCsost> listSost = new ArrayList<RowSCsost>();
		if(compScImpianto.size()>0)
			progressivo = compScImpianto.get(0).getProgressivo();
		log.debug("mapping scheda SC");
		int numInProgr = 1;
		for (int i=0; i<compScImpianto.size();i++) {
			log.debug("i="+i+", inProgor="+numInProgr);
			SigitVSk4ScDto dto = compScImpianto.get(i);
			log.debug("SC: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
			
			/*
			if(maxDataControllo==null)
				maxDataControllo = dto.getDataControllo();
			if(maxDataControllo!=null && dto.getDataControllo()!=null && dto.getDataControllo().after(maxDataControllo))
			{
				maxDataControllo = dto.getDataControllo();
			}
			*/
			
			if(progressivo.equals(dto.getProgressivo()) && lastDataInstall!=null && lastDataInstall.compareTo(dto.getDataInstall())==0)
			{
				log.debug("duplicato, scartato");
				continue;
			}
			if(!progressivo.equals(dto.getProgressivo()))
			{
				log.debug("cambio progressivo");
				if(!listSost.isEmpty())
				{
					log.debug("aggiungo sc sostituite "+listSost.size());
					sc.addNewSezSCsostituite();
					sc.getSezSCsostituite().getRowSCsostList().addAll(listSost);
				}
				listSc.add(sc);
				progressivo = dto.getProgressivo();
				listSost= new ArrayList<RowSCsost>();
				numInProgr = 1;
			}
			if(numInProgr++ == 1)
			{
				log.debug("SC principale");
				sc = mapToRowSC(dto);
				
				/*
				//aggiungere flagAnnullaDismissione
				if(dto.getDataControllo()!=null && dto.getDataDismiss()!=null && dto.getDataDismiss().before(dto.getDataControllo()))
				{
//					il flagAnnullaDismissione sara' uguale a 0 se non posso annullare la dismissione e 1 se invece posso annullarla
					sc.xsetFlagAnnullaDismissione(getXmlBoolean(true));
				}
				else
					sc.xsetFlagAnnullaDismissione(getXmlBoolean(false));
				//il flagGiaPresenteDB indica se la componente puo' essere modificata (sono modificabili tutte le componenti non controllate)
				if(dto.getDataControllo()!=null && dto.getDataControllo().compareTo(dto.getDataInstall())>=0)
					sc.setFlagGiaPresenteDB(true);
				else
					sc.setFlagGiaPresenteDB(false);
				*/
			}
			else
			{
				log.debug("SC sost");
				//sost
				listSost.add(mapToRowSCSost(dto));
			}
			lastDataInstall = dto.getDataInstall();
		}
		if(!listSost.isEmpty())
		{
			log.debug("aggiungo sc sostituite "+listSost.size());
			sc.addNewSezSCsostituite();
			sc.getSezSCsostituite().getRowSCsostList().addAll(listSost);
		}
		listSc.add(sc);
		//schedaSc.setL45DataControllo(ConvertUtil.convertDateToXmlCalendar(maxDataControllo));
		sezSC.getRowSCList().addAll(listSc);
		log.debug("mapToSchedaSC: END");
	}

	public static void mapToSchedaCG(List<SigitVSk4CgDto> compCgImpianto, DatiSchedaCG schedaCg)
	{
		if(compCgImpianto == null) return;
		log.debug("mapToSchedaCG: START");
		SezCG sezCg = schedaCg.addNewSezCG();
		BigDecimal progressivo = null;
		Date lastDataInstall = null;
		//Date maxDataControllo = null;
		List<RowCG> listSc = new ArrayList<RowCG>();
		RowCG cg = null;
		List<RowCGsost> listSost = new ArrayList<RowCGsost>();
		if(compCgImpianto.size()>0)
			progressivo = compCgImpianto.get(0).getProgressivo();
		log.debug("mapping scheda CG");
		int numInProgr = 1;
		for (int i=0; i<compCgImpianto.size();i++) {
			log.debug("i="+i+", inProgr="+numInProgr);
			SigitVSk4CgDto dto = compCgImpianto.get(i);
			log.debug("CG: progr:" + dto.getProgressivo() + ", data install: " + dto.getDataInstall());
			
			/*
			if(maxDataControllo==null)
				maxDataControllo = dto.getDataControllo();
			if(maxDataControllo!=null && dto.getDataControllo()!=null && dto.getDataControllo().after(maxDataControllo))
			{
				maxDataControllo = dto.getDataControllo();
			}
			*/

			if(progressivo.equals(dto.getProgressivo()) && lastDataInstall!=null && lastDataInstall.compareTo(dto.getDataInstall())==0)
			{
				log.debug("duplicato, scartato");
				continue;
			}
			if(!progressivo.equals(dto.getProgressivo()))
			{
				log.debug("cambio progressivo");
				if(!listSost.isEmpty())
				{
					log.debug("aggiungo cg sostituite "+listSost.size());
					cg.addNewSezCGsostituite();
					cg.getSezCGsostituite().getRowCGsostList().addAll(listSost);
				}
				listSc.add(cg);
				progressivo = dto.getProgressivo();
				listSost= new ArrayList<RowCGsost>();
				numInProgr = 1;
			}
			if(numInProgr++ == 1)
			{
				log.debug("CG principale");
				cg = mapToRowCG(dto);
				
				/*
				//aggiungere flagAnnullaDismissione
				if(dto.getDataControllo()!=null && dto.getDataDismiss()!=null && dto.getDataDismiss().before(dto.getDataControllo()))
				{
//					il flagAnnullaDismissione sara' uguale a 0 se non posso annullare la dismissione e 1 se invece posso annullarla
					cg.xsetFlagAnnullaDismissione(getXmlBoolean(true));
				}
				else
					cg.xsetFlagAnnullaDismissione(getXmlBoolean(false));

				//il flagGiaPresenteDB indica se la componente puo' essere modificata (sono modificabili tutte le componenti non controllate)
				if(dto.getDataControllo()!=null && dto.getDataControllo().compareTo(dto.getDataInstall())>=0)
					cg.setFlagGiaPresenteDB(true);
				else
					cg.setFlagGiaPresenteDB(false);
				*/
			}
			else
			{
				log.debug("CG sost");
				//sost
				listSost.add(mapToRowCGSost(dto));
			}
			lastDataInstall = dto.getDataInstall();
		}
		if(!listSost.isEmpty())
		{
			log.debug("aggiungo cg sostituite "+listSost.size());
			cg.addNewSezCGsostituite();
			cg.getSezCGsostituite().getRowCGsostList().addAll(listSost);
		}
		listSc.add(cg);
		//schedaCg.setL46DataControllo(ConvertUtil.convertDateToXmlCalendar(maxDataControllo));
		sezCg.getRowCGList().addAll(listSc);
		log.debug("mapToSchedaCG: END");
	}

	public static void mapToSchedaCS(List<SigitVCompCsDto> compCsImpianto, DatiSchedaCS schedaCs)
	{
		if(compCsImpianto == null) return;
		log.debug("mapToSchedaCS: START");
		SezCS sezCs = schedaCs.addNewSezCS();
		BigDecimal progressivo = null;
		List<RowCS> listSc = new ArrayList<RowCS>();
		RowCS sc = null;
		List<RowCSvar> listVar = new ArrayList<RowCSvar>();
		if(compCsImpianto.size()>0)
			progressivo = compCsImpianto.get(0).getProgressivo();
		log.debug("mapping scheda CS");
		int numInProgr = 1;
		for (int i=0; i<compCsImpianto.size();i++) {
			log.debug("i="+i+", inProgr="+numInProgr);
			SigitVCompCsDto dto = compCsImpianto.get(i);
			log.debug("CS: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
			if(!progressivo.equals(dto.getProgressivo()))
			{
				log.debug("cambio progressivo");
				if(!listVar.isEmpty())
				{
					log.debug("aggiungo cs sostituite "+listVar.size());
					sc.addNewSezCSvariate();
					sc.getSezCSvariate().getRowCSvarList().addAll(listVar);
				}
				listSc.add(sc);
				progressivo = dto.getProgressivo();
				listVar= new ArrayList<RowCSvar>();
				numInProgr = 1;
			}
			if(numInProgr++ == 1)
			{
				log.debug("CS principale");
				sc = mapToRowCS(dto);
			}
			else
			{
				log.debug("CS sost");
				//sost
				listVar.add(mapToRowCSVar(dto));
			}
		}
		if(!listVar.isEmpty())
		{
			log.debug("aggiungo cs sostituite "+listVar.size());
			sc.addNewSezCSvariate();
			sc.getSezCSvariate().getRowCSvarList().addAll(listVar);
		}
		listSc.add(sc);
		sezCs.getRowCSList().addAll(listSc);
		log.debug("mapToSchedaCS: END");
	}

	public static void mapToSchedaAG(List<SigitVCompAgDto> compAgImpianto, DatiSchedaAG schedaAg)
	{
		if(compAgImpianto == null) return;
		log.debug("mapToSchedaAG: START");
		SezAG sezCs = schedaAg.addNewSezAG();
		BigDecimal progressivo = null;
		List<RowAG> listAg = new ArrayList<RowAG>();
		RowAG ag = null;
		List<RowAGsost> listSost = new ArrayList<RowAGsost>();
		if(compAgImpianto.size()>0)
			progressivo = compAgImpianto.get(0).getProgressivo();
		log.debug("mapping scheda AG");
		int numInProgr = 1;
		for (int i=0; i<compAgImpianto.size();i++) {
			log.debug("i="+i+", inProgr="+numInProgr);
			SigitVCompAgDto dto = compAgImpianto.get(i);
			log.debug("AG: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
			if(!progressivo.equals(dto.getProgressivo()))
			{
				log.debug("cambio progressivo");
				if(!listSost.isEmpty())
				{
					log.debug("aggiungo AG sostituite "+listSost.size());
					ag.addNewSezAGsostituite();
					ag.getSezAGsostituite().getRowAGsostList().addAll(listSost);
				}
				listAg.add(ag);
				progressivo = dto.getProgressivo();
				listSost= new ArrayList<RowAGsost>();
				numInProgr = 1;
			}
			if(numInProgr++ == 1)
			{
				log.debug("AG principale");
				ag = mapToRowAG(dto);
			}
			else
			{
				log.debug("AG sost");
				//sost
				listSost.add(mapToRowAGSost(dto));
			}
		}
		if(!listSost.isEmpty())
		{
			log.debug("aggiungo cAGs sostituite "+listSost.size());
			ag.addNewSezAGsostituite();
			ag.getSezAGsostituite().getRowAGsostList().addAll(listSost);
		}
		listAg.add(ag);
		sezCs.getRowAGList().addAll(listAg);
		log.debug("mapToSchedaAG: END");
	}
	
	public static RowGT mapToRowGT(SigitVSk4GtDto dto)
	{
		RowGT gt = RowGT.Factory.newInstance();
		gt.setL41NumGT(ConvertUtil.convertToBigInteger(dto.getProgressivo()));
		gt.setL41DataControllo(ConvertUtil.convertToXmlCalendar(dto.getDataControllo()));
		gt.setL41DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		gt.setL41DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		gt.setL41Matricola(dto.getMatricola());
		gt.setL41Combustibile(ConvertUtil.convertToString(dto.getIdCombustibile()));
		gt.setL41Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		gt.setL41PotTermUtileMax(dto.getPotenzaTermicaKw());
		gt.setL41Modello(dto.getModello());
		gt.setL41FluidoTermoVett(ConvertUtil.convertToString(dto.getFkFluido()));
		gt.setL41NumAnalisiFumi(ConvertUtil.convertToBigInteger(dto.getNModuli()));
		if(Constants.ID_DETT_GT_GRUPPO_TERM_SING.equals(ConvertUtil.convertToString(dto.getFkDettaglioGt())))
			gt.xsetL41GTsingolo(getXmlBoolean(true));
		if(Constants.ID_DETT_GT_GRUPPO_TERM_MOD.equals(ConvertUtil.convertToString(dto.getFkDettaglioGt())))
			gt.xsetL41GTModulare(getXmlBoolean(true));
		if(Constants.ID_DETT_GT_TUBO_RADIANTE.equals(ConvertUtil.convertToString(dto.getFkDettaglioGt())))
			gt.xsetL41TupoRadiante(getXmlBoolean(true));
		if(Constants.ID_DETT_GT_GEN_ARIA_CALDA.equals(ConvertUtil.convertToString(dto.getFkDettaglioGt())))
			gt.xsetL41GenAriaCalda(getXmlBoolean(true));
		if(!Constants.ID_DETT_GT_GRUPPO_TERM_MOD.equals(ConvertUtil.convertToString(dto.getFkDettaglioGt())))
			gt.setL41NumAnalisiFumi(null);
		gt.setL41PercRendimTermUtileMax(dto.getRendimentoPerc());
//		il flagDismissione sara' uguale ad 1 se il componente e' stato dismesso e uguale a 0 se non l'ho dismesso.
		gt.xsetFlagDismissione(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgDismissione())));
		return gt;
	}

	public static RowGTsost mapToRowGTSost(SigitVSk4GtDto dto)
	{
		RowGTsost gt = RowGTsost.Factory.newInstance();
		gt.setL41DataControllo(ConvertUtil.convertToXmlCalendar(dto.getDataControllo()));
		gt.setL41DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		gt.setL41DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		gt.setL41Matricola(dto.getMatricola());
		gt.setL41Combustibile(ConvertUtil.convertToString(dto.getIdCombustibile()));
		gt.setL41Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		gt.setL41PotTermUtileMax(dto.getPotenzaTermicaKw());
		gt.setL41Modello(dto.getModello());
		gt.setL41FluidoTermoVett(ConvertUtil.convertToString(dto.getFkFluido()));
		gt.setL41NumAnalisiFumi(ConvertUtil.convertToBigInteger(dto.getNModuli()));
		if(Constants.ID_DETT_GT_GRUPPO_TERM_SING.equals(ConvertUtil.convertToString(dto.getFkDettaglioGt())))
			gt.xsetL41GTsingolo(getXmlBoolean(true));
		if(Constants.ID_DETT_GT_GRUPPO_TERM_MOD.equals(ConvertUtil.convertToString(dto.getFkDettaglioGt())))
			gt.xsetL41GTModulare(getXmlBoolean(true));
		if(Constants.ID_DETT_GT_TUBO_RADIANTE.equals(ConvertUtil.convertToString(dto.getFkDettaglioGt())))
			gt.xsetL41TupoRadiante(getXmlBoolean(true));
		if(Constants.ID_DETT_GT_GEN_ARIA_CALDA.equals(ConvertUtil.convertToString(dto.getFkDettaglioGt())))
			gt.xsetL41GenAriaCalda(getXmlBoolean(true));
		if(!Constants.ID_DETT_GT_GRUPPO_TERM_MOD.equals(ConvertUtil.convertToString(dto.getFkDettaglioGt())))
			gt.setL41NumAnalisiFumi(null);
		gt.setL41PercRendimTermUtileMax(dto.getRendimentoPerc());
		//il flagRollback deve essere a TRUE se non posso effettuare il rollback  e a FALSE se invece posso farlo.
		// Beppe - Questo campo nella nuova gestione non dovrebbe piu' servire
		gt.setFlagRollBack41(GenericUtil.isNotNullOrEmpty(dto.getDataControllo()));
		return gt;
	}

	public static RowBR mapToRowBR(SigitTCompBrRcDto dto)
	{
		RowBR br = RowBR.Factory.newInstance();
		br.setL42NumBR(ConvertUtil.convertToBigInteger(dto.getProgressivoBrRc()));
		br.setL42NumGT(ConvertUtil.convertToBigInteger(dto.getFkProgressivo()));
		br.setL42DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		br.setL42DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		br.setL42Matricola(dto.getMatricola());
		br.setL42Modello(dto.getModello());
		br.setL42Combustibile(ConvertUtil.convertToString(dto.getFkCombustibile()));
		br.setL42Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		br.setL42PortataTermMaxNom(dto.getPotTermMaxKw());
		br.setL42PortataTermMinNom(dto.getPotTermMinKw());
		br.setL42Tipologia(dto.getTipologia());
		br.xsetFlagDismissione(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgDismissione())));
		return br;
	}
	
	public static RowBRsost mapToRowBRSost(SigitTCompBrRcDto dto, boolean isGtControllato)
	{
		RowBRsost br = RowBRsost.Factory.newInstance();
		br.setL42NumGT(ConvertUtil.convertToBigInteger(dto.getFkProgressivo()));
		br.setL42DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		br.setL42DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		br.setL42Matricola(dto.getMatricola());
		br.setL42Modello(dto.getModello());
		br.setL42Combustibile(ConvertUtil.convertToString(dto.getFkCombustibile()));
		br.setL42Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		br.setL42PortataTermMaxNom(dto.getPotTermMaxKw());
		br.setL42PortataTermMinNom(dto.getPotTermMinKw());
		br.setL42Tipologia(dto.getTipologia());
		br.setFlagRollBack42(!isGtControllato);
		return br;
	}

	public static RowRC mapToRowRC(SigitTCompBrRcDto dto)
	{
		RowRC rc = RowRC.Factory.newInstance();
		rc.setL43NumRC(ConvertUtil.convertToBigInteger(dto.getProgressivoBrRc()));
		rc.setL43NumGT(ConvertUtil.convertToBigInteger(dto.getFkProgressivo()));
		rc.setL43DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		rc.setL43DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		rc.setL43Matricola(dto.getMatricola());
		rc.setL43Modello(dto.getModello());
		rc.setL43Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		rc.setL43PotTermNomTot(dto.getPotTermMaxKw());
		rc.xsetFlagDismissione(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgDismissione())));
		return rc;
	}
	
	public static RowRCsost mapToRowRCSost(SigitTCompBrRcDto dto, boolean isGtControllato)
	{
		RowRCsost rc = RowRCsost.Factory.newInstance();
		rc.setL43NumGT(ConvertUtil.convertToBigInteger(dto.getFkProgressivo()));
		rc.setL43DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		rc.setL43DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		rc.setL43Matricola(dto.getMatricola());
		rc.setL43Modello(dto.getModello());
		rc.setL43Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		rc.setL43PotTermNomTot(dto.getPotTermMaxKw());
//		gt.setFlagRollBack41(GenericUtil.isNotNullOrEmpty(dto.getIdDettTipo1()));
		rc.setFlagRollBack43(!isGtControllato);
		return rc;
	}
	
	public static RowGF mapToRowGF(SigitVSk4GfDto dto)
	{
		RowGF gf = RowGF.Factory.newInstance();
		gf.setL44NumGF(ConvertUtil.convertToBigInteger(dto.getProgressivo()));
		gf.setL44DataControllo(ConvertUtil.convertToXmlCalendar(dto.getDataControllo()));
		gf.setL44DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		gf.setL44DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		gf.setL44Matricola(dto.getMatricola());
		gf.setL44Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		gf.setL44Modello(dto.getModello());
		gf.setL44TipoCombustibile(ConvertUtil.convertToString(dto.getIdCombustibile()));
		
		if(Constants.FLG_ACQUA.equals(dto.getFlgSorgenteExt()))
			gf.xsetL44FlagSorgACQUA(getXmlBoolean(true));
		if(Constants.FLG_ARIA.equals(dto.getFlgSorgenteExt()))
			gf.xsetL44FlagSorgARIA(getXmlBoolean(true));
		
		if(Constants.ID_DETT_GF_ASS_REC_CALORE.equals(ConvertUtil.convertToString(dto.getFkDettaglioGf())))
			gf.xsetL44FlagRecupCalore(getXmlBoolean(true));
		if(Constants.ID_DETT_GF_ASS_FIAMM_COMB.equals(ConvertUtil.convertToString(dto.getFkDettaglioGf())))
			gf.xsetL44FlagFiammaDiretta(getXmlBoolean(true));
		if(Constants.ID_DETT_GF_CICLO_COMPRESS.equals(ConvertUtil.convertToString(dto.getFkDettaglioGf())))
			gf.xsetL44FlagCicloCompress(getXmlBoolean(true));
		
		if(Constants.FLG_ACQUA.equals(dto.getFlgFluidoUtenze()))
			gf.xsetL44FlagFluidoACQUA(getXmlBoolean(true));
		if(Constants.FLG_ARIA.equals(dto.getFlgFluidoUtenze()))
			gf.xsetL44FlagFluidoARIA(getXmlBoolean(true));
		
		gf.setL44FluidoFrigo(dto.getFluidoFrigorigeno());
		gf.setL44NumCircuiti(ConvertUtil.convertToBigInteger(dto.getNCircuiti()));
		gf.setL44PotFrigoAssorb(dto.getRaffPotenzaAss());
		gf.setL44PotFrigoNom(dto.getRaffPotenzaKw());
		gf.setL44PotTermAssorb(dto.getRiscPotenzaAssKw());
		gf.setL44PotTermNom(dto.getRiscPotenzaKw());
		gf.setL44Raffrescam(ConvertUtil.convertToBigDecimal(dto.getRaffrescamentoEer()));
		gf.setL44Riscaldam(ConvertUtil.convertToBigDecimal(dto.getRiscaldamentoCop()));
		//aggiungere info allegato
		gf.xsetFlagDismissione(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgDismissione())));
		return gf;
	}

	public static RowGFsost mapToRowGFSost(SigitVSk4GfDto dto)
	{
		RowGFsost gf = RowGFsost.Factory.newInstance();
		gf.setL44DataControllo(ConvertUtil.convertToXmlCalendar(dto.getDataControllo()));
		gf.setL44DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		gf.setL44DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		gf.setL44Matricola(dto.getMatricola());
		gf.setL44Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		gf.setL44Modello(dto.getModello());
		gf.setL44TipoCombustibile(ConvertUtil.convertToString(dto.getIdCombustibile()));
		
		if(Constants.FLG_ACQUA.equals(dto.getFlgSorgenteExt()))
			gf.xsetL44FlagSorgACQUA(getXmlBoolean(true));
		if(Constants.FLG_ARIA.equals(dto.getFlgSorgenteExt()))
			gf.xsetL44FlagSorgARIA(getXmlBoolean(true));
		
		if(Constants.ID_DETT_GF_ASS_REC_CALORE.equals(ConvertUtil.convertToString(dto.getFkDettaglioGf())))
			gf.xsetL44FlagRecupCalore(getXmlBoolean(true));
		if(Constants.ID_DETT_GF_ASS_FIAMM_COMB.equals(ConvertUtil.convertToString(dto.getFkDettaglioGf())))
			gf.xsetL44FlagFiammaDiretta(getXmlBoolean(true));
		if(Constants.ID_DETT_GF_CICLO_COMPRESS.equals(ConvertUtil.convertToString(dto.getFkDettaglioGf())))
			gf.xsetL44FlagCicloCompress(getXmlBoolean(true));
		
		if(Constants.FLG_ACQUA.equals(dto.getFlgFluidoUtenze()))
			gf.xsetL44FlagFluidoACQUA(getXmlBoolean(true));
		if(Constants.FLG_ARIA.equals(dto.getFlgFluidoUtenze()))
			gf.xsetL44FlagFluidoARIA(getXmlBoolean(true));
		
		gf.setL44FluidoFrigo(dto.getFluidoFrigorigeno());
		gf.setL44NumCircuiti(ConvertUtil.convertToBigInteger(dto.getNCircuiti()));
		gf.setL44PotFrigoAssorb(dto.getRaffPotenzaAss());
		gf.setL44PotFrigoNom(dto.getRaffPotenzaKw());
		gf.setL44PotTermAssorb(dto.getRiscPotenzaAssKw());
		gf.setL44PotTermNom(dto.getRiscPotenzaKw());
		gf.setL44Raffrescam(ConvertUtil.convertToBigDecimal(dto.getRaffrescamentoEer()));
		gf.setL44Riscaldam(ConvertUtil.convertToBigDecimal(dto.getRiscaldamentoCop()));
		//aggiungere info allegato
		gf.setFlagRollBack44(GenericUtil.isNullOrEmpty(dto.getDataControllo()));
		return gf;
	}

	public static RowSC mapToRowSC(SigitVSk4ScDto dto)
	{
		RowSC sc = RowSC.Factory.newInstance();
		sc.setL45NumSC(ConvertUtil.convertToBigInteger(dto.getProgressivo()));
		sc.setL45DataControllo(ConvertUtil.convertToXmlCalendar(dto.getDataControllo()));
		sc.setL45DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		sc.setL45DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		sc.setL45Matricola(dto.getMatricola());
		sc.setL45Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		sc.setL45Modello(dto.getModello());
		sc.setL45PotTermNomTot(dto.getPotenzaTermicaKw());
		//info allegato
		sc.xsetFlagDismissione(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgDismissione())));
		return sc;
	}
	
	public static RowSCsost mapToRowSCSost(SigitVSk4ScDto dto)
	{
		RowSCsost sc = RowSCsost.Factory.newInstance();
		sc.setL45DataControllo(ConvertUtil.convertToXmlCalendar(dto.getDataControllo()));
		sc.setL45DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		sc.setL45DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		sc.setL45Matricola(dto.getMatricola());
		sc.setL45Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		sc.setL45Modello(dto.getModello());
		sc.setL45PotTermNomTot(dto.getPotenzaTermicaKw());
		//info allegato
		sc.setFlagRollBack45(GenericUtil.isNullOrEmpty(dto.getDataControllo()));
		return sc;
	}
	public static RowCG mapToRowCG(SigitVSk4CgDto dto)
	{
		RowCG cg = RowCG.Factory.newInstance();
		cg.setL46NumCG(ConvertUtil.convertToBigInteger(dto.getProgressivo()));
		cg.setL46DataControllo(ConvertUtil.convertToXmlCalendar(dto.getDataControllo()));
		cg.setL46DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		cg.setL46DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		cg.setL46Matricola(dto.getMatricola());
		cg.setL46Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		cg.setL46Modello(dto.getModello());
		cg.setL46PotTermNom(dto.getPotenzaTermicaKw());
		cg.setL46Combustibile(ConvertUtil.convertToString(dto.getIdCombustibile()));
		cg.setL46Tipologia(dto.getTipologia());
		cg.setL46PotElettrNom(dto.getPotenzaElettricaKw());
//		cg.setL46EmissioniMonossidoMAX(ConvertUtil.convertToBigInteger(dto.getCoMax()));
//		cg.setL46EmissioniMonossidoMIN(ConvertUtil.convertToBigInteger(dto.getCoMin()));
//		cg.setL46TempAcquaIngressoMAX(ConvertUtil.convertToBigInteger(dto.getTempH2oInMax()));
//		cg.setL46TempAcquaIngressoMIN(ConvertUtil.convertToBigInteger(dto.getTempH2oInMin()));
//		cg.setL46TempAcquaMotoreMAX(ConvertUtil.convertToBigInteger(dto.getTempH2oMotoreMax()));
//		cg.setL46TempAcquaMotoreMIN(ConvertUtil.convertToBigInteger(dto.getTempH2oMotoreMin()));
//		cg.setL46TempAcquaUscitaMAX(ConvertUtil.convertToBigInteger(dto.getTempH2oOutMax()));
//		cg.setL46TempAcquaUscitaMIN(ConvertUtil.convertToBigInteger(dto.getTempH2oOutMin()));
//		cg.setL46TempFumiMonteMAX(ConvertUtil.convertToBigInteger(dto.getTempFumiMonteMax()));
//		cg.setL46TempFumiMonteMIN(ConvertUtil.convertToBigInteger(dto.getTempFumiMonteMin()));
//		cg.setL46TempFumiValleMAX(ConvertUtil.convertToBigInteger(dto.getTempFumiValleMax()));
//		cg.setL46TempFumiValleMIN(ConvertUtil.convertToBigInteger(dto.getTempFumiValleMin()));
		// BEPPE
		cg.setL46EmissioniMonossidoMAX(dto.getCoMax());
		cg.setL46EmissioniMonossidoMIN(dto.getCoMin());
		cg.setL46TempAcquaIngressoMAX(dto.getTempH2oInMax());
		cg.setL46TempAcquaIngressoMIN(dto.getTempH2oInMin());
		cg.setL46TempAcquaMotoreMAX(dto.getTempH2oMotoreMax());
		cg.setL46TempAcquaMotoreMIN(dto.getTempH2oMotoreMin());
		cg.setL46TempAcquaUscitaMAX(dto.getTempH2oOutMax());
		cg.setL46TempAcquaUscitaMIN(dto.getTempH2oOutMin());
		cg.setL46TempFumiMonteMAX(dto.getTempFumiMonteMax());
		cg.setL46TempFumiMonteMIN(dto.getTempFumiMonteMin());
		cg.setL46TempFumiValleMAX(dto.getTempFumiValleMax());
		cg.setL46TempFumiValleMIN(dto.getTempFumiValleMin());

		//info allegato
		cg.xsetFlagDismissione(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgDismissione())));
		return cg;
	}
	
	public static RowCGsost mapToRowCGSost(SigitVSk4CgDto dto)
	{
		RowCGsost cg = RowCGsost.Factory.newInstance();
		cg.setL46DataControllo(ConvertUtil.convertToXmlCalendar(dto.getDataControllo()));
		cg.setL46DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		cg.setL46DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		cg.setL46Matricola(dto.getMatricola());
		cg.setL46Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		cg.setL46Modello(dto.getModello());
		cg.setL46PotTermNom(dto.getPotenzaTermicaKw());
		cg.setL46Combustibile(ConvertUtil.convertToString(dto.getIdCombustibile()));
		cg.setL46Tipologia(dto.getTipologia());
		cg.setL46PotElettrNom(dto.getPotenzaElettricaKw());
//		cg.setL46EmissioniMonossidoMAX(ConvertUtil.convertToBigInteger(dto.getCoMax()));
//		cg.setL46EmissioniMonossidoMIN(ConvertUtil.convertToBigInteger(dto.getCoMin()));
//		cg.setL46TempAcquaIngressoMAX(ConvertUtil.convertToBigInteger(dto.getTempH2oInMax()));
//		cg.setL46TempAcquaIngressoMIN(ConvertUtil.convertToBigInteger(dto.getTempH2oInMin()));
//		cg.setL46TempAcquaMotoreMAX(ConvertUtil.convertToBigInteger(dto.getTempH2oMotoreMax()));
//		cg.setL46TempAcquaMotoreMIN(ConvertUtil.convertToBigInteger(dto.getTempH2oMotoreMin()));
//		cg.setL46TempAcquaUscitaMAX(ConvertUtil.convertToBigInteger(dto.getTempH2oOutMax()));
//		cg.setL46TempAcquaUscitaMIN(ConvertUtil.convertToBigInteger(dto.getTempH2oOutMin()));
//		cg.setL46TempFumiMonteMAX(ConvertUtil.convertToBigInteger(dto.getTempFumiMonteMax()));
//		cg.setL46TempFumiMonteMIN(ConvertUtil.convertToBigInteger(dto.getTempFumiMonteMin()));
//		cg.setL46TempFumiValleMAX(ConvertUtil.convertToBigInteger(dto.getTempFumiValleMax()));
//		cg.setL46TempFumiValleMIN(ConvertUtil.convertToBigInteger(dto.getTempFumiValleMin()));
		// BEPPE
		cg.setL46EmissioniMonossidoMAX(dto.getCoMax());
		cg.setL46EmissioniMonossidoMIN(dto.getCoMin());
		cg.setL46TempAcquaIngressoMAX(dto.getTempH2oInMax());
		cg.setL46TempAcquaIngressoMIN(dto.getTempH2oInMin());
		cg.setL46TempAcquaMotoreMAX(dto.getTempH2oMotoreMax());
		cg.setL46TempAcquaMotoreMIN(dto.getTempH2oMotoreMin());
		cg.setL46TempAcquaUscitaMAX(dto.getTempH2oOutMax());
		cg.setL46TempAcquaUscitaMIN(dto.getTempH2oOutMin());
		cg.setL46TempFumiMonteMAX(dto.getTempFumiMonteMax());
		cg.setL46TempFumiMonteMIN(dto.getTempFumiMonteMin());
		cg.setL46TempFumiValleMAX(dto.getTempFumiValleMax());
		cg.setL46TempFumiValleMIN(dto.getTempFumiValleMin());

		//info allegato
		cg.setFlagRollBack46(GenericUtil.isNullOrEmpty(dto.getDataControllo()));
		return cg;
	}

	public static RowCS mapToRowCS(SigitVCompCsDto dto)
	{
		RowCS cs = RowCS.Factory.newInstance();
		cs.setL47NumCS(ConvertUtil.convertToBigInteger(dto.getProgressivo()));
		cs.setL47DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		cs.setL47DataDismissione(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		cs.setL47Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		cs.setL47Collettori(ConvertUtil.convertToString(dto.getNumCollettori()));
		cs.setL47SuperfTotApertura(dto.getSupApertura());
		cs.xsetFlagDismissione(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgDismissione())));
		return cs;
	}

	public static RowCSvar mapToRowCSVar(SigitVCompCsDto dto)
	{
		RowCSvar cs = RowCSvar.Factory.newInstance();
		cs.setL47DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		cs.setL47DataDismissione(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		cs.setL47Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		cs.setL47Collettori(ConvertUtil.convertToString(dto.getNumCollettori()));
		cs.setL47SuperfTotApertura(dto.getSupApertura());
//		cs.setFlagRollBack47(GenericUtil.isNotNullOrEmpty(dto.getIdDettTipo1()));
		return cs;
	}

	public static RowAG mapToRowAG(SigitVCompAgDto dto)
	{
		RowAG ag = RowAG.Factory.newInstance();
		ag.setL48NumAG(ConvertUtil.convertToBigInteger(dto.getProgressivo()));
		ag.setL48DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		ag.setL48DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		ag.setL48Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		ag.setL48Modello(dto.getModello());
		ag.setL48Matricola(dto.getMatricola());
		ag.setL48PotUtile(dto.getPotenzaTermicaKw());
		ag.setL48Tipologia(dto.getTipologia());
		ag.xsetFlagDismissione(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgDismissione())));
		return ag;
	}

	public static RowAGsost mapToRowAGSost(SigitVCompAgDto dto)
	{
		RowAGsost ag = RowAGsost.Factory.newInstance();
		ag.setL48DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		ag.setL48DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		ag.setL48Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		ag.setL48Modello(dto.getModello());
		ag.setL48Matricola(dto.getMatricola());
		ag.setL48PotUtile(dto.getPotenzaTermicaKw());
		ag.setL48Tipologia(dto.getTipologia());
		return ag;
	}
	
	public static DettaglioAllegato mapToDettaglioAllegato(SigitVRicercaAllegatiDto allegato) {
		DettaglioAllegato result = new DettaglioAllegato();
		result.setCodiceImpianto(ConvertUtil.convertToString(allegato.getCodiceImpianto())); //manca
		
		result.setDataControllo(ConvertUtil.convertToString(allegato.getDataControllo()));
		result.setOraArrivo(allegato.getFOraArrivo());
		result.setIdAllegato(ConvertUtil.convertToString(allegato.getIdAllegato()));
		result.setIdTipoAllegato(ConvertUtil.convertToString(allegato.getFkTipoDocumento()));
		result.setTipoAllegato(allegato.getDesTipoDocumento());
		result.setInterventoRaccomandato(ConvertUtil.convertToString(allegato.getFInterventoEntro()));
		result.setNumeroBollinoVerde(ConvertUtil.convertToString(allegato.getFkNumeroBollino()));
		result.setOsservazioni(allegato.getFOsservazioni());
		result.setPrescrizioni(allegato.getFPrescrizioni());
		result.setRaccomandazioni(allegato.getFRaccomandazioni());
		result.setRuoloFunzionale(allegato.getRuoloFunz());
//		result.setStatoAllegato(statoAllegato);
//		result.setTipoAllegato(tipoDocumento);
		result.setSiglaBollino(allegato.getFkSiglaBollino());
		
		result.setFlagControlloBozza(ConvertUtil.convertToInteger(allegato.getFlgControlloBozza()));
		
		//result.setIdImpiantoRuoloPfPg(ConvertUtil.convertToString(allegato.getFkImpRuoloPfpg()));
		
		if (GenericUtil.isNotNullOrEmpty(allegato.getIdPersonaGiuridica()))
		{
			result.setIdPersonaGiuridica(ConvertUtil.convertToInteger(allegato.getIdPersonaGiuridica()));
		}
//		else
//		{
//			result.setIdPersonaGiuridica(ConvertUtil.convertToInteger(allegato.getFkImpRuoloPfpg()));
//		}
		
		result.setIdStatoRapporto(ConvertUtil.convertToInteger(allegato.getFkStatoRapp()));
		
		result.setElencoCombustibili(allegato.getElencoCombustibili());
		result.setElencoApparecchiature(allegato.getElencoApparecchiature());
		
		return result;	
	}
	
	public static DettaglioAllegato mapToDettaglioAllegatoStorico(SigitVRicercaAllegatiStoricoDto allegato) {
		DettaglioAllegato result = new DettaglioAllegato();
		result.setCodiceImpianto(ConvertUtil.convertToString(allegato.getCodiceImpianto())); //manca
		
		result.setDataControllo(ConvertUtil.convertToString(allegato.getDataControllo()));
		result.setOraArrivo(allegato.getFOraArrivo());
		result.setIdAllegato(ConvertUtil.convertToString(allegato.getIdAllegato()));
		result.setIdTipoAllegato(ConvertUtil.convertToString(allegato.getFkTipoDocumento()));
		result.setTipoAllegato(allegato.getDesTipoDocumento());
		result.setInterventoRaccomandato(ConvertUtil.convertToString(allegato.getFInterventoEntro()));
		result.setNumeroBollinoVerde(ConvertUtil.convertToString(allegato.getFkNumeroBollino()));
		result.setOsservazioni(allegato.getFOsservazioni());
		result.setPrescrizioni(allegato.getFPrescrizioni());
		result.setRaccomandazioni(allegato.getFRaccomandazioni());
		result.setRuoloFunzionale(allegato.getRuoloFunz());
//		result.setStatoAllegato(statoAllegato);
//		result.setTipoAllegato(tipoDocumento);
		result.setSiglaBollino(allegato.getFkSiglaBollino());
		
		result.setFlagControlloBozza(ConvertUtil.convertToInteger(allegato.getFlgControlloBozza()));
		
		//result.setIdImpiantoRuoloPfPg(ConvertUtil.convertToString(allegato.getFkImpRuoloPfpg()));
		
		if (GenericUtil.isNotNullOrEmpty(allegato.getIdPersonaGiuridica()))
		{
			result.setIdPersonaGiuridica(ConvertUtil.convertToInteger(allegato.getIdPersonaGiuridica()));
		}
		else
		{
			result.setIdPersonaGiuridica(ConvertUtil.convertToInteger(allegato.getFkImpRuoloPfpg()));
		}
		
		result.setIdStatoRapporto(ConvertUtil.convertToInteger(allegato.getFkStatoRapp()));
		
		result.setElencoCombustibili(allegato.getElencoCombustibili());
		result.setElencoApparecchiature(allegato.getElencoApparecchiature());
		
		return result;
	}
	
	public static DettaglioAllegato mapToDettaglioAllegatoRee(SigitVRicercaAllegatiDto allegato, ArrayList<String> progressivi, String elencoApparecchiature) {
		DettaglioAllegato result = new DettaglioAllegato();
		
		result.setCodiceImpianto(ConvertUtil.convertToString(allegato.getCodiceImpianto()));
		result.setDataControllo(ConvertUtil.convertToString(allegato.getDataControllo()));
		result.setIdAllegato(ConvertUtil.convertToString(allegato.getIdAllegato()));
		result.setIdTipoAllegato(ConvertUtil.convertToString(allegato.getFkTipoDocumento()));
		result.setTipoAllegato(allegato.getDesTipoDocumento());
		result.setInterventoRaccomandato(ConvertUtil.convertToString(allegato.getFInterventoEntro()));
		result.setNumeroBollinoVerde(ConvertUtil.convertToString(allegato.getFkNumeroBollino()));
		result.setOsservazioni(allegato.getFOsservazioni());
		result.setPrescrizioni(allegato.getFPrescrizioni());
		result.setRaccomandazioni(allegato.getFRaccomandazioni());
		result.setRuoloFunzionale(allegato.getRuoloFunz());
//		result.setStatoAllegato(statoAllegato);
//		result.setTipoAllegato(tipoDocumento);
		result.setSiglaBollino(allegato.getFkSiglaBollino());
		result.setCodiceBollino(MapDto.costruisciCodiceBollino(result.getSiglaBollino(),
				ConvertUtil.convertToBigDecimal(result.getNumeroBollinoVerde())));

		result.setFlagControlloBozza(ConvertUtil.convertToInteger(allegato.getFlgControlloBozza()));
		
		//result.setIdImpiantoRuoloPfPg(ConvertUtil.convertToString(allegato.getFkImpRuoloPfpg()));
		
		if (GenericUtil.isNotNullOrEmpty(allegato.getIdPersonaGiuridica()))
		{
			result.setIdPersonaGiuridica(ConvertUtil.convertToInteger(allegato.getIdPersonaGiuridica()));
		}
//		else
//		{
//			result.setIdPersonaGiuridica(ConvertUtil.convertToInteger(allegato.getFkImpRuoloPfpg()));
//		}
		
		result.setIdStatoRapporto(ConvertUtil.convertToInteger(allegato.getFkStatoRapp()));
		
		result.setElencoCombustibili(allegato.getElencoCombustibili());

		result.setElencoApparecchiature(elencoApparecchiature);
		
		result.setIdApparecchiature(progressivi);
		result.setIdApparecchiatureFunz(progressivi);
		
		return result;
	}
	
	/*
	public static DettaglioManutenzione mapToDettaglioManutenzione(SigitVRicercaAllegatiDto allegato, ArrayList<String> progressivi, String elencoApparecchiature) {
		DettaglioManutenzione result = new DettaglioManutenzione();
		
		result.setCodiceImpianto(ConvertUtil.convertToString(allegato.getCodiceImpianto()));
		result.setDataManut(ConvertUtil.convertToString(allegato.getDataControllo()));
		result.setIdAllegato(ConvertUtil.convertToString(allegato.getIdAllegato()));
		result.setIdTipoManut(ConvertUtil.convertToInteger(allegato.getFkTipoDocumento()));
		result.setIdTipoIntervento(ConvertUtil.convertToInteger(allegato.getIdTipoManutenzione()));
		//result.setInterventoRaccomandato(ConvertUtil.convertToString(allegato.getFInterventoEntro()));
		//result.setNumeroBollinoVerde(ConvertUtil.convertToString(allegato.getFkNumeroBollino()));
		result.setOsservazioni(allegato.getFOsservazioni());
		result.setPrescrizioni(allegato.getFPrescrizioni());
		result.setRaccomandazioni(allegato.getFRaccomandazioni());
		//result.setRuoloFunzionale(allegato.getRuoloFunz());
//		result.setStatoAllegato(statoAllegato);
//		result.setTipoAllegato(tipoDocumento);
//		result.setSiglaBollino(allegato.getFkSiglaBollino());
//		result.setCodiceBollino(MapDto.costruisciCodiceBollino(result.getSiglaBollino(),
//				ConvertUtil.convertToBigDecimal(result.getNumeroBollinoVerde())));
//
//		result.setFlagControlloBozza(ConvertUtil.convertToInteger(allegato.getFlgControlloBozza()));
		
		//result.setIdImpiantoRuoloPfPg(ConvertUtil.convertToString(allegato.getFkImpRuoloPfpg()));
		
		if (GenericUtil.isNotNullOrEmpty(allegato.getIdPersonaGiuridica()))
		{
			result.setIdPersonaGiuridica(ConvertUtil.convertToInteger(allegato.getIdPersonaGiuridica()));
		}
		else
		{
			result.setIdPersonaGiuridica(ConvertUtil.convertToInteger(allegato.getFkImpRuoloPfpg()));
		}
		
		result.setIdStatoManut(ConvertUtil.convertToInteger(allegato.getFkStatoRapp()));
		
		//result.setElencoCombustibili(allegato.getElencoCombustibili());

		result.setElencoApparecchiature(elencoApparecchiature);
		
		result.setIdApparecchiature(progressivi);
		//result.setIdApparecchiatureFunz(progressivi);
		
		return result;
	}
	*/
	public static ElencoAllegati mapToElencoAllegati(SigitVRicercaAllegatiDto allegato) {
		ElencoAllegati elencoAllegati = new ElencoAllegati();
		
		elencoAllegati.setId(ConvertUtil.convertToInteger(allegato.getIdAllegato()));
		
		if(allegato.getCodiceImpianto()!=null)
			elencoAllegati.setCodiceImpianto(allegato.getCodiceImpianto().toString());
		
		if(GenericUtil.isNotNullOrEmpty(allegato.getComuneImpianto()))
		{
			String comune = allegato.getComuneImpianto();
			if(GenericUtil.isNotNullOrEmpty(allegato.getSiglaProvImpianto()))
				comune = comune +" ("+allegato.getSiglaProvImpianto()+")";
			
			elencoAllegati.setComune(comune);
		}
		
		if(GenericUtil.isNotNullOrEmpty(allegato.getIndirizzoUnitaImmob())){
			String indirizzo = allegato.getIndirizzoUnitaImmob();
			if(GenericUtil.isNotNullOrEmpty(allegato.getCivicoUnitaImmob()))
					indirizzo = indirizzo + ", "+allegato.getCivicoUnitaImmob();
			
			elencoAllegati.setIndirizzo(indirizzo);	
		}
		
//		if(Constants.RUOLO_MANUTENTORE.equalsIgnoreCase(dto.getRuoloFunz())){
//			if(GenericUtil.isNotNullOrEmpty(dto.getPgDenominazione()))
//					elencoAllegati.setManutentore(dto.getPgDenominazione());
//		}

		if(GenericUtil.isNotNullOrEmpty(allegato.getPgDenominazione()))
			elencoAllegati.setManutentore(allegato.getPgDenominazione());

		
		elencoAllegati.setStatoAllegato(allegato.getDesStatoRapp());
		elencoAllegati.setIdTipoAllegato(ConvertUtil.convertToInteger(allegato.getFkTipoDocumento()));
		elencoAllegati.setTipoAllegato(allegato.getDesTipoDocumento());
		
		if(allegato.getDataControllo()!=null)
		  elencoAllegati.setDataControllo(ConvertUtil.convertToString(allegato.getDataControllo()));
		
		elencoAllegati.setSiglaBollino(allegato.getFkSiglaBollino());
		
		if(GenericUtil.isNotNullOrEmpty(allegato.getFkNumeroBollino()))
			elencoAllegati.setNumeroBollino(allegato.getFkNumeroBollino().toString());
		
		
		if(GenericUtil.isNotNullOrEmpty(allegato.getElencoApparecchiature()))
			elencoAllegati.setElencoApparecchiature(MapDto.mapToElencoApparecchiatureSplit(allegato.getElencoApparecchiature()));
		
		
		return elencoAllegati;
	}
	
	public static Documento mapToDocumento(SigitTDocAggiuntivaByCodImpDecodDto documentoDto) {
		Documento documento = new Documento();
		
		documento.setIdDocumento(documentoDto.getDocIdDocAggiuntiva());
		documento.setUidIndex(documentoDto.getDocUidIndex());
		
		//documento.setIdTipoDocumento(documentoDto.getIdDocAggiuntiva());
		documento.setDescTipoDocumento(documentoDto.getTipodocDesTipoDocAgg() + (GenericUtil.isNotNullOrEmpty(documentoDto.getDocDesAltroTipodoc())?" - "+documentoDto.getDocDesAltroTipodoc():""));
		
		documento.setDescAltroDoc(documentoDto.getDocDesAltroTipodoc());
		documento.setDataUpload(ConvertUtil.convertToString(documentoDto.getDocDataUpload()));
		
		documento.setNomeDocOrig(documentoDto.getDocNomeDocOriginale());
		/*
		StringBuffer riIsp = new StringBuffer();
		
		if (GenericUtil.isNotNullOrEmpty(documentoDto.getDataIspezione()))
		{
			riIsp.append("<b>Data:</b> "+ConvertUtil.convertToString(documentoDto.getDataIspezione()));
		}

		if (GenericUtil.isNotNullOrEmpty(documentoDto.getEnteCompetente()))
		{
			riIsp.append(" <b>Ente:</b> "+documentoDto.getEnteCompetente());
		}

		if (GenericUtil.isNotNullOrEmpty(documentoDto.getDescStatoIspezione()))
		{
			riIsp.append(" <b>Stato ispezione:</b> "+documentoDto.getDescStatoIspezione());
		}

		if (GenericUtil.isNotNullOrEmpty(documentoDto.getFlgEsito()))
		{
			riIsp.append(" <b>Esito:</b> "+(documentoDto.getFlgEsito().intValue() == Constants.SI_1?Constants.DESC_ESITO_POSITIVO: Constants.DESC_ESITO_NEGATIVO));
		}
		
		if (riIsp.length() > 0)
		{
			documento.setRifIspezione(riIsp.toString());

		}
		 */
		documento.setDescStatoDocumento(documentoDto.getDocDataDelete()!=null?Constants.DESC_STATO_DOC_CANCELLATO:Constants.DESC_STATO_DOC_ATTIVO);
		
		return documento;
	}
	
	
	
	public static Documento mapToDocumento(SigitTDocAllegatoDto documentoDto) {
		Documento documento = new Documento();
		
		documento.setIdDocumento(documentoDto.getIdDocAllegato());
		documento.setUidIndex(documentoDto.getUidIndex());
		
		documento.setDescAltroDoc(documentoDto.getDescrizione());
		documento.setDataUpload(ConvertUtil.convertToString(documentoDto.getDataUpload()));
		
		documento.setNomeDocOrig(documentoDto.getNomeDocOriginale());
		
		documento.setDescStatoDocumento(documentoDto.getDataDelete()!=null?Constants.DESC_STATO_DOC_CANCELLATO:Constants.DESC_STATO_DOC_ATTIVO);
		
		return documento;
	}
	
	public static DettaglioAllegato mapToDettaglioAllegato(SigitVRicercaAllegatiDto allegato, String statoAllegato, String tipoDocumento, String codiceImpianto) {
		DettaglioAllegato result = new DettaglioAllegato();
		result.setDataControllo(ConvertUtil.convertToString(allegato.getDataControllo()));
		result.setIdAllegato(ConvertUtil.convertToString(allegato.getIdAllegato()));
		result.setIdTipoAllegato(ConvertUtil.convertToString(allegato.getFkTipoDocumento()));
		result.setInterventoRaccomandato(ConvertUtil.convertToString(allegato.getFInterventoEntro()));
		result.setNumeroBollinoVerde(ConvertUtil.convertToString(allegato.getFkNumeroBollino()));
		result.setOsservazioni(allegato.getFOsservazioni());
		result.setPrescrizioni(allegato.getFPrescrizioni());
		result.setRaccomandazioni(allegato.getFRaccomandazioni());
		result.setRuoloFunzionale(allegato.getRuoloFunz());

		result.setStatoAllegato(statoAllegato);
		result.setTipoAllegato(tipoDocumento);
		result.setSiglaBollino(allegato.getFkSiglaBollino());
		
		result.setFlagControlloBozza(ConvertUtil.convertToInteger(allegato.getFlgControlloBozza()));
		
		result.setIdPersonaGiuridica(ConvertUtil.convertToInteger(allegato.getIdPersonaGiuridica()));
		
		result.setCodiceReaPg(MapDto.getCodiceRea(allegato.getPgSiglaRea(), allegato.getPgNumeroRea()));
		result.setCodiceFiscalePg(allegato.getPgCodiceFiscale());
		result.setIdStatoPg(allegato.getPgFkStatoPg());
		
		result.setIdStatoRapporto(ConvertUtil.convertToInteger(allegato.getFkStatoRapp()));
		result.setCodiceImpianto(codiceImpianto);
		return result;
	}

	public static DettaglioIspezione mapToDettaglioIspezione(SigitVRicercaIspezioniDto ispezione) {
		DettaglioIspezione result = new DettaglioIspezione();
		
		result.setCodiceImpianto(ConvertUtil.convertToString(ispezione.getCodiceImpianto()));
		result.setIdIspezione(ConvertUtil.convertToInteger(ispezione.getIdIspezione2018()));
		
		result.setIdStatoIspezione(ConvertUtil.convertToInteger(ispezione.getFkStatoIspezione()));
		result.setStatoIspezione(ispezione.getDesStatoIspezione());
		
		result.setIspettoreId(ConvertUtil.convertToInteger(ispezione.getIdPersonaFisica()));
		result.setIspettoreCF(ispezione.getCodiceFiscale());
		result.setIspettoreNome(ispezione.getNome());
		result.setIspettoreCognome(ispezione.getCognome());
		
		result.setIdAllegato(ConvertUtil.convertToInteger(ispezione.getIdAllegato()));
		result.setIdStatoAllegato(ConvertUtil.convertToInteger(ispezione.getFkStatoRapp()));
		
		result.setDataIspezione(ConvertUtil.convertToString(ispezione.getDtCreazione()));
		result.setEnteCompetente(ispezione.getEnteCompetente());
		result.setEsitoIspezione(ispezione.getFlgEsito().intValue() == Constants.SI_1?Constants.DESC_ESITO_POSITIVO: Constants.DESC_ESITO_NEGATIVO);
		result.setNote(ispezione.getNote());

		return result;
	}
	
	public static void mapToSezNomine(List<SigitExtContrattoImpDto> contrattiAll, SezNomine sezNom) {
		if(contrattiAll==null || contrattiAll.isEmpty())
			return;
		
		
		// Siccome la tabella SIGIT_R_COMP4_CONTRATTO ritorna una riga per ogni singola apparecchiatura
		// Devo accorpare per data_inizio, data_revoca, data_fine, id_contratto
		
		List<SigitExtContrattoImpDto> contratti = new ArrayList<SigitExtContrattoImpDto>();
		
		SigitExtContrattoImpDto sigitExtContrattoImpDtoOld = null;
		
		log.debug("VERIFICO LA DUPLICAZIONE DI CONTRATTI - START");
		
		for (SigitExtContrattoImpDto sigitExtContrattoImpDto : contrattiAll) 
		{
			
			log.debug("sigitExtContrattoImpDtoOld: "+sigitExtContrattoImpDtoOld);
			
			if (sigitExtContrattoImpDtoOld != null)
			{
				
				log.debug("sigitExtContrattoImpDtoOld.getDataInizioContratto(): "+sigitExtContrattoImpDtoOld.getDataInizioContratto());
				log.debug("sigitExtContrattoImpDto.getDataInizioContratto(): "+sigitExtContrattoImpDto.getDataInizioContratto());
				log.debug(DateUtil.checkDateEqual(sigitExtContrattoImpDtoOld.getDataInizioContratto(), sigitExtContrattoImpDto.getDataInizioContratto()));
				log.debug("-------");
				log.debug("sigitExtContrattoImpDtoOld.getDataCessazione(): "+sigitExtContrattoImpDtoOld.getDataCessazione());
				log.debug("sigitExtContrattoImpDto.getDataCessazione(): "+sigitExtContrattoImpDto.getDataCessazione());
				log.debug(DateUtil.checkDateEqual(sigitExtContrattoImpDtoOld.getDataCessazione(), sigitExtContrattoImpDto.getDataCessazione()));
				log.debug("-------");
				log.debug("sigitExtContrattoImpDtoOld.getDataFineContratto(): "+sigitExtContrattoImpDtoOld.getDataFineContratto());
				log.debug("sigitExtContrattoImpDto.getDataFineContratto(): "+sigitExtContrattoImpDto.getDataFineContratto());
				log.debug(DateUtil.checkDateEqual(sigitExtContrattoImpDtoOld.getDataFineContratto(), sigitExtContrattoImpDto.getDataFineContratto()));
				log.debug("-------");
				log.debug("sigitExtContrattoImpDtoOld.getIdContratto(): "+sigitExtContrattoImpDtoOld.getIdContratto());
				log.debug("sigitExtContrattoImpDto.getIdContratto(): "+sigitExtContrattoImpDto.getIdContratto());
				log.debug(sigitExtContrattoImpDtoOld.getIdContratto().intValue() == sigitExtContrattoImpDto.getIdContratto().intValue());
				log.debug("-------");
				
				
				if (!(DateUtil.checkDateEqual(sigitExtContrattoImpDtoOld.getDataInizioContratto(), sigitExtContrattoImpDto.getDataInizioContratto()) &&
						DateUtil.checkDateEqual(sigitExtContrattoImpDtoOld.getDataCessazione(), sigitExtContrattoImpDto.getDataCessazione()) &&
						DateUtil.checkDateEqual(sigitExtContrattoImpDtoOld.getDataFineContratto(), sigitExtContrattoImpDto.getDataFineContratto()) &&
						sigitExtContrattoImpDtoOld.getIdContratto().intValue() == sigitExtContrattoImpDto.getIdContratto().intValue()))
				{
					
					// Vuol dire che e' cambiato, quindi aggiungo quello precedente
					contratti.add(sigitExtContrattoImpDtoOld);
				}
			}
			
			sigitExtContrattoImpDtoOld = sigitExtContrattoImpDto;

		}
		
		log.debug("VERIFCO LA DUPLICAZIONE DI CONTRATTI - END");

		
		// Devo aggiungere l'ultimo
		contratti.add(sigitExtContrattoImpDtoOld);
		
		
		List<RowNomine> list = new ArrayList<RowNomine>();
		for (SigitExtContrattoImpDto dto : contratti) {
			RowNomine row = RowNomine.Factory.newInstance();
			row.setL3DataValiditaContrattoDal(ConvertUtil.convertToXmlCalendar(dto.getDataInizioContratto()));
			//impostazione data fine contratto
			if(dto.getDataCessazione()!=null)
			{
				//if(DateUtil.checkDateOrder(dto.getDataRevoca(), dto.getDataFineContratto(), true))
				if(dto.getDataCessazione().before(dto.getDataFineContratto()))
				{
					row.setL3DataValiditaContrattoAl(ConvertUtil.convertToXmlCalendar(dto.getDataCessazione()));
				}
				else
				{
					if(!ConvertUtil.convertToBooleanAllways(dto.getFlagTacitoRinnovo()))
					{
						row.setL3DataValiditaContrattoAl(ConvertUtil.convertToXmlCalendar(dto.getDataFineContratto()));

					}
					else
					{
						row.setL3DataValiditaContrattoAl(ConvertUtil.convertToXmlCalendar(dto.getDataCessazione()));
					}
				}
			}
			else
			{
				if(!ConvertUtil.convertToBooleanAllways(dto.getFlagTacitoRinnovo()))
				{
					row.setL3DataValiditaContrattoAl(ConvertUtil.convertToXmlCalendar(dto.getDataFineContratto()));
				}
				else
				{
					if(dto.getDataFineContratto().after(new Date()))
					{
						row.setL3DataValiditaContrattoAl(ConvertUtil.convertToXmlCalendar(dto.getDataFineContratto()));
					}
				}
			}
			if(dto.getFkPgResponsabile()!=null)
			{
				row.setL3Piva(dto.getRespCodiceFiscale());
				row.setL3RagioneSociale(dto.getRespDenominazione());
			}
			else
			{
				row.setL3Nome(dto.getRespNome());
				row.setL3Cognome(dto.getRespDenominazione());
				row.setL3CodiceFiscale(dto.getRespCodiceFiscale());
			}
			row.setL3RagSocialeDitta(dto.getTerzoRespDenominazione());
			row.setL3Cciaa(getCodiceRea(dto.getTerzoRespSiglaRea(), ConvertUtil.convertToInteger(dto.getTerzoRespNumeroRea())));
			if(dto.getFkRuolo().toString().equals(Constants.ID_RUOLO_PROPRIETARIO+"") || dto.getFkRuolo().toString().equals(Constants.ID_RUOLO_RESPONSABILE_IMPRESA_PROPRIETARIO+"") || 
					dto.getFkRuolo().toString().equals(Constants.ID_RUOLO_OCCUPANTE+"") || dto.getFkRuolo().toString().equals(Constants.ID_RUOLO_RESPONSABILE_IMPRESA_OCCUPANTE+""))
				row.xsetL3FlagProprietario(getXmlBoolean(true));
			else
				row.xsetL3FlagAmministratore(getXmlBoolean(true));
			
			list.add(row);
		}
		sezNom.setRowNomineArray(list.toArray(new RowNomine[]{}));
	}

	public static void mapResponsabileImpianto(DatiPrecompilati datiPrecompilati, SigitVTotImpiantoDto respImpianto) {
		
		if("PG".equals(respImpianto.getPfPg()))
		{
			datiPrecompilati.setL16Piva(respImpianto.getCodiceFiscale());
			datiPrecompilati.setL16RagSociale(respImpianto.getDenominazione());
			datiPrecompilati.setL16Cf(null);
			datiPrecompilati.setL16Nome(null);
			datiPrecompilati.setL16Cognome(null);
		}
		else
		{
			datiPrecompilati.setL16Nome(respImpianto.getNome());
			datiPrecompilati.setL16Cognome(respImpianto.getDenominazione());
			datiPrecompilati.setL16Cf(respImpianto.getCodiceFiscale());
			datiPrecompilati.setL16Piva(null);
			datiPrecompilati.setL16RagSociale(null);
		}
	}

	public static void mapResponsabileImpianto(it.csi.sigit.sigitwebn.xml.librettoLight.data.DatiPrecompilatiDocument.DatiPrecompilati datiPrecompilati, SigitVTotImpiantoDto respImpianto) {
		
		if("PG".equals(respImpianto.getPfPg()))
		{
			datiPrecompilati.setL16Piva(respImpianto.getCodiceFiscale());
			datiPrecompilati.setL16RagSociale(respImpianto.getDenominazione());
			datiPrecompilati.setL16Cf(null);
			datiPrecompilati.setL16Nome(null);
			datiPrecompilati.setL16Cognome(null);
		}
		else
		{
			datiPrecompilati.setL16Nome(respImpianto.getNome());
			datiPrecompilati.setL16Cognome(respImpianto.getDenominazione());
			datiPrecompilati.setL16Cf(respImpianto.getCodiceFiscale());
			datiPrecompilati.setL16Piva(null);
			datiPrecompilati.setL16RagSociale(null);
		}
	}

	public static Metadati mapMetadati(SigitTImpiantoDto impianto, SigitTLibrettoDto libretto, String codiceRea) {
		Metadati md = new Metadati();
		md.setCodiceImpianto(ConvertUtil.convertToString(impianto.getCodiceImpianto()));
		md.setCodiceRea(codiceRea);
		md.setCodIstatComune(impianto.getIstatComune());
		md.setCodIstatProvincia(StringUtils.substring(impianto.getIstatComune(), 0, 3));
		md.setDataRapporto(ConvertUtil.convertToString(impianto.getDataIntervento()));
		md.setIdRapporto(ConvertUtil.convertToString(libretto.getIdLibretto()));
		return md;
	}
	
	public static Metadati mapMetadatiAllegati(SigitTImpiantoDto impianto, SigitTAllegatoDto allegatoDto, String codiceRea) {
		Metadati md = new Metadati();
		md.setCodiceImpianto(ConvertUtil.convertToString(impianto.getCodiceImpianto()));
		md.setCodiceRea(codiceRea);
		md.setCodIstatComune(impianto.getIstatComune());
		md.setCodIstatProvincia(StringUtils.substring(impianto.getIstatComune(), 0, 3));
		md.setDataRapporto(ConvertUtil.convertToString(allegatoDto.getDataControllo()));
		md.setIdRapporto(ConvertUtil.convertToString(allegatoDto.getIdAllegato()));
		return md;
	}

	public static Metadati mapMetadatiAllegati(SigitVTotImpiantoDto impianto, SigitTAllegatoDto allegatoDto, String codiceRea) {
		Metadati md = new Metadati();
		md.setCodiceImpianto(ConvertUtil.convertToString(impianto.getCodiceImpianto()));
		md.setCodiceRea(codiceRea);
		md.setCodIstatComune(impianto.getIstatComune());
		md.setCodIstatProvincia(StringUtils.substring(impianto.getIstatComune(), 0, 3));
		md.setDataRapporto(ConvertUtil.convertToString(allegatoDto.getDataControllo()));
		md.setIdRapporto(ConvertUtil.convertToString(allegatoDto.getIdAllegato()));
		return md;
	}

	public static void mapSezCatastoAllegatoTipo1(RowAllegatoII datiPrecompilati, List<SigitTUnitaImmobiliareDto> unitaImmobList, String denominazioneComuneResp, String siglaProvinciaResp)
	{
		List<SigitTUnitaImmobiliareDto> unitaImmobSecondarie = new ArrayList<SigitTUnitaImmobiliareDto>();
		SigitTUnitaImmobiliareDto unitaImmobPrincipale = new SigitTUnitaImmobiliareDto();
		
		for (SigitTUnitaImmobiliareDto ui : unitaImmobList) {
			if(ConvertUtil.convertToBooleanAllways(ui.getFlgPrincipale()))
				unitaImmobPrincipale = ui;
			else
				unitaImmobSecondarie.add(ui);
		}
		
		datiPrecompilati.setAACivico(unitaImmobPrincipale.getCivico());
		datiPrecompilati.setAAComune(denominazioneComuneResp);
		datiPrecompilati.setAAProv(siglaProvinciaResp);
		datiPrecompilati.setAAIndirizzo(GenericUtil.isNotNullOrEmpty(unitaImmobPrincipale.getIndirizzoSitad()) ? 
				unitaImmobPrincipale.getIndirizzoSitad() : unitaImmobPrincipale.getIndirizzoNonTrovato());
		datiPrecompilati.setAAInterno(unitaImmobPrincipale.getInterno());
		datiPrecompilati.setAAPalazzo(unitaImmobPrincipale.getPalazzo());
		datiPrecompilati.setAAScala(unitaImmobPrincipale.getScala());
		
		it.csi.sigit.sigitwebn.xml.allegato2.data.RowCatastoDocument.RowCatasto catastoPrincipale = it.csi.sigit.sigitwebn.xml.allegato2.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
		catastoPrincipale.setAAFoglio(unitaImmobPrincipale.getFoglio());
		catastoPrincipale.setAAParticella(unitaImmobPrincipale.getParticella());
		catastoPrincipale.setAAPdr(unitaImmobPrincipale.getPdrGas());
		catastoPrincipale.setAAPod(unitaImmobPrincipale.getPodElettrico());
		catastoPrincipale.setAASezione(unitaImmobPrincipale.getSezione());
		catastoPrincipale.setAASub(unitaImmobPrincipale.getSubalterno());

		datiPrecompilati.setSezCatasto(it.csi.sigit.sigitwebn.xml.allegato2.data.RowAllegatoIIDocument.RowAllegatoII.SezCatasto.Factory.newInstance()); 
		List<it.csi.sigit.sigitwebn.xml.allegato2.data.RowCatastoDocument.RowCatasto> rowCatastoList = datiPrecompilati.getSezCatasto().getRowCatastoList();
		rowCatastoList.clear();

		rowCatastoList.add(catastoPrincipale);
		for (SigitTUnitaImmobiliareDto umSec : unitaImmobSecondarie) 
		{
			it.csi.sigit.sigitwebn.xml.allegato2.data.RowCatastoDocument.RowCatasto catastoSec = it.csi.sigit.sigitwebn.xml.allegato2.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
			catastoSec.setAAFoglio(umSec.getFoglio());
			catastoSec.setAAParticella(umSec.getParticella());
			catastoSec.setAAPdr(umSec.getPdrGas());
			catastoSec.setAAPod(umSec.getPodElettrico());
			catastoSec.setAASezione(umSec.getSezione());
			catastoSec.setAASub(umSec.getSubalterno());
			rowCatastoList.add(catastoSec);
		}
	}
	
	
	
	public static void mapSezCatastoAllegatoTipo2(RowAllegatoIII datiPrecompilati, List<SigitTUnitaImmobiliareDto> unitaImmobList, String denominazioneComuneResp, String siglaProvinciaResp)
	{
		List<SigitTUnitaImmobiliareDto> unitaImmobSecondarie = new ArrayList<SigitTUnitaImmobiliareDto>();
		SigitTUnitaImmobiliareDto unitaImmobPrincipale = new SigitTUnitaImmobiliareDto();
		
		for (SigitTUnitaImmobiliareDto ui : unitaImmobList) {
			if(ConvertUtil.convertToBooleanAllways(ui.getFlgPrincipale()))
				unitaImmobPrincipale = ui;
			else
				unitaImmobSecondarie.add(ui);
		}
		
		datiPrecompilati.setAACivico(unitaImmobPrincipale.getCivico());
		datiPrecompilati.setAAComune(denominazioneComuneResp);
		datiPrecompilati.setAAProv(siglaProvinciaResp);
		datiPrecompilati.setAAIndirizzo(GenericUtil.isNotNullOrEmpty(unitaImmobPrincipale.getIndirizzoSitad()) ? 
				unitaImmobPrincipale.getIndirizzoSitad() : unitaImmobPrincipale.getIndirizzoNonTrovato());
		datiPrecompilati.setAAInterno(unitaImmobPrincipale.getInterno());
		datiPrecompilati.setAAPalazzo(unitaImmobPrincipale.getPalazzo());
		datiPrecompilati.setAAScala(unitaImmobPrincipale.getScala());
		
		it.csi.sigit.sigitwebn.xml.allegato3.data.RowCatastoDocument.RowCatasto catastoPrincipale = it.csi.sigit.sigitwebn.xml.allegato3.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
		catastoPrincipale.setAAFoglio(unitaImmobPrincipale.getFoglio());
		catastoPrincipale.setAAParticella(unitaImmobPrincipale.getParticella());
		catastoPrincipale.setAAPdr(unitaImmobPrincipale.getPdrGas());
		catastoPrincipale.setAAPod(unitaImmobPrincipale.getPodElettrico());
		catastoPrincipale.setAASezione(unitaImmobPrincipale.getSezione());
		catastoPrincipale.setAASub(unitaImmobPrincipale.getSubalterno());

		datiPrecompilati.setSezCatasto(it.csi.sigit.sigitwebn.xml.allegato3.data.RowAllegatoIIIDocument.RowAllegatoIII.SezCatasto.Factory.newInstance()); 
		List<it.csi.sigit.sigitwebn.xml.allegato3.data.RowCatastoDocument.RowCatasto> rowCatastoList = datiPrecompilati.getSezCatasto().getRowCatastoList();
		rowCatastoList.clear();

		rowCatastoList.add(catastoPrincipale);
		for (SigitTUnitaImmobiliareDto umSec : unitaImmobSecondarie) 
		{
			it.csi.sigit.sigitwebn.xml.allegato3.data.RowCatastoDocument.RowCatasto catastoSec = it.csi.sigit.sigitwebn.xml.allegato3.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
			catastoSec.setAAFoglio(umSec.getFoglio());
			catastoSec.setAAParticella(umSec.getParticella());
			catastoSec.setAAPdr(umSec.getPdrGas());
			catastoSec.setAAPod(umSec.getPodElettrico());
			catastoSec.setAASezione(umSec.getSezione());
			catastoSec.setAASub(umSec.getSubalterno());
			rowCatastoList.add(catastoSec);
		}
	}
	
	public static void mapSezCatastoAllegatoTipo3(RowAllegatoIV datiPrecompilati, List<SigitTUnitaImmobiliareDto> unitaImmobList, String denominazioneComuneResp, String siglaProvinciaResp)
	{
		List<SigitTUnitaImmobiliareDto> unitaImmobSecondarie = new ArrayList<SigitTUnitaImmobiliareDto>();
		SigitTUnitaImmobiliareDto unitaImmobPrincipale = new SigitTUnitaImmobiliareDto();
		
		for (SigitTUnitaImmobiliareDto ui : unitaImmobList) {
			if(ConvertUtil.convertToBooleanAllways(ui.getFlgPrincipale()))
				unitaImmobPrincipale = ui;
			else
				unitaImmobSecondarie.add(ui);
		}
		
		datiPrecompilati.setAACivico(unitaImmobPrincipale.getCivico());
		datiPrecompilati.setAAComune(denominazioneComuneResp);
		datiPrecompilati.setAAProv(siglaProvinciaResp);
		datiPrecompilati.setAAIndirizzo(GenericUtil.isNotNullOrEmpty(unitaImmobPrincipale.getIndirizzoSitad()) ? 
				unitaImmobPrincipale.getIndirizzoSitad() : unitaImmobPrincipale.getIndirizzoNonTrovato());
		datiPrecompilati.setAAInterno(unitaImmobPrincipale.getInterno());
		datiPrecompilati.setAAPalazzo(unitaImmobPrincipale.getPalazzo());
		datiPrecompilati.setAAScala(unitaImmobPrincipale.getScala());
		
		it.csi.sigit.sigitwebn.xml.allegato4.data.RowCatastoDocument.RowCatasto catastoPrincipale = it.csi.sigit.sigitwebn.xml.allegato4.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
		catastoPrincipale.setAAFoglio(unitaImmobPrincipale.getFoglio());
		catastoPrincipale.setAAParticella(unitaImmobPrincipale.getParticella());
		catastoPrincipale.setAAPdr(unitaImmobPrincipale.getPdrGas());
		catastoPrincipale.setAAPod(unitaImmobPrincipale.getPodElettrico());
		catastoPrincipale.setAASezione(unitaImmobPrincipale.getSezione());
		catastoPrincipale.setAASub(unitaImmobPrincipale.getSubalterno());

		datiPrecompilati.setSezCatasto(it.csi.sigit.sigitwebn.xml.allegato4.data.RowAllegatoIVDocument.RowAllegatoIV.SezCatasto.Factory.newInstance()); 
		List<it.csi.sigit.sigitwebn.xml.allegato4.data.RowCatastoDocument.RowCatasto> rowCatastoList = datiPrecompilati.getSezCatasto().getRowCatastoList();
		rowCatastoList.clear();
		
		rowCatastoList.add(catastoPrincipale);
		for (SigitTUnitaImmobiliareDto umSec : unitaImmobSecondarie) 
		{
			it.csi.sigit.sigitwebn.xml.allegato4.data.RowCatastoDocument.RowCatasto catastoSec = it.csi.sigit.sigitwebn.xml.allegato4.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
			catastoSec.setAAFoglio(umSec.getFoglio());
			catastoSec.setAAParticella(umSec.getParticella());
			catastoSec.setAAPdr(umSec.getPdrGas());
			catastoSec.setAAPod(umSec.getPodElettrico());
			catastoSec.setAASezione(umSec.getSezione());
			catastoSec.setAASub(umSec.getSubalterno());
			rowCatastoList.add(catastoSec);
		}
	}
	
	public static void mapSezCatastoAllegatoTipo4(RowAllegatoV datiPrecompilati, List<SigitTUnitaImmobiliareDto> unitaImmobList, String denominazioneComuneResp, String siglaProvinciaResp)
	{
		List<SigitTUnitaImmobiliareDto> unitaImmobSecondarie = new ArrayList<SigitTUnitaImmobiliareDto>();
		SigitTUnitaImmobiliareDto unitaImmobPrincipale = new SigitTUnitaImmobiliareDto();
		
		for (SigitTUnitaImmobiliareDto ui : unitaImmobList) {
			if(ConvertUtil.convertToBooleanAllways(ui.getFlgPrincipale()))
				unitaImmobPrincipale = ui;
			else
				unitaImmobSecondarie.add(ui);
		}
		
		datiPrecompilati.setAACivico(unitaImmobPrincipale.getCivico());
		datiPrecompilati.setAAComune(denominazioneComuneResp);
		datiPrecompilati.setAAProv(siglaProvinciaResp);
		datiPrecompilati.setAAIndirizzo(GenericUtil.isNotNullOrEmpty(unitaImmobPrincipale.getIndirizzoSitad()) ? 
				unitaImmobPrincipale.getIndirizzoSitad() : unitaImmobPrincipale.getIndirizzoNonTrovato());
		datiPrecompilati.setAAInterno(unitaImmobPrincipale.getInterno());
		datiPrecompilati.setAAPalazzo(unitaImmobPrincipale.getPalazzo());
		datiPrecompilati.setAAScala(unitaImmobPrincipale.getScala());
		
		it.csi.sigit.sigitwebn.xml.allegato5.data.RowCatastoDocument.RowCatasto catastoPrincipale = it.csi.sigit.sigitwebn.xml.allegato5.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
		catastoPrincipale.setAAFoglio(unitaImmobPrincipale.getFoglio());
		catastoPrincipale.setAAParticella(unitaImmobPrincipale.getParticella());
		catastoPrincipale.setAAPdr(unitaImmobPrincipale.getPdrGas());
		catastoPrincipale.setAAPod(unitaImmobPrincipale.getPodElettrico());
		catastoPrincipale.setAASezione(unitaImmobPrincipale.getSezione());
		catastoPrincipale.setAASub(unitaImmobPrincipale.getSubalterno());

		datiPrecompilati.setSezCatasto(it.csi.sigit.sigitwebn.xml.allegato5.data.RowAllegatoVDocument.RowAllegatoV.SezCatasto.Factory.newInstance()); 
		List<it.csi.sigit.sigitwebn.xml.allegato5.data.RowCatastoDocument.RowCatasto> rowCatastoList = datiPrecompilati.getSezCatasto().getRowCatastoList();
		rowCatastoList.clear();
		
		rowCatastoList.add(catastoPrincipale);
		for (SigitTUnitaImmobiliareDto umSec : unitaImmobSecondarie) 
		{
			it.csi.sigit.sigitwebn.xml.allegato5.data.RowCatastoDocument.RowCatasto catastoSec = it.csi.sigit.sigitwebn.xml.allegato5.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
			catastoSec.setAAFoglio(umSec.getFoglio());
			catastoSec.setAAParticella(umSec.getParticella());
			catastoSec.setAAPdr(umSec.getPdrGas());
			catastoSec.setAAPod(umSec.getPodElettrico());
			catastoSec.setAASezione(umSec.getSezione());
			catastoSec.setAASub(umSec.getSubalterno());
			rowCatastoList.add(catastoSec);
		}
	}
	
	public static it.csi.sigit.sigitwebn.xml.libretto.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoCombustibile mapToElencoCombustibile(List<SigitDCombustibileDto> elencoCombustibileDto) {
		it.csi.sigit.sigitwebn.xml.libretto.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoCombustibile ec = it.csi.sigit.sigitwebn.xml.libretto.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoCombustibile.Factory.newInstance();
		it.csi.sigit.sigitwebn.xml.libretto.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoCombustibile.Combustibile[] arr = new it.csi.sigit.sigitwebn.xml.libretto.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoCombustibile.Combustibile[elencoCombustibileDto.size()];
		int i=0;
		for (SigitDCombustibileDto dto : elencoCombustibileDto) {
			it.csi.sigit.sigitwebn.xml.libretto.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoCombustibile.Combustibile com = it.csi.sigit.sigitwebn.xml.libretto.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoCombustibile.Combustibile.Factory.newInstance();
			com.setCodice(ConvertUtil.convertToString(dto.getIdCombustibile()));
			com.setDescrizione(dto.getDesCombustibile());
			arr[i++] = com;
		}
		ec.setCombustibileArray(arr);
		return ec;
	}

	public static it.csi.sigit.sigitwebn.xml.allegato4.data.DatiModuloDocument.DatiModulo.ElencoCombustibile mapToElencoCombustibileAllegato4(List<SigitDFluidoDto> elencoFluidiDto) {
		it.csi.sigit.sigitwebn.xml.allegato4.data.DatiModuloDocument.DatiModulo.ElencoCombustibile ec = it.csi.sigit.sigitwebn.xml.allegato4.data.DatiModuloDocument.DatiModulo.ElencoCombustibile.Factory.newInstance();
		it.csi.sigit.sigitwebn.xml.allegato4.data.DatiModuloDocument.DatiModulo.ElencoCombustibile.Combustibile[] arr = new it.csi.sigit.sigitwebn.xml.allegato4.data.DatiModuloDocument.DatiModulo.ElencoCombustibile.Combustibile[elencoFluidiDto.size()];
		int i=0;
		for (SigitDFluidoDto dto : elencoFluidiDto) {
			it.csi.sigit.sigitwebn.xml.allegato4.data.DatiModuloDocument.DatiModulo.ElencoCombustibile.Combustibile com = it.csi.sigit.sigitwebn.xml.allegato4.data.DatiModuloDocument.DatiModulo.ElencoCombustibile.Combustibile.Factory.newInstance();
			com.setCodice(ConvertUtil.convertToString(dto.getIdFluido()));
			com.setDescrizione(dto.getDesFluido());
			arr[i++] = com;
		}
		ec.setCombustibileArray(arr);
		return ec;
	}
	
	public static ElencoFabbricante mapToElencoFabbricante(List<SigitDMarcaDto> elencoMarche) {
		ElencoFabbricante ef = ElencoFabbricante.Factory.newInstance();
		Fabbricante[] arr = new Fabbricante[elencoMarche.size()];
		int i=0;
		for (SigitDMarcaDto dto : elencoMarche) {
			Fabbricante fab = Fabbricante.Factory.newInstance();
			fab.setCodice(ConvertUtil.convertToString(dto.getIdMarca()));
			fab.setDescrizione(dto.getDesMarca());
			arr[i++] = fab;
		}
		ef.setFabbricanteArray(arr);
		return ef;
	}

	public static it.csi.sigit.sigitwebn.xml.libretto.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoFluidoTermoVett mapToElencoFluido(List<SigitDFluidoDto> elencoFluidi) {
		it.csi.sigit.sigitwebn.xml.libretto.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoFluidoTermoVett ef = it.csi.sigit.sigitwebn.xml.libretto.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoFluidoTermoVett.Factory.newInstance();
		it.csi.sigit.sigitwebn.xml.libretto.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoFluidoTermoVett.FluidoTermoVett[] arr = new it.csi.sigit.sigitwebn.xml.libretto.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoFluidoTermoVett.FluidoTermoVett[elencoFluidi.size()];
		int i=0;
		for (SigitDFluidoDto dto : elencoFluidi) {
			it.csi.sigit.sigitwebn.xml.libretto.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoFluidoTermoVett.FluidoTermoVett fab = it.csi.sigit.sigitwebn.xml.libretto.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoFluidoTermoVett.FluidoTermoVett.Factory.newInstance();
			fab.setCodice(ConvertUtil.convertToString(dto.getIdFluido()));
			fab.setDescrizione(dto.getDesFluido());
			arr[i++] = fab;
		}
		ef.setFluidoTermoVettArray(arr);
		return ef;
	}

	public static it.csi.sigit.sigitwebn.xml.allegato4.data.DatiModuloDocument.DatiModulo.ElencoFluidoTermoVett mapToElencoFluidoAllegato4(List<SigitDFluidoDto> elencoFluidi) {
		it.csi.sigit.sigitwebn.xml.allegato4.data.DatiModuloDocument.DatiModulo.ElencoFluidoTermoVett ef = it.csi.sigit.sigitwebn.xml.allegato4.data.DatiModuloDocument.DatiModulo.ElencoFluidoTermoVett.Factory.newInstance();
		it.csi.sigit.sigitwebn.xml.allegato4.data.DatiModuloDocument.DatiModulo.ElencoFluidoTermoVett.FluidoTermoVett[] arr = new it.csi.sigit.sigitwebn.xml.allegato4.data.DatiModuloDocument.DatiModulo.ElencoFluidoTermoVett.FluidoTermoVett[elencoFluidi.size()];
		int i=0;
		for (SigitDFluidoDto dto : elencoFluidi) {
			it.csi.sigit.sigitwebn.xml.allegato4.data.DatiModuloDocument.DatiModulo.ElencoFluidoTermoVett.FluidoTermoVett fab = it.csi.sigit.sigitwebn.xml.allegato4.data.DatiModuloDocument.DatiModulo.ElencoFluidoTermoVett.FluidoTermoVett.Factory.newInstance();
			fab.setCodice(ConvertUtil.convertToString(dto.getIdFluido()));
			fab.setDescrizione(dto.getDesFluido());
			arr[i++] = fab;
		}
		ef.setFluidoTermoVettArray(arr);
		return ef;
	}

	public static it.csi.sigit.sigitwebn.xml.allegato5.data.DatiModuloDocument.DatiModulo.ElencoFluidoTermoVett mapToElencoFluidoAllegato5(List<SigitDFluidoDto> elencoFluidi) {
		it.csi.sigit.sigitwebn.xml.allegato5.data.DatiModuloDocument.DatiModulo.ElencoFluidoTermoVett ef = it.csi.sigit.sigitwebn.xml.allegato5.data.DatiModuloDocument.DatiModulo.ElencoFluidoTermoVett.Factory.newInstance();
		it.csi.sigit.sigitwebn.xml.allegato5.data.DatiModuloDocument.DatiModulo.ElencoFluidoTermoVett.FluidoTermoVett[] arr = new it.csi.sigit.sigitwebn.xml.allegato5.data.DatiModuloDocument.DatiModulo.ElencoFluidoTermoVett.FluidoTermoVett[elencoFluidi.size()];
		int i=0;
		for (SigitDFluidoDto dto : elencoFluidi) {
			it.csi.sigit.sigitwebn.xml.allegato5.data.DatiModuloDocument.DatiModulo.ElencoFluidoTermoVett.FluidoTermoVett fab = it.csi.sigit.sigitwebn.xml.allegato5.data.DatiModuloDocument.DatiModulo.ElencoFluidoTermoVett.FluidoTermoVett.Factory.newInstance();
			fab.setCodice(ConvertUtil.convertToString(dto.getIdFluido()));
			fab.setDescrizione(dto.getDesFluido());
			arr[i++] = fab;
		}
		ef.setFluidoTermoVettArray(arr);
		return ef;
	}

	public static void mapToDatiPrecompilatiAllegato1(RowAllegatoII datiPrecompilati,
			List<SigitTUnitaImmobiliareDto> listaUnitaImmobiliare, SigitTImpiantoDto impianto, SigitTAllegatoDto allegato)
	{
		List<SigitTUnitaImmobiliareDto> unitaImmobSecondarie = new ArrayList<SigitTUnitaImmobiliareDto>();
		SigitTUnitaImmobiliareDto unitaImmobPrincipale = new SigitTUnitaImmobiliareDto();
		
		for (SigitTUnitaImmobiliareDto ui : listaUnitaImmobiliare) {
			if(ConvertUtil.convertToBooleanAllways(ui.getFlgPrincipale()))
				unitaImmobPrincipale = ui;
			else
				unitaImmobSecondarie.add(ui);
		}
		
		datiPrecompilati.setAACivico(unitaImmobPrincipale.getCivico());
		if(impianto!=null)
		{
			datiPrecompilati.setAAComune(impianto.getDenominazioneComune());
			datiPrecompilati.setAAProv(impianto.getSiglaProvincia());
		}
		datiPrecompilati.setAAIndirizzo(GenericUtil.isNotNullOrEmpty(unitaImmobPrincipale.getIndirizzoSitad()) ? 
				unitaImmobPrincipale.getIndirizzoSitad() : unitaImmobPrincipale.getIndirizzoNonTrovato());
		datiPrecompilati.setAAInterno(unitaImmobPrincipale.getInterno());
		datiPrecompilati.setAAPalazzo(unitaImmobPrincipale.getPalazzo());
		datiPrecompilati.setAAScala(unitaImmobPrincipale.getScala());
		
		it.csi.sigit.sigitwebn.xml.allegato2.data.RowCatastoDocument.RowCatasto catastoPrincipale = it.csi.sigit.sigitwebn.xml.allegato2.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
		catastoPrincipale.setAAFoglio(unitaImmobPrincipale.getFoglio());
		catastoPrincipale.setAAParticella(unitaImmobPrincipale.getParticella());
		catastoPrincipale.setAAPdr(unitaImmobPrincipale.getPdrGas());
		catastoPrincipale.setAAPod(unitaImmobPrincipale.getPodElettrico());
		catastoPrincipale.setAASezione(unitaImmobPrincipale.getSezione());
		catastoPrincipale.setAASub(unitaImmobPrincipale.getSubalterno());

		List<it.csi.sigit.sigitwebn.xml.allegato2.data.RowCatastoDocument.RowCatasto> rowCatastoList = datiPrecompilati.addNewSezCatasto().getRowCatastoList();
		rowCatastoList.add(catastoPrincipale);
		for (SigitTUnitaImmobiliareDto umSec : unitaImmobSecondarie) 
		{
			it.csi.sigit.sigitwebn.xml.allegato2.data.RowCatastoDocument.RowCatasto catastoSec = it.csi.sigit.sigitwebn.xml.allegato2.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
			catastoSec.setAAFoglio(umSec.getFoglio());
			catastoSec.setAAParticella(umSec.getParticella());
			catastoSec.setAAPdr(umSec.getPdrGas());
			catastoSec.setAAPod(umSec.getPodElettrico());
			catastoSec.setAASezione(umSec.getSezione());
			catastoSec.setAASub(umSec.getSubalterno());
			rowCatastoList.add(catastoSec);
		}
	}
	
	
	public static RowAllegatoII mapToDatiAllegato1Now(SigitVSk4GtDto dto, SigitTAllegatoDto allegatoDto, SigitTRappTipo1Dto rappTipo1Dto, SigitTDettTipo1Dto dettTipo1,
			SigitTPersonaGiuridicaDto personaGiuridicaDto, SigitTPersonaFisicaDto personaFisicaDto, String ruolo, boolean isTerzoResp,
			List<SigitTUnitaImmobiliareDto> listaUnitaImmobiliare, SigitTImpiantoDto impianto, SigitTTrattH2ODto dettaglioTrattAcqua)
	{
		
		RowAllegatoII rowAllegatoII = RowAllegatoII.Factory.newInstance();
		
		rowAllegatoII.setCodiceCatasto(ConvertUtil.convertToString(dto.getCodiceImpianto()));
		
		// A. DATI IDENTIFICATIVI
		
		List<SigitTUnitaImmobiliareDto> unitaImmobSecondarie = new ArrayList<SigitTUnitaImmobiliareDto>();
		SigitTUnitaImmobiliareDto unitaImmobPrincipale = new SigitTUnitaImmobiliareDto();
		
		for (SigitTUnitaImmobiliareDto ui : listaUnitaImmobiliare) {
			if(ConvertUtil.convertToBooleanAllways(ui.getFlgPrincipale()))
				unitaImmobPrincipale = ui;
			else
				unitaImmobSecondarie.add(ui);
		}
		
		rowAllegatoII.setAACivico(unitaImmobPrincipale.getCivico());
		if(impianto!=null)
		{
			rowAllegatoII.setAAComune(impianto.getDenominazioneComune());
			rowAllegatoII.setAAProv(impianto.getSiglaProvincia());
		}
		rowAllegatoII.setAAIndirizzo(GenericUtil.isNotNullOrEmpty(unitaImmobPrincipale.getIndirizzoSitad()) ? 
				unitaImmobPrincipale.getIndirizzoSitad() : unitaImmobPrincipale.getIndirizzoNonTrovato());
		rowAllegatoII.setAAInterno(unitaImmobPrincipale.getInterno());
		rowAllegatoII.setAAPalazzo(unitaImmobPrincipale.getPalazzo());
		rowAllegatoII.setAAScala(unitaImmobPrincipale.getScala());
		
		it.csi.sigit.sigitwebn.xml.allegato2.data.RowCatastoDocument.RowCatasto catastoPrincipale = it.csi.sigit.sigitwebn.xml.allegato2.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
		catastoPrincipale.setAAFoglio(unitaImmobPrincipale.getFoglio());
		catastoPrincipale.setAAParticella(unitaImmobPrincipale.getParticella());
		catastoPrincipale.setAAPdr(unitaImmobPrincipale.getPdrGas());
		catastoPrincipale.setAAPod(unitaImmobPrincipale.getPodElettrico());
		catastoPrincipale.setAASezione(unitaImmobPrincipale.getSezione());
		catastoPrincipale.setAASub(unitaImmobPrincipale.getSubalterno());

		List<it.csi.sigit.sigitwebn.xml.allegato2.data.RowCatastoDocument.RowCatasto> rowCatastoList = rowAllegatoII.addNewSezCatasto().getRowCatastoList();
		rowCatastoList.add(catastoPrincipale);
		for (SigitTUnitaImmobiliareDto umSec : unitaImmobSecondarie) 
		{
			it.csi.sigit.sigitwebn.xml.allegato2.data.RowCatastoDocument.RowCatasto catastoSec = it.csi.sigit.sigitwebn.xml.allegato2.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
			catastoSec.setAAFoglio(umSec.getFoglio());
			catastoSec.setAAParticella(umSec.getParticella());
			catastoSec.setAAPdr(umSec.getPdrGas());
			catastoSec.setAAPod(umSec.getPodElettrico());
			catastoSec.setAASezione(umSec.getSezione());
			catastoSec.setAASub(umSec.getSubalterno());
			rowCatastoList.add(catastoSec);
		}
		
		if(personaGiuridicaDto!=null){
			rowAllegatoII.setAA2RagSociale(personaGiuridicaDto.getDenominazione());
			rowAllegatoII.setAA2Piva(personaGiuridicaDto.getCodiceFiscale());

			rowAllegatoII.setAA2Cognome(null);
			rowAllegatoII.setAA2Nome(null);
			rowAllegatoII.setAA2Cf(null);
			
			if (ConvertUtil.convertToBooleanAllways(personaGiuridicaDto.getFlgIndirizzoEstero()))
			{
				rowAllegatoII.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoEstero());
				rowAllegatoII.setAA2Comune(GenericUtil.getStringValid(personaGiuridicaDto.getCittaEstero()) + " ("+GenericUtil.getStringValid(personaGiuridicaDto.getStatoEstero())+")");
				rowAllegatoII.setAA2Prov(null);
				
				
			}
			else
			{
				rowAllegatoII.setAA2Prov(personaGiuridicaDto.getSiglaProv());
				rowAllegatoII.setAA2Comune(personaGiuridicaDto.getComune());
				if(personaGiuridicaDto.getIndirizzoSitad()!=null){
					rowAllegatoII.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoSitad());
				}else{
					rowAllegatoII.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoNonTrovato());
				}
			}

			// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
			rowAllegatoII.setAA2Civico(personaGiuridicaDto.getCivico());

		}else{
			//vuol dire che e'  persona fisica
			rowAllegatoII.setAA2Cognome(personaFisicaDto.getCognome());
			rowAllegatoII.setAA2Nome(personaFisicaDto.getNome());
			rowAllegatoII.setAA2Cf(personaFisicaDto.getCodiceFiscale());
			
			rowAllegatoII.setAA2RagSociale(null);
			rowAllegatoII.setAA2Piva(null);
			
			if (ConvertUtil.convertToBooleanAllways(personaFisicaDto.getFlgIndirizzoEstero()))
			{
				rowAllegatoII.setAA2Indirizzo(personaFisicaDto.getIndirizzoEstero());
				rowAllegatoII.setAA2Comune(GenericUtil.getStringValid(personaFisicaDto.getCittaEstero()) + " ("+GenericUtil.getStringValid(personaFisicaDto.getStatoEstero())+")");
				rowAllegatoII.setAA2Prov(null);
			}
			else
			{
				rowAllegatoII.setAA2Prov(personaFisicaDto.getSiglaProv());
				rowAllegatoII.setAA2Comune(personaFisicaDto.getComune());
	
				if(personaFisicaDto.getIndirizzoSitad()!=null){
					rowAllegatoII.setAA2Indirizzo(personaFisicaDto.getIndirizzoSitad());
				}else{
					rowAllegatoII.setAA2Indirizzo(personaFisicaDto.getIndirizzoNonTrovato());
				}
			}
			// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
			rowAllegatoII.setAA2Civico(personaFisicaDto.getCivico());
		}
		
		//per il titolo responsabile si hanno dei radio button da gestire
		if(isTerzoResp){
			rowAllegatoII.xsetAA2FlagTerzoResp(getXmlBoolean(true));
			
			rowAllegatoII.xsetAA2FlagProprietario(MapDto.getXmlBoolean(false));
			rowAllegatoII.xsetAA2FlagOccupante(MapDto.getXmlBoolean(false));
			rowAllegatoII.xsetAA2FlagAmministr(MapDto.getXmlBoolean(false));

		} 
		else
		{
			log.debug("Constants.ID_RUOLO_PROPRIETARIO: "+Constants.ID_RUOLO_PROPRIETARIO);
			log.debug("Constants.ID_RUOLO_RESPONSABILE_IMPRESA_PROPRIETARIO: "+Constants.ID_RUOLO_RESPONSABILE_IMPRESA_PROPRIETARIO);
			log.debug("ruolo: "+ruolo);
			
			rowAllegatoII.xsetAA2FlagTerzoResp(getXmlBoolean(false));

			if((Constants.ID_RUOLO_PROPRIETARIO == ConvertUtil.convertToInteger(ruolo))
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_PROPRIETARIO ==  ConvertUtil.convertToInteger(ruolo))){
				
				log.debug("sono dentro!!!!!!!!!!!!!");
				rowAllegatoII.xsetAA2FlagProprietario(MapDto.getXmlBoolean(true));
			}
			if((Constants.ID_RUOLO_OCCUPANTE == ConvertUtil.convertToInteger(ruolo))
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_OCCUPANTE ==  ConvertUtil.convertToInteger(ruolo))){
				rowAllegatoII.xsetAA2FlagOccupante(MapDto.getXmlBoolean(true));
			}
			if((Constants.ID_RUOLO_AMMINISTRATORE == ConvertUtil.convertToInteger(ruolo))
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_AMMINISTRATORE ==  ConvertUtil.convertToInteger(ruolo))){
				rowAllegatoII.xsetAA2FlagAmministr(MapDto.getXmlBoolean(true));
			}
		}
		
		// B. DOCUMENTAZIONE TECNICA A CORREDO
		DatiIdentificativi datiIdentificativi = rowAllegatoII.addNewDatiIdentificativi(); 
		datiIdentificativi.setAAPotenzaTermicaNomTotMax(allegatoDto.getAPotenzaTermicaNominaleMax());

		DocumentazioneTecnica documentazioneTecnica = rowAllegatoII.addNewDocumentazioneTecnica();

		if(allegatoDto.getBFlgDichiarConform() != null)
		{
			documentazioneTecnica.xsetABFlagDichiarazConfNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getBFlgDichiarConform())));
			documentazioneTecnica.xsetABFlagDichiarazConfSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getBFlgDichiarConform())));
		}

		if(allegatoDto.getBFlgLibImp() != null)
		{
			documentazioneTecnica.xsetABFlagLibrettoImpNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getBFlgLibImp())));
			documentazioneTecnica.xsetABFlagLibrettoImpSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getBFlgLibImp())));
		}

		if(allegatoDto.getBFlgLibrettoUso() != null)
		{
			documentazioneTecnica.xsetABFlagManutGenNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getBFlgLibrettoUso())));
			documentazioneTecnica.xsetABFlagManutGenSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getBFlgLibrettoUso())));
		}

		if(allegatoDto.getBFlgLibCompl() != null)
		{
			documentazioneTecnica.xsetABFlagLibrettoCompNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getBFlgLibCompl())));
			documentazioneTecnica.xsetABFlagLibrettoCompSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getBFlgLibCompl())));
		}

		//SEZIONE C. Trattamento dell'acqua
		TrattamentoAcqua trattamentoAcqua = TrattamentoAcqua.Factory.newInstance();
		
		if(rappTipo1Dto.getCFlgTrattClimaNonRich() !=null && Constants.SI_1 == rappTipo1Dto.getCFlgTrattClimaNonRich().intValue())
			trattamentoAcqua.xsetACFlagTrattH2ONR(MapDto.getXmlBoolean(true));
		else{
			trattamentoAcqua.xsetACFlagTrattH2ONR(MapDto.getXmlBoolean(false));
		}

		if(rappTipo1Dto.getCFlgTrattAcsNonRichiesto() !=null && Constants.SI_1 == rappTipo1Dto.getCFlgTrattAcsNonRichiesto().intValue())
			trattamentoAcqua.xsetACFlagTrattAcsNR(MapDto.getXmlBoolean(true));
		else{
			trattamentoAcqua.xsetACFlagTrattAcsNR(MapDto.getXmlBoolean(false));
		}

		if(dettaglioTrattAcqua != null){
			log.debug("FRAAAAAAAAAAA --- > trattamento acqua ");

			if (log.isDebugEnabled())
				GenericUtil.stampa(dettaglioTrattAcqua, true, 3);

			trattamentoAcqua.setACDurezzaTotH2O(dettaglioTrattAcqua.getL22DurezzaH2oFr());



			if(dettaglioTrattAcqua.getL23FlgTrattClimaAssente() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL23FlgTrattClimaAssente().intValue())
				trattamentoAcqua.xsetACFlagTrattH2OAssente(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattH2OAssente(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL23FlgTrattClimaFiltr() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL23FlgTrattClimaFiltr().intValue())
				trattamentoAcqua.xsetACFlagTrattH2OFiltraz(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattH2OFiltraz(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL23FlgTrattClimaAddolc() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL23FlgTrattClimaAddolc().intValue())
				trattamentoAcqua.xsetACFlagTrattH2OAddolcim(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattH2OAddolcim(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL23FlgTrattClimaChimico() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL23FlgTrattClimaChimico().intValue())
				trattamentoAcqua.xsetACFlagTrattH2OCondizChimico(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattH2OCondizChimico(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL24FlgTrattAcsAssente() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL24FlgTrattAcsAssente().intValue())
				trattamentoAcqua.xsetACFlagTrattAcsAssente(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattAcsAssente(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL24FlgTrattAcsFiltr() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL24FlgTrattAcsFiltr().intValue())
				trattamentoAcqua.xsetACFlagTrattAcsFiltraz(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattAcsFiltraz(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL24FlgTrattAcsAddolc() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL24FlgTrattAcsAddolc().intValue())
				trattamentoAcqua.xsetACFlagTrattAcsAddolcim(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattAcsAddolcim(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL24FlgTrattAcsChimico() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL24FlgTrattAcsChimico().intValue())
				trattamentoAcqua.xsetACFlagTrattAcsCondizChimico(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattAcsCondizChimico(MapDto.getXmlBoolean(false));
			}

		}
		rowAllegatoII.setTrattamentoAcqua(trattamentoAcqua);


		// D. CONTROLLO DELL'IMPIANTO
		if (rappTipo1Dto != null)
		{
			ControlloImpianto ci = rowAllegatoII.addNewControlloImpianto();

			
			if(rappTipo1Dto.getDFlgLocaleIntIdoneo() != null)
			{
				ci.xsetADFlagInternoNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo1Dto.getDFlgLocaleIntIdoneo())));
				ci.xsetADFlagInternoNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo1Dto.getDFlgLocaleIntIdoneo())));
				ci.xsetADFlagInternoSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo1Dto.getDFlgLocaleIntIdoneo())));
			}

			if(rappTipo1Dto.getDFlgGenExtIdoneo() != null)
			{
				ci.xsetADFlagEsternoNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo1Dto.getDFlgGenExtIdoneo())));
				ci.xsetADFlagEsternoNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo1Dto.getDFlgGenExtIdoneo())));
				ci.xsetADFlagEsternoSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo1Dto.getDFlgGenExtIdoneo())));
			}
			
			if(rappTipo1Dto.getDFlgApertureLibere() != null)
			{
				ci.xsetADFlagApertureNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo1Dto.getDFlgApertureLibere())));
				ci.xsetADFlagApertureNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo1Dto.getDFlgApertureLibere())));
				ci.xsetADFlagApertureSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo1Dto.getDFlgApertureLibere())));
			}

			if(rappTipo1Dto.getDFlgApertureAdeg() != null)
			{
				ci.xsetADFlagDimensioniNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo1Dto.getDFlgApertureAdeg())));
				ci.xsetADFlagDimensioniNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo1Dto.getDFlgApertureAdeg())));
				ci.xsetADFlagDimensioniSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo1Dto.getDFlgApertureAdeg())));
			}

			if(rappTipo1Dto.getDFlgScaricoIdoneo() != null)
			{
				ci.xsetADFlagCanaleFumoNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo1Dto.getDFlgScaricoIdoneo())));
				ci.xsetADFlagCanaleFumoNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo1Dto.getDFlgScaricoIdoneo())));
				ci.xsetADFlagCanaleFumoSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo1Dto.getDFlgScaricoIdoneo())));
			}


			if(rappTipo1Dto.getDFlgTempAmbFunz() != null)
			{
				ci.xsetADFlagSistRegolazNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo1Dto.getDFlgTempAmbFunz())));
				ci.xsetADFlagSistRegolazNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo1Dto.getDFlgTempAmbFunz())));
				ci.xsetADFlagSistRegolazSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo1Dto.getDFlgTempAmbFunz())));
			}

			if(rappTipo1Dto.getDFlgAssenzaPerdComb() != null)
			{
				ci.xsetADFlagPerditeNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo1Dto.getDFlgAssenzaPerdComb())));
				ci.xsetADFlagPerditeNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo1Dto.getDFlgAssenzaPerdComb())));
				ci.xsetADFlagPerditeSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo1Dto.getDFlgAssenzaPerdComb())));
			}

			if(rappTipo1Dto.getDFlgIdoTenImpInt() != null)
			{
				ci.xsetADFlagTenutaNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo1Dto.getDFlgIdoTenImpInt())));
				ci.xsetADFlagTenutaNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo1Dto.getDFlgIdoTenImpInt())));
				ci.xsetADFlagTenutaSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo1Dto.getDFlgIdoTenImpInt())));
			}
			

		}
		
		log.debug("#### MapDto - Stampo la data controllo: "+dto.getDataControllo());
		
		// E. CONTROLLO E VERIFICA ENERGETICA DEL GRUPPO TERMICO
		rowAllegatoII.setAFDataControllo(ConvertUtil.convertToXmlCalendar(dto.getDataControllo()));
		//campi obbligatori che cambiano a seconda della pagina
		rowAllegatoII.setAEDataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		rowAllegatoII.setAENumGT(ConvertUtil.convertToBigInteger(dto.getProgressivo()));
		//campi che non cambiano per le pagine
		rowAllegatoII.setAECombustibile(dto.getDesCombustibile());
		rowAllegatoII.setAEIDcombustibile(ConvertUtil.convertToString(dto.getIdCombustibile()));
		rowAllegatoII.setAEFabbricante(dto.getDesMarca());
		rowAllegatoII.setAEMatricola(dto.getMatricola());
		rowAllegatoII.setAEModello(dto.getModello());
		rowAllegatoII.setAEPotenzaNomUtile(dto.getPotenzaTermicaKw());
		
		if(Constants.ID_DETT_GT_GRUPPO_TERM_SING.equals(ConvertUtil.convertToString(dto.getFkDettaglioGt())));{
			rowAllegatoII.xsetAEGTsingolo(MapDto.getXmlBoolean(true));
			rowAllegatoII.xsetAEGTModulare(MapDto.getXmlBoolean(false));
			rowAllegatoII.xsetAETupoRadiante(MapDto.getXmlBoolean(false));
			rowAllegatoII.xsetAEGenAriaCalda(MapDto.getXmlBoolean(false));
		}
		if(Constants.ID_DETT_GT_GRUPPO_TERM_MOD.equals(ConvertUtil.convertToString(dto.getFkDettaglioGt()))){
			rowAllegatoII.xsetAEGTModulare(MapDto.getXmlBoolean(true));
			rowAllegatoII.xsetAEGTsingolo(MapDto.getXmlBoolean(false));
			rowAllegatoII.xsetAETupoRadiante(MapDto.getXmlBoolean(false));
			rowAllegatoII.xsetAEGenAriaCalda(MapDto.getXmlBoolean(false));
		}
		if(Constants.ID_DETT_GT_TUBO_RADIANTE.equals(ConvertUtil.convertToString(dto.getFkDettaglioGt()))){
			rowAllegatoII.xsetAETupoRadiante(MapDto.getXmlBoolean(true));
			rowAllegatoII.xsetAEGTModulare(MapDto.getXmlBoolean(false));
			rowAllegatoII.xsetAEGTsingolo(MapDto.getXmlBoolean(false));
			rowAllegatoII.xsetAEGenAriaCalda(MapDto.getXmlBoolean(false));
		}
		if(Constants.ID_DETT_GT_GEN_ARIA_CALDA.equals(ConvertUtil.convertToString(dto.getFkDettaglioGt()))){
			rowAllegatoII.xsetAEGenAriaCalda(MapDto.getXmlBoolean(true));
			rowAllegatoII.xsetAETupoRadiante(MapDto.getXmlBoolean(false));
			rowAllegatoII.xsetAEGTModulare(MapDto.getXmlBoolean(false));
			rowAllegatoII.xsetAEGTsingolo(MapDto.getXmlBoolean(false));
		}
		
		it.csi.sigit.sigitwebn.xml.allegato2.data.ControlloVerificaEnergeticaDocument.ControlloVerificaEnergetica cve = rowAllegatoII.addNewControlloVerificaEnergetica();
		cve.setAEPotenzaFocolare(dettTipo1.getEPotTermFocolKw());
 
		cve.xsetAEFlagClimatizInv(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo1.getEFlgClimaInverno())));
		cve.xsetAEFlagProduzACS(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo1.getEFlgProduzAcs())));

		cve.xsetAEFlagEvacFumiNATU(getXmlBoolean(Constants.FLAG_EVACUAZIONE_FUMI_NATURALE.equals(dettTipo1.getEFlgEvacuFumi())));
		cve.xsetAEFlagEvacFumiFORZ(getXmlBoolean(Constants.FLAG_EVACUAZIONE_FUMI_FORZATA.equals(dettTipo1.getEFlgEvacuFumi())));

		cve.setAEDepressCanaleFumo(dettTipo1.getEDeprCanaleFumoPa());

		if(dettTipo1.getEFlgDisposComando() != null)
		{
			cve.xsetAEFlagDispComandoNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo1.getEFlgDisposComando())));
			cve.xsetAEFlagDispComandoNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo1.getEFlgDisposComando())));
			cve.xsetAEFlagDispComandoSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo1.getEFlgDisposComando())));
		}
		
		if(dettTipo1.getEFlgDisposSicurezza() != null)
		{
			cve.xsetAEFlagDispSicuNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo1.getEFlgDisposSicurezza())));
			cve.xsetAEFlagDispSicuNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo1.getEFlgDisposSicurezza())));
			cve.xsetAEFlagDispSicuSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo1.getEFlgDisposSicurezza())));
		}
		
		
		if(dettTipo1.getEFlgValvolaSicurezza() != null)
		{
			cve.xsetAEFlagValvSicuNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo1.getEFlgValvolaSicurezza())));
			cve.xsetAEFlagValvSicuNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo1.getEFlgValvolaSicurezza())));
			cve.xsetAEFlagValvSicuSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo1.getEFlgValvolaSicurezza())));
		}
		
		if(dettTipo1.getEFlgScambiatoreFumi() != null)
		{
			cve.xsetAEFlagScambiatoreNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo1.getEFlgScambiatoreFumi())));
			cve.xsetAEFlagScambiatoreNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo1.getEFlgScambiatoreFumi())));
			cve.xsetAEFlagScambiatoreSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo1.getEFlgScambiatoreFumi())));
		}
		
		if(dettTipo1.getEFlgRiflusso() != null)
		{
			cve.xsetAEFlagRiflussoNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo1.getEFlgRiflusso())));
			cve.xsetAEFlagRiflussoNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo1.getEFlgRiflusso())));
			cve.xsetAEFlagRiflussoSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo1.getEFlgRiflusso())));
		}
		
		if(dettTipo1.getEFlgUni103891() != null)
		{
			cve.xsetAEFlagRisultatiNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo1.getEFlgUni103891())));
			cve.xsetAEFlagRisultatiNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo1.getEFlgUni103891())));
			cve.xsetAEFlagRisultatiSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo1.getEFlgUni103891())));
		}
	
		if(dettTipo1.getL111AltroRiferimento() != null)
		{
			cve.setAEAltroRifNormativo(dettTipo1.getL111AltroRiferimento());
		}
		
		// F. CHECK-LIST
		CheckList cl = rowAllegatoII.addNewCheckList();
		cl.xsetAFFlagValvole(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo1Dto.getFFlgAdozioneValvoleTerm())));
		cl.xsetAFFlagIsolamento(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo1Dto.getFFlgIsolamenteRete())));
		cl.xsetAFFlagSistTrattACS(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo1Dto.getFFlgAdozSistTrattamH2o())));
		cl.xsetAFFlagSistRegolaz(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo1Dto.getFFlgSostituzSistRegolaz())));

		cl.setAFOsservazioni(allegatoDto.getFOsservazioni());
		cl.setAFPrescrizioni(allegatoDto.getFPrescrizioni());
		cl.setAFRaccomandazioni(allegatoDto.getFRaccomandazioni());
		
		DatiTecnico datiTecnico = rowAllegatoII.addNewDatiTecnico();

		if(allegatoDto.getFFlgPuoFunzionare() != null)
		{
			datiTecnico.xsetAFFlagFunzImpNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getFFlgPuoFunzionare())));
			datiTecnico.xsetAFFlagFunzImpSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getFFlgPuoFunzionare())));
		}
		
		datiTecnico.setAFDataIntervento(ConvertUtil.convertDateToXmlCalendar(allegatoDto.getFInterventoEntro()));

		datiTecnico.setAFOrarioArrivo(allegatoDto.getFOraArrivo());
		datiTecnico.setAFOrarioPartenza(allegatoDto.getFOraPartenza());
		datiTecnico.setAFCognomeTecnico(allegatoDto.getFDenominazTecnico());
		datiTecnico.setAFFirmaTecnico(allegatoDto.getFFirmaTecnico());
		datiTecnico.setAFFirmaResp(allegatoDto.getFFirmaResponsabile());

		return rowAllegatoII;
	}
	
	public static RowAllegatoII mapToDatiAllegato1NowFattorComune(DatiGTCommon allegato1Common, SigitVSk4GtDto dto, SigitTRappTipo1Dto rappTipo1Dto, SigitTDettTipo1Dto dettTipo1)
	{

		SigitTImpiantoDto impianto = allegato1Common.getImpiantoDto();
		List<SigitTUnitaImmobiliareDto> unitaImmobiliareList = allegato1Common.getUnitaImmobiliareList();

		SigitTAllegatoDto allegatoDto = allegato1Common.getAllegatoDto();
		SigitTPersonaGiuridicaDto personaGiuridicaDto = allegato1Common.getPersonaGiuridicaDto();
		SigitTPersonaFisicaDto personaFisicaDto = allegato1Common.getPersonaFisicaDto();
		SigitTTrattH2ODto dettaglioTrattAcqua = allegato1Common.getDettaglioTrattAcquaDto();
		int ruolo = allegato1Common.getRuolo();
		boolean isTerzoResp = allegato1Common.isTerzoResp();
		
		RowAllegatoII rowAllegatoII = RowAllegatoII.Factory.newInstance();
		
		rowAllegatoII.setCodiceCatasto(ConvertUtil.convertToString(dto.getCodiceImpianto()));
		
		// A. DATI IDENTIFICATIVI
		
		List<SigitTUnitaImmobiliareDto> unitaImmobSecondarie = new ArrayList<SigitTUnitaImmobiliareDto>();
		SigitTUnitaImmobiliareDto unitaImmobPrincipale = new SigitTUnitaImmobiliareDto();
		
		for (SigitTUnitaImmobiliareDto ui : unitaImmobiliareList) {
			if(ConvertUtil.convertToBooleanAllways(ui.getFlgPrincipale()))
				unitaImmobPrincipale = ui;
			else
				unitaImmobSecondarie.add(ui);
		}
		
		rowAllegatoII.setAACivico(unitaImmobPrincipale.getCivico());
		if(impianto!=null)
		{
			rowAllegatoII.setAAComune(impianto.getDenominazioneComune());
			rowAllegatoII.setAAProv(impianto.getSiglaProvincia());
		}
		rowAllegatoII.setAAIndirizzo(GenericUtil.isNotNullOrEmpty(unitaImmobPrincipale.getIndirizzoSitad()) ? 
				unitaImmobPrincipale.getIndirizzoSitad() : unitaImmobPrincipale.getIndirizzoNonTrovato());
		rowAllegatoII.setAAInterno(unitaImmobPrincipale.getInterno());
		rowAllegatoII.setAAPalazzo(unitaImmobPrincipale.getPalazzo());
		rowAllegatoII.setAAScala(unitaImmobPrincipale.getScala());
		
		it.csi.sigit.sigitwebn.xml.allegato2.data.RowCatastoDocument.RowCatasto catastoPrincipale = it.csi.sigit.sigitwebn.xml.allegato2.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
		catastoPrincipale.setAAFoglio(unitaImmobPrincipale.getFoglio());
		catastoPrincipale.setAAParticella(unitaImmobPrincipale.getParticella());
		catastoPrincipale.setAAPdr(unitaImmobPrincipale.getPdrGas());
		catastoPrincipale.setAAPod(unitaImmobPrincipale.getPodElettrico());
		catastoPrincipale.setAASezione(unitaImmobPrincipale.getSezione());
		catastoPrincipale.setAASub(unitaImmobPrincipale.getSubalterno());

		List<it.csi.sigit.sigitwebn.xml.allegato2.data.RowCatastoDocument.RowCatasto> rowCatastoList = rowAllegatoII.addNewSezCatasto().getRowCatastoList();
		rowCatastoList.add(catastoPrincipale);
		for (SigitTUnitaImmobiliareDto umSec : unitaImmobSecondarie) 
		{
			it.csi.sigit.sigitwebn.xml.allegato2.data.RowCatastoDocument.RowCatasto catastoSec = it.csi.sigit.sigitwebn.xml.allegato2.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
			catastoSec.setAAFoglio(umSec.getFoglio());
			catastoSec.setAAParticella(umSec.getParticella());
			catastoSec.setAAPdr(umSec.getPdrGas());
			catastoSec.setAAPod(umSec.getPodElettrico());
			catastoSec.setAASezione(umSec.getSezione());
			catastoSec.setAASub(umSec.getSubalterno());
			rowCatastoList.add(catastoSec);
		}
		
		if(personaGiuridicaDto!=null){
			rowAllegatoII.setAA2RagSociale(personaGiuridicaDto.getDenominazione());
			rowAllegatoII.setAA2Piva(personaGiuridicaDto.getCodiceFiscale());

			rowAllegatoII.setAA2Cognome(null);
			rowAllegatoII.setAA2Nome(null);
			rowAllegatoII.setAA2Cf(null);
			
			if (ConvertUtil.convertToBooleanAllways(personaGiuridicaDto.getFlgIndirizzoEstero()))
			{
				rowAllegatoII.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoEstero());
				rowAllegatoII.setAA2Comune(GenericUtil.getStringValid(personaGiuridicaDto.getCittaEstero()) + " ("+GenericUtil.getStringValid(personaGiuridicaDto.getStatoEstero())+")");
				rowAllegatoII.setAA2Prov(null);
				
				
			}
			else
			{
				rowAllegatoII.setAA2Prov(personaGiuridicaDto.getSiglaProv());
				rowAllegatoII.setAA2Comune(personaGiuridicaDto.getComune());
				if(personaGiuridicaDto.getIndirizzoSitad()!=null){
					rowAllegatoII.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoSitad());
				}else{
					rowAllegatoII.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoNonTrovato());
				}
			}

			// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
			rowAllegatoII.setAA2Civico(personaGiuridicaDto.getCivico());

		}else{
			//vuol dire che e'  persona fisica
			rowAllegatoII.setAA2Cognome(personaFisicaDto.getCognome());
			rowAllegatoII.setAA2Nome(personaFisicaDto.getNome());
			rowAllegatoII.setAA2Cf(personaFisicaDto.getCodiceFiscale());
			
			rowAllegatoII.setAA2RagSociale(null);
			rowAllegatoII.setAA2Piva(null);
			
			if (ConvertUtil.convertToBooleanAllways(personaFisicaDto.getFlgIndirizzoEstero()))
			{
				rowAllegatoII.setAA2Indirizzo(personaFisicaDto.getIndirizzoEstero());
				rowAllegatoII.setAA2Comune(GenericUtil.getStringValid(personaFisicaDto.getCittaEstero()) + " ("+GenericUtil.getStringValid(personaFisicaDto.getStatoEstero())+")");
				rowAllegatoII.setAA2Prov(null);
			}
			else
			{
				rowAllegatoII.setAA2Prov(personaFisicaDto.getSiglaProv());
				rowAllegatoII.setAA2Comune(personaFisicaDto.getComune());
	
				if(personaFisicaDto.getIndirizzoSitad()!=null){
					rowAllegatoII.setAA2Indirizzo(personaFisicaDto.getIndirizzoSitad());
				}else{
					rowAllegatoII.setAA2Indirizzo(personaFisicaDto.getIndirizzoNonTrovato());
				}
			}
			// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
			rowAllegatoII.setAA2Civico(personaFisicaDto.getCivico());
		}
		
		//per il titolo responsabile si hanno dei radio button da gestire
		if(isTerzoResp){
			rowAllegatoII.xsetAA2FlagTerzoResp(getXmlBoolean(true));
			
			rowAllegatoII.xsetAA2FlagProprietario(MapDto.getXmlBoolean(false));
			rowAllegatoII.xsetAA2FlagOccupante(MapDto.getXmlBoolean(false));
			rowAllegatoII.xsetAA2FlagAmministr(MapDto.getXmlBoolean(false));

		} 
		else
		{
			log.debug("Constants.ID_RUOLO_PROPRIETARIO: "+Constants.ID_RUOLO_PROPRIETARIO);
			log.debug("Constants.ID_RUOLO_RESPONSABILE_IMPRESA_PROPRIETARIO: "+Constants.ID_RUOLO_RESPONSABILE_IMPRESA_PROPRIETARIO);
			log.debug("ruolo: "+ruolo);
			
			rowAllegatoII.xsetAA2FlagTerzoResp(getXmlBoolean(false));

			if((Constants.ID_RUOLO_PROPRIETARIO == ruolo)
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_PROPRIETARIO ==  ruolo)){
				
				log.debug("sono dentro!!!!!!!!!!!!!");
				rowAllegatoII.xsetAA2FlagProprietario(MapDto.getXmlBoolean(true));
			}
			if((Constants.ID_RUOLO_OCCUPANTE == ruolo)
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_OCCUPANTE ==  ruolo)){
				rowAllegatoII.xsetAA2FlagOccupante(MapDto.getXmlBoolean(true));
			}
			if((Constants.ID_RUOLO_AMMINISTRATORE == ruolo)
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_AMMINISTRATORE ==  ruolo)){
				rowAllegatoII.xsetAA2FlagAmministr(MapDto.getXmlBoolean(true));
			}
		}
		
		// B. DOCUMENTAZIONE TECNICA A CORREDO
		DatiIdentificativi datiIdentificativi = rowAllegatoII.addNewDatiIdentificativi(); 
		datiIdentificativi.setAAPotenzaTermicaNomTotMax(allegatoDto.getAPotenzaTermicaNominaleMax());

		DocumentazioneTecnica documentazioneTecnica = rowAllegatoII.addNewDocumentazioneTecnica();

		if(allegatoDto.getBFlgDichiarConform() != null)
		{
			documentazioneTecnica.xsetABFlagDichiarazConfNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getBFlgDichiarConform())));
			documentazioneTecnica.xsetABFlagDichiarazConfSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getBFlgDichiarConform())));
		}

		if(allegatoDto.getBFlgLibImp() != null)
		{
			documentazioneTecnica.xsetABFlagLibrettoImpNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getBFlgLibImp())));
			documentazioneTecnica.xsetABFlagLibrettoImpSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getBFlgLibImp())));
		}

		if(allegatoDto.getBFlgLibrettoUso() != null)
		{
			documentazioneTecnica.xsetABFlagManutGenNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getBFlgLibrettoUso())));
			documentazioneTecnica.xsetABFlagManutGenSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getBFlgLibrettoUso())));
		}

		if(allegatoDto.getBFlgLibCompl() != null)
		{
			documentazioneTecnica.xsetABFlagLibrettoCompNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getBFlgLibCompl())));
			documentazioneTecnica.xsetABFlagLibrettoCompSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getBFlgLibCompl())));
		}

		//SEZIONE C. Trattamento dell'acqua
		TrattamentoAcqua trattamentoAcqua = TrattamentoAcqua.Factory.newInstance();
		
		if(rappTipo1Dto.getCFlgTrattClimaNonRich() !=null && Constants.SI_1 == rappTipo1Dto.getCFlgTrattClimaNonRich().intValue())
			trattamentoAcqua.xsetACFlagTrattH2ONR(MapDto.getXmlBoolean(true));
		else{
			trattamentoAcqua.xsetACFlagTrattH2ONR(MapDto.getXmlBoolean(false));
		}

		if(rappTipo1Dto.getCFlgTrattAcsNonRichiesto() !=null && Constants.SI_1 == rappTipo1Dto.getCFlgTrattAcsNonRichiesto().intValue())
			trattamentoAcqua.xsetACFlagTrattAcsNR(MapDto.getXmlBoolean(true));
		else{
			trattamentoAcqua.xsetACFlagTrattAcsNR(MapDto.getXmlBoolean(false));
		}

		if(dettaglioTrattAcqua != null){
			log.debug("FRAAAAAAAAAAA --- > trattamento acqua ");

			if (log.isDebugEnabled())
				GenericUtil.stampa(dettaglioTrattAcqua, true, 3);

			trattamentoAcqua.setACDurezzaTotH2O(dettaglioTrattAcqua.getL22DurezzaH2oFr());



			if(dettaglioTrattAcqua.getL23FlgTrattClimaAssente() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL23FlgTrattClimaAssente().intValue())
				trattamentoAcqua.xsetACFlagTrattH2OAssente(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattH2OAssente(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL23FlgTrattClimaFiltr() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL23FlgTrattClimaFiltr().intValue())
				trattamentoAcqua.xsetACFlagTrattH2OFiltraz(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattH2OFiltraz(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL23FlgTrattClimaAddolc() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL23FlgTrattClimaAddolc().intValue())
				trattamentoAcqua.xsetACFlagTrattH2OAddolcim(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattH2OAddolcim(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL23FlgTrattClimaChimico() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL23FlgTrattClimaChimico().intValue())
				trattamentoAcqua.xsetACFlagTrattH2OCondizChimico(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattH2OCondizChimico(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL24FlgTrattAcsAssente() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL24FlgTrattAcsAssente().intValue())
				trattamentoAcqua.xsetACFlagTrattAcsAssente(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattAcsAssente(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL24FlgTrattAcsFiltr() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL24FlgTrattAcsFiltr().intValue())
				trattamentoAcqua.xsetACFlagTrattAcsFiltraz(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattAcsFiltraz(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL24FlgTrattAcsAddolc() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL24FlgTrattAcsAddolc().intValue())
				trattamentoAcqua.xsetACFlagTrattAcsAddolcim(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattAcsAddolcim(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL24FlgTrattAcsChimico() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL24FlgTrattAcsChimico().intValue())
				trattamentoAcqua.xsetACFlagTrattAcsCondizChimico(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattAcsCondizChimico(MapDto.getXmlBoolean(false));
			}

		}
		rowAllegatoII.setTrattamentoAcqua(trattamentoAcqua);


		// D. CONTROLLO DELL'IMPIANTO
		if (rappTipo1Dto != null)
		{
			ControlloImpianto ci = rowAllegatoII.addNewControlloImpianto();

			
			if(rappTipo1Dto.getDFlgLocaleIntIdoneo() != null)
			{
				ci.xsetADFlagInternoNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo1Dto.getDFlgLocaleIntIdoneo())));
				ci.xsetADFlagInternoNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo1Dto.getDFlgLocaleIntIdoneo())));
				ci.xsetADFlagInternoSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo1Dto.getDFlgLocaleIntIdoneo())));
			}

			if(rappTipo1Dto.getDFlgGenExtIdoneo() != null)
			{
				ci.xsetADFlagEsternoNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo1Dto.getDFlgGenExtIdoneo())));
				ci.xsetADFlagEsternoNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo1Dto.getDFlgGenExtIdoneo())));
				ci.xsetADFlagEsternoSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo1Dto.getDFlgGenExtIdoneo())));
			}
			
			if(rappTipo1Dto.getDFlgApertureLibere() != null)
			{
				ci.xsetADFlagApertureNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo1Dto.getDFlgApertureLibere())));
				ci.xsetADFlagApertureNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo1Dto.getDFlgApertureLibere())));
				ci.xsetADFlagApertureSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo1Dto.getDFlgApertureLibere())));
			}

			if(rappTipo1Dto.getDFlgApertureAdeg() != null)
			{
				ci.xsetADFlagDimensioniNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo1Dto.getDFlgApertureAdeg())));
				ci.xsetADFlagDimensioniNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo1Dto.getDFlgApertureAdeg())));
				ci.xsetADFlagDimensioniSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo1Dto.getDFlgApertureAdeg())));
			}

			if(rappTipo1Dto.getDFlgScaricoIdoneo() != null)
			{
				ci.xsetADFlagCanaleFumoNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo1Dto.getDFlgScaricoIdoneo())));
				ci.xsetADFlagCanaleFumoNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo1Dto.getDFlgScaricoIdoneo())));
				ci.xsetADFlagCanaleFumoSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo1Dto.getDFlgScaricoIdoneo())));
			}


			if(rappTipo1Dto.getDFlgTempAmbFunz() != null)
			{
				ci.xsetADFlagSistRegolazNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo1Dto.getDFlgTempAmbFunz())));
				ci.xsetADFlagSistRegolazNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo1Dto.getDFlgTempAmbFunz())));
				ci.xsetADFlagSistRegolazSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo1Dto.getDFlgTempAmbFunz())));
			}

			if(rappTipo1Dto.getDFlgAssenzaPerdComb() != null)
			{
				ci.xsetADFlagPerditeNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo1Dto.getDFlgAssenzaPerdComb())));
				ci.xsetADFlagPerditeNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo1Dto.getDFlgAssenzaPerdComb())));
				ci.xsetADFlagPerditeSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo1Dto.getDFlgAssenzaPerdComb())));
			}

			if(rappTipo1Dto.getDFlgIdoTenImpInt() != null)
			{
				ci.xsetADFlagTenutaNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo1Dto.getDFlgIdoTenImpInt())));
				ci.xsetADFlagTenutaNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo1Dto.getDFlgIdoTenImpInt())));
				ci.xsetADFlagTenutaSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo1Dto.getDFlgIdoTenImpInt())));
			}
			

		}
		
		log.debug("#### MapDto - Stampo la data controllo: "+dto.getDataControllo());
		
		// E. CONTROLLO E VERIFICA ENERGETICA DEL GRUPPO TERMICO
		rowAllegatoII.setAFDataControllo(ConvertUtil.convertToXmlCalendar(dto.getDataControllo()));
		//campi obbligatori che cambiano a seconda della pagina
		rowAllegatoII.setAEDataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		rowAllegatoII.setAENumGT(ConvertUtil.convertToBigInteger(dto.getProgressivo()));
		//campi che non cambiano per le pagine
		rowAllegatoII.setAECombustibile(dto.getDesCombustibile());
		rowAllegatoII.setAEIDcombustibile(ConvertUtil.convertToString(dto.getIdCombustibile()));
		rowAllegatoII.setAEFabbricante(dto.getDesMarca());
		rowAllegatoII.setAEMatricola(dto.getMatricola());
		rowAllegatoII.setAEModello(dto.getModello());
		rowAllegatoII.setAEPotenzaNomUtile(dto.getPotenzaTermicaKw());
		
		if(Constants.ID_DETT_GT_GRUPPO_TERM_SING.equals(ConvertUtil.convertToString(dto.getFkDettaglioGt())));{
			rowAllegatoII.xsetAEGTsingolo(MapDto.getXmlBoolean(true));
			rowAllegatoII.xsetAEGTModulare(MapDto.getXmlBoolean(false));
			rowAllegatoII.xsetAETupoRadiante(MapDto.getXmlBoolean(false));
			rowAllegatoII.xsetAEGenAriaCalda(MapDto.getXmlBoolean(false));
		}
		if(Constants.ID_DETT_GT_GRUPPO_TERM_MOD.equals(ConvertUtil.convertToString(dto.getFkDettaglioGt()))){
			rowAllegatoII.xsetAEGTModulare(MapDto.getXmlBoolean(true));
			rowAllegatoII.xsetAEGTsingolo(MapDto.getXmlBoolean(false));
			rowAllegatoII.xsetAETupoRadiante(MapDto.getXmlBoolean(false));
			rowAllegatoII.xsetAEGenAriaCalda(MapDto.getXmlBoolean(false));
		}
		if(Constants.ID_DETT_GT_TUBO_RADIANTE.equals(ConvertUtil.convertToString(dto.getFkDettaglioGt()))){
			rowAllegatoII.xsetAETupoRadiante(MapDto.getXmlBoolean(true));
			rowAllegatoII.xsetAEGTModulare(MapDto.getXmlBoolean(false));
			rowAllegatoII.xsetAEGTsingolo(MapDto.getXmlBoolean(false));
			rowAllegatoII.xsetAEGenAriaCalda(MapDto.getXmlBoolean(false));
		}
		if(Constants.ID_DETT_GT_GEN_ARIA_CALDA.equals(ConvertUtil.convertToString(dto.getFkDettaglioGt()))){
			rowAllegatoII.xsetAEGenAriaCalda(MapDto.getXmlBoolean(true));
			rowAllegatoII.xsetAETupoRadiante(MapDto.getXmlBoolean(false));
			rowAllegatoII.xsetAEGTModulare(MapDto.getXmlBoolean(false));
			rowAllegatoII.xsetAEGTsingolo(MapDto.getXmlBoolean(false));
		}
		
		it.csi.sigit.sigitwebn.xml.allegato2.data.ControlloVerificaEnergeticaDocument.ControlloVerificaEnergetica cve = rowAllegatoII.addNewControlloVerificaEnergetica();
		cve.setAEPotenzaFocolare(dettTipo1.getEPotTermFocolKw());
 
		cve.xsetAEFlagClimatizInv(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo1.getEFlgClimaInverno())));
		cve.xsetAEFlagProduzACS(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo1.getEFlgProduzAcs())));

		cve.xsetAEFlagEvacFumiNATU(getXmlBoolean(Constants.FLAG_EVACUAZIONE_FUMI_NATURALE.equals(dettTipo1.getEFlgEvacuFumi())));
		cve.xsetAEFlagEvacFumiFORZ(getXmlBoolean(Constants.FLAG_EVACUAZIONE_FUMI_FORZATA.equals(dettTipo1.getEFlgEvacuFumi())));

		cve.setAEDepressCanaleFumo(dettTipo1.getEDeprCanaleFumoPa());

		if(dettTipo1.getEFlgDisposComando() != null)
		{
			cve.xsetAEFlagDispComandoNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo1.getEFlgDisposComando())));
			cve.xsetAEFlagDispComandoNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo1.getEFlgDisposComando())));
			cve.xsetAEFlagDispComandoSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo1.getEFlgDisposComando())));
		}
		
		if(dettTipo1.getEFlgDisposSicurezza() != null)
		{
			cve.xsetAEFlagDispSicuNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo1.getEFlgDisposSicurezza())));
			cve.xsetAEFlagDispSicuNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo1.getEFlgDisposSicurezza())));
			cve.xsetAEFlagDispSicuSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo1.getEFlgDisposSicurezza())));
		}
		
		
		if(dettTipo1.getEFlgValvolaSicurezza() != null)
		{
			cve.xsetAEFlagValvSicuNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo1.getEFlgValvolaSicurezza())));
			cve.xsetAEFlagValvSicuNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo1.getEFlgValvolaSicurezza())));
			cve.xsetAEFlagValvSicuSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo1.getEFlgValvolaSicurezza())));
		}
		
		if(dettTipo1.getEFlgScambiatoreFumi() != null)
		{
			cve.xsetAEFlagScambiatoreNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo1.getEFlgScambiatoreFumi())));
			cve.xsetAEFlagScambiatoreNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo1.getEFlgScambiatoreFumi())));
			cve.xsetAEFlagScambiatoreSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo1.getEFlgScambiatoreFumi())));
		}
		
		if(dettTipo1.getEFlgRiflusso() != null)
		{
			cve.xsetAEFlagRiflussoNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo1.getEFlgRiflusso())));
			cve.xsetAEFlagRiflussoNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo1.getEFlgRiflusso())));
			cve.xsetAEFlagRiflussoSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo1.getEFlgRiflusso())));
		}
		
		if(dettTipo1.getEFlgUni103891() != null)
		{
			cve.xsetAEFlagRisultatiNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo1.getEFlgUni103891())));
			cve.xsetAEFlagRisultatiNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo1.getEFlgUni103891())));
			cve.xsetAEFlagRisultatiSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo1.getEFlgUni103891())));
		}
	
		if(dettTipo1.getL111AltroRiferimento() != null)
		{
			cve.setAEAltroRifNormativo(dettTipo1.getL111AltroRiferimento());
		}
		
		// F. CHECK-LIST
		CheckList cl = rowAllegatoII.addNewCheckList();
		cl.xsetAFFlagValvole(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo1Dto.getFFlgAdozioneValvoleTerm())));
		cl.xsetAFFlagIsolamento(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo1Dto.getFFlgIsolamenteRete())));
		cl.xsetAFFlagSistTrattACS(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo1Dto.getFFlgAdozSistTrattamH2o())));
		cl.xsetAFFlagSistRegolaz(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo1Dto.getFFlgSostituzSistRegolaz())));

		cl.setAFOsservazioni(allegatoDto.getFOsservazioni());
		cl.setAFPrescrizioni(allegatoDto.getFPrescrizioni());
		cl.setAFRaccomandazioni(allegatoDto.getFRaccomandazioni());
		
		DatiTecnico datiTecnico = rowAllegatoII.addNewDatiTecnico();

		if(allegatoDto.getFFlgPuoFunzionare() != null)
		{
			datiTecnico.xsetAFFlagFunzImpNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getFFlgPuoFunzionare())));
			datiTecnico.xsetAFFlagFunzImpSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getFFlgPuoFunzionare())));
		}
		
		datiTecnico.setAFDataIntervento(ConvertUtil.convertDateToXmlCalendar(allegatoDto.getFInterventoEntro()));

		datiTecnico.setAFOrarioArrivo(allegatoDto.getFOraArrivo());
		datiTecnico.setAFOrarioPartenza(allegatoDto.getFOraPartenza());
		datiTecnico.setAFCognomeTecnico(allegatoDto.getFDenominazTecnico());
		datiTecnico.setAFFirmaTecnico(allegatoDto.getFFirmaTecnico());
		datiTecnico.setAFFirmaResp(allegatoDto.getFFirmaResponsabile());

		return rowAllegatoII;
	}
	
	public static RowAllegatoII mapToDatiAllegato1RowFumiNow(RowAllegatoII rowAllegatoII,
			List<SigitTDettTipo1Dto> tDettTipo1List)
	{
		
		
		//devo creare tante istanze di RowFumi quanti sono gli n_moduli(pu arrivare null, 0, 1,2,...)
		//log.debug("FRAAAAAAAAAAA --- > "+dto.getNModuli());
		RowFumi rowFumi = null;
		
		//TabFumi tabFumi = rowAllegatoII.addNewTabFumi();
		List<RowFumi> listaRowFumi = rowAllegatoII.addNewTabFumi().getRowFumiList();
		if(tDettTipo1List == null || tDettTipo1List.size() == 0){
		
		/*
			log.debug("FRAAAAAAAAAAA --- > nel null oppure se  zero");
			
			//istanzio la lista di RowFumi
			if(listaRowFumi!=null && listaRowFumi.size()>0){
				listaRowFumi.clear();
			}
			*/
			rowFumi = RowFumi.Factory.newInstance();
			rowFumi.setAETempFumi(null);
			rowFumi.setAETempAria(null);
			rowFumi.setAEO2(null);
			rowFumi.setAECO2(null);
			rowFumi.setAEBacharach1(null);
			rowFumi.setAEBacharach2(null);
			rowFumi.setAEBacharach3(null);
			rowFumi.setAECOcorretto(null);
			rowFumi.setAERendimCombu(null);
			rowFumi.setAERendimentoLegge(null);
			rowFumi.setAENox(null);
			//da valorizzare di default
			rowFumi.setAEModuloTermico(new BigDecimal("1"));
			/*
			rowFumi.setAEPortataCombu(null);
			rowFumi.setAEValorePortata(null);
			rowFumi.setAECOfumiSecchi(null);
			rowFumi.setAERispettoIndBacharach(null);
			rowFumi.setAEMinimo(null);
			*/
			listaRowFumi.add(rowFumi);
			log.debug("FRAAAAAAAAAAA --- > nel null oppure se  zero dimensione lista : "+listaRowFumi.size());
		}else{
			for (SigitTDettTipo1Dto sigitTDettTipo1Dto : tDettTipo1List) {
//			int count = dto.getNModuli().intValue();
//			log.debug("FRAAAAAAAAAAA ---  count > "+count);
//			//istanzio la lista di RowFumi
//			List<RowFumi> listaRowFumi = rowAllegatoII.addNewTabFumi().getRowFumiList();
//			if(listaRowFumi!=null && listaRowFumi.size()>0){
//				log.debug("FRAAAAAAAAAAA ---  sta pulendo ");
//				listaRowFumi.clear();
//			}
//			
//			log.debug("FRAAAAAAAAAAA --- > ADESSO dimensione listaRowFumi: "+listaRowFumi.size());
//			for(int i = 1; i<=count; i++){
				//log.debug("FRAAAAAAAAAAAAAAA NEL FOR i: "+i);
				rowFumi = RowFumi.Factory.newInstance();
				rowFumi.setAETempFumi(sigitTDettTipo1Dto.getETempFumiC());
				rowFumi.setAETempAria(sigitTDettTipo1Dto.getETempAriaC());
				rowFumi.setAEO2(sigitTDettTipo1Dto.getEO2Perc());
				rowFumi.setAECO2(sigitTDettTipo1Dto.getECo2Perc());
				rowFumi.setAEBacharach1(sigitTDettTipo1Dto.getEBacharachMin());
				rowFumi.setAEBacharach2(sigitTDettTipo1Dto.getEBacharachMed());
				rowFumi.setAEBacharach3(sigitTDettTipo1Dto.getEBacharachMax());
				rowFumi.setAECOcorretto(sigitTDettTipo1Dto.getECoCorrettoPpm());
				rowFumi.setAERendimCombu(sigitTDettTipo1Dto.getERendCombPerc());
				rowFumi.setAERendimentoLegge(sigitTDettTipo1Dto.getERendMinLeggePerc());
				rowFumi.setAENox(sigitTDettTipo1Dto.getENoxMgKwh());
				rowFumi.setAEModuloTermico(ConvertUtil.convertToBigDecimal(sigitTDettTipo1Dto.getENModuloTermico()));
				/*
				rowFumi.setAEPortataCombu(sigitTDettTipo1Dto.getL111PortataCombustibileUm());
				rowFumi.setAEValorePortata(sigitTDettTipo1Dto.getL111PortataCombustibile());
				rowFumi.setAECOfumiSecchi(sigitTDettTipo1Dto.getL111CoNoAriaPpm());
				rowFumi.setAERispettoIndBacharach(ConvertUtil.convertToString(sigitTDettTipo1Dto.getL111FlgRispettaBacharach()));
				rowFumi.setAEMinimo(ConvertUtil.convertToString(sigitTDettTipo1Dto.getL111FlgRendMagRendMin()));
				*/
				listaRowFumi.add(rowFumi);
				
				log.debug("FRAAAAAAAAAAAAAAA NEL FOR DIMENSIONE: "+listaRowFumi.size());
			}
		}
	
		//a questo punto setto l'oggetto che si ripete dentro l'arrayList del modulo
		//listaRow.add(rowAllegatoII);
		
		return rowAllegatoII;
	}
	
	public static RowAllegatoIII mapToDatiAllegato2Now(SigitVSk4GfDto dto, SigitTAllegatoDto allegatoDto, SigitTRappTipo2Dto rappTipo2Dto, SigitTDettTipo2Dto dettTipo2,
			SigitTPersonaGiuridicaDto personaGiuridicaDto, SigitTPersonaFisicaDto personaFisicaDto, String ruolo, boolean isTerzoResp,
			List<SigitTUnitaImmobiliareDto> listaUnitaImmobiliare, SigitTImpiantoDto impianto, SigitTTrattH2ODto dettaglioTrattAcqua)
	{
		RowAllegatoIII rowAllegatoIII = RowAllegatoIII.Factory.newInstance();
		
		rowAllegatoIII.setCodiceCatasto(ConvertUtil.convertToString(dto.getCodiceImpianto()));
		
		// A. DATI IDENTIFICATIVI
		
		List<SigitTUnitaImmobiliareDto> unitaImmobSecondarie = new ArrayList<SigitTUnitaImmobiliareDto>();
		SigitTUnitaImmobiliareDto unitaImmobPrincipale = new SigitTUnitaImmobiliareDto();
		
		for (SigitTUnitaImmobiliareDto ui : listaUnitaImmobiliare) {
			if(ConvertUtil.convertToBooleanAllways(ui.getFlgPrincipale()))
				unitaImmobPrincipale = ui;
			else
				unitaImmobSecondarie.add(ui);
		}
		
		rowAllegatoIII.setAACivico(unitaImmobPrincipale.getCivico());
		if(impianto!=null)
		{
			rowAllegatoIII.setAAComune(impianto.getDenominazioneComune());
			rowAllegatoIII.setAAProv(impianto.getSiglaProvincia());
		}
		rowAllegatoIII.setAAIndirizzo(GenericUtil.isNotNullOrEmpty(unitaImmobPrincipale.getIndirizzoSitad()) ? 
				unitaImmobPrincipale.getIndirizzoSitad() : unitaImmobPrincipale.getIndirizzoNonTrovato());
		rowAllegatoIII.setAAInterno(unitaImmobPrincipale.getInterno());
		rowAllegatoIII.setAAPalazzo(unitaImmobPrincipale.getPalazzo());
		rowAllegatoIII.setAAScala(unitaImmobPrincipale.getScala());
		
		it.csi.sigit.sigitwebn.xml.allegato3.data.RowCatastoDocument.RowCatasto catastoPrincipale = it.csi.sigit.sigitwebn.xml.allegato3.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
		catastoPrincipale.setAAFoglio(unitaImmobPrincipale.getFoglio());
		catastoPrincipale.setAAParticella(unitaImmobPrincipale.getParticella());
		catastoPrincipale.setAAPdr(unitaImmobPrincipale.getPdrGas());
		catastoPrincipale.setAAPod(unitaImmobPrincipale.getPodElettrico());
		catastoPrincipale.setAASezione(unitaImmobPrincipale.getSezione());
		catastoPrincipale.setAASub(unitaImmobPrincipale.getSubalterno());

		List<it.csi.sigit.sigitwebn.xml.allegato3.data.RowCatastoDocument.RowCatasto> rowCatastoList = rowAllegatoIII.addNewSezCatasto().getRowCatastoList();
		rowCatastoList.add(catastoPrincipale);
		for (SigitTUnitaImmobiliareDto umSec : unitaImmobSecondarie) 
		{
			it.csi.sigit.sigitwebn.xml.allegato3.data.RowCatastoDocument.RowCatasto catastoSec = it.csi.sigit.sigitwebn.xml.allegato3.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
			catastoSec.setAAFoglio(umSec.getFoglio());
			catastoSec.setAAParticella(umSec.getParticella());
			catastoSec.setAAPdr(umSec.getPdrGas());
			catastoSec.setAAPod(umSec.getPodElettrico());
			catastoSec.setAASezione(umSec.getSezione());
			catastoSec.setAASub(umSec.getSubalterno());
			rowCatastoList.add(catastoSec);
		}
		
		if(personaGiuridicaDto!=null){
			rowAllegatoIII.setAA2RagSociale(personaGiuridicaDto.getDenominazione());
			rowAllegatoIII.setAA2Piva(personaGiuridicaDto.getCodiceFiscale());

			rowAllegatoIII.setAA2Cognome(null);
			rowAllegatoIII.setAA2Nome(null);
			rowAllegatoIII.setAA2Cf(null);
			
			if (ConvertUtil.convertToBooleanAllways(personaGiuridicaDto.getFlgIndirizzoEstero()))
			{
				rowAllegatoIII.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoEstero());
				rowAllegatoIII.setAA2Comune(GenericUtil.getStringValid(personaGiuridicaDto.getCittaEstero()) + " ("+GenericUtil.getStringValid(personaGiuridicaDto.getStatoEstero())+")");
				rowAllegatoIII.setAA2Prov(null);
				
				
			}
			else
			{
				rowAllegatoIII.setAA2Prov(personaGiuridicaDto.getSiglaProv());
				rowAllegatoIII.setAA2Comune(personaGiuridicaDto.getComune());
				if(personaGiuridicaDto.getIndirizzoSitad()!=null){
					rowAllegatoIII.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoSitad());
				}else{
					rowAllegatoIII.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoNonTrovato());
				}
			}

			// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
			rowAllegatoIII.setAA2Civico(personaGiuridicaDto.getCivico());

		}else{
			//vuol dire che e'  persona fisica
			rowAllegatoIII.setAA2Cognome(personaFisicaDto.getCognome());
			rowAllegatoIII.setAA2Nome(personaFisicaDto.getNome());
			rowAllegatoIII.setAA2Cf(personaFisicaDto.getCodiceFiscale());
			
			rowAllegatoIII.setAA2RagSociale(null);
			rowAllegatoIII.setAA2Piva(null);
			
			if (ConvertUtil.convertToBooleanAllways(personaFisicaDto.getFlgIndirizzoEstero()))
			{
				rowAllegatoIII.setAA2Indirizzo(personaFisicaDto.getIndirizzoEstero());
				rowAllegatoIII.setAA2Comune(GenericUtil.getStringValid(personaFisicaDto.getCittaEstero()) + " ("+GenericUtil.getStringValid(personaFisicaDto.getStatoEstero())+")");
				rowAllegatoIII.setAA2Prov(null);
			}
			else
			{
				rowAllegatoIII.setAA2Prov(personaFisicaDto.getSiglaProv());
				rowAllegatoIII.setAA2Comune(personaFisicaDto.getComune());
	
				if(personaFisicaDto.getIndirizzoSitad()!=null){
					rowAllegatoIII.setAA2Indirizzo(personaFisicaDto.getIndirizzoSitad());
				}else{
					rowAllegatoIII.setAA2Indirizzo(personaFisicaDto.getIndirizzoNonTrovato());
				}
			}
			// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
			rowAllegatoIII.setAA2Civico(personaFisicaDto.getCivico());
		}
		
		//per il titolo responsabile si hanno dei radio button da gestire
		if(isTerzoResp){
			rowAllegatoIII.xsetAA2FlagTerzoResp(getXmlBoolean(true));
			
			rowAllegatoIII.xsetAA2FlagProprietario(MapDto.getXmlBoolean(false));
			rowAllegatoIII.xsetAA2FlagOccupante(MapDto.getXmlBoolean(false));
			rowAllegatoIII.xsetAA2FlagAmministr(MapDto.getXmlBoolean(false));

		} 
		else
		{
			log.debug("Constants.ID_RUOLO_PROPRIETARIO: "+Constants.ID_RUOLO_PROPRIETARIO);
			log.debug("Constants.ID_RUOLO_RESPONSABILE_IMPRESA_PROPRIETARIO: "+Constants.ID_RUOLO_RESPONSABILE_IMPRESA_PROPRIETARIO);
			log.debug("ruolo: "+ruolo);
			
			rowAllegatoIII.xsetAA2FlagTerzoResp(getXmlBoolean(false));

			if((Constants.ID_RUOLO_PROPRIETARIO == ConvertUtil.convertToInteger(ruolo))
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_PROPRIETARIO ==  ConvertUtil.convertToInteger(ruolo))){
				
				log.debug("sono dentro!!!!!!!!!!!!!");
				rowAllegatoIII.xsetAA2FlagProprietario(MapDto.getXmlBoolean(true));
			}
			if((Constants.ID_RUOLO_OCCUPANTE == ConvertUtil.convertToInteger(ruolo))
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_OCCUPANTE ==  ConvertUtil.convertToInteger(ruolo))){
				rowAllegatoIII.xsetAA2FlagOccupante(MapDto.getXmlBoolean(true));
			}
			if((Constants.ID_RUOLO_AMMINISTRATORE == ConvertUtil.convertToInteger(ruolo))
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_AMMINISTRATORE ==  ConvertUtil.convertToInteger(ruolo))){
				rowAllegatoIII.xsetAA2FlagAmministr(MapDto.getXmlBoolean(true));
			}
		}
		
		// B. DOCUMENTAZIONE TECNICA A CORREDO
		it.csi.sigit.sigitwebn.xml.allegato3.data.DatiIdentificativiDocument.DatiIdentificativi datiIdentificativi = rowAllegatoIII.addNewDatiIdentificativi(); 
		datiIdentificativi.setAAPotenzaTermicaNomTotMax(allegatoDto.getAPotenzaTermicaNominaleMax());

		it.csi.sigit.sigitwebn.xml.allegato3.data.DocumentazioneTecnicaDocument.DocumentazioneTecnica documentazioneTecnica = rowAllegatoIII.addNewDocumentazioneTecnica();

		if(allegatoDto.getBFlgDichiarConform() != null)
		{
			documentazioneTecnica.xsetABFlagDichiarazConfNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getBFlgDichiarConform())));
			documentazioneTecnica.xsetABFlagDichiarazConfSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getBFlgDichiarConform())));
		}

		if(allegatoDto.getBFlgLibImp() != null)
		{
			documentazioneTecnica.xsetABFlagLibrettoImpNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getBFlgLibImp())));
			documentazioneTecnica.xsetABFlagLibrettoImpSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getBFlgLibImp())));
		}

		if(allegatoDto.getBFlgLibrettoUso() != null)
		{
			documentazioneTecnica.xsetABFlagManutGenNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getBFlgLibrettoUso())));
			documentazioneTecnica.xsetABFlagManutGenSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getBFlgLibrettoUso())));
		}

		if(allegatoDto.getBFlgLibCompl() != null)
		{
			documentazioneTecnica.xsetABFlagLibrettoCompNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getBFlgLibCompl())));
			documentazioneTecnica.xsetABFlagLibrettoCompSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getBFlgLibCompl())));
		}

		//SEZIONE C. Trattamento dell'acqua
		it.csi.sigit.sigitwebn.xml.allegato3.data.TrattamentoAcquaDocument.TrattamentoAcqua trattamentoAcqua = it.csi.sigit.sigitwebn.xml.allegato3.data.TrattamentoAcquaDocument.TrattamentoAcqua.Factory.newInstance();
		
		if(rappTipo2Dto.getCFlgTrattClimaNonRichiest() !=null && Constants.SI_1 == rappTipo2Dto.getCFlgTrattClimaNonRichiest().intValue())
			trattamentoAcqua.xsetACFlagTrattH2ONR(MapDto.getXmlBoolean(true));
		else{
			trattamentoAcqua.xsetACFlagTrattH2ONR(MapDto.getXmlBoolean(false));
		}

		if(dettaglioTrattAcqua != null){
			log.debug("FRAAAAAAAAAAA --- > trattamento acqua ");

			if (log.isDebugEnabled())
				GenericUtil.stampa(dettaglioTrattAcqua, true, 3);

			trattamentoAcqua.setACDurezzaTotH2O(dettaglioTrattAcqua.getL22DurezzaH2oFr());

			if(dettaglioTrattAcqua.getL23FlgTrattClimaAssente() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL23FlgTrattClimaAssente().intValue())
				trattamentoAcqua.xsetACFlagTrattH2OAssente(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattH2OAssente(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL23FlgTrattClimaFiltr() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL23FlgTrattClimaFiltr().intValue())
				trattamentoAcqua.xsetACFlagTrattH2OFiltraz(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattH2OFiltraz(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL23FlgTrattClimaAddolc() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL23FlgTrattClimaAddolc().intValue())
				trattamentoAcqua.xsetACFlagTrattH2OAddolcim(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattH2OAddolcim(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL23FlgTrattClimaChimico() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL23FlgTrattClimaChimico().intValue())
				trattamentoAcqua.xsetACFlagTrattH2OCondizChimico(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattH2OCondizChimico(MapDto.getXmlBoolean(false));
			}

		}
		rowAllegatoIII.setTrattamentoAcqua(trattamentoAcqua);


		// D. CONTROLLO DELL'IMPIANTO
		if (rappTipo2Dto != null)
		{
			it.csi.sigit.sigitwebn.xml.allegato3.data.ControlloImpiantoDocument.ControlloImpianto ci = rowAllegatoIII.addNewControlloImpianto();

			
			if(rappTipo2Dto.getDFlgLocaleIdoneo() != null)
			{
				ci.xsetADFlagLocaleIdoneoNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo2Dto.getDFlgLocaleIdoneo())));
				ci.xsetADFlagLocaleIdoneoNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo2Dto.getDFlgLocaleIdoneo())));
				ci.xsetADFlagLocaleIdoneoSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo2Dto.getDFlgLocaleIdoneo())));
			}

			if(rappTipo2Dto.getDFlgApertureAdeg() != null)
			{
				ci.xsetADFlagDimensioniNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo2Dto.getDFlgApertureAdeg())));
				ci.xsetADFlagDimensioniNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo2Dto.getDFlgApertureAdeg())));
				ci.xsetADFlagDimensioniSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo2Dto.getDFlgApertureAdeg())));
			}
			
			if(rappTipo2Dto.getDFlgApertureLibere() != null)
			{
				ci.xsetADFlagApertureNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo2Dto.getDFlgApertureLibere())));
				ci.xsetADFlagApertureNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo2Dto.getDFlgApertureLibere())));
				ci.xsetADFlagApertureSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo2Dto.getDFlgApertureLibere())));
			}

			if(rappTipo2Dto.getDFlgLineaElettIdonea() != null)
			{
				ci.xsetADFlagLineeIdoneeNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo2Dto.getDFlgLineaElettIdonea())));
				ci.xsetADFlagLineeIdoneeNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo2Dto.getDFlgLineaElettIdonea())));
				ci.xsetADFlagLineeIdoneeSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo2Dto.getDFlgLineaElettIdonea())));
			}


			if(rappTipo2Dto.getDFlgCoibIdonea() != null)
			{
				ci.xsetADFlagCoibenIdoneeNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo2Dto.getDFlgCoibIdonea())));
				ci.xsetADFlagCoibenIdoneeNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo2Dto.getDFlgCoibIdonea())));
				ci.xsetADFlagCoibenIdoneeSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo2Dto.getDFlgCoibIdonea())));
			}


		}
		
		// E. CONTROLLO E VERIFICA ENERGETICA DEL GRUPPO TERMICO
		rowAllegatoIII.setAFDataControllo(ConvertUtil.convertToXmlCalendar(dto.getDataControllo()));
		//campi obbligatori che cambiano a seconda della pagina
		rowAllegatoIII.setAEDataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		rowAllegatoIII.setAENumGF(ConvertUtil.convertToBigInteger(dto.getProgressivo()));
		//campi che non cambiano per le pagine
		//rowAllegatoIII.setAECombustibile(dto.getDesCombustibile());
		//rowAllegatoIII.setAEIDcombustibile(ConvertUtil.convertToString(dto.getIdCombustibile()));
		rowAllegatoIII.setAEFabbricante(dto.getDesMarca());
		rowAllegatoIII.setAEMatricola(dto.getMatricola());
		rowAllegatoIII.setAEModello(dto.getModello());
		rowAllegatoIII.setAENumCircuiti(ConvertUtil.convertToBigInteger(dto.getNCircuiti()));
		//rowAllegatoIII.setAEPotenzaNomUtile(dto.getPotenzaTermicaKw());
		
		rowAllegatoIII.xsetAEFlagAssorbimento(getXmlBoolean(Constants.ID_DETT_GF_ASS_REC_CALORE.equals(ConvertUtil.convertToString(dto.getFkDettaglioGf()))));
		rowAllegatoIII.setAECombustibile(dto.getDesCombustibile());

		rowAllegatoIII.xsetAEFlagFiamma(getXmlBoolean(Constants.ID_DETT_GF_ASS_FIAMM_COMB.equals(ConvertUtil.convertToString(dto.getFkDettaglioGf()))));
		rowAllegatoIII.xsetAEFlagCompress(getXmlBoolean(Constants.ID_DETT_GF_CICLO_COMPRESS.equals(ConvertUtil.convertToString(dto.getFkDettaglioGf()))));

		
		it.csi.sigit.sigitwebn.xml.allegato3.data.ControlloVerificaEnergeticaDocument.ControlloVerificaEnergetica cve = rowAllegatoIII.addNewControlloVerificaEnergetica();
		cve.setAEPotenzaFrigoNom(dto.getRaffPotenzaKw());
		cve.setAEPotenzaTermica(dto.getRiscPotenzaKw());
		
		cve.xsetAEFlagRaffr(getXmlBoolean(Constants.FLAG_MODALITA_RAFFRESCAMENTO.equals(dettTipo2.getEFlgModProva())));
		cve.xsetAEFlagRisc(getXmlBoolean(Constants.FLAG_MODALITA_RISCALDAMENTO.equals(dettTipo2.getEFlgModProva())));

		if(dettTipo2.getEFlgPerditaGas() != null)
		{
			cve.xsetAEFlagPerditeNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo2.getEFlgPerditaGas())));
			cve.xsetAEFlagPerditeNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo2.getEFlgPerditaGas())));
			cve.xsetAEFlagPerditeSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo2.getEFlgPerditaGas())));
		}
		
		if(dettTipo2.getEFlgLeakDetector() != null)
		{
			cve.xsetAEFlagRilevFugheDirettaNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo2.getEFlgLeakDetector())));
			cve.xsetAEFlagRilevFugheDirettaNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo2.getEFlgLeakDetector())));
			cve.xsetAEFlagRilevFugheDirettaSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo2.getEFlgLeakDetector())));
		}
		
		
		if(dettTipo2.getEFlgParamTermodinam() != null)
		{
			cve.xsetAEFlagRilevFugheInDirettaNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo2.getEFlgParamTermodinam())));
			cve.xsetAEFlagRilevFugheInDirettaNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo2.getEFlgParamTermodinam())));
			cve.xsetAEFlagRilevFugheInDirettaSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo2.getEFlgParamTermodinam())));
		}
		
		if(dettTipo2.getEFlgIncrostazioni() != null)
		{
			cve.xsetAEFlagScambPulitiNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo2.getEFlgIncrostazioni())));
			cve.xsetAEFlagScambPulitiNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo2.getEFlgIncrostazioni())));
			cve.xsetAEFlagScambPulitiSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo2.getEFlgIncrostazioni())));
		}
		
		
		// F. CHECK-LIST
		it.csi.sigit.sigitwebn.xml.allegato3.data.CheckListDocument.CheckList cl = rowAllegatoIII.addNewCheckList();
		cl.xsetAFFlagSostGen1(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo2Dto.getFFlgSostituzGeneratori())));
		cl.xsetAFFlagSostGen2(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo2Dto.getFFlgSostituzSistemiReg())));
		cl.xsetAFFlagIsolamentoRete(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo2Dto.getFFlgIsolDistribuzH2o())));
		cl.xsetAFFlagIsolamentoCanali(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo2Dto.getFFlgIsolDistribuzAria())));

		cl.setAFOsservazioni(allegatoDto.getFOsservazioni());
		cl.setAFPrescrizioni(allegatoDto.getFPrescrizioni());
		cl.setAFRaccomandazioni(allegatoDto.getFRaccomandazioni());
		
		it.csi.sigit.sigitwebn.xml.allegato3.data.DatiTecnicoDocument.DatiTecnico datiTecnico = rowAllegatoIII.addNewDatiTecnico();

		if(allegatoDto.getFFlgPuoFunzionare() != null)
		{
			datiTecnico.xsetAFFlagFunzImpNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getFFlgPuoFunzionare())));
			datiTecnico.xsetAFFlagFunzImpSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getFFlgPuoFunzionare())));
		}
		
		datiTecnico.setAFDataIntervento(ConvertUtil.convertDateToXmlCalendar(allegatoDto.getFInterventoEntro()));

		datiTecnico.setAFOrarioArrivo(allegatoDto.getFOraArrivo());
		datiTecnico.setAFOrarioPartenza(allegatoDto.getFOraPartenza());
		datiTecnico.setAFCognomeTecnico(allegatoDto.getFDenominazTecnico());
		datiTecnico.setAFFirmaTecnico(allegatoDto.getFFirmaTecnico());
		datiTecnico.setAFFirmaResp(allegatoDto.getFFirmaResponsabile());

		return rowAllegatoIII;
	}
	
	public static RowAllegatoIII mapToDatiAllegato2NowFattorComune(DatiGFCommon allegato2Common, SigitVSk4GfDto dto, SigitTRappTipo2Dto rappTipo2Dto, SigitTDettTipo2Dto dettTipo2)
	{
		
		
		SigitTImpiantoDto impianto = allegato2Common.getImpiantoDto();
		List<SigitTUnitaImmobiliareDto> unitaImmobiliareList = allegato2Common.getUnitaImmobiliareList();

		SigitTAllegatoDto allegatoDto = allegato2Common.getAllegatoDto();
		SigitTPersonaGiuridicaDto personaGiuridicaDto = allegato2Common.getPersonaGiuridicaDto();
		SigitTPersonaFisicaDto personaFisicaDto = allegato2Common.getPersonaFisicaDto();
		SigitTTrattH2ODto dettaglioTrattAcqua = allegato2Common.getDettaglioTrattAcquaDto();
		int ruolo = allegato2Common.getRuolo();
		boolean isTerzoResp = allegato2Common.isTerzoResp();
		
		RowAllegatoIII rowAllegatoIII = RowAllegatoIII.Factory.newInstance();
		
		rowAllegatoIII.setCodiceCatasto(ConvertUtil.convertToString(dto.getCodiceImpianto()));
		
		// A. DATI IDENTIFICATIVI
		
		List<SigitTUnitaImmobiliareDto> unitaImmobSecondarie = new ArrayList<SigitTUnitaImmobiliareDto>();
		SigitTUnitaImmobiliareDto unitaImmobPrincipale = new SigitTUnitaImmobiliareDto();
		
		for (SigitTUnitaImmobiliareDto ui : unitaImmobiliareList) {
			if(ConvertUtil.convertToBooleanAllways(ui.getFlgPrincipale()))
				unitaImmobPrincipale = ui;
			else
				unitaImmobSecondarie.add(ui);
		}
		
		rowAllegatoIII.setAACivico(unitaImmobPrincipale.getCivico());
		if(impianto!=null)
		{
			rowAllegatoIII.setAAComune(impianto.getDenominazioneComune());
			rowAllegatoIII.setAAProv(impianto.getSiglaProvincia());
		}
		rowAllegatoIII.setAAIndirizzo(GenericUtil.isNotNullOrEmpty(unitaImmobPrincipale.getIndirizzoSitad()) ? 
				unitaImmobPrincipale.getIndirizzoSitad() : unitaImmobPrincipale.getIndirizzoNonTrovato());
		rowAllegatoIII.setAAInterno(unitaImmobPrincipale.getInterno());
		rowAllegatoIII.setAAPalazzo(unitaImmobPrincipale.getPalazzo());
		rowAllegatoIII.setAAScala(unitaImmobPrincipale.getScala());
		
		it.csi.sigit.sigitwebn.xml.allegato3.data.RowCatastoDocument.RowCatasto catastoPrincipale = it.csi.sigit.sigitwebn.xml.allegato3.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
		catastoPrincipale.setAAFoglio(unitaImmobPrincipale.getFoglio());
		catastoPrincipale.setAAParticella(unitaImmobPrincipale.getParticella());
		catastoPrincipale.setAAPdr(unitaImmobPrincipale.getPdrGas());
		catastoPrincipale.setAAPod(unitaImmobPrincipale.getPodElettrico());
		catastoPrincipale.setAASezione(unitaImmobPrincipale.getSezione());
		catastoPrincipale.setAASub(unitaImmobPrincipale.getSubalterno());

		List<it.csi.sigit.sigitwebn.xml.allegato3.data.RowCatastoDocument.RowCatasto> rowCatastoList = rowAllegatoIII.addNewSezCatasto().getRowCatastoList();
		rowCatastoList.add(catastoPrincipale);
		for (SigitTUnitaImmobiliareDto umSec : unitaImmobSecondarie) 
		{
			it.csi.sigit.sigitwebn.xml.allegato3.data.RowCatastoDocument.RowCatasto catastoSec = it.csi.sigit.sigitwebn.xml.allegato3.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
			catastoSec.setAAFoglio(umSec.getFoglio());
			catastoSec.setAAParticella(umSec.getParticella());
			catastoSec.setAAPdr(umSec.getPdrGas());
			catastoSec.setAAPod(umSec.getPodElettrico());
			catastoSec.setAASezione(umSec.getSezione());
			catastoSec.setAASub(umSec.getSubalterno());
			rowCatastoList.add(catastoSec);
		}
		
		if(personaGiuridicaDto!=null){
			rowAllegatoIII.setAA2RagSociale(personaGiuridicaDto.getDenominazione());
			rowAllegatoIII.setAA2Piva(personaGiuridicaDto.getCodiceFiscale());

			rowAllegatoIII.setAA2Cognome(null);
			rowAllegatoIII.setAA2Nome(null);
			rowAllegatoIII.setAA2Cf(null);
			
			if (ConvertUtil.convertToBooleanAllways(personaGiuridicaDto.getFlgIndirizzoEstero()))
			{
				rowAllegatoIII.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoEstero());
				rowAllegatoIII.setAA2Comune(GenericUtil.getStringValid(personaGiuridicaDto.getCittaEstero()) + " ("+GenericUtil.getStringValid(personaGiuridicaDto.getStatoEstero())+")");
				rowAllegatoIII.setAA2Prov(null);
				
				
			}
			else
			{
				rowAllegatoIII.setAA2Prov(personaGiuridicaDto.getSiglaProv());
				rowAllegatoIII.setAA2Comune(personaGiuridicaDto.getComune());
				if(personaGiuridicaDto.getIndirizzoSitad()!=null){
					rowAllegatoIII.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoSitad());
				}else{
					rowAllegatoIII.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoNonTrovato());
				}
			}

			// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
			rowAllegatoIII.setAA2Civico(personaGiuridicaDto.getCivico());

		}else{
			//vuol dire che e'  persona fisica
			rowAllegatoIII.setAA2Cognome(personaFisicaDto.getCognome());
			rowAllegatoIII.setAA2Nome(personaFisicaDto.getNome());
			rowAllegatoIII.setAA2Cf(personaFisicaDto.getCodiceFiscale());
			
			rowAllegatoIII.setAA2RagSociale(null);
			rowAllegatoIII.setAA2Piva(null);
			
			if (ConvertUtil.convertToBooleanAllways(personaFisicaDto.getFlgIndirizzoEstero()))
			{
				rowAllegatoIII.setAA2Indirizzo(personaFisicaDto.getIndirizzoEstero());
				rowAllegatoIII.setAA2Comune(GenericUtil.getStringValid(personaFisicaDto.getCittaEstero()) + " ("+GenericUtil.getStringValid(personaFisicaDto.getStatoEstero())+")");
				rowAllegatoIII.setAA2Prov(null);
			}
			else
			{
				rowAllegatoIII.setAA2Prov(personaFisicaDto.getSiglaProv());
				rowAllegatoIII.setAA2Comune(personaFisicaDto.getComune());
	
				if(personaFisicaDto.getIndirizzoSitad()!=null){
					rowAllegatoIII.setAA2Indirizzo(personaFisicaDto.getIndirizzoSitad());
				}else{
					rowAllegatoIII.setAA2Indirizzo(personaFisicaDto.getIndirizzoNonTrovato());
				}
			}
			// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
			rowAllegatoIII.setAA2Civico(personaFisicaDto.getCivico());
		}
		
		//per il titolo responsabile si hanno dei radio button da gestire
		if(isTerzoResp){
			rowAllegatoIII.xsetAA2FlagTerzoResp(getXmlBoolean(true));
			
			rowAllegatoIII.xsetAA2FlagProprietario(MapDto.getXmlBoolean(false));
			rowAllegatoIII.xsetAA2FlagOccupante(MapDto.getXmlBoolean(false));
			rowAllegatoIII.xsetAA2FlagAmministr(MapDto.getXmlBoolean(false));

		} 
		else
		{
			log.debug("Constants.ID_RUOLO_PROPRIETARIO: "+Constants.ID_RUOLO_PROPRIETARIO);
			log.debug("Constants.ID_RUOLO_RESPONSABILE_IMPRESA_PROPRIETARIO: "+Constants.ID_RUOLO_RESPONSABILE_IMPRESA_PROPRIETARIO);
			log.debug("ruolo: "+ruolo);
			
			rowAllegatoIII.xsetAA2FlagTerzoResp(getXmlBoolean(false));

			if((Constants.ID_RUOLO_PROPRIETARIO == ruolo)
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_PROPRIETARIO ==  ruolo)){
				
				log.debug("sono dentro!!!!!!!!!!!!!");
				rowAllegatoIII.xsetAA2FlagProprietario(MapDto.getXmlBoolean(true));
			}
			if((Constants.ID_RUOLO_OCCUPANTE == ruolo)
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_OCCUPANTE == ruolo)){
				rowAllegatoIII.xsetAA2FlagOccupante(MapDto.getXmlBoolean(true));
			}
			if((Constants.ID_RUOLO_AMMINISTRATORE == ruolo)
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_AMMINISTRATORE == ruolo)){
				rowAllegatoIII.xsetAA2FlagAmministr(MapDto.getXmlBoolean(true));
			}
		}
		
		// B. DOCUMENTAZIONE TECNICA A CORREDO
		it.csi.sigit.sigitwebn.xml.allegato3.data.DatiIdentificativiDocument.DatiIdentificativi datiIdentificativi = rowAllegatoIII.addNewDatiIdentificativi(); 
		datiIdentificativi.setAAPotenzaTermicaNomTotMax(allegatoDto.getAPotenzaTermicaNominaleMax());

		it.csi.sigit.sigitwebn.xml.allegato3.data.DocumentazioneTecnicaDocument.DocumentazioneTecnica documentazioneTecnica = rowAllegatoIII.addNewDocumentazioneTecnica();

		if(allegatoDto.getBFlgDichiarConform() != null)
		{
			documentazioneTecnica.xsetABFlagDichiarazConfNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getBFlgDichiarConform())));
			documentazioneTecnica.xsetABFlagDichiarazConfSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getBFlgDichiarConform())));
		}

		if(allegatoDto.getBFlgLibImp() != null)
		{
			documentazioneTecnica.xsetABFlagLibrettoImpNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getBFlgLibImp())));
			documentazioneTecnica.xsetABFlagLibrettoImpSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getBFlgLibImp())));
		}

		if(allegatoDto.getBFlgLibrettoUso() != null)
		{
			documentazioneTecnica.xsetABFlagManutGenNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getBFlgLibrettoUso())));
			documentazioneTecnica.xsetABFlagManutGenSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getBFlgLibrettoUso())));
		}

		if(allegatoDto.getBFlgLibCompl() != null)
		{
			documentazioneTecnica.xsetABFlagLibrettoCompNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getBFlgLibCompl())));
			documentazioneTecnica.xsetABFlagLibrettoCompSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getBFlgLibCompl())));
		}

		//SEZIONE C. Trattamento dell'acqua
		it.csi.sigit.sigitwebn.xml.allegato3.data.TrattamentoAcquaDocument.TrattamentoAcqua trattamentoAcqua = it.csi.sigit.sigitwebn.xml.allegato3.data.TrattamentoAcquaDocument.TrattamentoAcqua.Factory.newInstance();
		
		if(rappTipo2Dto.getCFlgTrattClimaNonRichiest() !=null && Constants.SI_1 == rappTipo2Dto.getCFlgTrattClimaNonRichiest().intValue())
			trattamentoAcqua.xsetACFlagTrattH2ONR(MapDto.getXmlBoolean(true));
		else{
			trattamentoAcqua.xsetACFlagTrattH2ONR(MapDto.getXmlBoolean(false));
		}

		if(dettaglioTrattAcqua != null){
			log.debug("FRAAAAAAAAAAA --- > trattamento acqua ");

			if (log.isDebugEnabled())
				GenericUtil.stampa(dettaglioTrattAcqua, true, 3);

			trattamentoAcqua.setACDurezzaTotH2O(dettaglioTrattAcqua.getL22DurezzaH2oFr());

			if(dettaglioTrattAcqua.getL23FlgTrattClimaAssente() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL23FlgTrattClimaAssente().intValue())
				trattamentoAcqua.xsetACFlagTrattH2OAssente(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattH2OAssente(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL23FlgTrattClimaFiltr() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL23FlgTrattClimaFiltr().intValue())
				trattamentoAcqua.xsetACFlagTrattH2OFiltraz(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattH2OFiltraz(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL23FlgTrattClimaAddolc() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL23FlgTrattClimaAddolc().intValue())
				trattamentoAcqua.xsetACFlagTrattH2OAddolcim(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattH2OAddolcim(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL23FlgTrattClimaChimico() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL23FlgTrattClimaChimico().intValue())
				trattamentoAcqua.xsetACFlagTrattH2OCondizChimico(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattH2OCondizChimico(MapDto.getXmlBoolean(false));
			}

		}
		rowAllegatoIII.setTrattamentoAcqua(trattamentoAcqua);


		// D. CONTROLLO DELL'IMPIANTO
		if (rappTipo2Dto != null)
		{
			it.csi.sigit.sigitwebn.xml.allegato3.data.ControlloImpiantoDocument.ControlloImpianto ci = rowAllegatoIII.addNewControlloImpianto();

			
			if(rappTipo2Dto.getDFlgLocaleIdoneo() != null)
			{
				ci.xsetADFlagLocaleIdoneoNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo2Dto.getDFlgLocaleIdoneo())));
				ci.xsetADFlagLocaleIdoneoNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo2Dto.getDFlgLocaleIdoneo())));
				ci.xsetADFlagLocaleIdoneoSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo2Dto.getDFlgLocaleIdoneo())));
			}

			if(rappTipo2Dto.getDFlgApertureAdeg() != null)
			{
				ci.xsetADFlagDimensioniNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo2Dto.getDFlgApertureAdeg())));
				ci.xsetADFlagDimensioniNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo2Dto.getDFlgApertureAdeg())));
				ci.xsetADFlagDimensioniSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo2Dto.getDFlgApertureAdeg())));
			}
			
			if(rappTipo2Dto.getDFlgApertureLibere() != null)
			{
				ci.xsetADFlagApertureNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo2Dto.getDFlgApertureLibere())));
				ci.xsetADFlagApertureNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo2Dto.getDFlgApertureLibere())));
				ci.xsetADFlagApertureSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo2Dto.getDFlgApertureLibere())));
			}

			if(rappTipo2Dto.getDFlgLineaElettIdonea() != null)
			{
				ci.xsetADFlagLineeIdoneeNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo2Dto.getDFlgLineaElettIdonea())));
				ci.xsetADFlagLineeIdoneeNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo2Dto.getDFlgLineaElettIdonea())));
				ci.xsetADFlagLineeIdoneeSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo2Dto.getDFlgLineaElettIdonea())));
			}


			if(rappTipo2Dto.getDFlgCoibIdonea() != null)
			{
				ci.xsetADFlagCoibenIdoneeNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo2Dto.getDFlgCoibIdonea())));
				ci.xsetADFlagCoibenIdoneeNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo2Dto.getDFlgCoibIdonea())));
				ci.xsetADFlagCoibenIdoneeSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo2Dto.getDFlgCoibIdonea())));
			}


		}
		
		// E. CONTROLLO E VERIFICA ENERGETICA DEL GRUPPO TERMICO
		rowAllegatoIII.setAFDataControllo(ConvertUtil.convertToXmlCalendar(dto.getDataControllo()));
		//campi obbligatori che cambiano a seconda della pagina
		rowAllegatoIII.setAEDataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		rowAllegatoIII.setAENumGF(ConvertUtil.convertToBigInteger(dto.getProgressivo()));
		//campi che non cambiano per le pagine
		//rowAllegatoIII.setAECombustibile(dto.getDesCombustibile());
		//rowAllegatoIII.setAEIDcombustibile(ConvertUtil.convertToString(dto.getIdCombustibile()));
		rowAllegatoIII.setAEFabbricante(dto.getDesMarca());
		rowAllegatoIII.setAEMatricola(dto.getMatricola());
		rowAllegatoIII.setAEModello(dto.getModello());
		rowAllegatoIII.setAENumCircuiti(ConvertUtil.convertToBigInteger(dto.getNCircuiti()));
		//rowAllegatoIII.setAEPotenzaNomUtile(dto.getPotenzaTermicaKw());
		
		rowAllegatoIII.xsetAEFlagAssorbimento(getXmlBoolean(Constants.ID_DETT_GF_ASS_REC_CALORE.equals(ConvertUtil.convertToString(dto.getFkDettaglioGf()))));
		rowAllegatoIII.setAECombustibile(dto.getDesCombustibile());

		rowAllegatoIII.xsetAEFlagFiamma(getXmlBoolean(Constants.ID_DETT_GF_ASS_FIAMM_COMB.equals(ConvertUtil.convertToString(dto.getFkDettaglioGf()))));
		rowAllegatoIII.xsetAEFlagCompress(getXmlBoolean(Constants.ID_DETT_GF_CICLO_COMPRESS.equals(ConvertUtil.convertToString(dto.getFkDettaglioGf()))));

		
		it.csi.sigit.sigitwebn.xml.allegato3.data.ControlloVerificaEnergeticaDocument.ControlloVerificaEnergetica cve = rowAllegatoIII.addNewControlloVerificaEnergetica();
		cve.setAEPotenzaFrigoNom(dto.getRaffPotenzaKw());
		cve.setAEPotenzaTermica(dto.getRiscPotenzaKw());
		
		cve.xsetAEFlagRaffr(getXmlBoolean(Constants.FLAG_MODALITA_RAFFRESCAMENTO.equals(dettTipo2.getEFlgModProva())));
		cve.xsetAEFlagRisc(getXmlBoolean(Constants.FLAG_MODALITA_RISCALDAMENTO.equals(dettTipo2.getEFlgModProva())));

		if(dettTipo2.getEFlgPerditaGas() != null)
		{
			cve.xsetAEFlagPerditeNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo2.getEFlgPerditaGas())));
			cve.xsetAEFlagPerditeNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo2.getEFlgPerditaGas())));
			cve.xsetAEFlagPerditeSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo2.getEFlgPerditaGas())));
		}
		
		if(dettTipo2.getEFlgLeakDetector() != null)
		{
			cve.xsetAEFlagRilevFugheDirettaNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo2.getEFlgLeakDetector())));
			cve.xsetAEFlagRilevFugheDirettaNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo2.getEFlgLeakDetector())));
			cve.xsetAEFlagRilevFugheDirettaSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo2.getEFlgLeakDetector())));
		}
		
		
		if(dettTipo2.getEFlgParamTermodinam() != null)
		{
			cve.xsetAEFlagRilevFugheInDirettaNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo2.getEFlgParamTermodinam())));
			cve.xsetAEFlagRilevFugheInDirettaNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo2.getEFlgParamTermodinam())));
			cve.xsetAEFlagRilevFugheInDirettaSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo2.getEFlgParamTermodinam())));
		}
		
		if(dettTipo2.getEFlgIncrostazioni() != null)
		{
			cve.xsetAEFlagScambPulitiNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo2.getEFlgIncrostazioni())));
			cve.xsetAEFlagScambPulitiNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo2.getEFlgIncrostazioni())));
			cve.xsetAEFlagScambPulitiSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo2.getEFlgIncrostazioni())));
		}
		
		
		// F. CHECK-LIST
		it.csi.sigit.sigitwebn.xml.allegato3.data.CheckListDocument.CheckList cl = rowAllegatoIII.addNewCheckList();
		cl.xsetAFFlagSostGen1(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo2Dto.getFFlgSostituzGeneratori())));
		cl.xsetAFFlagSostGen2(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo2Dto.getFFlgSostituzSistemiReg())));
		cl.xsetAFFlagIsolamentoRete(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo2Dto.getFFlgIsolDistribuzH2o())));
		cl.xsetAFFlagIsolamentoCanali(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo2Dto.getFFlgIsolDistribuzAria())));

		cl.setAFOsservazioni(allegatoDto.getFOsservazioni());
		cl.setAFPrescrizioni(allegatoDto.getFPrescrizioni());
		cl.setAFRaccomandazioni(allegatoDto.getFRaccomandazioni());
		
		it.csi.sigit.sigitwebn.xml.allegato3.data.DatiTecnicoDocument.DatiTecnico datiTecnico = rowAllegatoIII.addNewDatiTecnico();

		if(allegatoDto.getFFlgPuoFunzionare() != null)
		{
			datiTecnico.xsetAFFlagFunzImpNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getFFlgPuoFunzionare())));
			datiTecnico.xsetAFFlagFunzImpSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getFFlgPuoFunzionare())));
		}
		
		datiTecnico.setAFDataIntervento(ConvertUtil.convertDateToXmlCalendar(allegatoDto.getFInterventoEntro()));

		datiTecnico.setAFOrarioArrivo(allegatoDto.getFOraArrivo());
		datiTecnico.setAFOrarioPartenza(allegatoDto.getFOraPartenza());
		datiTecnico.setAFCognomeTecnico(allegatoDto.getFDenominazTecnico());
		datiTecnico.setAFFirmaTecnico(allegatoDto.getFFirmaTecnico());
		datiTecnico.setAFFirmaResp(allegatoDto.getFFirmaResponsabile());

		return rowAllegatoIII;
	}
	
	public static RowAllegatoIV mapToDatiAllegato3Now(SigitVSk4ScDto dto, SigitTAllegatoDto allegatoDto, SigitTRappTipo3Dto rappTipo3Dto, SigitTDettTipo3Dto dettTipo3,
			SigitTPersonaGiuridicaDto personaGiuridicaDto, SigitTPersonaFisicaDto personaFisicaDto, String ruolo, boolean isTerzoResp,
			List<SigitTUnitaImmobiliareDto> listaUnitaImmobiliare, SigitTImpiantoDto impianto, SigitTTrattH2ODto dettaglioTrattAcqua)
	{
		RowAllegatoIV rowAllegatoIV = RowAllegatoIV.Factory.newInstance();
		
		rowAllegatoIV.setCodiceCatasto(ConvertUtil.convertToString(dto.getCodiceImpianto()));
		
		// A. DATI IDENTIFICATIVI
		
		List<SigitTUnitaImmobiliareDto> unitaImmobSecondarie = new ArrayList<SigitTUnitaImmobiliareDto>();
		SigitTUnitaImmobiliareDto unitaImmobPrincipale = new SigitTUnitaImmobiliareDto();
		
		for (SigitTUnitaImmobiliareDto ui : listaUnitaImmobiliare) {
			if(ConvertUtil.convertToBooleanAllways(ui.getFlgPrincipale()))
				unitaImmobPrincipale = ui;
			else
				unitaImmobSecondarie.add(ui);
		}
		
		rowAllegatoIV.setAACivico(unitaImmobPrincipale.getCivico());
		if(impianto!=null)
		{
			rowAllegatoIV.setAAComune(impianto.getDenominazioneComune());
			rowAllegatoIV.setAAProv(impianto.getSiglaProvincia());
		}
		rowAllegatoIV.setAAIndirizzo(GenericUtil.isNotNullOrEmpty(unitaImmobPrincipale.getIndirizzoSitad()) ? 
				unitaImmobPrincipale.getIndirizzoSitad() : unitaImmobPrincipale.getIndirizzoNonTrovato());
		rowAllegatoIV.setAAInterno(unitaImmobPrincipale.getInterno());
		rowAllegatoIV.setAAPalazzo(unitaImmobPrincipale.getPalazzo());
		rowAllegatoIV.setAAScala(unitaImmobPrincipale.getScala());
		
		it.csi.sigit.sigitwebn.xml.allegato4.data.RowCatastoDocument.RowCatasto catastoPrincipale = it.csi.sigit.sigitwebn.xml.allegato4.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
		catastoPrincipale.setAAFoglio(unitaImmobPrincipale.getFoglio());
		catastoPrincipale.setAAParticella(unitaImmobPrincipale.getParticella());
		catastoPrincipale.setAAPdr(unitaImmobPrincipale.getPdrGas());
		catastoPrincipale.setAAPod(unitaImmobPrincipale.getPodElettrico());
		catastoPrincipale.setAASezione(unitaImmobPrincipale.getSezione());
		catastoPrincipale.setAASub(unitaImmobPrincipale.getSubalterno());

		List<it.csi.sigit.sigitwebn.xml.allegato4.data.RowCatastoDocument.RowCatasto> rowCatastoList = rowAllegatoIV.addNewSezCatasto().getRowCatastoList();
		rowCatastoList.add(catastoPrincipale);
		for (SigitTUnitaImmobiliareDto umSec : unitaImmobSecondarie) 
		{
			it.csi.sigit.sigitwebn.xml.allegato4.data.RowCatastoDocument.RowCatasto catastoSec = it.csi.sigit.sigitwebn.xml.allegato4.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
			catastoSec.setAAFoglio(umSec.getFoglio());
			catastoSec.setAAParticella(umSec.getParticella());
			catastoSec.setAAPdr(umSec.getPdrGas());
			catastoSec.setAAPod(umSec.getPodElettrico());
			catastoSec.setAASezione(umSec.getSezione());
			catastoSec.setAASub(umSec.getSubalterno());
			rowCatastoList.add(catastoSec);
		}
		
		if(personaGiuridicaDto!=null){
			rowAllegatoIV.setAA2RagSociale(personaGiuridicaDto.getDenominazione());
			rowAllegatoIV.setAA2Piva(personaGiuridicaDto.getCodiceFiscale());

			rowAllegatoIV.setAA2Cognome(null);
			rowAllegatoIV.setAA2Nome(null);
			rowAllegatoIV.setAA2Cf(null);
			
			if (ConvertUtil.convertToBooleanAllways(personaGiuridicaDto.getFlgIndirizzoEstero()))
			{
				rowAllegatoIV.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoEstero());
				rowAllegatoIV.setAA2Comune(GenericUtil.getStringValid(personaGiuridicaDto.getCittaEstero()) + " ("+GenericUtil.getStringValid(personaGiuridicaDto.getStatoEstero())+")");
				rowAllegatoIV.setAA2Prov(null);
				
				
			}
			else
			{
				rowAllegatoIV.setAA2Prov(personaGiuridicaDto.getSiglaProv());
				rowAllegatoIV.setAA2Comune(personaGiuridicaDto.getComune());
				if(personaGiuridicaDto.getIndirizzoSitad()!=null){
					rowAllegatoIV.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoSitad());
				}else{
					rowAllegatoIV.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoNonTrovato());
				}
			}

			// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
			rowAllegatoIV.setAA2Civico(personaGiuridicaDto.getCivico());

		}else{
			//vuol dire che e'  persona fisica
			rowAllegatoIV.setAA2Cognome(personaFisicaDto.getCognome());
			rowAllegatoIV.setAA2Nome(personaFisicaDto.getNome());
			rowAllegatoIV.setAA2Cf(personaFisicaDto.getCodiceFiscale());
			
			rowAllegatoIV.setAA2RagSociale(null);
			rowAllegatoIV.setAA2Piva(null);
			
			if (ConvertUtil.convertToBooleanAllways(personaFisicaDto.getFlgIndirizzoEstero()))
			{
				rowAllegatoIV.setAA2Indirizzo(personaFisicaDto.getIndirizzoEstero());
				rowAllegatoIV.setAA2Comune(GenericUtil.getStringValid(personaFisicaDto.getCittaEstero()) + " ("+GenericUtil.getStringValid(personaFisicaDto.getStatoEstero())+")");
				rowAllegatoIV.setAA2Prov(null);
			}
			else
			{
				rowAllegatoIV.setAA2Prov(personaFisicaDto.getSiglaProv());
				rowAllegatoIV.setAA2Comune(personaFisicaDto.getComune());
	
				if(personaFisicaDto.getIndirizzoSitad()!=null){
					rowAllegatoIV.setAA2Indirizzo(personaFisicaDto.getIndirizzoSitad());
				}else{
					rowAllegatoIV.setAA2Indirizzo(personaFisicaDto.getIndirizzoNonTrovato());
				}
			}
			// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
			rowAllegatoIV.setAA2Civico(personaFisicaDto.getCivico());
		}
		
		//per il titolo responsabile si hanno dei radio button da gestire
		if(isTerzoResp){
			rowAllegatoIV.xsetAA2FlagTerzoResp(getXmlBoolean(true));
			
			rowAllegatoIV.xsetAA2FlagProprietario(MapDto.getXmlBoolean(false));
			rowAllegatoIV.xsetAA2FlagOccupante(MapDto.getXmlBoolean(false));
			rowAllegatoIV.xsetAA2FlagAmministr(MapDto.getXmlBoolean(false));

		} 
		else
		{
			log.debug("Constants.ID_RUOLO_PROPRIETARIO: "+Constants.ID_RUOLO_PROPRIETARIO);
			log.debug("Constants.ID_RUOLO_RESPONSABILE_IMPRESA_PROPRIETARIO: "+Constants.ID_RUOLO_RESPONSABILE_IMPRESA_PROPRIETARIO);
			log.debug("ruolo: "+ruolo);
			
			rowAllegatoIV.xsetAA2FlagTerzoResp(getXmlBoolean(false));

			if((Constants.ID_RUOLO_PROPRIETARIO == ConvertUtil.convertToInteger(ruolo))
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_PROPRIETARIO ==  ConvertUtil.convertToInteger(ruolo))){
				
				log.debug("sono dentro!!!!!!!!!!!!!");
				rowAllegatoIV.xsetAA2FlagProprietario(MapDto.getXmlBoolean(true));
			}
			if((Constants.ID_RUOLO_OCCUPANTE == ConvertUtil.convertToInteger(ruolo))
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_OCCUPANTE ==  ConvertUtil.convertToInteger(ruolo))){
				rowAllegatoIV.xsetAA2FlagOccupante(MapDto.getXmlBoolean(true));
			}
			if((Constants.ID_RUOLO_AMMINISTRATORE == ConvertUtil.convertToInteger(ruolo))
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_AMMINISTRATORE ==  ConvertUtil.convertToInteger(ruolo))){
				rowAllegatoIV.xsetAA2FlagAmministr(MapDto.getXmlBoolean(true));
			}
		}
		
		// B. DOCUMENTAZIONE TECNICA A CORREDO
		it.csi.sigit.sigitwebn.xml.allegato4.data.DatiIdentificativiDocument.DatiIdentificativi datiIdentificativi = rowAllegatoIV.addNewDatiIdentificativi(); 
		datiIdentificativi.setAAPotenzaTermicaNomTotMax(allegatoDto.getAPotenzaTermicaNominaleMax());

		it.csi.sigit.sigitwebn.xml.allegato4.data.DocumentazioneTecnicaDocument.DocumentazioneTecnica documentazioneTecnica = rowAllegatoIV.addNewDocumentazioneTecnica();

		if(allegatoDto.getBFlgDichiarConform() != null)
		{
			documentazioneTecnica.xsetABFlagDichiarazConfNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getBFlgDichiarConform())));
			documentazioneTecnica.xsetABFlagDichiarazConfSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getBFlgDichiarConform())));
		}

		if(allegatoDto.getBFlgLibImp() != null)
		{
			documentazioneTecnica.xsetABFlagLibrettoImpNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getBFlgLibImp())));
			documentazioneTecnica.xsetABFlagLibrettoImpSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getBFlgLibImp())));
		}

		if(allegatoDto.getBFlgLibrettoUso() != null)
		{
			documentazioneTecnica.xsetABFlagManutGenNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getBFlgLibrettoUso())));
			documentazioneTecnica.xsetABFlagManutGenSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getBFlgLibrettoUso())));
		}

		if(allegatoDto.getBFlgLibCompl() != null)
		{
			documentazioneTecnica.xsetABFlagLibrettoCompNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getBFlgLibCompl())));
			documentazioneTecnica.xsetABFlagLibrettoCompSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getBFlgLibCompl())));
		}

		//SEZIONE C. Trattamento dell'acqua
		it.csi.sigit.sigitwebn.xml.allegato4.data.TrattamentoAcquaDocument.TrattamentoAcqua trattamentoAcqua = it.csi.sigit.sigitwebn.xml.allegato4.data.TrattamentoAcquaDocument.TrattamentoAcqua.Factory.newInstance();
		
		if(rappTipo3Dto.getCFlgTrattClimaNonRichiest() !=null && Constants.SI_1 == rappTipo3Dto.getCFlgTrattClimaNonRichiest().intValue())
			trattamentoAcqua.xsetACFlagTrattH2ONR(MapDto.getXmlBoolean(true));
		else{
			trattamentoAcqua.xsetACFlagTrattH2ONR(MapDto.getXmlBoolean(false));
		}

		if(rappTipo3Dto.getCFlgTrattAcsNonRichiesto() !=null && Constants.SI_1 == rappTipo3Dto.getCFlgTrattAcsNonRichiesto().intValue())
			trattamentoAcqua.xsetACFlagTrattAcsNR(MapDto.getXmlBoolean(true));
		else{
			trattamentoAcqua.xsetACFlagTrattAcsNR(MapDto.getXmlBoolean(false));
		}

		if(dettaglioTrattAcqua != null){
			log.debug("FRAAAAAAAAAAA --- > trattamento acqua ");

			if (log.isDebugEnabled())
				GenericUtil.stampa(dettaglioTrattAcqua, true, 3);

			trattamentoAcqua.setACDurezzaTotH2O(dettaglioTrattAcqua.getL22DurezzaH2oFr());



			if(dettaglioTrattAcqua.getL23FlgTrattClimaAssente() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL23FlgTrattClimaAssente().intValue())
				trattamentoAcqua.xsetACFlagTrattH2OAssente(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattH2OAssente(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL23FlgTrattClimaFiltr() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL23FlgTrattClimaFiltr().intValue())
				trattamentoAcqua.xsetACFlagTrattH2OFiltraz(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattH2OFiltraz(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL23FlgTrattClimaAddolc() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL23FlgTrattClimaAddolc().intValue())
				trattamentoAcqua.xsetACFlagTrattH2OAddolcim(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattH2OAddolcim(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL23FlgTrattClimaChimico() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL23FlgTrattClimaChimico().intValue())
				trattamentoAcqua.xsetACFlagTrattH2OCondizChimico(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattH2OCondizChimico(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL24FlgTrattAcsAssente() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL24FlgTrattAcsAssente().intValue())
				trattamentoAcqua.xsetACFlagTrattAcsAssente(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattAcsAssente(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL24FlgTrattAcsFiltr() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL24FlgTrattAcsFiltr().intValue())
				trattamentoAcqua.xsetACFlagTrattAcsFiltraz(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattAcsFiltraz(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL24FlgTrattAcsAddolc() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL24FlgTrattAcsAddolc().intValue())
				trattamentoAcqua.xsetACFlagTrattAcsAddolcim(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattAcsAddolcim(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL24FlgTrattAcsChimico() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL24FlgTrattAcsChimico().intValue())
				trattamentoAcqua.xsetACFlagTrattAcsCondizChimico(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattAcsCondizChimico(MapDto.getXmlBoolean(false));
			}

		}
		rowAllegatoIV.setTrattamentoAcqua(trattamentoAcqua);


		// D. CONTROLLO DELL'IMPIANTO
		if (rappTipo3Dto != null)
		{
			it.csi.sigit.sigitwebn.xml.allegato4.data.ControlloImpiantoDocument.ControlloImpianto ci = rowAllegatoIV.addNewControlloImpianto();

			
			if(rappTipo3Dto.getDFlgLocaleIdoneo() != null)
			{
				ci.xsetADFlagLuogoIdoneoNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo3Dto.getDFlgLocaleIdoneo())));
				ci.xsetADFlagLuogoIdoneoNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo3Dto.getDFlgLocaleIdoneo())));
				ci.xsetADFlagLuogoIdoneoSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo3Dto.getDFlgLocaleIdoneo())));
			}

			if(rappTipo3Dto.getDFlgLineaElettIdonea() != null)
			{
				ci.xsetADFlagLineeIdoneeNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo3Dto.getDFlgLineaElettIdonea())));
				ci.xsetADFlagLineeIdoneeNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo3Dto.getDFlgLineaElettIdonea())));
				ci.xsetADFlagLineeIdoneeSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo3Dto.getDFlgLineaElettIdonea())));
			}
			
			if(rappTipo3Dto.getDFlgCoibIdonea() != null)
			{
				ci.xsetADFlagStatoCoibenNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo3Dto.getDFlgCoibIdonea())));
				ci.xsetADFlagStatoCoibenNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo3Dto.getDFlgCoibIdonea())));
				ci.xsetADFlagStatoCoibenSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo3Dto.getDFlgCoibIdonea())));
			}

			if(rappTipo3Dto.getDFlgAssenzaPerdite() != null)
			{
				ci.xsetADFlagPerditeNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo3Dto.getDFlgAssenzaPerdite())));
				ci.xsetADFlagPerditeNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo3Dto.getDFlgAssenzaPerdite())));
				ci.xsetADFlagPerditeSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo3Dto.getDFlgAssenzaPerdite())));
			}

		}
		
		// E. CONTROLLO E VERIFICA ENERGETICA DEL GRUPPO TERMICO
		it.csi.sigit.sigitwebn.xml.allegato4.data.ControlloVerificaEnergeticaDocument.ControlloVerificaEnergetica cve = rowAllegatoIV.addNewControlloVerificaEnergetica();

		rowAllegatoIV.setAFDataControllo(ConvertUtil.convertToXmlCalendar(dto.getDataControllo()));
		//campi obbligatori che cambiano a seconda della pagina
		rowAllegatoIV.setAEDataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		rowAllegatoIV.setAENumSC(ConvertUtil.convertToBigInteger(dto.getProgressivo()));
		//campi che non cambiano per le pagine


		cve.setAECombustibile(ConvertUtil.convertToString(dettTipo3.getFkFluidoAlimentaz()));
		cve.setAEFluidoVett(ConvertUtil.convertToString(dettTipo3.getFkFluido()));

		rowAllegatoIV.setAEFabbricante(dto.getDesMarca());
		rowAllegatoIV.setAEMatricola(dto.getMatricola());
		rowAllegatoIV.setAEModello(dto.getModello());
		rowAllegatoIV.setAEPotenzaTermNom(dto.getPotenzaTermicaKw());
		
		cve.xsetAEFlagClimatizInv(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo3.getEFlgClimaInverno())));
		cve.xsetAEFlagProduzACS(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo3.getEFlgProduzAcs())));

		if(dettTipo3.getEFlgPotenzaCompatibile() != null)
		{
			cve.xsetAEFlagPotCompNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo3.getEFlgPotenzaCompatibile())));
			cve.xsetAEFlagPotCompNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo3.getEFlgPotenzaCompatibile())));
			cve.xsetAEFlagPotCompSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo3.getEFlgPotenzaCompatibile())));
		}
		
		if(dettTipo3.getEFlgCoibIdonea() != null)
		{
			cve.xsetAEFlagStatoCoibenNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo3.getEFlgCoibIdonea())));
			cve.xsetAEFlagStatoCoibenNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo3.getEFlgCoibIdonea())));
			cve.xsetAEFlagStatoCoibenSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo3.getEFlgCoibIdonea())));
		}
		
		
		if(dettTipo3.getEFlgDispFunzionanti() != null)
		{
			cve.xsetAEFlagDispRegNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo3.getEFlgDispFunzionanti())));
			cve.xsetAEFlagDispRegNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo3.getEFlgDispFunzionanti())));
			cve.xsetAEFlagDispRegSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo3.getEFlgDispFunzionanti())));
		}
		
		
		// F. CHECK-LIST
		it.csi.sigit.sigitwebn.xml.allegato4.data.CheckListDocument.CheckList cl = rowAllegatoIV.addNewCheckList();
		cl.xsetAFFlagValvole(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo3Dto.getFFlgValvoleTermost())));
		cl.xsetAFFlagCurvaClim(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo3Dto.getFFlgVerificaParam())));
		cl.xsetAFFlagPerditaH2O(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo3Dto.getFFlgPerditeH2o())));
		cl.xsetAFFlagInvolucro(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo3Dto.getFFlgInstallInvolucro())));

		cl.setAFOsservazioni(allegatoDto.getFOsservazioni());
		cl.setAFPrescrizioni(allegatoDto.getFPrescrizioni());
		cl.setAFRaccomandazioni(allegatoDto.getFRaccomandazioni());
		
		it.csi.sigit.sigitwebn.xml.allegato4.data.DatiTecnicoDocument.DatiTecnico datiTecnico = rowAllegatoIV.addNewDatiTecnico();

		if(allegatoDto.getFFlgPuoFunzionare() != null)
		{
			datiTecnico.xsetAFFlagFunzImpNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getFFlgPuoFunzionare())));
			datiTecnico.xsetAFFlagFunzImpSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getFFlgPuoFunzionare())));
		}
		
		datiTecnico.setAFDataIntervento(ConvertUtil.convertDateToXmlCalendar(allegatoDto.getFInterventoEntro()));

		datiTecnico.setAFOrarioArrivo(allegatoDto.getFOraArrivo());
		datiTecnico.setAFOrarioPartenza(allegatoDto.getFOraPartenza());
		datiTecnico.setAFCognomeTecnico(allegatoDto.getFDenominazTecnico());
		datiTecnico.setAFFirmaTecnico(allegatoDto.getFFirmaTecnico());
		datiTecnico.setAFFirmaResp(allegatoDto.getFFirmaResponsabile());

		return rowAllegatoIV;
	}
	
	public static RowAllegatoV mapToDatiAllegato4Now(SigitVSk4CgDto dto, SigitTAllegatoDto allegatoDto, SigitTRappTipo4Dto rappTipo4Dto, SigitTDettTipo4Dto dettTipo4,
			SigitTPersonaGiuridicaDto personaGiuridicaDto, SigitTPersonaFisicaDto personaFisicaDto, String ruolo, boolean isTerzoResp,
			List<SigitTUnitaImmobiliareDto> listaUnitaImmobiliare, SigitTImpiantoDto impianto, SigitTTrattH2ODto dettaglioTrattAcqua)
	{
		RowAllegatoV rowAllegatoV = RowAllegatoV.Factory.newInstance();
		
		rowAllegatoV.setCodiceCatasto(ConvertUtil.convertToString(dto.getCodiceImpianto()));
		
		// A. DATI IDENTIFICATIVI
		
		List<SigitTUnitaImmobiliareDto> unitaImmobSecondarie = new ArrayList<SigitTUnitaImmobiliareDto>();
		SigitTUnitaImmobiliareDto unitaImmobPrincipale = new SigitTUnitaImmobiliareDto();
		
		for (SigitTUnitaImmobiliareDto ui : listaUnitaImmobiliare) {
			if(ConvertUtil.convertToBooleanAllways(ui.getFlgPrincipale()))
				unitaImmobPrincipale = ui;
			else
				unitaImmobSecondarie.add(ui);
		}
		
		rowAllegatoV.setAACivico(unitaImmobPrincipale.getCivico());
		if(impianto!=null)
		{
			rowAllegatoV.setAAComune(impianto.getDenominazioneComune());
			rowAllegatoV.setAAProv(impianto.getSiglaProvincia());
		}
		rowAllegatoV.setAAIndirizzo(GenericUtil.isNotNullOrEmpty(unitaImmobPrincipale.getIndirizzoSitad()) ? 
				unitaImmobPrincipale.getIndirizzoSitad() : unitaImmobPrincipale.getIndirizzoNonTrovato());
		rowAllegatoV.setAAInterno(unitaImmobPrincipale.getInterno());
		rowAllegatoV.setAAPalazzo(unitaImmobPrincipale.getPalazzo());
		rowAllegatoV.setAAScala(unitaImmobPrincipale.getScala());
		
		it.csi.sigit.sigitwebn.xml.allegato5.data.RowCatastoDocument.RowCatasto catastoPrincipale = it.csi.sigit.sigitwebn.xml.allegato5.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
		catastoPrincipale.setAAFoglio(unitaImmobPrincipale.getFoglio());
		catastoPrincipale.setAAParticella(unitaImmobPrincipale.getParticella());
		catastoPrincipale.setAAPdr(unitaImmobPrincipale.getPdrGas());
		catastoPrincipale.setAAPod(unitaImmobPrincipale.getPodElettrico());
		catastoPrincipale.setAASezione(unitaImmobPrincipale.getSezione());
		catastoPrincipale.setAASub(unitaImmobPrincipale.getSubalterno());

		List<it.csi.sigit.sigitwebn.xml.allegato5.data.RowCatastoDocument.RowCatasto> rowCatastoList = rowAllegatoV.addNewSezCatasto().getRowCatastoList();
		rowCatastoList.add(catastoPrincipale);
		for (SigitTUnitaImmobiliareDto umSec : unitaImmobSecondarie) 
		{
			it.csi.sigit.sigitwebn.xml.allegato5.data.RowCatastoDocument.RowCatasto catastoSec = it.csi.sigit.sigitwebn.xml.allegato5.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
			catastoSec.setAAFoglio(umSec.getFoglio());
			catastoSec.setAAParticella(umSec.getParticella());
			catastoSec.setAAPdr(umSec.getPdrGas());
			catastoSec.setAAPod(umSec.getPodElettrico());
			catastoSec.setAASezione(umSec.getSezione());
			catastoSec.setAASub(umSec.getSubalterno());
			rowCatastoList.add(catastoSec);
		}
		
		if(personaGiuridicaDto!=null){
			rowAllegatoV.setAA2RagSociale(personaGiuridicaDto.getDenominazione());
			rowAllegatoV.setAA2Piva(personaGiuridicaDto.getCodiceFiscale());

			rowAllegatoV.setAA2Cognome(null);
			rowAllegatoV.setAA2Nome(null);
			rowAllegatoV.setAA2Cf(null);
			
			if (ConvertUtil.convertToBooleanAllways(personaGiuridicaDto.getFlgIndirizzoEstero()))
			{
				rowAllegatoV.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoEstero());
				rowAllegatoV.setAA2Comune(GenericUtil.getStringValid(personaGiuridicaDto.getCittaEstero()) + " ("+GenericUtil.getStringValid(personaGiuridicaDto.getStatoEstero())+")");
				rowAllegatoV.setAA2Prov(null);
				
				
			}
			else
			{
				rowAllegatoV.setAA2Prov(personaGiuridicaDto.getSiglaProv());
				rowAllegatoV.setAA2Comune(personaGiuridicaDto.getComune());
				if(personaGiuridicaDto.getIndirizzoSitad()!=null){
					rowAllegatoV.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoSitad());
				}else{
					rowAllegatoV.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoNonTrovato());
				}
			}

			// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
			rowAllegatoV.setAA2Civico(personaGiuridicaDto.getCivico());

		}else{
			//vuol dire che e'  persona fisica
			rowAllegatoV.setAA2Cognome(personaFisicaDto.getCognome());
			rowAllegatoV.setAA2Nome(personaFisicaDto.getNome());
			rowAllegatoV.setAA2Cf(personaFisicaDto.getCodiceFiscale());
			
			rowAllegatoV.setAA2RagSociale(null);
			rowAllegatoV.setAA2Piva(null);
			
			if (ConvertUtil.convertToBooleanAllways(personaFisicaDto.getFlgIndirizzoEstero()))
			{
				rowAllegatoV.setAA2Indirizzo(personaFisicaDto.getIndirizzoEstero());
				rowAllegatoV.setAA2Comune(GenericUtil.getStringValid(personaFisicaDto.getCittaEstero()) + " ("+GenericUtil.getStringValid(personaFisicaDto.getStatoEstero())+")");
				rowAllegatoV.setAA2Prov(null);
			}
			else
			{
				rowAllegatoV.setAA2Prov(personaFisicaDto.getSiglaProv());
				rowAllegatoV.setAA2Comune(personaFisicaDto.getComune());
	
				if(personaFisicaDto.getIndirizzoSitad()!=null){
					rowAllegatoV.setAA2Indirizzo(personaFisicaDto.getIndirizzoSitad());
				}else{
					rowAllegatoV.setAA2Indirizzo(personaFisicaDto.getIndirizzoNonTrovato());
				}
			}
			// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
			rowAllegatoV.setAA2Civico(personaFisicaDto.getCivico());
		}
		
		//per il titolo responsabile si hanno dei radio button da gestire
		if(isTerzoResp){
			rowAllegatoV.xsetAA2FlagTerzoResp(getXmlBoolean(true));
			
			rowAllegatoV.xsetAA2FlagProprietario(MapDto.getXmlBoolean(false));
			rowAllegatoV.xsetAA2FlagOccupante(MapDto.getXmlBoolean(false));
			rowAllegatoV.xsetAA2FlagAmministr(MapDto.getXmlBoolean(false));

		} 
		else
		{
			log.debug("Constants.ID_RUOLO_PROPRIETARIO: "+Constants.ID_RUOLO_PROPRIETARIO);
			log.debug("Constants.ID_RUOLO_RESPONSABILE_IMPRESA_PROPRIETARIO: "+Constants.ID_RUOLO_RESPONSABILE_IMPRESA_PROPRIETARIO);
			log.debug("ruolo: "+ruolo);
			
			rowAllegatoV.xsetAA2FlagTerzoResp(getXmlBoolean(false));

			if((Constants.ID_RUOLO_PROPRIETARIO == ConvertUtil.convertToInteger(ruolo))
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_PROPRIETARIO ==  ConvertUtil.convertToInteger(ruolo))){
				
				log.debug("sono dentro!!!!!!!!!!!!!");
				rowAllegatoV.xsetAA2FlagProprietario(MapDto.getXmlBoolean(true));
			}
			if((Constants.ID_RUOLO_OCCUPANTE == ConvertUtil.convertToInteger(ruolo))
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_OCCUPANTE ==  ConvertUtil.convertToInteger(ruolo))){
				rowAllegatoV.xsetAA2FlagOccupante(MapDto.getXmlBoolean(true));
			}
			if((Constants.ID_RUOLO_AMMINISTRATORE == ConvertUtil.convertToInteger(ruolo))
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_AMMINISTRATORE ==  ConvertUtil.convertToInteger(ruolo))){
				rowAllegatoV.xsetAA2FlagAmministr(MapDto.getXmlBoolean(true));
			}
		}
		
		// B. DOCUMENTAZIONE TECNICA A CORREDO
		it.csi.sigit.sigitwebn.xml.allegato5.data.DatiIdentificativiDocument.DatiIdentificativi datiIdentificativi = rowAllegatoV.addNewDatiIdentificativi();
		datiIdentificativi.setAAPotenzaTermicaNomTotMax(allegatoDto.getAPotenzaTermicaNominaleMax());

		it.csi.sigit.sigitwebn.xml.allegato5.data.DocumentazioneTecnicaDocument.DocumentazioneTecnica documentazioneTecnica = rowAllegatoV.addNewDocumentazioneTecnica();

		if(allegatoDto.getBFlgDichiarConform() != null)
		{
			documentazioneTecnica.xsetABFlagDichiarazConfNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getBFlgDichiarConform())));
			documentazioneTecnica.xsetABFlagDichiarazConfSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getBFlgDichiarConform())));
		}

		if(allegatoDto.getBFlgLibImp() != null)
		{
			documentazioneTecnica.xsetABFlagLibrettoImpNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getBFlgLibImp())));
			documentazioneTecnica.xsetABFlagLibrettoImpSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getBFlgLibImp())));
		}

		if(allegatoDto.getBFlgLibrettoUso() != null)
		{
			documentazioneTecnica.xsetABFlagManutGenNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getBFlgLibrettoUso())));
			documentazioneTecnica.xsetABFlagManutGenSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getBFlgLibrettoUso())));
		}

		if(allegatoDto.getBFlgLibCompl() != null)
		{
			documentazioneTecnica.xsetABFlagLibrettoCompNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getBFlgLibCompl())));
			documentazioneTecnica.xsetABFlagLibrettoCompSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getBFlgLibCompl())));
		}

		//SEZIONE C. Trattamento dell'acqua
		it.csi.sigit.sigitwebn.xml.allegato5.data.TrattamentoAcquaDocument.TrattamentoAcqua trattamentoAcqua = it.csi.sigit.sigitwebn.xml.allegato5.data.TrattamentoAcquaDocument.TrattamentoAcqua.Factory.newInstance();
		
		if(rappTipo4Dto.getCFlgTrattClimaNonRichiest() !=null && Constants.SI_1 == rappTipo4Dto.getCFlgTrattClimaNonRichiest().intValue())
			trattamentoAcqua.xsetACFlagTrattH2ONR(MapDto.getXmlBoolean(true));
		else{
			trattamentoAcqua.xsetACFlagTrattH2ONR(MapDto.getXmlBoolean(false));
		}

		if(dettaglioTrattAcqua!=null){
			log.debug("FRAAAAAAAAAAA --- > trattamento acqua ");

			if (log.isDebugEnabled())
				GenericUtil.stampa(dettaglioTrattAcqua, true, 3);

			trattamentoAcqua.setACDurezzaTotH2O(dettaglioTrattAcqua.getL22DurezzaH2oFr());

			if(dettaglioTrattAcqua.getL23FlgTrattClimaAssente() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL23FlgTrattClimaAssente().intValue())
				trattamentoAcqua.xsetACFlagTrattH2OAssente(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattH2OAssente(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL23FlgTrattClimaFiltr() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL23FlgTrattClimaFiltr().intValue())
				trattamentoAcqua.xsetACFlagTrattH2OFiltraz(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattH2OFiltraz(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL23FlgTrattClimaAddolc() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL23FlgTrattClimaAddolc().intValue())
				trattamentoAcqua.xsetACFlagTrattH2OAddolcim(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattH2OAddolcim(MapDto.getXmlBoolean(false));
			}

			if(dettaglioTrattAcqua.getL23FlgTrattClimaChimico() !=null && Constants.SI_1 == dettaglioTrattAcqua.getL23FlgTrattClimaChimico().intValue())
				trattamentoAcqua.xsetACFlagTrattH2OCondizChimico(MapDto.getXmlBoolean(true));
			else{
				trattamentoAcqua.xsetACFlagTrattH2OCondizChimico(MapDto.getXmlBoolean(false));
			}

			rowAllegatoV.setTrattamentoAcqua(trattamentoAcqua);
		}


		// D. CONTROLLO DELL'IMPIANTO
		if (rappTipo4Dto != null)
		{
			it.csi.sigit.sigitwebn.xml.allegato5.data.ControlloImpiantoDocument.ControlloImpianto ci = rowAllegatoV.addNewControlloImpianto();

			
			if(rappTipo4Dto.getDFlgLuogoIdoneo() != null)
			{
				ci.xsetADFlagLuogoIdoneoNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo4Dto.getDFlgLuogoIdoneo())));
				ci.xsetADFlagLuogoIdoneoNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo4Dto.getDFlgLuogoIdoneo())));
				ci.xsetADFlagLuogoIdoneoSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo4Dto.getDFlgLuogoIdoneo())));
			}

			if(rappTipo4Dto.getDFlgVentilazAdeg() != null)
			{
				ci.xsetADFlagDimensioniNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo4Dto.getDFlgVentilazAdeg())));
				ci.xsetADFlagDimensioniNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo4Dto.getDFlgVentilazAdeg())));
				ci.xsetADFlagDimensioniSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo4Dto.getDFlgVentilazAdeg())));
			}
			
			if(rappTipo4Dto.getDFlgVentilazLibera() != null)
			{
				ci.xsetADFlagApertureNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo4Dto.getDFlgVentilazLibera())));
				ci.xsetADFlagApertureNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo4Dto.getDFlgVentilazLibera())));
				ci.xsetADFlagApertureSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo4Dto.getDFlgVentilazLibera())));
			}

			if(rappTipo4Dto.getDFlgLineaElettIdonea() != null)
			{
				ci.xsetADFlagLineeIdoneeNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo4Dto.getDFlgLineaElettIdonea())));
				ci.xsetADFlagLineeIdoneeNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo4Dto.getDFlgLineaElettIdonea())));
				ci.xsetADFlagLineeIdoneeSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo4Dto.getDFlgLineaElettIdonea())));
			}

			if(rappTipo4Dto.getDFlgCaminoIdoneo() != null)
			{
				ci.xsetADFlagCanaleFumoNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo4Dto.getDFlgCaminoIdoneo())));
				ci.xsetADFlagCanaleFumoNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo4Dto.getDFlgCaminoIdoneo())));
				ci.xsetADFlagCanaleFumoSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo4Dto.getDFlgCaminoIdoneo())));
			}


			if(rappTipo4Dto.getDFlgCapsulaIdonea() != null)
			{
				ci.xsetADFlagCapsulaInsoNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo4Dto.getDFlgCapsulaIdonea())));
				ci.xsetADFlagCapsulaInsoNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo4Dto.getDFlgCapsulaIdonea())));
				ci.xsetADFlagCapsulaInsoSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo4Dto.getDFlgCapsulaIdonea())));
			}

			if(rappTipo4Dto.getDFlgCircIdrIdoneo() != null)
			{
				ci.xsetADFlagTenutaIdraulicaNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo4Dto.getDFlgCircIdrIdoneo())));
				ci.xsetADFlagTenutaIdraulicaNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo4Dto.getDFlgCircIdrIdoneo())));
				ci.xsetADFlagTenutaIdraulicaSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo4Dto.getDFlgCircIdrIdoneo())));
			}

			if(rappTipo4Dto.getDFlgCircOlioIdoneo() != null)
			{
				ci.xsetADFlagTenutaOlioNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo4Dto.getDFlgCircOlioIdoneo())));
				ci.xsetADFlagTenutaOlioNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo4Dto.getDFlgCircOlioIdoneo())));
				ci.xsetADFlagTenutaOlioSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo4Dto.getDFlgCircOlioIdoneo())));
			}
			
			if(rappTipo4Dto.getDFlgCircCombIdoneo() != null)
			{
				ci.xsetADFlagTenutaAlimentazNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo4Dto.getDFlgCircCombIdoneo())));
				ci.xsetADFlagTenutaAlimentazNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo4Dto.getDFlgCircCombIdoneo())));
				ci.xsetADFlagTenutaAlimentazSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo4Dto.getDFlgCircCombIdoneo())));
			}

			if(rappTipo4Dto.getDFlgFunzScambIdonea() != null)
			{
				ci.xsetADFlagFunzionalitaNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(rappTipo4Dto.getDFlgFunzScambIdonea())));
				ci.xsetADFlagFunzionalitaNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(rappTipo4Dto.getDFlgFunzScambIdonea())));
				ci.xsetADFlagFunzionalitaSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo4Dto.getDFlgFunzScambIdonea())));
			}

		}
		
		// E. CONTROLLO E VERIFICA ENERGETICA DEL GRUPPO TERMICO
		rowAllegatoV.setAFDataControllo(ConvertUtil.convertToXmlCalendar(dto.getDataControllo()));
		//campi obbligatori che cambiano a seconda della pagina
		rowAllegatoV.setAEDataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		rowAllegatoV.setAENumCG(ConvertUtil.convertToBigInteger(dto.getProgressivo()));
		//campi che non cambiano per le pagine
		rowAllegatoV.setAECombustibile(dto.getDesCombustibile());
		//rowAllegatoV.setAEIDcombustibile(ConvertUtil.convertToString(dto.getIdCombustibile()));
		rowAllegatoV.setAEFabbricante(dto.getDesMarca());
		rowAllegatoV.setAETipologia(dto.getTipologia());
		rowAllegatoV.setAEMatricola(dto.getMatricola());
		rowAllegatoV.setAEModello(dto.getModello());
		//rowAllegatoV.setAEPotenzaNomUtile(dto.getPotenzaTermicaKw());
		
		/*
		if(Constants.ID_DETT_GT_GRUPPO_TERM_SING.equals(ConvertUtil.convertToString(dto.getFkDettaglioGt())));{
			rowAllegatoV.xsetAEGTsingolo(MapDto.getXmlBoolean(true));
			rowAllegatoV.xsetAEGTModulare(MapDto.getXmlBoolean(false));
			rowAllegatoV.xsetAETupoRadiante(MapDto.getXmlBoolean(false));
			rowAllegatoV.xsetAEGenAriaCalda(MapDto.getXmlBoolean(false));
		}
		if(Constants.ID_DETT_GT_GRUPPO_TERM_MOD.equals(ConvertUtil.convertToString(dto.getFkDettaglioGt()))){
			rowAllegatoV.xsetAEGTModulare(MapDto.getXmlBoolean(true));
			rowAllegatoV.xsetAEGTsingolo(MapDto.getXmlBoolean(false));
			rowAllegatoV.xsetAETupoRadiante(MapDto.getXmlBoolean(false));
			rowAllegatoV.xsetAEGenAriaCalda(MapDto.getXmlBoolean(false));
		}
		if(Constants.ID_DETT_GT_TUBO_RADIANTE.equals(ConvertUtil.convertToString(dto.getFkDettaglioGt()))){
			rowAllegatoV.xsetAETupoRadiante(MapDto.getXmlBoolean(true));
			rowAllegatoV.xsetAEGTModulare(MapDto.getXmlBoolean(false));
			rowAllegatoV.xsetAEGTsingolo(MapDto.getXmlBoolean(false));
			rowAllegatoV.xsetAEGenAriaCalda(MapDto.getXmlBoolean(false));
		}
		if(Constants.ID_DETT_GT_GEN_ARIA_CALDA.equals(ConvertUtil.convertToString(dto.getFkDettaglioGt()))){
			rowAllegatoV.xsetAEGenAriaCalda(MapDto.getXmlBoolean(true));
			rowAllegatoV.xsetAETupoRadiante(MapDto.getXmlBoolean(false));
			rowAllegatoV.xsetAEGTModulare(MapDto.getXmlBoolean(false));
			rowAllegatoV.xsetAEGTsingolo(MapDto.getXmlBoolean(false));
		}
		*/
		
		it.csi.sigit.sigitwebn.xml.allegato5.data.ControlloVerificaEnergeticaDocument.ControlloVerificaEnergetica cve = rowAllegatoV.addNewControlloVerificaEnergetica();
		cve.setAEFluidoVett(ConvertUtil.convertToString(dettTipo4.getFkFluido()));

		rowAllegatoV.setAEPotenzaElettrica(dto.getPotenzaElettricaKw());
		rowAllegatoV.setAEPotenzaAssorbita(dettTipo4.getEPotenzaAssorbCombKw());
		rowAllegatoV.setAEPotenzaTermica(dto.getPotenzaTermicaKw());
		rowAllegatoV.setAEPotenzaTermByPass(dettTipo4.getEPotenzaTermBypassKw());
		
		String emissMono = "";
		if (dto.getCoMin() != null)
		{
			emissMono += dto.getCoMin();
		}
		emissMono += "/";
		if (dto.getCoMax() != null)
		{
			emissMono += dto.getCoMax();
		}
		
		rowAllegatoV.setAEEmissioniMonossido(emissMono);
		
		// Prova fumi
		//rowAllegatoV.setAEtempAriaCombur
		
		/*
		cve.xsetAEFlagClimatizInv(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo4.getEFlgClimaInverno())));
		cve.xsetAEFlagProduzACS(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo4.getEFlgProduzAcs())));

		cve.xsetAEFlagEvacFumiNATU(getXmlBoolean(Constants.FLAG_EVACUAZIONE_FUMI_NATURALE.equals(dettTipo4.getEFlgEvacuFumi())));
		cve.xsetAEFlagEvacFumiFORZ(getXmlBoolean(Constants.FLAG_EVACUAZIONE_FUMI_FORZATA.equals(dettTipo4.getEFlgEvacuFumi())));

		cve.setAEDepressCanaleFumo(dettTipo4.getEDeprCanaleFumoPa());

		if(dettTipo4.getEFlgDisposComando() != null)
		{
			cve.xsetAEFlagDispComandoNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo4.getEFlgDisposComando())));
			cve.xsetAEFlagDispComandoNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo4.getEFlgDisposComando())));
			cve.xsetAEFlagDispComandoSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo4.getEFlgDisposComando())));
		}
		
		if(dettTipo4.getEFlgDisposSicurezza() != null)
		{
			cve.xsetAEFlagDispSicuNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo4.getEFlgDisposSicurezza())));
			cve.xsetAEFlagDispSicuNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo4.getEFlgDisposSicurezza())));
			cve.xsetAEFlagDispSicuSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo4.getEFlgDisposSicurezza())));
		}
		
		
		if(dettTipo4.getEFlgValvolaSicurezza() != null)
		{
			cve.xsetAEFlagValvSicuNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo4.getEFlgValvolaSicurezza())));
			cve.xsetAEFlagValvSicuNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo4.getEFlgValvolaSicurezza())));
			cve.xsetAEFlagValvSicuSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo4.getEFlgValvolaSicurezza())));
		}
		
		if(dettTipo4.getEFlgScambiatoreFumi() != null)
		{
			cve.xsetAEFlagScambiatoreNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo4.getEFlgScambiatoreFumi())));
			cve.xsetAEFlagScambiatoreNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo4.getEFlgScambiatoreFumi())));
			cve.xsetAEFlagScambiatoreSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo4.getEFlgScambiatoreFumi())));
		}
		
		if(dettTipo4.getEFlgRiflusso() != null)
		{
			cve.xsetAEFlagRiflussoNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo4.getEFlgRiflusso())));
			cve.xsetAEFlagRiflussoNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo4.getEFlgRiflusso())));
			cve.xsetAEFlagRiflussoSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo4.getEFlgRiflusso())));
		}
		
		if(dettTipo4.getEFlgUni103891() != null)
		{
			cve.xsetAEFlagRisultatiNC(getXmlBoolean(new BigDecimal(Constants.NC_2).equals(dettTipo4.getEFlgUni103891())));
			cve.xsetAEFlagRisultatiNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dettTipo4.getEFlgUni103891())));
			cve.xsetAEFlagRisultatiSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dettTipo4.getEFlgUni103891())));
		}
		*/
		
		// F. CHECK-LIST
		it.csi.sigit.sigitwebn.xml.allegato5.data.CheckListDocument.CheckList cl = rowAllegatoV.addNewCheckList();
		cl.xsetAFFlagValvole(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo4Dto.getFFlgAdozioneValvole())));
		cl.xsetAFFlagIsolamento(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo4Dto.getFFlgIsolamentoRete())));
		cl.xsetAFFlagSistTrattACS(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo4Dto.getFFlgSistemaTrattH2o())));
		cl.xsetAFFlagSistRegolaz(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(rappTipo4Dto.getFFlgSostSistemaRegolaz())));

		cl.setAFOsservazioni(allegatoDto.getFOsservazioni());
		cl.setAFPrescrizioni(allegatoDto.getFPrescrizioni());
		cl.setAFRaccomandazioni(allegatoDto.getFRaccomandazioni());
		
		it.csi.sigit.sigitwebn.xml.allegato5.data.DatiTecnicoDocument.DatiTecnico datiTecnico = rowAllegatoV.addNewDatiTecnico();

		if(allegatoDto.getFFlgPuoFunzionare() != null)
		{
			datiTecnico.xsetAFFlagFunzImpNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(allegatoDto.getFFlgPuoFunzionare())));
			datiTecnico.xsetAFFlagFunzImpSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(allegatoDto.getFFlgPuoFunzionare())));
		}
		
		datiTecnico.setAFDataIntervento(ConvertUtil.convertDateToXmlCalendar(allegatoDto.getFInterventoEntro()));

		datiTecnico.setAFOrarioArrivo(allegatoDto.getFOraArrivo());
		datiTecnico.setAFOrarioPartenza(allegatoDto.getFOraPartenza());
		datiTecnico.setAFCognomeTecnico(allegatoDto.getFDenominazTecnico());
		datiTecnico.setAFFirmaTecnico(allegatoDto.getFFirmaTecnico());
		datiTecnico.setAFFirmaResp(allegatoDto.getFFirmaResponsabile());

		return rowAllegatoV;
	}
	
	public static RowAllegatoIII mapToDatiAllegato2RowFumiNow(RowAllegatoIII rowAllegatoIII,
			List<SigitTDettTipo2Dto> tDettTipo2List)
	{
		
		
		//devo creare tante istanze di RowFumi quanti sono gli n_moduli(pu arrivare null, 0, 1,2,...)
		//log.debug("FRAAAAAAAAAAA --- > "+dto.getNModuli());
		it.csi.sigit.sigitwebn.xml.allegato3.data.RowFumiDocument.RowFumi rowFumi = null;
		
		//TabFumi tabFumi = rowAllegatoII.addNewTabFumi();
		List<it.csi.sigit.sigitwebn.xml.allegato3.data.RowFumiDocument.RowFumi> listaRowFumi = rowAllegatoIII.addNewTabFumi().getRowFumiList();
		if(tDettTipo2List == null || tDettTipo2List.size() == 0){
		

		/*
			log.debug("FRAAAAAAAAAAA --- > nel null oppure se  zero");
			
			//istanzio la lista di RowFumi
			if(listaRowFumi!=null && listaRowFumi.size()>0){
				listaRowFumi.clear();
			}
			*/
			rowFumi = it.csi.sigit.sigitwebn.xml.allegato3.data.RowFumiDocument.RowFumi.Factory.newInstance();
			
			rowFumi.setAESurrisc(null);
			rowFumi.setAESottoRaffr(null);
			rowFumi.setAECondens(null);
			rowFumi.setAEEvaporaz(null);
			rowFumi.setAEIngLatoEst(null);
			rowFumi.setAEUscLatoEst(null);
			rowFumi.setAEIngLatoUtenze(null);
			rowFumi.setAEUscLatoUtenze(null);
			//da valorizzare di default
			rowFumi.setAENumCircuito(new BigInteger("1"));
			listaRowFumi.add(rowFumi);
			log.debug("FRAAAAAAAAAAA --- > nel null oppure se  zero dimensione lista : "+listaRowFumi.size());
		}else{
			for (SigitTDettTipo2Dto sigitTDettTipo2Dto : tDettTipo2List) {
//			int count = dto.getNModuli().intValue();
//			log.debug("FRAAAAAAAAAAA ---  count > "+count);
//			//istanzio la lista di RowFumi
//			List<RowFumi> listaRowFumi = rowAllegatoII.addNewTabFumi().getRowFumiList();
//			if(listaRowFumi!=null && listaRowFumi.size()>0){
//				log.debug("FRAAAAAAAAAAA ---  sta pulendo ");
//				listaRowFumi.clear();
//			}
//			
//			log.debug("FRAAAAAAAAAAA --- > ADESSO dimensione listaRowFumi: "+listaRowFumi.size());
//			for(int i = 1; i<=count; i++){
				//log.debug("FRAAAAAAAAAAAAAAA NEL FOR i: "+i);
				rowFumi = it.csi.sigit.sigitwebn.xml.allegato3.data.RowFumiDocument.RowFumi.Factory.newInstance();
				
				rowFumi.setAESurrisc(sigitTDettTipo2Dto.getETSurriscC());
				rowFumi.setAESottoRaffr(sigitTDettTipo2Dto.getETSottorafC());
				rowFumi.setAECondens(sigitTDettTipo2Dto.getETCondensazioneC());
				rowFumi.setAEEvaporaz(sigitTDettTipo2Dto.getETEvaporazioneC());
				rowFumi.setAEIngLatoEst(sigitTDettTipo2Dto.getETInExtC());
				rowFumi.setAEUscLatoEst(sigitTDettTipo2Dto.getETOutExtC());
				rowFumi.setAEIngLatoUtenze(sigitTDettTipo2Dto.getETInUtenzeC());
				rowFumi.setAEUscLatoUtenze(sigitTDettTipo2Dto.getETOutUtenzeC());
				//da valorizzare di default
				rowFumi.setAENumCircuito(ConvertUtil.convertToBigInteger(sigitTDettTipo2Dto.getENCircuito()));
				
				listaRowFumi.add(rowFumi);
				
				log.debug("FRAAAAAAAAAAAAAAA NEL FOR DIMENSIONE: "+listaRowFumi.size());
			}
		}
	
		//a questo punto setto l'oggetto che si ripete dentro l'arrayList del modulo
		//listaRow.add(rowAllegatoII);
		
		
		
		
		return rowAllegatoIII;
	}
	
	public static RowAllegatoIV mapToDatiAllegato3RowFumiNow(RowAllegatoIV rowAllegatoIV,
			List<SigitTDettTipo3Dto> tDettTipo3List)
	{
		
		
		//devo creare tante istanze di RowFumi quanti sono gli n_moduli(pu arrivare null, 0, 1,2,...)
		//log.debug("FRAAAAAAAAAAA --- > "+dto.getNModuli());
		it.csi.sigit.sigitwebn.xml.allegato4.data.RowFumiDocument.RowFumi rowFumi = null;
		
		//TabFumi tabFumi = rowAllegatoII.addNewTabFumi();
		List<it.csi.sigit.sigitwebn.xml.allegato4.data.RowFumiDocument.RowFumi> listaRowFumi = rowAllegatoIV.addNewTabFumi().getRowFumiList();
		if(tDettTipo3List == null || tDettTipo3List.size() == 0){
		

		/*
			log.debug("FRAAAAAAAAAAA --- > nel null oppure se  zero");
			
			//istanzio la lista di RowFumi
			if(listaRowFumi!=null && listaRowFumi.size()>0){
				listaRowFumi.clear();
			}
			*/
			rowFumi = it.csi.sigit.sigitwebn.xml.allegato4.data.RowFumiDocument.RowFumi.Factory.newInstance();
			
			rowFumi.setAETempEst(null);
			rowFumi.setAETempMandPrim(null);
			rowFumi.setAETempRitPrim(null);
			rowFumi.setAEPotenzaTerm(null);
			rowFumi.setAEPortataFluido(null);
			rowFumi.setAETempMandSecond(null);
			rowFumi.setAETempRitSecond(null);
			
			listaRowFumi.add(rowFumi);
			log.debug("FRAAAAAAAAAAA --- > nel null oppure se  zero dimensione lista : "+listaRowFumi.size());
		}else{
			for (SigitTDettTipo3Dto sigitTDettTipo3Dto : tDettTipo3List) {
//			int count = dto.getNModuli().intValue();
//			log.debug("FRAAAAAAAAAAA ---  count > "+count);
//			//istanzio la lista di RowFumi
//			List<RowFumi> listaRowFumi = rowAllegatoII.addNewTabFumi().getRowFumiList();
//			if(listaRowFumi!=null && listaRowFumi.size()>0){
//				log.debug("FRAAAAAAAAAAA ---  sta pulendo ");
//				listaRowFumi.clear();
//			}
//			
//			log.debug("FRAAAAAAAAAAA --- > ADESSO dimensione listaRowFumi: "+listaRowFumi.size());
//			for(int i = 1; i<=count; i++){
				//log.debug("FRAAAAAAAAAAAAAAA NEL FOR i: "+i);
				rowFumi = it.csi.sigit.sigitwebn.xml.allegato4.data.RowFumiDocument.RowFumi.Factory.newInstance();
				
				rowFumi.setAETempEst(sigitTDettTipo3Dto.getETempExtC());
				rowFumi.setAETempMandPrim(sigitTDettTipo3Dto.getETempMandPrimarioC());
				rowFumi.setAETempRitPrim(sigitTDettTipo3Dto.getETempRitorPrimarioC());
				rowFumi.setAEPotenzaTerm(sigitTDettTipo3Dto.getEPotenzaTermKw());
				rowFumi.setAEPortataFluido(sigitTDettTipo3Dto.getEPortFluidoM3H());
				rowFumi.setAETempMandSecond(sigitTDettTipo3Dto.getETempMandSecondarioC());
				rowFumi.setAETempRitSecond(sigitTDettTipo3Dto.getETempRitSecondarioC());
				
				listaRowFumi.add(rowFumi);
				
				log.debug("FRAAAAAAAAAAAAAAA NEL FOR DIMENSIONE: "+listaRowFumi.size());
			}
		}
	
		//a questo punto setto l'oggetto che si ripete dentro l'arrayList del modulo
		//listaRow.add(rowAllegatoII);
		
		
		
		
		return rowAllegatoIV;
	}
	
	public static RowAllegatoV mapToDatiAllegato4RowFumiNow(RowAllegatoV rowAllegatoV,
			List<SigitTDettTipo4Dto> tDettTipo4List)
	{
		
		
		//devo creare tante istanze di RowFumi quanti sono gli n_moduli(pu arrivare null, 0, 1,2,...)
		//log.debug("FRAAAAAAAAAAA --- > "+dto.getNModuli());
		it.csi.sigit.sigitwebn.xml.allegato5.data.RowFumiDocument.RowFumi rowFumi = null;
		
		//TabFumi tabFumi = rowAllegatoII.addNewTabFumi();
		List<it.csi.sigit.sigitwebn.xml.allegato5.data.RowFumiDocument.RowFumi> listaRowFumi = rowAllegatoV.addNewTabFumi().getRowFumiList();
		if(tDettTipo4List == null || tDettTipo4List.size() == 0){
		

		/*
			log.debug("FRAAAAAAAAAAA --- > nel null oppure se  zero");
			
			//istanzio la lista di RowFumi
			if(listaRowFumi!=null && listaRowFumi.size()>0){
				listaRowFumi.clear();
			}
			*/
			rowFumi = it.csi.sigit.sigitwebn.xml.allegato5.data.RowFumiDocument.RowFumi.Factory.newInstance();
			
			rowFumi.setAETempAriaCombur(null);
			rowFumi.setAETempFumiAmonte(null);
			rowFumi.setAETempFumiAvalle(null);
			rowFumi.setAETempAriaIng(null);
			rowFumi.setAETempH2Omotore(null);
			rowFumi.setAETempAriaUsc(null);
			/*
			rowFumi.setAESovraFreqSoglia1(null);
			rowFumi.setAESovraFreqSoglia2(null);
			rowFumi.setAESovraFreqSoglia3(null);
			
			rowFumi.setAESovraFreqTempo1(null);
			rowFumi.setAESovraFreqTempo2(null);
			rowFumi.setAESovraFreqTempo3(null);
			
			rowFumi.setAESottoFreqSoglia1(null);
			rowFumi.setAESottoFreqSoglia2(null);
			rowFumi.setAESottoFreqSoglia3(null);
			
			rowFumi.setAESottoFreqTempo1(null);
			rowFumi.setAESottoFreqTempo2(null);
			rowFumi.setAESottoFreqTempo3(null);
			
			rowFumi.setAESovraTensSoglia1(null);
			rowFumi.setAESovraTensSoglia2(null);
			rowFumi.setAESovraTensSoglia3(null);
			
			rowFumi.setAESovraTensTempo1(null);
			rowFumi.setAESovraTensTempo2(null);
			rowFumi.setAESovraTensTempo3(null);
			
			rowFumi.setAESottoTensSoglia1(null);
			rowFumi.setAESottoTensSoglia2(null);
			rowFumi.setAESottoTensSoglia3(null);
			
			rowFumi.setAESottoTensTempo1(null);
			rowFumi.setAESottoTensTempo2(null);
			rowFumi.setAESottoTensTempo3(null);
			*/
			
			
			listaRowFumi.add(rowFumi);
			log.debug("FRAAAAAAAAAAA --- > nel null oppure se  zero dimensione lista : "+listaRowFumi.size());
		}else{
			for (SigitTDettTipo4Dto sigitTDettTipo4Dto : tDettTipo4List) {
//			int count = dto.getNModuli().intValue();
//			log.debug("FRAAAAAAAAAAA ---  count > "+count);
//			//istanzio la lista di RowFumi
//			List<RowFumi> listaRowFumi = rowAllegatoII.addNewTabFumi().getRowFumiList();
//			if(listaRowFumi!=null && listaRowFumi.size()>0){
//				log.debug("FRAAAAAAAAAAA ---  sta pulendo ");
//				listaRowFumi.clear();
//			}
//			
//			log.debug("FRAAAAAAAAAAA --- > ADESSO dimensione listaRowFumi: "+listaRowFumi.size());
//			for(int i = 1; i<=count; i++){
				//log.debug("FRAAAAAAAAAAAAAAA NEL FOR i: "+i);
				rowFumi = it.csi.sigit.sigitwebn.xml.allegato5.data.RowFumiDocument.RowFumi.Factory.newInstance();
				
				rowFumi.setAEPotenzaMorsetti(sigitTDettTipo4Dto.getEPotenzaMorsettiKw());
				rowFumi.setAETempAriaCombur(sigitTDettTipo4Dto.getETempAriaC());
				rowFumi.setAETempFumiAmonte(sigitTDettTipo4Dto.getETempFumiMonteC());
				rowFumi.setAETempFumiAvalle(sigitTDettTipo4Dto.getETempFumiValleC());
				rowFumi.setAETempAriaIng(sigitTDettTipo4Dto.getETempH2oInC());
				rowFumi.setAETempH2Omotore(sigitTDettTipo4Dto.getETempH2oMotoreC());
				rowFumi.setAETempAriaUsc(sigitTDettTipo4Dto.getETempH2oOutC());
				/*
				rowFumi.setAESovraFreqSoglia1(sigitTDettTipo4Dto.getL114SovrafreqSogliaHzMin());
				rowFumi.setAESovraFreqSoglia2(sigitTDettTipo4Dto.getL114SovrafreqSogliaHzMed());
				rowFumi.setAESovraFreqSoglia3(sigitTDettTipo4Dto.getL114SovrafreqSogliaHzMax());
				
				rowFumi.setAESovraFreqTempo1(sigitTDettTipo4Dto.getL114SovrafreqTempoSMin());
				rowFumi.setAESovraFreqTempo2(sigitTDettTipo4Dto.getL114SovrafreqTempoSMed());
				rowFumi.setAESovraFreqTempo3(sigitTDettTipo4Dto.getL114SovrafreqTempoSMax());
				
				rowFumi.setAESottoFreqSoglia1(sigitTDettTipo4Dto.getL114SottofreqSogliaHzMin());
				rowFumi.setAESottoFreqSoglia2(sigitTDettTipo4Dto.getL114SottofreqSogliaHzMed());
				rowFumi.setAESottoFreqSoglia3(sigitTDettTipo4Dto.getL114SottofreqSogliaHzMax());
				
				rowFumi.setAESottoFreqTempo1(sigitTDettTipo4Dto.getL114SottofreqTempoSMin());
				rowFumi.setAESottoFreqTempo2(sigitTDettTipo4Dto.getL114SottofreqTempoSMed());
				rowFumi.setAESottoFreqTempo3(sigitTDettTipo4Dto.getL114SottofreqTempoSMax());
				
				rowFumi.setAESovraTensSoglia1(sigitTDettTipo4Dto.getL114SovratensSogliaVMin());
				rowFumi.setAESovraTensSoglia2(sigitTDettTipo4Dto.getL114SovratensSogliaVMed());
				rowFumi.setAESovraTensSoglia3(sigitTDettTipo4Dto.getL114SovratensSogliaVMax());
				
				rowFumi.setAESovraTensTempo1(sigitTDettTipo4Dto.getL114SovratensTempoSMin());
				rowFumi.setAESovraTensTempo2(sigitTDettTipo4Dto.getL114SovratensTempoSMed());
				rowFumi.setAESovraTensTempo3(sigitTDettTipo4Dto.getL114SovratensTempoSMax());
				
				rowFumi.setAESottoTensSoglia1(sigitTDettTipo4Dto.getL114SottotensSogliaVMin());
				rowFumi.setAESottoTensSoglia2(sigitTDettTipo4Dto.getL114SottotensSogliaVMed());
				rowFumi.setAESottoTensSoglia3(sigitTDettTipo4Dto.getL114SottotensSogliaVMax());
				
				rowFumi.setAESottoTensTempo1(sigitTDettTipo4Dto.getL114SottotensTempoSMin());
				rowFumi.setAESottoTensTempo2(sigitTDettTipo4Dto.getL114SottotensTempoSMed());
				rowFumi.setAESottoTensTempo3(sigitTDettTipo4Dto.getL114SottotensTempoSMax());
				*/
				listaRowFumi.add(rowFumi);
				
				log.debug("FRAAAAAAAAAAAAAAA NEL FOR DIMENSIONE: "+listaRowFumi.size());
			}
		}
	
		//a questo punto setto l'oggetto che si ripete dentro l'arrayList del modulo
		//listaRow.add(rowAllegatoII);
		
		
		
		
		return rowAllegatoV;
	}
	
	public static void mapToDatiPrecompilatiAllegato2(RowAllegatoIII datiPrecompilati,
			List<SigitTUnitaImmobiliareDto> listaUnitaImmobiliare, SigitTImpiantoDto impianto, SigitTAllegatoDto allegato)
	{
		List<SigitTUnitaImmobiliareDto> unitaImmobSecondarie = new ArrayList<SigitTUnitaImmobiliareDto>();
		SigitTUnitaImmobiliareDto unitaImmobPrincipale = new SigitTUnitaImmobiliareDto();
		
		for (SigitTUnitaImmobiliareDto ui : listaUnitaImmobiliare) {
			if(ConvertUtil.convertToBooleanAllways(ui.getFlgPrincipale()))
				unitaImmobPrincipale = ui;
			else
				unitaImmobSecondarie.add(ui);
		}
		
		datiPrecompilati.setAACivico(unitaImmobPrincipale.getCivico());
		if(impianto!=null)
		{
			datiPrecompilati.setAAComune(impianto.getDenominazioneComune());
			datiPrecompilati.setAAProv(impianto.getSiglaProvincia());
		}
		datiPrecompilati.setAAIndirizzo(GenericUtil.isNotNullOrEmpty(unitaImmobPrincipale.getIndirizzoSitad()) ? 
				unitaImmobPrincipale.getIndirizzoSitad() : unitaImmobPrincipale.getIndirizzoNonTrovato());
		datiPrecompilati.setAAInterno(unitaImmobPrincipale.getInterno());
		datiPrecompilati.setAAPalazzo(unitaImmobPrincipale.getPalazzo());
		datiPrecompilati.setAAScala(unitaImmobPrincipale.getScala());
		
		it.csi.sigit.sigitwebn.xml.allegato3.data.RowCatastoDocument.RowCatasto catastoPrincipale = it.csi.sigit.sigitwebn.xml.allegato3.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
		catastoPrincipale.setAAFoglio(unitaImmobPrincipale.getFoglio());
		catastoPrincipale.setAAParticella(unitaImmobPrincipale.getParticella());
		catastoPrincipale.setAAPdr(unitaImmobPrincipale.getPdrGas());
		catastoPrincipale.setAAPod(unitaImmobPrincipale.getPodElettrico());
		catastoPrincipale.setAASezione(unitaImmobPrincipale.getSezione());
		catastoPrincipale.setAASub(unitaImmobPrincipale.getSubalterno());

		List<it.csi.sigit.sigitwebn.xml.allegato3.data.RowCatastoDocument.RowCatasto> rowCatastoList = datiPrecompilati.addNewSezCatasto().getRowCatastoList();
		rowCatastoList.add(catastoPrincipale);
		for (SigitTUnitaImmobiliareDto umSec : unitaImmobSecondarie) 
		{
			it.csi.sigit.sigitwebn.xml.allegato3.data.RowCatastoDocument.RowCatasto catastoSec = it.csi.sigit.sigitwebn.xml.allegato3.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
			catastoSec.setAAFoglio(umSec.getFoglio());
			catastoSec.setAAParticella(umSec.getParticella());
			catastoSec.setAAPdr(umSec.getPdrGas());
			catastoSec.setAAPod(umSec.getPodElettrico());
			catastoSec.setAASezione(umSec.getSezione());
			catastoSec.setAASub(umSec.getSubalterno());
			rowCatastoList.add(catastoSec);
		}
	}
	

	public static void mapToDatiPrecompilatiAllegato3(RowAllegatoIV datiPrecompilati,
			List<SigitTUnitaImmobiliareDto> listaUnitaImmobiliare, SigitTImpiantoDto impianto, SigitTAllegatoDto allegato)
	{
		List<SigitTUnitaImmobiliareDto> unitaImmobSecondarie = new ArrayList<SigitTUnitaImmobiliareDto>();
		SigitTUnitaImmobiliareDto unitaImmobPrincipale = new SigitTUnitaImmobiliareDto();
		
		for (SigitTUnitaImmobiliareDto ui : listaUnitaImmobiliare) {
			if(ConvertUtil.convertToBooleanAllways(ui.getFlgPrincipale()))
				unitaImmobPrincipale = ui;
			else
				unitaImmobSecondarie.add(ui);
		}
		
		datiPrecompilati.setAACivico(unitaImmobPrincipale.getCivico());
		if(impianto!=null)
		{
			datiPrecompilati.setAAComune(impianto.getDenominazioneComune());
			datiPrecompilati.setAAProv(impianto.getSiglaProvincia());
		}
		datiPrecompilati.setAAIndirizzo(GenericUtil.isNotNullOrEmpty(unitaImmobPrincipale.getIndirizzoSitad()) ? 
				unitaImmobPrincipale.getIndirizzoSitad() : unitaImmobPrincipale.getIndirizzoNonTrovato());
		datiPrecompilati.setAAInterno(unitaImmobPrincipale.getInterno());
		datiPrecompilati.setAAPalazzo(unitaImmobPrincipale.getPalazzo());
		datiPrecompilati.setAAScala(unitaImmobPrincipale.getScala());
		
		it.csi.sigit.sigitwebn.xml.allegato4.data.RowCatastoDocument.RowCatasto catastoPrincipale = it.csi.sigit.sigitwebn.xml.allegato4.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
		catastoPrincipale.setAAFoglio(unitaImmobPrincipale.getFoglio());
		catastoPrincipale.setAAParticella(unitaImmobPrincipale.getParticella());
		catastoPrincipale.setAAPdr(unitaImmobPrincipale.getPdrGas());
		catastoPrincipale.setAAPod(unitaImmobPrincipale.getPodElettrico());
		catastoPrincipale.setAASezione(unitaImmobPrincipale.getSezione());
		catastoPrincipale.setAASub(unitaImmobPrincipale.getSubalterno());

		List<it.csi.sigit.sigitwebn.xml.allegato4.data.RowCatastoDocument.RowCatasto> rowCatastoList = datiPrecompilati.addNewSezCatasto().getRowCatastoList();
		rowCatastoList.add(catastoPrincipale);
		for (SigitTUnitaImmobiliareDto umSec : unitaImmobSecondarie) 
		{
			it.csi.sigit.sigitwebn.xml.allegato4.data.RowCatastoDocument.RowCatasto catastoSec = it.csi.sigit.sigitwebn.xml.allegato4.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
			catastoSec.setAAFoglio(umSec.getFoglio());
			catastoSec.setAAParticella(umSec.getParticella());
			catastoSec.setAAPdr(umSec.getPdrGas());
			catastoSec.setAAPod(umSec.getPodElettrico());
			catastoSec.setAASezione(umSec.getSezione());
			catastoSec.setAASub(umSec.getSubalterno());
			rowCatastoList.add(catastoSec);
		}
	}
	

	public static void mapToDatiPrecompilatiAllegato4(RowAllegatoV datiPrecompilati,
			List<SigitTUnitaImmobiliareDto> listaUnitaImmobiliare, SigitTImpiantoDto impianto, SigitTAllegatoDto allegato)
	{
		List<SigitTUnitaImmobiliareDto> unitaImmobSecondarie = new ArrayList<SigitTUnitaImmobiliareDto>();
		SigitTUnitaImmobiliareDto unitaImmobPrincipale = new SigitTUnitaImmobiliareDto();
		
		for (SigitTUnitaImmobiliareDto ui : listaUnitaImmobiliare) {
			if(ConvertUtil.convertToBooleanAllways(ui.getFlgPrincipale()))
				unitaImmobPrincipale = ui;
			else
				unitaImmobSecondarie.add(ui);
		}
		
		datiPrecompilati.setAACivico(unitaImmobPrincipale.getCivico());
		if(impianto!=null)
		{
			datiPrecompilati.setAAComune(impianto.getDenominazioneComune());
			datiPrecompilati.setAAProv(impianto.getSiglaProvincia());
		}
		datiPrecompilati.setAAIndirizzo(GenericUtil.isNotNullOrEmpty(unitaImmobPrincipale.getIndirizzoSitad()) ? 
				unitaImmobPrincipale.getIndirizzoSitad() : unitaImmobPrincipale.getIndirizzoNonTrovato());
		datiPrecompilati.setAAInterno(unitaImmobPrincipale.getInterno());
		datiPrecompilati.setAAPalazzo(unitaImmobPrincipale.getPalazzo());
		datiPrecompilati.setAAScala(unitaImmobPrincipale.getScala());
		
		it.csi.sigit.sigitwebn.xml.allegato5.data.RowCatastoDocument.RowCatasto catastoPrincipale = it.csi.sigit.sigitwebn.xml.allegato5.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
		catastoPrincipale.setAAFoglio(unitaImmobPrincipale.getFoglio());
		catastoPrincipale.setAAParticella(unitaImmobPrincipale.getParticella());
		catastoPrincipale.setAAPdr(unitaImmobPrincipale.getPdrGas());
		catastoPrincipale.setAAPod(unitaImmobPrincipale.getPodElettrico());
		catastoPrincipale.setAASezione(unitaImmobPrincipale.getSezione());
		catastoPrincipale.setAASub(unitaImmobPrincipale.getSubalterno());

		List<it.csi.sigit.sigitwebn.xml.allegato5.data.RowCatastoDocument.RowCatasto> rowCatastoList = datiPrecompilati.addNewSezCatasto().getRowCatastoList();
		rowCatastoList.add(catastoPrincipale);
		for (SigitTUnitaImmobiliareDto umSec : unitaImmobSecondarie) 
		{
			it.csi.sigit.sigitwebn.xml.allegato5.data.RowCatastoDocument.RowCatasto catastoSec = it.csi.sigit.sigitwebn.xml.allegato5.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
			catastoSec.setAAFoglio(umSec.getFoglio());
			catastoSec.setAAParticella(umSec.getParticella());
			catastoSec.setAAPdr(umSec.getPdrGas());
			catastoSec.setAAPod(umSec.getPodElettrico());
			catastoSec.setAASezione(umSec.getSezione());
			catastoSec.setAASub(umSec.getSubalterno());
			rowCatastoList.add(catastoSec);
		}
	}
	
	
	
	public static void mapToDatiRespImpiantoAllegato1(RowAllegatoII datiPrecompilati,
			SigitTPersonaGiuridicaDto personaGiuridicaDto, SigitTPersonaFisicaDto personaFisicaDto, String ruolo, boolean isTerzoResp)
	{
		if(personaGiuridicaDto!=null){
			datiPrecompilati.setAA2RagSociale(personaGiuridicaDto.getDenominazione());
			datiPrecompilati.setAA2Piva(personaGiuridicaDto.getCodiceFiscale());

			datiPrecompilati.setAA2Cognome(null);
			datiPrecompilati.setAA2Nome(null);
			datiPrecompilati.setAA2Cf(null);
			
			if (ConvertUtil.convertToBooleanAllways(personaGiuridicaDto.getFlgIndirizzoEstero()))
			{
				datiPrecompilati.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoEstero());
				datiPrecompilati.setAA2Comune(GenericUtil.getStringValid(personaGiuridicaDto.getCittaEstero()) + " ("+GenericUtil.getStringValid(personaGiuridicaDto.getStatoEstero())+")");
				datiPrecompilati.setAA2Prov(null);
				
				
			}
			else
			{
				datiPrecompilati.setAA2Prov(personaGiuridicaDto.getSiglaProv());
				datiPrecompilati.setAA2Comune(personaGiuridicaDto.getComune());
				if(personaGiuridicaDto.getIndirizzoSitad()!=null){
					datiPrecompilati.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoSitad());
				}else{
					datiPrecompilati.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoNonTrovato());
				}
			}

			// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
			datiPrecompilati.setAA2Civico(personaGiuridicaDto.getCivico());

		}else{
			//vuol dire che e'  persona fisica
			datiPrecompilati.setAA2Cognome(personaFisicaDto.getCognome());
			datiPrecompilati.setAA2Nome(personaFisicaDto.getNome());
			datiPrecompilati.setAA2Cf(personaFisicaDto.getCodiceFiscale());
			
			datiPrecompilati.setAA2RagSociale(null);
			datiPrecompilati.setAA2Piva(null);
			
			if (ConvertUtil.convertToBooleanAllways(personaFisicaDto.getFlgIndirizzoEstero()))
			{
				datiPrecompilati.setAA2Indirizzo(personaFisicaDto.getIndirizzoEstero());
				datiPrecompilati.setAA2Comune(GenericUtil.getStringValid(personaFisicaDto.getCittaEstero()) + " ("+GenericUtil.getStringValid(personaFisicaDto.getStatoEstero())+")");
				datiPrecompilati.setAA2Prov(null);
			}
			else
			{
				datiPrecompilati.setAA2Prov(personaFisicaDto.getSiglaProv());
				datiPrecompilati.setAA2Comune(personaFisicaDto.getComune());
	
				if(personaFisicaDto.getIndirizzoSitad()!=null){
					datiPrecompilati.setAA2Indirizzo(personaFisicaDto.getIndirizzoSitad());
				}else{
					datiPrecompilati.setAA2Indirizzo(personaFisicaDto.getIndirizzoNonTrovato());
				}
			}
			// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
			datiPrecompilati.setAA2Civico(personaFisicaDto.getCivico());
		}
		
		//per il titolo responsabile si hanno dei radio button da gestire
		if(isTerzoResp){
			datiPrecompilati.xsetAA2FlagTerzoResp(getXmlBoolean(true));
			
			datiPrecompilati.xsetAA2FlagProprietario(MapDto.getXmlBoolean(false));
			datiPrecompilati.xsetAA2FlagOccupante(MapDto.getXmlBoolean(false));
			datiPrecompilati.xsetAA2FlagAmministr(MapDto.getXmlBoolean(false));

		}
		else
		{
			log.debug("Constants.ID_RUOLO_PROPRIETARIO: "+Constants.ID_RUOLO_PROPRIETARIO);
			log.debug("Constants.ID_RUOLO_RESPONSABILE_IMPRESA_PROPRIETARIO: "+Constants.ID_RUOLO_RESPONSABILE_IMPRESA_PROPRIETARIO);
			log.debug("ruolo: "+ruolo);
			
			datiPrecompilati.xsetAA2FlagTerzoResp(getXmlBoolean(false));

			if((Constants.ID_RUOLO_PROPRIETARIO == ConvertUtil.convertToInteger(ruolo))
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_PROPRIETARIO ==  ConvertUtil.convertToInteger(ruolo))){
				
				log.debug("sono dentro!!!!!!!!!!!!!");
				datiPrecompilati.xsetAA2FlagProprietario(MapDto.getXmlBoolean(true));
			}
			if((Constants.ID_RUOLO_OCCUPANTE == ConvertUtil.convertToInteger(ruolo))
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_OCCUPANTE ==  ConvertUtil.convertToInteger(ruolo))){
				datiPrecompilati.xsetAA2FlagOccupante(MapDto.getXmlBoolean(true));
			}
			if((Constants.ID_RUOLO_AMMINISTRATORE == ConvertUtil.convertToInteger(ruolo))
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_AMMINISTRATORE ==  ConvertUtil.convertToInteger(ruolo))){
				datiPrecompilati.xsetAA2FlagAmministr(MapDto.getXmlBoolean(true));
			}
		}
	}
	
	
	public static void mapToDatiRespImpiantoAllegato2(RowAllegatoIII datiPrecompilati,
			SigitTPersonaGiuridicaDto personaGiuridicaDto, SigitTPersonaFisicaDto personaFisicaDto, String ruolo, boolean isTerzoResp)
	{
		if(personaGiuridicaDto!=null){
			datiPrecompilati.setAA2RagSociale(personaGiuridicaDto.getDenominazione());
			datiPrecompilati.setAA2Piva(personaGiuridicaDto.getCodiceFiscale());
			
			datiPrecompilati.setAA2Cognome(null);
			datiPrecompilati.setAA2Nome(null);
			datiPrecompilati.setAA2Cf(null);
			
			if (ConvertUtil.convertToBooleanAllways(personaGiuridicaDto.getFlgIndirizzoEstero()))
			{
				datiPrecompilati.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoEstero());
				datiPrecompilati.setAA2Comune(GenericUtil.getStringValid(personaGiuridicaDto.getCittaEstero()) + " ("+GenericUtil.getStringValid(personaGiuridicaDto.getStatoEstero())+")");
				datiPrecompilati.setAA2Prov(null);
			}
			else
			{
				datiPrecompilati.setAA2Prov(personaGiuridicaDto.getSiglaProv());
				datiPrecompilati.setAA2Comune(personaGiuridicaDto.getComune());
	
				if(personaGiuridicaDto.getIndirizzoSitad()!=null){
					datiPrecompilati.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoSitad());
				}else{
					datiPrecompilati.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoNonTrovato());
				}
			}
			
			// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
			datiPrecompilati.setAA2Civico(personaGiuridicaDto.getCivico());
			
		}else{
			//vuol dire che e'  persona fisica
			datiPrecompilati.setAA2Cognome(personaFisicaDto.getCognome());
			datiPrecompilati.setAA2Nome(personaFisicaDto.getNome());
			datiPrecompilati.setAA2Cf(personaFisicaDto.getCodiceFiscale());

			datiPrecompilati.setAA2RagSociale(null);
			datiPrecompilati.setAA2Piva(null);
			
			if (ConvertUtil.convertToBooleanAllways(personaFisicaDto.getFlgIndirizzoEstero()))
			{
				datiPrecompilati.setAA2Indirizzo(personaFisicaDto.getIndirizzoEstero());
				datiPrecompilati.setAA2Comune(GenericUtil.getStringValid(personaFisicaDto.getCittaEstero()) + " ("+GenericUtil.getStringValid(personaFisicaDto.getStatoEstero())+")");
				datiPrecompilati.setAA2Prov(null);
			}
			else
			{
				datiPrecompilati.setAA2Prov(personaFisicaDto.getSiglaProv());
				datiPrecompilati.setAA2Comune(personaFisicaDto.getComune());

				if(personaFisicaDto.getIndirizzoSitad()!=null){
					datiPrecompilati.setAA2Indirizzo(personaFisicaDto.getIndirizzoSitad());
				}else{
					datiPrecompilati.setAA2Indirizzo(personaFisicaDto.getIndirizzoNonTrovato());
				}
			}
			// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
			datiPrecompilati.setAA2Civico(personaFisicaDto.getCivico());
		
		}
		
		//per il titolo responsabile si hanno dei radio button da gestire
		if(isTerzoResp){
			datiPrecompilati.xsetAA2FlagTerzoResp(getXmlBoolean(true));
			
			datiPrecompilati.xsetAA2FlagProprietario(MapDto.getXmlBoolean(false));
			datiPrecompilati.xsetAA2FlagOccupante(MapDto.getXmlBoolean(false));
			datiPrecompilati.xsetAA2FlagAmministr(MapDto.getXmlBoolean(false));
		}
		else
		{
			datiPrecompilati.xsetAA2FlagTerzoResp(getXmlBoolean(false));

			if((Constants.ID_RUOLO_PROPRIETARIO == ConvertUtil.convertToInteger(ruolo))
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_PROPRIETARIO ==  ConvertUtil.convertToInteger(ruolo))){
				datiPrecompilati.xsetAA2FlagProprietario(MapDto.getXmlBoolean(true));
			}
			if((Constants.ID_RUOLO_OCCUPANTE == ConvertUtil.convertToInteger(ruolo))
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_OCCUPANTE ==  ConvertUtil.convertToInteger(ruolo))){
				datiPrecompilati.xsetAA2FlagOccupante(MapDto.getXmlBoolean(true));
			}
			if((Constants.ID_RUOLO_AMMINISTRATORE == ConvertUtil.convertToInteger(ruolo))
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_AMMINISTRATORE ==  ConvertUtil.convertToInteger(ruolo))){
				datiPrecompilati.xsetAA2FlagAmministr(MapDto.getXmlBoolean(true));
			}
		}
		
	}
	
	public static void mapToDatiRespImpiantoAllegato3(RowAllegatoIV datiPrecompilati,
			SigitTPersonaGiuridicaDto personaGiuridicaDto, SigitTPersonaFisicaDto personaFisicaDto, String ruolo, boolean isTerzoResp)
	{
		if(personaGiuridicaDto!=null){
			datiPrecompilati.setAA2RagSociale(personaGiuridicaDto.getDenominazione());
			datiPrecompilati.setAA2Piva(personaGiuridicaDto.getCodiceFiscale());

			datiPrecompilati.setAA2Cognome(null);
			datiPrecompilati.setAA2Nome(null);
			datiPrecompilati.setAA2Cf(null);
			
			if (ConvertUtil.convertToBooleanAllways(personaGiuridicaDto.getFlgIndirizzoEstero()))
			{
				datiPrecompilati.setAA2Prov(null);
				datiPrecompilati.setAA2Comune(GenericUtil.getStringValid(personaGiuridicaDto.getCittaEstero()) + " ("+GenericUtil.getStringValid(personaGiuridicaDto.getStatoEstero())+")");
				datiPrecompilati.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoEstero());
			}
			else
			{
				datiPrecompilati.setAA2Prov(personaGiuridicaDto.getSiglaProv());
				datiPrecompilati.setAA2Comune(personaGiuridicaDto.getComune());

				if(personaGiuridicaDto.getIndirizzoSitad()!=null){
					datiPrecompilati.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoSitad());
				}else{
					datiPrecompilati.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoNonTrovato());
				}
			}
			
			// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
			datiPrecompilati.setAA2Civico(personaGiuridicaDto.getCivico());

		}else{
			//vuol dire che e'  persona fisica
			datiPrecompilati.setAA2Cognome(personaFisicaDto.getCognome());
			datiPrecompilati.setAA2Nome(personaFisicaDto.getNome());
			datiPrecompilati.setAA2Cf(personaFisicaDto.getCodiceFiscale());

			datiPrecompilati.setAA2RagSociale(null);
			datiPrecompilati.setAA2Piva(null);
			
			if (ConvertUtil.convertToBooleanAllways(personaFisicaDto.getFlgIndirizzoEstero()))
			{
				datiPrecompilati.setAA2Prov(null);
				datiPrecompilati.setAA2Comune(GenericUtil.getStringValid(personaFisicaDto.getCittaEstero()) + " ("+GenericUtil.getStringValid(personaFisicaDto.getStatoEstero())+")");
				datiPrecompilati.setAA2Indirizzo(personaFisicaDto.getIndirizzoEstero());
			}
			else
			{
				datiPrecompilati.setAA2Prov(personaFisicaDto.getSiglaProv());
				datiPrecompilati.setAA2Comune(personaFisicaDto.getComune());

				if(personaFisicaDto.getIndirizzoSitad()!=null){
					datiPrecompilati.setAA2Indirizzo(personaFisicaDto.getIndirizzoSitad());
				}else{
					datiPrecompilati.setAA2Indirizzo(personaFisicaDto.getIndirizzoNonTrovato());
				}
			}
			
			// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
			datiPrecompilati.setAA2Civico(personaFisicaDto.getCivico());

		}
		
		//per il titolo responsabile si hanno dei radio button da gestire
		if(isTerzoResp){
			datiPrecompilati.xsetAA2FlagTerzoResp(getXmlBoolean(true));
			
			datiPrecompilati.xsetAA2FlagProprietario(MapDto.getXmlBoolean(false));
			datiPrecompilati.xsetAA2FlagOccupante(MapDto.getXmlBoolean(false));
			datiPrecompilati.xsetAA2FlagAmministr(MapDto.getXmlBoolean(false));
		}
		else
		{
			datiPrecompilati.xsetAA2FlagTerzoResp(getXmlBoolean(false));

			if((Constants.ID_RUOLO_PROPRIETARIO == ConvertUtil.convertToInteger(ruolo))
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_PROPRIETARIO ==  ConvertUtil.convertToInteger(ruolo))){
				datiPrecompilati.xsetAA2FlagProprietario(MapDto.getXmlBoolean(true));
			}
			if((Constants.ID_RUOLO_OCCUPANTE == ConvertUtil.convertToInteger(ruolo))
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_OCCUPANTE ==  ConvertUtil.convertToInteger(ruolo))){
				datiPrecompilati.xsetAA2FlagOccupante(MapDto.getXmlBoolean(true));
			}
			if((Constants.ID_RUOLO_AMMINISTRATORE == ConvertUtil.convertToInteger(ruolo))
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_AMMINISTRATORE ==  ConvertUtil.convertToInteger(ruolo))){
				datiPrecompilati.xsetAA2FlagAmministr(MapDto.getXmlBoolean(true));
			}
		}
		
	}
	
	public static void mapToDatiRespImpiantoAllegato4(RowAllegatoV datiPrecompilati,
			SigitTPersonaGiuridicaDto personaGiuridicaDto, SigitTPersonaFisicaDto personaFisicaDto, String ruolo, boolean isTerzoResp)
	{
		if(personaGiuridicaDto!=null){
			datiPrecompilati.setAA2RagSociale(personaGiuridicaDto.getDenominazione());
			datiPrecompilati.setAA2Piva(personaGiuridicaDto.getCodiceFiscale());

			datiPrecompilati.setAA2Cognome(null);
			datiPrecompilati.setAA2Nome(null);
			datiPrecompilati.setAA2Cf(null);
			
			if (ConvertUtil.convertToBooleanAllways(personaGiuridicaDto.getFlgIndirizzoEstero()))
			{
				datiPrecompilati.setAA2Prov(null);
				datiPrecompilati.setAA2Comune(GenericUtil.getStringValid(personaGiuridicaDto.getCittaEstero()) + " ("+GenericUtil.getStringValid(personaGiuridicaDto.getStatoEstero())+")");
				datiPrecompilati.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoEstero());
			}
			else
			{
				datiPrecompilati.setAA2Prov(personaGiuridicaDto.getSiglaProv());
				datiPrecompilati.setAA2Comune(personaGiuridicaDto.getComune());

				if(personaGiuridicaDto.getIndirizzoSitad()!=null){
					datiPrecompilati.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoSitad());
				}else{
					datiPrecompilati.setAA2Indirizzo(personaGiuridicaDto.getIndirizzoNonTrovato());
				}
			}
			// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
			datiPrecompilati.setAA2Civico(personaGiuridicaDto.getCivico());

		}else{
			//vuol dire che e'  persona fisica
			datiPrecompilati.setAA2Cognome(personaFisicaDto.getCognome());
			datiPrecompilati.setAA2Nome(personaFisicaDto.getNome());
			datiPrecompilati.setAA2Cf(personaFisicaDto.getCodiceFiscale());

			datiPrecompilati.setAA2RagSociale(null);
			datiPrecompilati.setAA2Piva(null);
			
			if (ConvertUtil.convertToBooleanAllways(personaFisicaDto.getFlgIndirizzoEstero()))
			{
				datiPrecompilati.setAA2Prov(null);
				datiPrecompilati.setAA2Comune(GenericUtil.getStringValid(personaFisicaDto.getCittaEstero()) + " ("+GenericUtil.getStringValid(personaFisicaDto.getStatoEstero())+")");
				datiPrecompilati.setAA2Indirizzo(personaFisicaDto.getIndirizzoEstero());
			}
			else
			{
				datiPrecompilati.setAA2Prov(personaFisicaDto.getSiglaProv());
				datiPrecompilati.setAA2Comune(personaFisicaDto.getComune());

				if(personaFisicaDto.getIndirizzoSitad()!=null){
					datiPrecompilati.setAA2Indirizzo(personaFisicaDto.getIndirizzoSitad());
				}else{
					datiPrecompilati.setAA2Indirizzo(personaFisicaDto.getIndirizzoNonTrovato());
				}
			}
			// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
			datiPrecompilati.setAA2Civico(personaFisicaDto.getCivico());

		}
		
		//per il titolo responsabile si hanno dei radio button da gestire
		if(isTerzoResp){
			datiPrecompilati.xsetAA2FlagTerzoResp(getXmlBoolean(true));
			
			datiPrecompilati.xsetAA2FlagProprietario(MapDto.getXmlBoolean(false));
			datiPrecompilati.xsetAA2FlagOccupante(MapDto.getXmlBoolean(false));
			datiPrecompilati.xsetAA2FlagAmministr(MapDto.getXmlBoolean(false));
		}
		else
		{
			
			datiPrecompilati.xsetAA2FlagTerzoResp(getXmlBoolean(false));

			if((Constants.ID_RUOLO_PROPRIETARIO == ConvertUtil.convertToInteger(ruolo))
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_PROPRIETARIO ==  ConvertUtil.convertToInteger(ruolo))){
				datiPrecompilati.xsetAA2FlagProprietario(MapDto.getXmlBoolean(true));
			}
			if((Constants.ID_RUOLO_OCCUPANTE == ConvertUtil.convertToInteger(ruolo))
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_OCCUPANTE ==  ConvertUtil.convertToInteger(ruolo))){
				datiPrecompilati.xsetAA2FlagOccupante(MapDto.getXmlBoolean(true));
			}
			if((Constants.ID_RUOLO_AMMINISTRATORE == ConvertUtil.convertToInteger(ruolo))
					|| (Constants.ID_RUOLO_RESPONSABILE_IMPRESA_AMMINISTRATORE ==  ConvertUtil.convertToInteger(ruolo))){
				datiPrecompilati.xsetAA2FlagAmministr(MapDto.getXmlBoolean(true));
			}
		}
		
	}
	
	public static void mapToDatiImpresaManutentriceAllegato1(RowAllegatoII datiPrecompilati,
			SigitTPersonaGiuridicaDto personaGiuridicaDto)
	{
		datiPrecompilati.setAA3RagSociale(personaGiuridicaDto.getDenominazione());
		datiPrecompilati.setAA3Piva(personaGiuridicaDto.getCodiceFiscale());

		if (ConvertUtil.convertToBooleanAllways(personaGiuridicaDto.getFlgIndirizzoEstero()))
		{
			datiPrecompilati.setAA3Prov(null);
			datiPrecompilati.setAA3Comune(GenericUtil.getStringValid(personaGiuridicaDto.getCittaEstero()) + " ("+GenericUtil.getStringValid(personaGiuridicaDto.getStatoEstero())+")");
			datiPrecompilati.setAA3Indirizzo(personaGiuridicaDto.getIndirizzoEstero());

		}
		else
		{
			datiPrecompilati.setAA3Prov(personaGiuridicaDto.getSiglaProv());
			datiPrecompilati.setAA3Comune(personaGiuridicaDto.getComune());

			if(personaGiuridicaDto.getIndirizzoSitad()!=null){
				datiPrecompilati.setAA3Indirizzo(personaGiuridicaDto.getIndirizzoSitad());
			}else{
				datiPrecompilati.setAA3Indirizzo(personaGiuridicaDto.getIndirizzoNonTrovato());
			}
		}
		// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
		datiPrecompilati.setAA3Civico(personaGiuridicaDto.getCivico());
	}
	
	public static void mapToDatiImpresaManutentriceAllegato2(RowAllegatoIII datiPrecompilati,
			SigitTPersonaGiuridicaDto personaGiuridicaDto)
	{
		datiPrecompilati.setAA3RagSociale(personaGiuridicaDto.getDenominazione());
		datiPrecompilati.setAA3Piva(personaGiuridicaDto.getCodiceFiscale());

		if (ConvertUtil.convertToBooleanAllways(personaGiuridicaDto.getFlgIndirizzoEstero()))
		{
			datiPrecompilati.setAA3Prov(null);
			datiPrecompilati.setAA3Comune(GenericUtil.getStringValid(personaGiuridicaDto.getCittaEstero()) + " ("+GenericUtil.getStringValid(personaGiuridicaDto.getStatoEstero())+")");
			datiPrecompilati.setAA3Indirizzo(personaGiuridicaDto.getIndirizzoEstero());

		}
		else
		{
			datiPrecompilati.setAA3Prov(personaGiuridicaDto.getSiglaProv());
			datiPrecompilati.setAA3Comune(personaGiuridicaDto.getComune());

			if(personaGiuridicaDto.getIndirizzoSitad()!=null){
				datiPrecompilati.setAA3Indirizzo(personaGiuridicaDto.getIndirizzoSitad());
			}else{
				datiPrecompilati.setAA3Indirizzo(personaGiuridicaDto.getIndirizzoNonTrovato());
			}
		}
		
		// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
		datiPrecompilati.setAA3Civico(personaGiuridicaDto.getCivico());

	}
	
	public static void mapToDatiImpresaManutentriceAllegato3(RowAllegatoIV datiPrecompilati,
			SigitTPersonaGiuridicaDto personaGiuridicaDto)
	{
		datiPrecompilati.setAA3RagSociale(personaGiuridicaDto.getDenominazione());
		datiPrecompilati.setAA3Piva(personaGiuridicaDto.getCodiceFiscale());

		if (ConvertUtil.convertToBooleanAllways(personaGiuridicaDto.getFlgIndirizzoEstero()))
		{
			datiPrecompilati.setAA3Prov(null);
			datiPrecompilati.setAA3Comune(GenericUtil.getStringValid(personaGiuridicaDto.getCittaEstero()) + " ("+GenericUtil.getStringValid(personaGiuridicaDto.getStatoEstero())+")");
			datiPrecompilati.setAA3Indirizzo(personaGiuridicaDto.getIndirizzoEstero());

		}
		else
		{
			datiPrecompilati.setAA3Prov(personaGiuridicaDto.getSiglaProv());
			datiPrecompilati.setAA3Comune(personaGiuridicaDto.getComune());

			if(personaGiuridicaDto.getIndirizzoSitad()!=null){
				datiPrecompilati.setAA3Indirizzo(personaGiuridicaDto.getIndirizzoSitad());
			}else{
				datiPrecompilati.setAA3Indirizzo(personaGiuridicaDto.getIndirizzoNonTrovato());
			}
		}

		// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
		datiPrecompilati.setAA3Civico(personaGiuridicaDto.getCivico());

	}
	
	public static void mapToDatiImpresaManutentriceAllegato4(RowAllegatoV datiPrecompilati,
			SigitTPersonaGiuridicaDto personaGiuridicaDto)
	{
		datiPrecompilati.setAA3RagSociale(personaGiuridicaDto.getDenominazione());
		datiPrecompilati.setAA3Piva(personaGiuridicaDto.getCodiceFiscale());

		if (ConvertUtil.convertToBooleanAllways(personaGiuridicaDto.getFlgIndirizzoEstero()))
		{
			datiPrecompilati.setAA3Prov(null);
			datiPrecompilati.setAA3Comune(GenericUtil.getStringValid(personaGiuridicaDto.getCittaEstero()) + " ("+GenericUtil.getStringValid(personaGiuridicaDto.getStatoEstero())+")");
			datiPrecompilati.setAA3Indirizzo(personaGiuridicaDto.getIndirizzoEstero());

		}
		else
		{
			datiPrecompilati.setAA3Prov(personaGiuridicaDto.getSiglaProv());
			datiPrecompilati.setAA3Comune(personaGiuridicaDto.getComune());

			if(personaGiuridicaDto.getIndirizzoSitad()!=null){
				datiPrecompilati.setAA3Indirizzo(personaGiuridicaDto.getIndirizzoSitad());
			}else{
				datiPrecompilati.setAA3Indirizzo(personaGiuridicaDto.getIndirizzoNonTrovato());
			}
		}
		// Questo campo e' comune a tutti e due gli indirizzi (ESTERO/NAZIONALE)
		datiPrecompilati.setAA3Civico(personaGiuridicaDto.getCivico());

	}
	
	
	public static SigitTAllegatoDto mapToAllegatoDtoForInsert(DettaglioAllegato allegato, int idManutenzione) {
		SigitTAllegatoDto dto = new SigitTAllegatoDto();
		//i valori di default 
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		dto.setUtenteUltMod(allegato.getCodFiscaleUtenteLoggato());
		dto.setCfRedattore(allegato.getCodFiscaleUtenteLoggato());
		dto.setFkStatoRapp(new BigDecimal(allegato.getIdStatoRapporto()));
		
		if (GenericUtil.isNotNullOrEmpty(allegato.getIdIspezIspet()))
		{
			dto.setFkIspezIspet(new BigDecimal(allegato.getIdIspezIspet()));
		}
		
		dto.setFkTipoDocumento(new BigDecimal(allegato.getIdTipoAllegato()));
		
		dto.setDataControllo(ConvertUtil.convertToSqlDate(allegato.getDataControllo()));
		dto.setFOraArrivo(allegato.getOraArrivo());
		
		//SALVO DI DEFAULT A ZERO il flag puo' funzionare
		//dto.setFFlgPuoFunzionare(new BigDecimal(Constants.PUO_FUNZIONARE_FALSE));
		
		//SALVO DI DEFAULT A ZERO il flag controllo Bozza
		dto.setFlgControlloBozza(ConvertUtil.convertToBigDecimal(allegato.getFlagControlloBozza()));
		if(GenericUtil.isNotNullOrEmpty(allegato.getNumeroBollinoVerde())){
			//salvo pure la sigla bollino
			dto.setFkNumeroBollino(new BigDecimal(allegato.getNumeroBollinoVerde()));
			dto.setFkSiglaBollino(allegato.getSiglaBollino());
		}
		//dto.setXmlAllegato(xmlAllegato);
		dto.setIdAllegato(ConvertUtil.convertToBigDecimal(allegato.getIdAllegato()));
		dto.setFkTipoManutenzione(idManutenzione);

		dto.setElencoCombustibili(allegato.getElencoCombustibili());
		dto.setElencoApparecchiature(allegato.getElencoApparecchiature());
		
		return dto;
	}
	
	public static SigitTAllegatoDto mapToAllegatoDto(DettaglioManutenzione allegato, String elencoCombustibili, String codFiscaleUtenteLoggato) {
		
		SigitTAllegatoDto dto = new SigitTAllegatoDto();
		//i valori di default 
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		dto.setUtenteUltMod(codFiscaleUtenteLoggato);
		dto.setCfRedattore(codFiscaleUtenteLoggato);
		dto.setFkStatoRapp(ConvertUtil.convertToBigDecimal(Constants.ID_STATO_RAPPORTO_INVIATO));
		
		dto.setFkTipoDocumento(new BigDecimal(allegato.getIdTipoManut()));
		dto.setDataControllo(ConvertUtil.convertToSqlDate(allegato.getDataManut()));
		dto.setDataInvio(DateUtil.getSqlCurrentDate());

		dto.setElencoCombustibili(elencoCombustibili);
		dto.setElencoApparecchiature(allegato.getElencoApparecchiature());
		
		dto.setFkTipoManutenzione(allegato.getIdTipoIntervento());
		dto.setAltroDescr(allegato.getAltro());
		dto.setFOraArrivo(allegato.getOraArrivo());
		dto.setFOraPartenza(allegato.getOraPartenza());
		dto.setFDenominazTecnico(allegato.getDenominazTecnico());

		if(GenericUtil.isNotNullOrEmpty(allegato.getOsservazioni())){
			dto.setFOsservazioni(allegato.getOsservazioni());
		}
		if(GenericUtil.isNotNullOrEmpty(allegato.getRaccomandazioni())){
			dto.setFRaccomandazioni(allegato.getRaccomandazioni());
		}
		if(GenericUtil.isNotNullOrEmpty(allegato.getPrescrizioni())){
			dto.setFPrescrizioni(allegato.getPrescrizioni());
		}
		
		dto.setFInterventoEntro(ConvertUtil.convertToSqlDate(allegato.getInterventoEntro()));

		return dto;
	}

	public static DettaglioManutenzione mapToDettaglioManutenzione(SigitVRicercaAllegatiDto allegato) {

		DettaglioManutenzione manutenzione = new DettaglioManutenzione();

		manutenzione.setIdAllegato(ConvertUtil.convertToString(allegato.getIdAllegato()));
		manutenzione.setCodiceImpianto(ConvertUtil.convertToString(allegato.getCodiceImpianto()));
		manutenzione.setIdStatoManut(ConvertUtil.convertToInteger(allegato.getFkStatoRapp()));
		manutenzione.setDescStatoManut(getDescStatoRapManutenzione(allegato.getFkStatoRapp(), allegato.getFkTipoDocumento(), allegato.getDesStatoRapp()));
		//manutenzione.setDescStatoManut(allegato.getDesStatoRapp());
		manutenzione.setDataManut(ConvertUtil.convertToString(allegato.getDataControllo()));
		manutenzione.setIdTipoManut(ConvertUtil.convertToInteger(allegato.getFkTipoDocumento()));
		manutenzione.setDescTipoManut(allegato.getDesTipoDocumento());
		manutenzione.setAltro(allegato.getAltroDescr());
		manutenzione.setElencoApparecchiature(allegato.getElencoApparecchiature());
		manutenzione.setIdTipoIntervento(ConvertUtil.convertToInteger(allegato.getIdTipoManutenzione()));
		manutenzione.setDescTipoIntervento(allegato.getDesTipoManutenzione());
		manutenzione.setOraArrivo(allegato.getFOraArrivo());
		manutenzione.setOraPartenza(allegato.getFOraPartenza());
		manutenzione.setDenominazTecnico(allegato.getFDenominazTecnico());
		manutenzione.setOsservazioni(allegato.getFOsservazioni());
		manutenzione.setRaccomandazioni(allegato.getFRaccomandazioni());
		manutenzione.setPrescrizioni(allegato.getFPrescrizioni());
		manutenzione.setInterventoEntro(ConvertUtil.convertToString(allegato.getFInterventoEntro()));
		
		String manutentore = allegato.getPgDenominazione() + " " + getCodiceRea(allegato.getPgSiglaRea(), ConvertUtil.convertToInteger(allegato.getPgNumeroRea()));

		manutenzione.setDescManutentore(manutentore);
		
		if (GenericUtil.isNotNullOrEmpty(allegato.getIdPersonaGiuridica()))
		{
			manutenzione.setIdPersonaGiuridica(ConvertUtil.convertToInteger(allegato.getIdPersonaGiuridica()));
		}
//		else
//		{
//			manutenzione.setIdPersonaGiuridica(ConvertUtil.convertToInteger(allegato.getFkImpRuoloPfpg()));
//		}
		
		return manutenzione;
	}

	public static String mapToElencoCombustibiliGt(List<SigitVSk4GtDto> listaApparecchiatureDto)
	{
		
		HashMap<BigDecimal, String> hashComb = new HashMap<BigDecimal, String>();

		for (SigitVSk4GtDto dto : listaApparecchiatureDto) {
			hashComb.put(dto.getIdCombustibile(), dto.getDesCombustibile());
		}

		//System.out.println("hashComb: "+hashComb);
		
		Collection coll = hashComb.values();
		
		String elencoCombustibili = null;
		for (Object descComb : coll) {
			
			if (elencoCombustibili == null)
			{
				elencoCombustibili = "";
			}
			else
			{
				elencoCombustibili += ", ";
			}
			elencoCombustibili += (String)descComb;
//			
//			System.out.println("Stampo object: "+object);
//			String obj = (String)object;
//			System.out.println("Stampo obj: "+obj);
//
		}
		
		/*		
		String elencoCombustibili = null;
		for (SigitVCompGtDettDto dto : listaApparecchiatureDto) {
			
			if (elencoCombustibili == null)
			{
				elencoCombustibili = "";
			}
			else
			{
				elencoCombustibili += ", ";
			}
			elencoCombustibili += dto.getDesCombustibile();
		}
		*/
		
		return elencoCombustibili;
		
	}
	
	/*
	public static String mapToElencoCombustibili(List<String> listaCombustibili)
	{
		String elencoCombustibili = null;
		for (String combustibile : listaCombustibili) {
			
			if (elencoCombustibili == null)
			{
				elencoCombustibili = "";
			}
			else
			{
				elencoCombustibili += ", ";
			}
			elencoCombustibili += combustibile;
		}
		
		return elencoCombustibili;
		
	}
	*/
	
	public static String mapToElencoApparecchiatureGt(List<SigitVSk4GtDto> listaApparecchiatureDto)
	{
		String elencoApparecchiature = null;
		for (SigitVSk4GtDto dto : listaApparecchiatureDto) {
			
			if (elencoApparecchiature == null)
			{
				elencoApparecchiature = "";
			}
			else
			{
				elencoApparecchiature += ", ";
			}
			elencoApparecchiature += dto.getIdTipoComponente() + "-" + dto.getProgressivo() +  " (" + dto.getDesMarca() + " - " + dto.getModello() + ")";
		}

		return elencoApparecchiature;
		
	}
	
	
	
	public static String mapToElencoApparecchiatureGf(List<SigitVSk4GfDto> listaApparecchiatureDto)
	{
		String elencoApparecchiature = null;
		for (SigitVSk4GfDto dto : listaApparecchiatureDto) {
			
			if (elencoApparecchiature == null)
			{
				elencoApparecchiature = "";
			}
			else
			{
				elencoApparecchiature += ", ";
			}
			elencoApparecchiature += dto.getIdTipoComponente() + "-" + dto.getProgressivo() +  " (" + dto.getDesMarca() + " - " + dto.getModello() + ")";
		}
		
		return elencoApparecchiature;
		
	}
	
	public static String mapToElencoApparecchiatureSc(List<SigitVSk4ScDto> listaApparecchiatureDto)
	{
		String elencoApparecchiature = null;
		for (SigitVSk4ScDto dto : listaApparecchiatureDto) {
			
			if (elencoApparecchiature == null)
			{
				elencoApparecchiature = "";
			}
			else
			{
				elencoApparecchiature += ", ";
			}
			elencoApparecchiature += dto.getIdTipoComponente() + "-" + dto.getProgressivo() +  " (" + dto.getDesMarca() + " - " + dto.getModello() + ")";
		}
		
		return elencoApparecchiature;
		
	}
	
	public static String mapToElencoApparecchiatureCg(List<SigitVSk4CgDto> listaApparecchiatureDto)
	{
		String elencoApparecchiature = null;
		for (SigitVSk4CgDto dto : listaApparecchiatureDto) {
			
			if (elencoApparecchiature == null)
			{
				elencoApparecchiature = "";
			}
			else
			{
				elencoApparecchiature += ", ";
			}
			elencoApparecchiature += dto.getIdTipoComponente() + "-" + dto.getProgressivo() +  " (" + dto.getDesMarca() + " - " + dto.getModello() + ")";
		}
		
		return elencoApparecchiature;
		
	}
	
	public static String mapToElencoComponentiGt(List<SigitVCompGtDto> listaApparecchiatureDto)
	{
		String elencoApparecchiature = null;
		for (SigitVCompGtDto dto : listaApparecchiatureDto) {
			
			if (elencoApparecchiature == null)
			{
				elencoApparecchiature = "";
			}
			else
			{
				elencoApparecchiature += ", ";
			}
			elencoApparecchiature += dto.getIdTipoComponente() + "-" + dto.getProgressivo() +  " (" + dto.getDesMarca() + " - " + dto.getModello() + ")";
		}

		return elencoApparecchiature;
		
	}
	
	public static ArrayList<String> mapToElencoProgressiviGt(List<SigitVCompGtDto> listaApparecchiatureDto)
	{
		ArrayList<String> progressivi = new ArrayList<String>();
		for (SigitVCompGtDto dto : listaApparecchiatureDto) {
			
			progressivi.add(ConvertUtil.convertToString(dto.getProgressivo()));
		}

		return progressivi;
		
	}
	
	public static String mapToElencoComponentiCg(List<SigitVCompCgDto> listaApparecchiatureDto)
	{
		String elencoApparecchiature = null;
		for (SigitVCompCgDto dto : listaApparecchiatureDto) {
			
			if (elencoApparecchiature == null)
			{
				elencoApparecchiature = "";
			}
			else
			{
				elencoApparecchiature += ", ";
			}
			elencoApparecchiature += dto.getIdTipoComponente() + "-" + dto.getProgressivo() +  " (" + dto.getDesMarca() + " - " + dto.getModello() + ")";
		}

		return elencoApparecchiature;
		
	}
	
	public static ArrayList<String> mapToElencoProgressiviCg(List<SigitVCompCgDto> listaApparecchiatureDto)
	{
		ArrayList<String> progressivi = new ArrayList<String>();
		for (SigitVCompCgDto dto : listaApparecchiatureDto) {
			
			progressivi.add(ConvertUtil.convertToString(dto.getProgressivo()));
		}

		return progressivi;
		
	}
	
	public static ArrayList<String> mapToElencoProgressiviSc(List<SigitVSk4ScDto> listaApparecchiatureDto)
	{
		ArrayList<String> progressivi = new ArrayList<String>();
		for (SigitVSk4ScDto dto : listaApparecchiatureDto) {
			progressivi.add(ConvertUtil.convertToString(dto.getProgressivo()));
		}

		return progressivi;
	}
	
	public static ArrayList<String> mapToElencoProgressiviGf(List<SigitVSk4GfDto> listaApparecchiatureDto)
	{
		ArrayList<String> progressivi = new ArrayList<String>();
		for (SigitVSk4GfDto dto : listaApparecchiatureDto) {
			progressivi.add(ConvertUtil.convertToString(dto.getProgressivo()));
		}

		return progressivi;
	}
	
	
	public static String mapToElencoApparecchiatureSplit(String listaApparecchiature)
	{
		StringBuffer sb = new StringBuffer();
		
		if(GenericUtil.isNotNullOrEmpty(listaApparecchiature)){


			StringTokenizer tok = new StringTokenizer(listaApparecchiature, ",");

			String app = null;
			while (tok.hasMoreTokens()) {
				String tmp = tok.nextToken();

				if (tmp.indexOf(" (") != -1)
				{
					app = tmp.substring(0, tmp.indexOf(" ("));
	
					//System.out.println("temp2 *"+app+"*");
	
					if (sb.length() > 0)
					{
						sb.append(", ");
					}
					
					sb.append(app.trim());
				}
			}
		}
		
		return sb.toString();
		
	}
	
	public static SigitTCompXSempliceDto getSigitTCompxSemplice(RegolazionePrimaria rp, String cfUtenteMod)
	{
		SigitTCompXSempliceDto dto = new SigitTCompXSempliceDto();
		if(rp!=null)
		{
			dto.setL51FlgSrAltri(ConvertUtil.convertToBigDecimal(rp.getL51FlagAltriSistRegPrim()));
			dto.setL51FlgSrGeneratore(ConvertUtil.convertToBigDecimal(rp.getL51FlagRegolazCurvaIntegr()));
			dto.setL51FlgSrIndipendente(ConvertUtil.convertToBigDecimal(rp.getL51FlagRegolazCurvaIndipen()));
			dto.setL51FlgSrInverter(ConvertUtil.convertToBigDecimal(rp.getL51FlagRegInverter()));
			dto.setL51FlgSrMultigradino(ConvertUtil.convertToBigDecimal(rp.getL51FlagRegMultiGrad()));
			dto.setL51FlgSrOnoff(ConvertUtil.convertToBigDecimal(rp.getL51FlagRegolazOnOff()));
			dto.setL51FlgValvoleRegolazione(ConvertUtil.convertToBigDecimal(rp.getL51FlagValvoleReg()));
			dto.setL51SrDescrizione(rp.getL51DescrSistema());
			dto.setUtenteUltMod(cfUtenteMod);
			dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		}
		return dto;
	}

	public static void getSigitTCompxSemplice(RegolazioneSingoloAmb rsa, SigitTCompXSempliceDto dto) {
		dto.setL52FlgContrEntalpico(ConvertUtil.convertToBigDecimal(rsa.getL52FlagControlEntalpico()));
		dto.setL52FlgContrPortata(ConvertUtil.convertToBigDecimal(rsa.getL52FlagControlPortata()));
		dto.setL52FlgTermoOnoff(ConvertUtil.convertToBigDecimal(rsa.getL52FlagTermostatoOnOff()));
		dto.setL52FlgTermoProporzionale(ConvertUtil.convertToBigDecimal(rsa.getL52FlagTermostatoProporz()));
		dto.setL52FlgValvole2(rsa.getL52FlagValvDueVieNO() ? Constants.FLAG_ASSENTE : rsa.getL52FlagValvDueVieSI() ? Constants.FLAG_PRESENTE : null);
		dto.setL52FlgValvole3(rsa.getL52FlagValvTreVieNO() ? Constants.FLAG_ASSENTE : rsa.getL52FlagValvTreVieSI() ? Constants.FLAG_PRESENTE : null);
		dto.setL52FlgValvoleTermo(rsa.getL52FlagValvTermostNO() ? Constants.FLAG_ASSENTE : rsa.getL52FlagValvTermostSI() ? Constants.FLAG_PRESENTE : null);
		dto.setL52Note(rsa.getL52Note());
		try{dto.setL53DataSostituz(DateUtil.getSqlDate(rsa.getL53DataSostituzione()));}catch (Exception e) {dto.setL53DataSostituz(null);}
		dto.setL53DesSistemaInstallaz(rsa.getL53DescrSistema());
		dto.setL53DesSistemaSostituz(rsa.getL53DescrSistemaSost());
		dto.setL53FlgTelegestione(rsa.getL53FlagTeleGestioneNO() ? Constants.FLAG_ASSENTE : rsa.getL53FlagTeleGestioneSI() ? Constants.FLAG_PRESENTE : null);
		dto.setL53FlgTelelettura(rsa.getL53FlagTeleLetturaNO() ? Constants.FLAG_ASSENTE : rsa.getL53FlagTeleLetturaSI() ? Constants.FLAG_PRESENTE : null);
		try{dto.setL54DataSostituz(DateUtil.getSqlDate(rsa.getL54DataSostituzione()));}catch (Exception e) {dto.setL54DataSostituz(null);}
		dto.setL54DesSistemaInstallaz(rsa.getL54DescrSistema());
		dto.setL54DesSistemaSostituz(rsa.getL54DescrSistemaSost());
		dto.setL54FlgAcs(ConvertUtil.convertToBigDecimal(rsa.getL54FlagACS()));
		dto.setL54FlgRaff(ConvertUtil.convertToBigDecimal(rsa.getL54FlagRaffresc()));
		dto.setL54FlgRisc(ConvertUtil.convertToBigDecimal(rsa.getL54FlagRiscald()));
		dto.setL54FlgTipologia(rsa.getL54FlagSistemaDiretto() ? 
				Constants.FLG_5_4_TIPOLOGIA_DIRETTO : rsa.getL54FlagSistemaIndiretto() ? Constants.FLG_5_4_TIPOLOGIA_INDIRETTO : null );
		try{dto.setL54FlgUic(ConvertUtil.convertToBigDecimal(rsa.getL54FlagUIcontabilizzNO() ? Constants.NO_0 : rsa.getL54FlagUIcontabilizzSI() ? Constants.SI_1 : null ));}catch(Exception e){}
	}

	public static SigitTCompXDto getSigitTCompX(RowSR rowSR, BigDecimal codImpianto) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowSR.getL51DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowSR.getL51DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowSR.getL51Fabbricante()));}catch (Exception e) {dto.setFkMarca(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_SR);
		dto.setModello(rowSR.getL51Modello());
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowSR.getL51NumSR()));
		dto.setFlgDismissione(ConvertUtil.convertToBigDecimal(rowSR.getFlagDismissione()));
		return dto;
	}

	public static SigitTCompSrDto getSigitTCompSR(RowSR rowSR, BigDecimal codImpianto) {
		SigitTCompSrDto dto = new SigitTCompSrDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataInstall(DateUtil.getSqlDate(rowSR.getL51DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_SR);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowSR.getL51NumSR()));
		try{dto.setNumLivTemp(ConvertUtil.convertToBigDecimal(rowSR.getL51NumLivTemp()));}catch (Exception e) {dto.setNumLivTemp(null);}
		try{dto.setNumPtiRegolazione(ConvertUtil.convertToBigDecimal(rowSR.getL51NumPuntiReg()));}catch (Exception e) {dto.setNumPtiRegolazione(null);}
		return dto;
	}

	public static SigitTCompXDto getSigitTCompX(RowSRsost rowSR, BigDecimal codImpianto, String progressivo) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowSR.getL51DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowSR.getL51DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowSR.getL51Fabbricante()));}catch (Exception e) {dto.setFkMarca(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_SR);
		dto.setModello(rowSR.getL51Modello());
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(progressivo));
		return dto;
	}

	public static SigitTCompSrDto getSigitTCompSR(RowSRsost rowSR, BigDecimal codImpianto, String progressivo) {
		SigitTCompSrDto dto = new SigitTCompSrDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataInstall(DateUtil.getSqlDate(rowSR.getL51DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_SR);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(progressivo));
		try{dto.setNumLivTemp(ConvertUtil.convertToBigDecimal(rowSR.getL51NumLivTemp()));}catch (Exception e) {dto.setNumLivTemp(null);}
		try{dto.setNumPtiRegolazione(ConvertUtil.convertToBigDecimal(rowSR.getL51NumPuntiReg()));}catch (Exception e) {dto.setNumPtiRegolazione(null);}
		return dto;
	}

	public static SigitTCompXDto getSigitTCompX(RowVR rowVR, BigDecimal codImpianto) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowVR.getL51DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowVR.getL51DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowVR.getL51Fabbricante()));}catch (Exception e) {dto.setFkMarca(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_VR);
		dto.setModello(rowVR.getL51Modello());
		try{dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowVR.getL51NumVR()));}catch (Exception e) {dto.setProgressivo(null);}
		try{dto.setFlgDismissione(ConvertUtil.convertToBigDecimal(rowVR.getFlagDismissione()));}catch (Exception e) {dto.setFlgDismissione(null);}
		return dto;
	}

	public static SigitTCompXDto getSigitTCompX(RowVRsost rowVR, BigDecimal codImpianto, String progressivo) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowVR.getL51DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowVR.getL51DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowVR.getL51Fabbricante()));}catch (Exception e) {dto.setFkMarca(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_VR);
		dto.setModello(rowVR.getL51Modello());
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(progressivo));
		return dto;
	}

	public static SigitTCompVrDto getSigitTCompVR(RowVR rowVR, BigDecimal codImpianto) {
		SigitTCompVrDto dto = new SigitTCompVrDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataInstall(DateUtil.getSqlDate(rowVR.getL51DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_VR);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowVR.getL51NumVR()));
		try{dto.setNumVie(ConvertUtil.convertToBigDecimal(rowVR.getL51NumVie()));}catch (Exception e) {dto.setNumVie(null);}
		dto.setServomotore(rowVR.getL51Servomotore());
		return dto;
	}
	
	public static SigitTCompVrDto getSigitTCompVR(RowVRsost rowVR, BigDecimal codImpianto, String progressivo) {
		SigitTCompVrDto dto = new SigitTCompVrDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataInstall(DateUtil.getSqlDate(rowVR.getL51DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_VR);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(progressivo));
		try{dto.setNumVie(ConvertUtil.convertToBigDecimal(rowVR.getL51NumVie()));}catch (Exception e) {dto.setNumVie(null);}
		dto.setServomotore(rowVR.getL51Servomotore());
		return dto;
	}

	public static void getSigitTCompXSemplice(SigitTCompXSempliceDto dtoXsemplice, DatiSchedaSistemiDistrib datiSchedaSistemiDistrib) {
		dtoXsemplice.setL61Altro(datiSchedaSistemiDistrib.getL61DescrAltro());
		dtoXsemplice.setL61FlgCan(ConvertUtil.convertToBigDecimal(datiSchedaSistemiDistrib.getL61FlagCanaliAria()));
		dtoXsemplice.setL61FlgOrizzontale(ConvertUtil.convertToBigDecimal(datiSchedaSistemiDistrib.getL61FlagOrizzontale()));
		dtoXsemplice.setL61FlgVerticale(ConvertUtil.convertToBigDecimal(datiSchedaSistemiDistrib.getL61FlagVerticale()));
		dtoXsemplice.setL62FlgCoibent(datiSchedaSistemiDistrib.getL62FlagCoibentNO() ? Constants.FLAG_ASSENTE : 
				datiSchedaSistemiDistrib.getL62FlagCoibentSI() ? Constants.FLAG_PRESENTE : null);
		dtoXsemplice.setL62Note(datiSchedaSistemiDistrib.getL62Note());
	}

	public static SigitTCompXDto getSigitTCompX(RowPO rowPO, BigDecimal codImpianto) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowPO.getL64DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowPO.getL64DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowPO.getL64Fabbricante()));}catch (Exception e) {dto.setFkMarca(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_PO);
		dto.setModello(rowPO.getL64Modello());
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowPO.getL64NumPO()));
		dto.setFlgDismissione(ConvertUtil.convertToBigDecimal(rowPO.getFlagDismissione()));
		return dto;
	}

	public static SigitTCompXDto getSigitTCompX(RowPOsost rowPO, BigDecimal codImpianto, String progressivo) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowPO.getL64DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowPO.getL64DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowPO.getL64Fabbricante()));}catch (Exception e) {dto.setFkMarca(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_PO);
		dto.setModello(rowPO.getL64Modello());
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(progressivo));
		return dto;
	}

	public static SigitTCompPoDto getSigitTCompPO(RowPO rowPO, BigDecimal codImpianto) {
		SigitTCompPoDto dto = new SigitTCompPoDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataInstall(DateUtil.getSqlDate(rowPO.getL64DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_PO);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowPO.getL64NumPO()));
		//FIX errore consolidamento 02/12/2014
		if(rowPO.getL64GiriVarNO())
			dto.setFlgGiriVariabili(ConvertUtil.convertToBigDecimal(Constants.NO_0));
		if(rowPO.getL64GiriVarSI())
			dto.setFlgGiriVariabili(ConvertUtil.convertToBigDecimal(Constants.SI_1));
//		dto.setFlgGiriVariabili(ConvertUtil.convertToBigDecimal(rowPO.getL64GiriVarNO() ? Constants.NO_0 : rowPO.getL64GiriVarSI() ? Constants.SI_1 : null));
		try{dto.setPotNominaleKw(rowPO.getL64PotNominale());}catch(Exception e){dto.setPotNominaleKw(null);}
		return dto;
	}
	
	public static SigitTCompPoDto getSigitTCompPO(RowPOsost rowPO, BigDecimal codImpianto, String progressivo) {
		SigitTCompPoDto dto = new SigitTCompPoDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataInstall(DateUtil.getSqlDate(rowPO.getL64DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_PO);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(progressivo));
		if(rowPO.getL64GiriVarNO())
			dto.setFlgGiriVariabili(ConvertUtil.convertToBigDecimal(Constants.NO_0));
		if(rowPO.getL64GiriVarSI())
			dto.setFlgGiriVariabili(ConvertUtil.convertToBigDecimal(Constants.SI_1));
//		dto.setFlgGiriVariabili(ConvertUtil.convertToBigDecimal(rowPO.getL64GiriVarNO() ? Constants.NO_0 : rowPO.getL64GiriVarSI() ? Constants.SI_1 : null));
		try{dto.setPotNominaleKw(rowPO.getL64PotNominale());}catch(Exception e){dto.setPotNominaleKw(null);}
		return dto;
	}

	public static void getSigitTCompxSemplice(DatiSchedaSistemaEmissione datiSchedaSistemaEmissione, SigitTCompXSempliceDto dto) {
		dto.setL70Altro(datiSchedaSistemaEmissione.getL7DescrAltro());
		dto.setL70FlgBocchette(ConvertUtil.convertToBigDecimal(datiSchedaSistemaEmissione.getL7FlagBocchette()));
		dto.setL70FlgPannelli(ConvertUtil.convertToBigDecimal(datiSchedaSistemaEmissione.getL7FlagPannelRadianti()));
		dto.setL70FlgRadiatori(ConvertUtil.convertToBigDecimal(datiSchedaSistemaEmissione.getL7FlagRadiatori()));
		dto.setL70FlgStrisce(ConvertUtil.convertToBigDecimal(datiSchedaSistemaEmissione.getL7FlagStrisce()));
		dto.setL70FlgTermoconvettori(ConvertUtil.convertToBigDecimal(datiSchedaSistemaEmissione.getL7FlagTermoConvett()));
		dto.setL70FlgTravi(ConvertUtil.convertToBigDecimal(datiSchedaSistemaEmissione.getL7FlagTravi()));
		dto.setL70FlgVentilconvettori(ConvertUtil.convertToBigDecimal(datiSchedaSistemaEmissione.getL7FlagVentilConvett()));
	}

	public static SigitTCompXDto getSigitTCompX(RowAC rowAC, BigDecimal codImpianto) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowAC.getL81DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowAC.getL81DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowAC.getL81Fabbricante()));}catch (Exception e) {dto.setFkMarca(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_AC);
		dto.setModello(rowAC.getL81Modello());
		dto.setMatricola(rowAC.getL81Matricola());
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowAC.getL81NumAC()));
		dto.setFlgDismissione(ConvertUtil.convertToBigDecimal(rowAC.getFlagDismissione()));
		return dto;
	}

	public static SigitTCompAcDto getSigitTCompAC(RowAC rowAC, BigDecimal codImpianto) {
		SigitTCompAcDto dto = new SigitTCompAcDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowAC.getL81NumAC()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_AC);
		try{dto.setCapacita(rowAC.getL81Capacita());}catch(Exception e){dto.setCapacita(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowAC.getL81DataInstallaz()));}catch(Exception e){dto.setDataInstall(null);}
		dto.setFlgAcs(ConvertUtil.convertToBigDecimal(rowAC.getL81FlagACS()));
		dto.setFlgRaff(ConvertUtil.convertToBigDecimal(rowAC.getL81FlagRaffresc()));
		dto.setFlgRisc(ConvertUtil.convertToBigDecimal(rowAC.getL81FlagRiscald()));
		dto.setFlgCoib(rowAC.getL81FlagCoibentNO() ? Constants.FLAG_ASSENTE : rowAC.getL81FlagCoibentSI() ? Constants.FLAG_PRESENTE : null);
		return dto;
	}

	public static SigitTCompXDto getSigitTCompX(RowACsost rowAC, BigDecimal codImpianto, String progressivo) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowAC.getL81DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowAC.getL81DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowAC.getL81Fabbricante()));}catch (Exception e) {dto.setFkMarca(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_AC);
		dto.setModello(rowAC.getL81Modello());
		dto.setMatricola(rowAC.getL81Matricola());
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(progressivo));
		return dto;
	}
	
	public static SigitTCompAcDto getSigitTCompAC(RowACsost rowAC, BigDecimal codImpianto, String progressivo) {
		SigitTCompAcDto dto = new SigitTCompAcDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(progressivo));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_AC);
		try{dto.setCapacita(rowAC.getL81Capacita());}catch(Exception e){dto.setCapacita(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowAC.getL81DataInstallaz()));}catch(Exception e){dto.setDataInstall(null);}
		dto.setFlgAcs(ConvertUtil.convertToBigDecimal(rowAC.getL81FlagACS()));
		dto.setFlgRaff(ConvertUtil.convertToBigDecimal(rowAC.getL81FlagRaffresc()));
		dto.setFlgRisc(ConvertUtil.convertToBigDecimal(rowAC.getL81FlagRiscald()));
		dto.setFlgCoib(rowAC.getL81FlagCoibentNO() ? Constants.FLAG_ASSENTE : rowAC.getL81FlagCoibentSI() ? Constants.FLAG_PRESENTE : null);
		return dto;
	}
	
	public static SigitTCompXDto getSigitTCompX(RowTE rowTE, BigDecimal codImpianto) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowTE.getL91DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowTE.getL91DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowTE.getL91Fabbricante()));}catch (Exception e) {dto.setFkMarca(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_TE);
		dto.setModello(rowTE.getL91Modello());
		dto.setMatricola(rowTE.getL91Matricola());
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowTE.getL91NumTE()));
		dto.setFlgDismissione(ConvertUtil.convertToBigDecimal(rowTE.getFlagDismissione()));
		return dto;
	}
	
	public static SigitTCompTeDto getSigitTCompTE(RowTE rowTE, BigDecimal codImpianto) {
		SigitTCompTeDto dto = new SigitTCompTeDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowTE.getL91NumTE()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_TE);
		try{dto.setCapacitaL(rowTE.getL91Capacita());}catch(Exception e){dto.setCapacitaL(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowTE.getL91DataInstallaz()));}catch(Exception e){dto.setDataInstall(null);}
		dto.setTipoVentilatori(rowTE.getL91TipoVentilatori());
		try{dto.setNumVentilatori(rowTE.getL91NumVentilatori());}catch(Exception e){dto.setNumVentilatori(null);}
		return dto;
	}
	
	public static SigitTCompXDto getSigitTCompX(RowTEsost rowTE, BigDecimal codImpianto, String progressivo) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowTE.getL91DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowTE.getL91DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowTE.getL91Fabbricante()));}catch (Exception e) {dto.setFkMarca(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_TE);
		dto.setModello(rowTE.getL91Modello());
		dto.setMatricola(rowTE.getL91Matricola());
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(progressivo));
		return dto;
	}
	
	public static SigitTCompTeDto getSigitTCompTE(RowTEsost rowTE, BigDecimal codImpianto, String progressivo) {
		SigitTCompTeDto dto = new SigitTCompTeDto();
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(progressivo));
		dto.setCodiceImpianto(codImpianto);
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_TE);
		try{dto.setCapacitaL(rowTE.getL91Capacita());}catch(Exception e){dto.setCapacitaL(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowTE.getL91DataInstallaz()));}catch(Exception e){dto.setDataInstall(null);}
		dto.setTipoVentilatori(rowTE.getL91TipoVentilatori());
		try{dto.setNumVentilatori(rowTE.getL91NumVentilatori());}catch(Exception e){dto.setNumVentilatori(null);}
		return dto;
	}
	
	public static SigitTCompXDto getSigitTCompX(RowRV rowRV, BigDecimal codImpianto) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowRV.getL92DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowRV.getL92DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowRV.getL92Fabbricante()));}catch (Exception e) {dto.setFkMarca(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_RV);
		dto.setModello(rowRV.getL92Modello());
		dto.setMatricola(rowRV.getL92Matricola());
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowRV.getL92NumRV()));
		dto.setFlgDismissione(ConvertUtil.convertToBigDecimal(rowRV.getFlagDismissione()));
		return dto;
	}
	
	public static SigitTCompRvDto getSigitTCompRV(RowRV rowRV, BigDecimal codImpianto) {
		SigitTCompRvDto dto = new SigitTCompRvDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowRV.getL92NumRV()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_RV);
		try{dto.setDataInstall(DateUtil.getSqlDate(rowRV.getL92DataInstallaz()));}catch(Exception e){dto.setDataInstall(null);}
		dto.setTipoVentilatori(rowRV.getL92TipoVentilatori());
		try{dto.setNumVentilatori(rowRV.getL92NumVentilatori());}catch(Exception e){dto.setNumVentilatori(null);}
		return dto;
	}
	
	public static SigitTCompXDto getSigitTCompX(RowRVsost rowRV, BigDecimal codImpianto, String progressivo) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowRV.getL92DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowRV.getL92DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowRV.getL92Fabbricante()));}catch (Exception e) {dto.setFkMarca(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_RV);
		dto.setModello(rowRV.getL92Modello());
		dto.setMatricola(rowRV.getL92Matricola());
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(progressivo));
		return dto;
	}
	
	public static SigitTCompRvDto getSigitTCompRV(RowRVsost rowRV, BigDecimal codImpianto, String progressivo) {
		SigitTCompRvDto dto = new SigitTCompRvDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(progressivo));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_RV);
		try{dto.setDataInstall(DateUtil.getSqlDate(rowRV.getL92DataInstallaz()));}catch(Exception e){dto.setDataInstall(null);}
		dto.setTipoVentilatori(rowRV.getL92TipoVentilatori());
		try{dto.setNumVentilatori(rowRV.getL92NumVentilatori());}catch(Exception e){dto.setNumVentilatori(null);}
		return dto;
	}
	
	public static SigitTCompXDto getSigitTCompX(RowSCcal rowSC, BigDecimal codImpianto) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowSC.getL93DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowSC.getL93DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowSC.getL93Fabbricante()));}catch (Exception e) {dto.setFkMarca(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_SCX);
		dto.setModello(rowSC.getL93Modello());
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowSC.getL93NumSC()));
		dto.setFlgDismissione(ConvertUtil.convertToBigDecimal(rowSC.getFlagDismissione()));
		return dto;
	}
	
	public static SigitTCompScxDto getSigitTCompSCX(RowSCcal rowSC, BigDecimal codImpianto) {
		SigitTCompScxDto dto = new SigitTCompScxDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowSC.getL93NumSC()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_SCX);
		try{dto.setDataInstall(DateUtil.getSqlDate(rowSC.getL93DataInstallaz()));}catch(Exception e){dto.setDataInstall(null);}
		return dto;
	}
	
	public static SigitTCompXDto getSigitTCompX(RowSCcalsost rowRV, BigDecimal codImpianto, String progressivo) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowRV.getL93DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowRV.getL93DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowRV.getL93Fabbricante()));}catch (Exception e) {dto.setFkMarca(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_SCX);
		dto.setModello(rowRV.getL93Modello());
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(progressivo));
		return dto;
	}
	
	public static SigitTCompScxDto getSigitTCompSCX(RowSCcalsost rowSC, BigDecimal codImpianto, String progressivo) {
		SigitTCompScxDto dto = new SigitTCompScxDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(progressivo));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_SCX);
		try{dto.setDataInstall(DateUtil.getSqlDate(rowSC.getL93DataInstallaz()));}catch(Exception e){dto.setDataInstall(null);}
		return dto;
	}
	
	public static SigitTCompXDto getSigitTCompX(RowCI rowCI, BigDecimal codImpianto) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowCI.getL94DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowCI.getL94DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_CI);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowCI.getL94NumCI()));
		dto.setFlgDismissione(ConvertUtil.convertToBigDecimal(rowCI.getFlagDismissione()));
		return dto;
	}
	
	public static SigitTCompCiDto getSigitTCompCI(RowCI rowCI, BigDecimal codImpianto) {
		SigitTCompCiDto dto = new SigitTCompCiDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowCI.getL94NumCI()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_CI);
		try{dto.setDataInstall(DateUtil.getSqlDate(rowCI.getL94DataInstallaz()));}catch(Exception e){dto.setDataInstall(null);}
		try{dto.setLunghezzaCircM(rowCI.getL94LungCircuito());}catch(Exception e){dto.setLunghezzaCircM(null);}
		try{dto.setProfInstallM(rowCI.getL94ProfInstallaz());}catch(Exception e){dto.setProfInstallM(null);}
		try{dto.setSuperfScambM2(rowCI.getL94SuperfScamb());}catch(Exception e){dto.setSuperfScambM2(null);}
		return dto;
	}
	
	public static SigitTCompXDto getSigitTCompX(RowCIsost rowCI, BigDecimal codImpianto, String progressivo) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowCI.getL94DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowCI.getL94DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_CI);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(progressivo));
		return dto;
	}
	
	public static SigitTCompCiDto getSigitTCompCI(RowCIsost rowCI, BigDecimal codImpianto, String progressivo) {
		SigitTCompCiDto dto = new SigitTCompCiDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(progressivo));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_CI);
		try{dto.setDataInstall(DateUtil.getSqlDate(rowCI.getL94DataInstallaz()));}catch(Exception e){dto.setDataInstall(null);}
		try{dto.setLunghezzaCircM(rowCI.getL94LungCircuito());}catch(Exception e){dto.setLunghezzaCircM(null);}
		try{dto.setProfInstallM(rowCI.getL94ProfInstallaz());}catch(Exception e){dto.setProfInstallM(null);}
		try{dto.setSuperfScambM2(rowCI.getL94SuperfScamb());}catch(Exception e){dto.setSuperfScambM2(null);}
		return dto;
	}

	public static SigitTCompXDto getSigitTCompX(RowUT rowUT, BigDecimal codImpianto) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowUT.getL95DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowUT.getL95DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowUT.getL95Fabbricante()));}catch (Exception e) {dto.setFkMarca(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_UT);
		dto.setModello(rowUT.getL95Modello());
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowUT.getL95NumUT()));
		dto.setMatricola(rowUT.getL95Matricola());
		dto.setFlgDismissione(ConvertUtil.convertToBigDecimal(rowUT.getFlagDismissione()));
		return dto;
	}
	
	public static SigitTCompUtDto getSigitTCompUT(RowUT rowUT, BigDecimal codImpianto) {
		SigitTCompUtDto dto = new SigitTCompUtDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowUT.getL95NumUT()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_UT);
		try{dto.setDataInstall(DateUtil.getSqlDate(rowUT.getL95DataInstallaz()));}catch(Exception e){dto.setDataInstall(null);}
		try{dto.setPortataMandataLs(rowUT.getL95PortataVentMandata());}catch(Exception e){dto.setPortataMandataLs(null);}
		try{dto.setPortataRipresaLs(rowUT.getL95PortataVentRipresa());}catch(Exception e){dto.setPortataRipresaLs(null);}
		try{dto.setPotenzaMandataKw(rowUT.getL95PotenzaVentMandata());}catch(Exception e){dto.setPotenzaMandataKw(null);}
		try{dto.setPotenzaRipresaKw(rowUT.getL95PotenzaVentRipresa());}catch(Exception e){dto.setPotenzaRipresaKw(null);}
		return dto;
	}
	
	public static SigitTCompXDto getSigitTCompX(RowUTsost rowUT, BigDecimal codImpianto, String progressivo) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowUT.getL95DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowUT.getL95DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowUT.getL95Fabbricante()));}catch (Exception e) {dto.setFkMarca(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_UT);
		dto.setModello(rowUT.getL95Modello());
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(progressivo));
		dto.setMatricola(rowUT.getL95Matricola());
		return dto;
	}
	
	public static SigitTCompUtDto getSigitTCompUT(RowUTsost rowUT, BigDecimal codImpianto, String progressivo) {
		SigitTCompUtDto dto = new SigitTCompUtDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(progressivo));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_UT);
		try{dto.setDataInstall(DateUtil.getSqlDate(rowUT.getL95DataInstallaz()));}catch(Exception e){dto.setDataInstall(null);}
		try{dto.setPortataMandataLs(rowUT.getL95PortataVentMandata());}catch(Exception e){dto.setPortataMandataLs(null);}
		try{dto.setPortataRipresaLs(rowUT.getL95PortataVentRipresa());}catch(Exception e){dto.setPortataRipresaLs(null);}
		try{dto.setPotenzaMandataKw(rowUT.getL95PotenzaVentMandata());}catch(Exception e){dto.setPotenzaMandataKw(null);}
		try{dto.setPotenzaRipresaKw(rowUT.getL95PotenzaVentRipresa());}catch(Exception e){dto.setPotenzaRipresaKw(null);}
		return dto;
	}
	
	public static SigitTCompXDto getSigitTCompX(RowRCcal rowRC, BigDecimal codImpianto) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowRC.getL96DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowRC.getL96DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_RCX);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowRC.getL96NumRC()));
		dto.setFlgDismissione(ConvertUtil.convertToBigDecimal(rowRC.getFlagDismissione()));
		return dto;
	}
	
	public static SigitTCompRcDto getSigitTCompRC(RowRCcal rowRC, BigDecimal codImpianto) {
		SigitTCompRcDto dto = new SigitTCompRcDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowRC.getL96NumRC()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_RCX);
		try{dto.setDataInstall(DateUtil.getSqlDate(rowRC.getL96DataInstallaz()));}catch(Exception e){dto.setDataInstall(null);}
		dto.setFlgIndipendente(ConvertUtil.convertToBigDecimal(rowRC.getL96FlagIndipendente()));
		dto.setFlgInstallato(ConvertUtil.convertToBigDecimal(rowRC.getL96FlagInstallato()));
		try{dto.setPortataMandataLs(rowRC.getL96PortataVentMandata());}catch (Exception e) {dto.setPortataMandataLs(null);}
		try{dto.setPortataRipresaLs(rowRC.getL96PortataVentRipresa());}catch (Exception e) {dto.setPortataRipresaLs(null);}
		try{dto.setPotenzaMandataKw(rowRC.getL96PotenzaVentMandata());}catch (Exception e) {dto.setPotenzaMandataKw(null);}
		try{dto.setPotenzaRipresaKw(rowRC.getL96PotenzaVentRipresa());}catch (Exception e) {dto.setPotenzaRipresaKw(null);}
		dto.setTipologia(rowRC.getL96Tipologia());
		return dto;
	}
	
	public static SigitTCompXDto getSigitTCompX(RowRCcalsost rowRC, BigDecimal codImpianto, String progressivo) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowRC.getL96DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowRC.getL96DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_RCX);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(progressivo));
		return dto;
	}
	
	public static SigitTCompRcDto getSigitTCompRC(RowRCcalsost rowRC, BigDecimal codImpianto, String progressivo) {
		SigitTCompRcDto dto = new SigitTCompRcDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(progressivo));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_RCX);
		try{dto.setDataInstall(DateUtil.getSqlDate(rowRC.getL96DataInstallaz()));}catch(Exception e){dto.setDataInstall(null);}
		dto.setFlgIndipendente(ConvertUtil.convertToBigDecimal(rowRC.getL96FlagIndipendente()));
		dto.setFlgInstallato(ConvertUtil.convertToBigDecimal(rowRC.getL96FlagInstallato()));
		try{dto.setPortataMandataLs(rowRC.getL96PortataVentMandata());}catch (Exception e) {dto.setPortataMandataLs(null);}
		try{dto.setPortataRipresaLs(rowRC.getL96PortataVentRipresa());}catch (Exception e) {dto.setPortataRipresaLs(null);}
		try{dto.setPotenzaMandataKw(rowRC.getL96PotenzaVentMandata());}catch (Exception e) {dto.setPotenzaMandataKw(null);}
		try{dto.setPotenzaRipresaKw(rowRC.getL96PotenzaVentRipresa());}catch (Exception e) {dto.setPotenzaRipresaKw(null);}
		return dto;
	}

	public static SigitTCompXDto getSigitTCompX(RowVasi rowVX,BigDecimal codImpianto) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataInstall(ConvertUtil.convertToSqlDate("31/12/9999"));}catch (Exception e) {dto.setDataInstall(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_VX);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowVX.getL63Codice()));
		return dto;
	}

	public static SigitTCompVxDto getSigitTCompVX(RowVasi rowVX,BigDecimal codImpianto) {
		SigitTCompVxDto dto = new SigitTCompVxDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataInstall(ConvertUtil.convertToSqlDate("31/12/9999"));}catch (Exception e) {dto.setDataInstall(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_VX);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowVX.getL63Codice()));
		try{dto.setCapacitaL(rowVX.getL63Capacita());}catch(Exception e){dto.setCapacitaL(null);}
		try{dto.setFlgVaso(rowVX.getL63VasoAperto() ? Constants.FLAG_VASO_APERTO : rowVX.getL63VasoChiuso() ? Constants.FLAG_VASO_CHIUSO : null);}catch(Exception e){dto.setFlgVaso(null);}
		try{dto.setPressioneBar(rowVX.getL63Pressione());}catch(Exception e){dto.setPressioneBar(null);}
		return dto;
	}

	public static SigitTCompXDto getSigitTCompX(RowVM rowVM, BigDecimal codImpianto) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowVM.getL101DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowVM.getL101DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowVM.getL101Fabbricante()));}catch (Exception e) {dto.setFkMarca(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_VM);
		dto.setModello(rowVM.getL101Modello());
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowVM.getL101NumVM()));
		dto.setFlgDismissione(ConvertUtil.convertToBigDecimal(rowVM.getFlagDismissione()));
		return dto;
	}

	public static SigitTCompVmDto getSigitTCompVM(RowVM rowVM, BigDecimal codImpianto) {
		SigitTCompVmDto dto = new SigitTCompVmDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataInstall(DateUtil.getSqlDate(rowVM.getL101DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_VM);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(rowVM.getL101NumVM()));
		dto.setAltroTipologia(rowVM.getL101DescrAltro());
		try{dto.setPortataMaxAriaM3h(rowVM.getL101MaxPortataAria());}catch (Exception e) {dto.setPortataMaxAriaM3h(null);}
		try{dto.setRendimentoCop(ConvertUtil.convertToString(rowVM.getL101RendimentoRecupero()));}catch (Exception e) {dto.setRendimentoCop(null);}
		if(rowVM.getL101FlagFlussoIncrociato())
			dto.setFkDettaglioVm(new BigDecimal("2"));
		if(rowVM.getL101FlagFlussoTermoDinamico())
			dto.setFkDettaglioVm(new BigDecimal("3"));
		if(rowVM.getL101FlagSolaEstraz())
			dto.setFkDettaglioVm(new BigDecimal("1"));
		return dto;
	}

	public static SigitTCompXDto getSigitTCompX(RowVMsost rowVM, BigDecimal codImpianto, String progressivo) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataDismiss(DateUtil.getSqlDate(rowVM.getL101DataDismiss()));}catch (Exception e) {dto.setDataDismiss(null);}
		try{dto.setDataInstall(DateUtil.getSqlDate(rowVM.getL101DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		try{dto.setFkMarca(ConvertUtil.convertToBigDecimal(rowVM.getL101Fabbricante()));}catch (Exception e) {dto.setFkMarca(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_VM);
		dto.setModello(rowVM.getL101Modello());
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(progressivo));
		return dto;
	}
	
	public static SigitTCompVmDto getSigitTCompVM(RowVMsost rowVM, BigDecimal codImpianto, String progressivo) {
		SigitTCompVmDto dto = new SigitTCompVmDto();
		dto.setCodiceImpianto(codImpianto);
		try{dto.setDataInstall(DateUtil.getSqlDate(rowVM.getL101DataInstallaz()));}catch (Exception e) {dto.setDataInstall(null);}
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_VM);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(progressivo));
		dto.setAltroTipologia(rowVM.getL101DescrAltro());
		try{dto.setPortataMaxAriaM3h(rowVM.getL101MaxPortataAria());}catch (Exception e) {dto.setPortataMaxAriaM3h(null);}
		try{dto.setRendimentoCop(ConvertUtil.convertToString(rowVM.getL101RendimentoRecupero()));}catch(Exception e){dto.setRendimentoCop(null);}
		if(rowVM.getL101FlagFlussoIncrociato())
			dto.setFkDettaglioVm(new BigDecimal("2"));
		if(rowVM.getL101FlagFlussoTermoDinamico())
			dto.setFkDettaglioVm(new BigDecimal("3"));
		if(rowVM.getL101FlagSolaEstraz())
			dto.setFkDettaglioVm(new BigDecimal("1"));
		return dto;
	}

	public static SigitTConsumoDto getSigitTConsumo(RowConsumo rowConsumo, BigDecimal codImpianto, BigDecimal tipoCombustibile, String unitaMisura) {
		SigitTConsumoDto dto = null;
		
		/*
		new SigitTConsumoDto();
		dto.setFkTipoConsumo(Constants.TIPO_CONSUMO_CB);
		dto.setFkCombustibile(tipoCombustibile);
		dto.setFkUnitaMisura(unitaMisura);
		dto.setCodiceImpianto(codImpianto);
		*/
		
		String acquisti = null;
		BigDecimal consumo = null;
		BigDecimal esercizioDa = null;
		BigDecimal esercizioA = null;
		BigDecimal letturaIniziale = null;
		BigDecimal letturaFinale = null;
		
		acquisti = GenericUtil.getStringValid(rowConsumo.getL141Acquisti());
		
		try{consumo = rowConsumo.getL141Consumo();}catch(Exception e){}
		
		try{esercizioDa = ConvertUtil.convertToBigDecimal(rowConsumo.getL141Esercizio1());}catch(Exception e){}
		try{esercizioA = ConvertUtil.convertToBigDecimal(rowConsumo.getL141Esercizio2());}catch(Exception e){}


		try{letturaIniziale = rowConsumo.getL141LetturaIniz();}catch(Exception e){}
		try{letturaFinale = rowConsumo.getL141LetturaFinale();}catch(Exception e){}

		/*
		dto.setAcquisti(rowConsumo.getL141Acquisti());
		try{dto.setConsumo(rowConsumo.getL141Consumo());}catch(Exception e){}
		try{dto.setEsercizioA(ConvertUtil.convertToBigDecimal(rowConsumo.getL141Esercizio2()));}catch(Exception e){}
		try{dto.setEsercizioDa(ConvertUtil.convertToBigDecimal(rowConsumo.getL141Esercizio1()));}catch(Exception e){}
		try{dto.setLetturaFinale(rowConsumo.getL141LetturaFinale());}catch(Exception e){}
		try{dto.setLetturaIniziale(rowConsumo.getL141LetturaIniz());}catch(Exception e){}
		*/

		if (log.isDebugEnabled())
		{
			log.debug("@@@@@@@@@@@@@@@@@@@@@@");
			log.debug("getSigitTConsumo - tipoCombustibile: "+tipoCombustibile);
			log.debug("getSigitTConsumo - unitaMisura: "+unitaMisura);
			log.debug("getSigitTConsumo - acquisti: "+acquisti);
			log.debug("getSigitTConsumo - consumo: "+consumo);
			log.debug("getSigitTConsumo - esercizioDa: "+esercizioDa);
			log.debug("getSigitTConsumo - esercizioA: "+esercizioA);
			log.debug("getSigitTConsumo - letturaIniziale: "+letturaIniziale);
			log.debug("getSigitTConsumo - letturaFinale: "+letturaFinale);
			log.debug("@@@@@@@@@@@@@@@@@@@@@@");
		}
		
		if (tipoCombustibile != null || unitaMisura != null || acquisti != null || consumo != null ||
				esercizioDa != null || esercizioA != null || letturaIniziale != null || letturaFinale != null)
		{
			dto = new SigitTConsumoDto();
			dto.setFkTipoConsumo(Constants.TIPO_CONSUMO_CB);
			dto.setFkCombustibile(tipoCombustibile);
			dto.setFkUnitaMisura(unitaMisura);
			dto.setCodiceImpianto(codImpianto);
			
			dto.setAcquisti(acquisti);
			dto.setConsumo(consumo);
			dto.setEsercizioDa(esercizioDa);
			dto.setEsercizioA(esercizioA);
			dto.setLetturaIniziale(letturaIniziale);
			dto.setLetturaFinale(letturaFinale);
			
			log.debug("@@@ INSERISCO il SigitTConsumoDto");
			
			if (log.isDebugEnabled())
				GenericUtil.stampa(dto, true, 3);
			
		}


		return dto;
	}

	public static SigitTConsumoDto getSigitTConsumo(it.csi.sigit.sigitwebn.xml.librettoLight.data.RowConsumoDocument.RowConsumo rowConsumo, BigDecimal codImpianto, BigDecimal tipoCombustibile, String unitaMisura) {
		SigitTConsumoDto dto = null;
		/*
		new SigitTConsumoDto();
		dto.setFkTipoConsumo(Constants.TIPO_CONSUMO_CB);
		dto.setFkCombustibile(tipoCombustibile);
		dto.setFkUnitaMisura(unitaMisura);
		dto.setCodiceImpianto(codImpianto);
		dto.setAcquisti(rowConsumo.getL141Acquisti());
		*/
		
		String acquisti = null;
		BigDecimal consumo = null;
		BigDecimal esercizioDa = null;
		BigDecimal esercizioA = null;
		BigDecimal letturaIniziale = null;
		BigDecimal letturaFinale = null;
		
		acquisti = GenericUtil.getStringValid(rowConsumo.getL141Acquisti());
		
		try{consumo = rowConsumo.getL141Consumo();}catch(Exception e){}
		
		try{esercizioDa = ConvertUtil.convertToBigDecimal(rowConsumo.getL141Esercizio1());}catch(Exception e){}
		try{esercizioA = ConvertUtil.convertToBigDecimal(rowConsumo.getL141Esercizio2());}catch(Exception e){}


		try{letturaIniziale = rowConsumo.getL141LetturaIniz();}catch(Exception e){}
		try{letturaFinale = rowConsumo.getL141LetturaFinale();}catch(Exception e){}
		
		if (tipoCombustibile != null || unitaMisura != null || acquisti != null || consumo != null ||
				esercizioDa != null || esercizioA != null || letturaIniziale != null || letturaFinale != null)
		{
			dto = new SigitTConsumoDto();
			dto.setFkTipoConsumo(Constants.TIPO_CONSUMO_CB);
			dto.setFkCombustibile(tipoCombustibile);
			dto.setFkUnitaMisura(unitaMisura);
			dto.setCodiceImpianto(codImpianto);
			
			dto.setAcquisti(acquisti);
			dto.setConsumo(consumo);
			dto.setEsercizioDa(esercizioDa);
			dto.setEsercizioA(esercizioA);
			dto.setLetturaIniziale(letturaIniziale);
			dto.setLetturaFinale(letturaFinale);
			
			log.debug("@@@ INSERISCO il SigitTConsumoDto");

			if (log.isDebugEnabled())
				GenericUtil.stampa(dto, true, 3);
			
		}
		
//		try{dto.setConsumo(rowConsumo.getL141Consumo());}catch(Exception e){}
//		try{dto.setEsercizioA(ConvertUtil.convertToBigDecimal(rowConsumo.getL141Esercizio2()));}catch(Exception e){}
//		try{dto.setEsercizioDa(ConvertUtil.convertToBigDecimal(rowConsumo.getL141Esercizio1()));}catch(Exception e){}
//		try{dto.setLetturaFinale(rowConsumo.getL141LetturaFinale());}catch(Exception e){}
//		try{dto.setLetturaIniziale(rowConsumo.getL141LetturaIniz());}catch(Exception e){}
		return dto;
	}

	public static SigitTConsumoDto getSigitTConsumo(RowConsumoEE rowEE, BigDecimal codImpianto) {
		SigitTConsumoDto dto = new SigitTConsumoDto();
		dto.setFkTipoConsumo(Constants.TIPO_CONSUMO_EE);
		dto.setCodiceImpianto(codImpianto);
		try{dto.setConsumo(rowEE.getL142ConsumoTot());}catch(Exception e){dto.setConsumo(null);}
		try{dto.setEsercizioA(ConvertUtil.convertToBigDecimal(rowEE.getL142Esercizio2()));}catch(Exception e){dto.setEsercizioA(null);}
		try{dto.setEsercizioDa(ConvertUtil.convertToBigDecimal(rowEE.getL142Esercizio1()));}catch(Exception e){dto.setEsercizioDa(null);}
		try{dto.setLetturaFinale(rowEE.getL142LetturaFinale());}catch(Exception e){dto.setLetturaFinale(null);}
		try{dto.setLetturaIniziale(rowEE.getL142LetturaIniz());}catch(Exception e){dto.setLetturaIniziale(null);}
		return dto;
	}

	public static SigitTConsumoDto getSigitTConsumo(it.csi.sigit.sigitwebn.xml.librettoLight.data.RowConsumoEEDocument.RowConsumoEE rowEE, BigDecimal codImpianto) {
		SigitTConsumoDto dto = new SigitTConsumoDto();
		dto.setFkTipoConsumo(Constants.TIPO_CONSUMO_EE);
		dto.setCodiceImpianto(codImpianto);
		try{dto.setConsumo(rowEE.getL142ConsumoTot());}catch(Exception e){dto.setConsumo(null);}
		try{dto.setEsercizioA(ConvertUtil.convertToBigDecimal(rowEE.getL142Esercizio2()));}catch(Exception e){dto.setEsercizioA(null);}
		try{dto.setEsercizioDa(ConvertUtil.convertToBigDecimal(rowEE.getL142Esercizio1()));}catch(Exception e){dto.setEsercizioDa(null);}
		try{dto.setLetturaFinale(rowEE.getL142LetturaFinale());}catch(Exception e){dto.setLetturaFinale(null);}
		try{dto.setLetturaIniziale(rowEE.getL142LetturaIniz());}catch(Exception e){dto.setLetturaIniziale(null);}
		return dto;
	}

	public static SigitTConsumoDto getSigitTConsumo(RowConsumoH2O rowH2O, BigDecimal codImpianto, String unitaMisura) {
		SigitTConsumoDto dto = new SigitTConsumoDto();
		dto.setFkTipoConsumo(Constants.TIPO_CONSUMO_H2O);
		dto.setCodiceImpianto(codImpianto);
		dto.setFkUnitaMisura(unitaMisura);
		try{dto.setConsumo(rowH2O.getL143ConsumoTot());}catch(Exception e){dto.setConsumo(null);}
		try{dto.setEsercizioA(ConvertUtil.convertToBigDecimal(rowH2O.getL143Esercizio2()));}catch(Exception e){dto.setEsercizioA(null);}
		try{dto.setEsercizioDa(ConvertUtil.convertToBigDecimal(rowH2O.getL143Esercizio1()));}catch(Exception e){dto.setEsercizioDa(null);}
		try{dto.setLetturaFinale(rowH2O.getL143LetturaFinale());}catch(Exception e){dto.setLetturaFinale(null);}
		try{dto.setLetturaIniziale(rowH2O.getL143LetturaIniz());}catch(Exception e){dto.setLetturaIniziale(null);}
		return dto;
	}

	
	public static SigitTConsumoDto getSigitTConsumo(it.csi.sigit.sigitwebn.xml.librettoLight.data.RowConsumoH2ODocument.RowConsumoH2O rowH2O, BigDecimal codImpianto, String unitaMisura) {
		SigitTConsumoDto dto = new SigitTConsumoDto();
		dto.setFkTipoConsumo(Constants.TIPO_CONSUMO_H2O);
		dto.setCodiceImpianto(codImpianto);
		dto.setFkUnitaMisura(unitaMisura);
		try{dto.setConsumo(rowH2O.getL143ConsumoTot());}catch(Exception e){dto.setConsumo(null);}
		try{dto.setEsercizioA(ConvertUtil.convertToBigDecimal(rowH2O.getL143Esercizio2()));}catch(Exception e){dto.setEsercizioA(null);}
		try{dto.setEsercizioDa(ConvertUtil.convertToBigDecimal(rowH2O.getL143Esercizio1()));}catch(Exception e){dto.setEsercizioDa(null);}
		try{dto.setLetturaFinale(rowH2O.getL143LetturaFinale());}catch(Exception e){dto.setLetturaFinale(null);}
		try{dto.setLetturaIniziale(rowH2O.getL143LetturaIniz());}catch(Exception e){dto.setLetturaIniziale(null);}
		return dto;
	}

	public static SigitTConsumo14_4Dto getSigitTConsumo144(RowConsumoPROD rowPC, BigDecimal codImpianto, String cfUtenteMod) {
		SigitTConsumo14_4Dto dto = new SigitTConsumo14_4Dto();
		dto.setCodiceImpianto(codImpianto);
		dto.setFkUnitaMisura(GenericUtil.getStringSql(rowPC.getL144UnitaMisura()));
		try{dto.setEsercizioA(ConvertUtil.convertToBigDecimal(rowPC.getL144Esercizio2()));}catch(Exception e){dto.setEsercizioA(null);}
		try{dto.setEsercizioDa(ConvertUtil.convertToBigDecimal(rowPC.getL144Esercizio1()));}catch(Exception e){dto.setEsercizioDa(null);}
		dto.setFlgAca(ConvertUtil.convertToBigDecimal(rowPC.getL144FlagCircuitoAltri()));
		dto.setFlgCircuitoAcs(ConvertUtil.convertToBigDecimal(rowPC.getL144FlagCircuitoACS()));
		dto.setFlgCircuitoIt(ConvertUtil.convertToBigDecimal(rowPC.getL144FlagCircuitoIT()));
		dto.setNomeProdotto(rowPC.getL144NomeProdotto());
		try{dto.setQtaConsumata(rowPC.getL144QtaConsumata());}catch(Exception e){dto.setQtaConsumata(null);}
		dto.setUtenteUltMod(cfUtenteMod);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		return dto;
	}

	public static SigitTConsumo14_4Dto getSigitTConsumo144(it.csi.sigit.sigitwebn.xml.librettoLight.data.RowConsumoPRODDocument.RowConsumoPROD rowPC, BigDecimal codImpianto, String cfUtenteMod) {
		SigitTConsumo14_4Dto dto = new SigitTConsumo14_4Dto();
		dto.setCodiceImpianto(codImpianto);
		dto.setFkUnitaMisura(GenericUtil.getStringSql(rowPC.getL144UnitaMisura()));
		try{dto.setEsercizioA(ConvertUtil.convertToBigDecimal(rowPC.getL144Esercizio2()));}catch(Exception e){dto.setEsercizioA(null);}
		try{dto.setEsercizioDa(ConvertUtil.convertToBigDecimal(rowPC.getL144Esercizio1()));}catch(Exception e){dto.setEsercizioDa(null);}
		dto.setFlgAca(ConvertUtil.convertToBigDecimal(rowPC.getL144FlagCircuitoAltri()));
		dto.setFlgCircuitoAcs(ConvertUtil.convertToBigDecimal(rowPC.getL144FlagCircuitoACS()));
		dto.setFlgCircuitoIt(ConvertUtil.convertToBigDecimal(rowPC.getL144FlagCircuitoIT()));
		dto.setNomeProdotto(rowPC.getL144NomeProdotto());
		try{dto.setQtaConsumata(rowPC.getL144QtaConsumata());}catch(Exception e){dto.setQtaConsumata(null);}
		dto.setUtenteUltMod(cfUtenteMod);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		return dto;
	}

	
	public static void mapToSchedaSistemiRegolarizzazionePrimaria(RegolazionePrimaria regolazionePrimaria, SigitTCompXSempliceDto compXSemplice) {
		if(compXSemplice!=null)
		{
			regolazionePrimaria.setL51DescrSistema(compXSemplice.getL51SrDescrizione());
			regolazionePrimaria.xsetL51FlagAltriSistRegPrim(getXmlBoolean(ConvertUtil.convertToBooleanAllways(compXSemplice.getL51FlgSrAltri())));
			regolazionePrimaria.xsetL51FlagRegInverter(getXmlBoolean(ConvertUtil.convertToBooleanAllways(compXSemplice.getL51FlgSrInverter())));
			regolazionePrimaria.xsetL51FlagRegMultiGrad(getXmlBoolean(ConvertUtil.convertToBooleanAllways(compXSemplice.getL51FlgSrMultigradino())));
			regolazionePrimaria.xsetL51FlagRegolazCurvaIndipen(getXmlBoolean(ConvertUtil.convertToBooleanAllways(compXSemplice.getL51FlgSrIndipendente())));
			regolazionePrimaria.xsetL51FlagRegolazCurvaIntegr(getXmlBoolean(ConvertUtil.convertToBooleanAllways(compXSemplice.getL51FlgSrGeneratore())));
			regolazionePrimaria.xsetL51FlagRegolazOnOff(getXmlBoolean(ConvertUtil.convertToBooleanAllways(compXSemplice.getL51FlgSrOnoff())));
			regolazionePrimaria.xsetL51FlagValvoleReg(getXmlBoolean(ConvertUtil.convertToBooleanAllways(compXSemplice.getL51FlgValvoleRegolazione())));
		}
	}

	public static void mapToSchedaSistemiRegolarizzazioneSingoloAmbiente(RegolazioneSingoloAmb singAmb, SigitTCompXSempliceDto dto) {
		singAmb.xsetL52FlagControlEntalpico(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL52FlgContrEntalpico())));
		singAmb.xsetL52FlagControlPortata(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL52FlgContrPortata())));
		singAmb.xsetL52FlagTermostatoOnOff(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL52FlgTermoOnoff())));
		singAmb.xsetL52FlagTermostatoProporz(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL52FlgTermoProporzionale())));
		singAmb.xsetL52FlagValvDueVieNO(getXmlBoolean(Constants.FLAG_ASSENTE.equals(dto.getL52FlgValvole2())));
		singAmb.xsetL52FlagValvDueVieSI(getXmlBoolean(Constants.FLAG_PRESENTE.equals(dto.getL52FlgValvole2())));
		singAmb.xsetL52FlagValvTermostNO(getXmlBoolean(Constants.FLAG_ASSENTE.equals(dto.getL52FlgValvoleTermo())));
		singAmb.xsetL52FlagValvTermostSI(getXmlBoolean(Constants.FLAG_PRESENTE.equals(dto.getL52FlgValvoleTermo())));
		singAmb.xsetL52FlagValvTreVieNO(getXmlBoolean(Constants.FLAG_ASSENTE.equals(dto.getL52FlgValvole3())));
		singAmb.xsetL52FlagValvTreVieSI(getXmlBoolean(Constants.FLAG_PRESENTE.equals(dto.getL52FlgValvole3())));
		singAmb.setL52Note(dto.getL52Note());
		try{singAmb.setL53DataSostituzione(ConvertUtil.convertToXmlCalendar(dto.getL53DataSostituz()));}catch(Exception e){singAmb.setL53DataSostituzione(null);}
		singAmb.setL53DescrSistema(dto.getL53DesSistemaInstallaz());
		singAmb.setL53DescrSistemaSost(dto.getL53DesSistemaSostituz());
		singAmb.xsetL53FlagTeleGestioneNO(getXmlBoolean(Constants.FLAG_ASSENTE.equals(dto.getL53FlgTelegestione())));
		singAmb.xsetL53FlagTeleGestioneSI(getXmlBoolean(Constants.FLAG_PRESENTE.equals(dto.getL53FlgTelegestione())));
		singAmb.xsetL53FlagTeleLetturaNO(getXmlBoolean(Constants.FLAG_ASSENTE.equals(dto.getL53FlgTelelettura())));
		singAmb.xsetL53FlagTeleLetturaSI(getXmlBoolean(Constants.FLAG_PRESENTE.equals(dto.getL53FlgTelelettura())));
		try{singAmb.setL54DataSostituzione(ConvertUtil.convertToXmlCalendar(dto.getL54DataSostituz()));}catch(Exception e){singAmb.setL54DataSostituzione(null);}
		singAmb.setL54DescrSistema(dto.getL54DesSistemaInstallaz());
		singAmb.setL54DescrSistemaSost(dto.getL54DesSistemaSostituz());
		singAmb.xsetL54FlagACS(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL54FlgAcs())));
		singAmb.xsetL54FlagRaffresc(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL54FlgRaff())));
		singAmb.xsetL54FlagRiscald(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL54FlgRisc())));
		singAmb.xsetL54FlagSistemaDiretto(getXmlBoolean(Constants.FLG_5_4_TIPOLOGIA_DIRETTO.equals(dto.getL54FlgTipologia())));
		singAmb.xsetL54FlagSistemaIndiretto(getXmlBoolean(Constants.FLG_5_4_TIPOLOGIA_INDIRETTO.equals(dto.getL54FlgTipologia())));
		
		if (GenericUtil.isNotNullOrEmpty(dto.getL54FlgUic()))
		{
			singAmb.xsetL54FlagUIcontabilizzNO(getXmlBoolean(!ConvertUtil.convertToBooleanAllways(dto.getL54FlgUic())));
			singAmb.xsetL54FlagUIcontabilizzSI(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL54FlgUic())));
		}
	}

	public static void mapToSchedaSistemiDistribuiti(DatiSchedaSistemiDistrib dist, SigitTCompXSempliceDto dto) {
		dist.setL61DescrAltro(dto.getL61Altro());
		dist.xsetL61FlagAltro(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL61Altro())));
		dist.xsetL61FlagCanaliAria(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL61FlgCan())));
		dist.xsetL61FlagOrizzontale(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL61FlgOrizzontale())));
		dist.xsetL61FlagVerticale(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL61FlgVerticale())));
		dist.xsetL62FlagCoibentSI(getXmlBoolean(Constants.FLAG_PRESENTE.equals(dto.getL62FlgCoibent())));
		dist.xsetL62FlagCoibentNO(getXmlBoolean(Constants.FLAG_ASSENTE.equals(dto.getL62FlgCoibent())));
		dist.setL62Note(dto.getL62Note());
	}

	public static void mapToSchedaSR(SezSR sezSR, List<SigitVCompSrDto> srList) {
		log.debug("mapToSchedaSR: START");
		BigDecimal progressivo = null;
		List<RowSR> listSr = new ArrayList<RowSR>();
		RowSR sr = null;
		List<RowSRsost> listSost = new ArrayList<RowSRsost>();
		if(srList.size()>0)
			progressivo = srList.get(0).getProgressivo();
		log.debug("mapping scheda SR");
		int numInProgr = 1;
		for (int i=0; i<srList.size();i++) {
			log.debug("i="+i +", posInProgr = " + numInProgr);
			SigitVCompSrDto dto = srList.get(i);
			log.debug("SR: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
			if(!progressivo.equals(dto.getProgressivo()))
			{
				log.debug("cambio progressivo");
				if(!listSost.isEmpty())
				{
					log.debug("aggiungo sr sostituite "+listSost.size());
					sr.addNewSezSRsostituite();
					sr.getSezSRsostituite().getRowSRsostList().addAll(listSost);
				}
				listSr.add(sr);
				progressivo = dto.getProgressivo();
				listSost= new ArrayList<RowSRsost>();
				numInProgr = 1;
			}
			if(numInProgr++ == 1)
			{
				log.debug("SR principale");
				sr = mapToRowSR(dto);
			}
			else
			{
				log.debug("SR sost");
				//sost
				listSost.add(mapToRowSRSost(dto));
			}
		}
		if(!listSost.isEmpty())
		{
			log.debug("aggiungo SR sostituite "+listSost.size());
			sr.addNewSezSRsostituite();
			sr.getSezSRsostituite().getRowSRsostList().addAll(listSost);
		}
		listSr.add(sr);
		sezSR.getRowSRList().addAll(listSr);
		log.debug("mapToSchedaSR: END");
	}

	private static RowSR mapToRowSR(SigitVCompSrDto dto) {
		RowSR row = RowSR.Factory.newInstance();
		row.setL51DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		row.setL51DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		row.setL51Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		row.setL51Modello(dto.getModello());
		row.setL51NumLivTemp(ConvertUtil.convertToBigInteger(dto.getNumLivTemp()));
		row.setL51NumPuntiReg(ConvertUtil.convertToBigInteger(dto.getNumPtiRegolazione()));
		row.setL51NumSR(ConvertUtil.convertToBigInteger(dto.getProgressivo()));
		row.xsetFlagDismissione(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgDismissione())));
		return row;
	}

	private static RowSRsost mapToRowSRSost(SigitVCompSrDto dto) {
		RowSRsost row = RowSRsost.Factory.newInstance();
		row.setL51DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		row.setL51DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		row.setL51Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		row.setL51Modello(dto.getModello());
		row.setL51NumLivTemp(ConvertUtil.convertToBigInteger(dto.getNumLivTemp()));
		row.setL51NumPuntiReg(ConvertUtil.convertToBigInteger(dto.getNumPtiRegolazione()));
		return row;
	}

	public static void mapToSchedaVR(SezVR sezVR, List<SigitVCompVrDto> vrList) {
		log.debug("mapToSchedaVR: START");
		BigDecimal progressivo = null;
		List<RowVR> listVr = new ArrayList<RowVR>();
		RowVR vr = null;
		List<RowVRsost> listSost = new ArrayList<RowVRsost>();
		if(vrList.size()>0)
			progressivo = vrList.get(0).getProgressivo();
		log.debug("mapping scheda VR");
		int numInProgr = 1;
		for (int i=0; i<vrList.size();i++) {
			log.debug("i="+i +", posInProgr = " + numInProgr);
			SigitVCompVrDto dto = vrList.get(i);
			log.debug("VR: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
			if(!progressivo.equals(dto.getProgressivo()))
			{
				log.debug("cambio progressivo");
				if(!listSost.isEmpty())
				{
					log.debug("aggiungo sr sostituite "+listSost.size());
					vr.addNewSezVRsostituite();
					vr.getSezVRsostituite().getRowVRsostList().addAll(listSost);
				}
				listVr.add(vr);
				progressivo = dto.getProgressivo();
				listSost= new ArrayList<RowVRsost>();
				numInProgr = 1;
			}
			if(numInProgr++ == 1)
			{
				log.debug("VR principale");
				vr = mapToRowVR(dto);
			}
			else
			{
				log.debug("VR sost");
				//sost
				listSost.add(mapToRowVRSost(dto));
			}
		}
		if(!listSost.isEmpty())
		{
			log.debug("aggiungo VR sostituite "+listSost.size());
			vr.addNewSezVRsostituite();
			vr.getSezVRsostituite().getRowVRsostList().addAll(listSost);
		}
		listVr.add(vr);
		sezVR.getRowVRList().addAll(listVr);
		log.debug("mapToSchedaVR: END");
	}
	
	public static RowVR mapToRowVR(SigitVCompVrDto dto){
		RowVR row = RowVR.Factory.newInstance();
		row.setL51DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		row.setL51DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		row.setL51Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		row.setL51Modello(dto.getModello());
		row.setL51NumVie(ConvertUtil.convertToBigInteger(dto.getNumVie()));
		row.setL51Servomotore(dto.getServomotore());
		row.setL51NumVR(ConvertUtil.convertToBigInteger(dto.getProgressivo()));
		row.xsetFlagDismissione(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgDismissione())));
		return row;
	}

	public static RowVRsost mapToRowVRSost(SigitVCompVrDto dto){
		RowVRsost row = RowVRsost.Factory.newInstance();
		row.setL51DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		row.setL51DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		row.setL51Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		row.setL51Modello(dto.getModello());
		row.setL51NumVie(ConvertUtil.convertToBigInteger(dto.getNumVie()));
		row.setL51Servomotore(dto.getServomotore());
		return row;
	}

	public static SigitTCompScPk getSigitTCompSCPk(SigitTCompScDto compToDel) {
		SigitTCompScPk pk = new SigitTCompScPk();
		pk.setCodiceImpianto(compToDel.getCodiceImpianto());
		pk.setDataInstall(compToDel.getDataInstall());
		pk.setIdTipoComponente(compToDel.getIdTipoComponente());
		pk.setProgressivo(compToDel.getProgressivo());
		return pk;
	}

	public static SigitTCompAgPk getSigitTCompAGPk(SigitTCompAgDto compToDel) {
		SigitTCompAgPk pk = new SigitTCompAgPk();
		pk.setCodiceImpianto(compToDel.getCodiceImpianto());
		pk.setDataInstall(compToDel.getDataInstall());
		pk.setIdTipoComponente(compToDel.getIdTipoComponente());
		pk.setProgressivo(compToDel.getProgressivo());
		return pk;
	}
	
	public static SigitTCompCsPk getSigitTCompCSPk(SigitTCompCsDto compToDel) {
		SigitTCompCsPk pk = new SigitTCompCsPk();
		pk.setCodiceImpianto(compToDel.getCodiceImpianto());
		pk.setDataInstall(compToDel.getDataInstall());
		pk.setIdTipoComponente(compToDel.getIdTipoComponente());
		pk.setProgressivo(compToDel.getProgressivo());
		return pk;
	}

	
	public static SigitTComp4Pk getSigittComp4Pk(SigitTCompScDto input)
	{
		SigitTComp4Pk pk = new SigitTComp4Pk();
		pk.setCodiceImpianto(input.getCodiceImpianto());
//		pk.setDataInstall(input.getDataInstall());
		pk.setIdTipoComponente(input.getIdTipoComponente());
		pk.setProgressivo(input.getProgressivo());
		return pk;
	}
	
	public static SigitTComp4Pk getSigitTComp4Pk(SigitTComp4Dto input)
	{
		SigitTComp4Pk pk = new SigitTComp4Pk();
		pk.setCodiceImpianto(input.getCodiceImpianto());
//		pk.setDataInstall(input.getDataInstall());
		pk.setIdTipoComponente(input.getIdTipoComponente());
		pk.setProgressivo(input.getProgressivo());
		return pk;
	}

	
	public static SigitRComp4ManutDto getSigitrComp4ManutPk(SigitTCompScDto input)
	{
		SigitRComp4ManutDto comp4Manut = new SigitRComp4ManutDto();
		comp4Manut.setCodiceImpianto(input.getCodiceImpianto());
//		comp4Manut.setDataInstall(compToDel.getDataInstall());
		comp4Manut.setIdTipoComponente(input.getIdTipoComponente());
		comp4Manut.setProgressivo(input.getProgressivo());
		return comp4Manut;
	}
	
	public static void mapToSchedaVX(SezVasi sezVX, List<SigitTCompVxDto> vxList) {
		List<RowVasi> listVx = new ArrayList<RowVasi>();
		for (SigitTCompVxDto dto : vxList) {
			RowVasi rv = RowVasi.Factory.newInstance();
			rv.setL63Capacita(dto.getCapacitaL());
			rv.setL63Codice(ConvertUtil.convertToBigDecimal(dto.getProgressivo()));
			rv.setL63Pressione(ConvertUtil.convertToBigDecimal(dto.getPressioneBar()));
			rv.xsetL63VasoAperto(getXmlBoolean(Constants.FLAG_VASO_APERTO.equals(dto.getFlgVaso())));
			rv.xsetL63VasoChiuso(getXmlBoolean(Constants.FLAG_VASO_CHIUSO.equals(dto.getFlgVaso())));
			listVx.add(rv);
		}
		sezVX.setRowVasiArray(listVx.toArray(new RowVasi[] {}));
	}

	public static void mapToL63Vasi(SezVasi sezVX, List<L63VX> vxList) {
		List<RowVasi> listVx = new ArrayList<RowVasi>();
		for (L63VX dto : vxList) {
			RowVasi rv = RowVasi.Factory.newInstance();

			rv.setL63Codice(ConvertUtil.convertToBigDecimal(dto.getL63Numero()));

			L63VasoEspansione l63VasoEspan = dto.getL63VasoEspansione();
			
			if (l63VasoEspan != null)
			{
				rv.setL63Capacita(l63VasoEspan.getL63Capacita());

				rv.xsetL63VasoAperto(getXmlBoolean(ConvertUtil.convertToBooleanAllways(l63VasoEspan.getL63Aperto())));

				if (GenericUtil.isNotNullOrEmpty(l63VasoEspan.getL63ChiusoPressione()))
				{
					rv.xsetL63VasoChiuso(getXmlBoolean(true));
					rv.setL63Pressione(l63VasoEspan.getL63ChiusoPressione());
				}
			}
			
			listVx.add(rv);
		}
		sezVX.setRowVasiArray(listVx.toArray(new RowVasi[] {}));
	}
	
	public static void mapToSchedaPO(SezPO sezPO, List<SigitVCompPoDto> poList) {
		log.debug("mapToSchedaPO: START");
		BigDecimal progressivo = null;
		List<RowPO> listPo = new ArrayList<RowPO>();
		RowPO po = null;
		List<RowPOsost> listSost = new ArrayList<RowPOsost>();
		if(poList.size()>0)
			progressivo = poList.get(0).getProgressivo();
		log.debug("mapping scheda PO");
		int numInProgr = 1;
		for (int i=0; i<poList.size();i++) {
			log.debug("i="+i +", posInProgr = " + numInProgr);
			SigitVCompPoDto dto = poList.get(i);
			log.debug("PO: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
			if(!progressivo.equals(dto.getProgressivo()))
			{
				log.debug("cambio progressivo");
				if(!listSost.isEmpty())
				{
					log.debug("aggiungo PO sostituite "+listSost.size());
					po.addNewSezPOsostituite().getRowPOsostList().addAll(listSost);
				}
				listPo.add(po);
				progressivo = dto.getProgressivo();
				listSost= new ArrayList<RowPOsost>();
				numInProgr = 1;
			}
			if(numInProgr++ == 1)
			{
				log.debug("PO principale");
				po = mapToRowPO(dto);
			}
			else
			{
				log.debug("PO sost");
				//sost
				listSost.add(mapToRowPOSost(dto));
			}
		}
		if(!listSost.isEmpty())
		{
			log.debug("aggiungo PO sostituite "+listSost.size());
			po.addNewSezPOsostituite();
			po.getSezPOsostituite().getRowPOsostList().addAll(listSost);
		}
		listPo.add(po);
		sezPO.getRowPOList().addAll(listPo);
		log.debug("mapToSchedaPO: END");
	}

	public static void mapToL64PO(SezPO sezPO, List<L64PO> poList) {
		log.debug("mapToL64PO: START");

		List<RowPO> listPo = new ArrayList<RowPO>();
		RowPO po = null;
		List<RowPOsost> listSost = new ArrayList<RowPOsost>();
		
		
		log.debug("mapping scheda PO");
		int numInProgr = 1;
		
		for (int i=0; i<poList.size();i++) {
			log.debug("i="+i +", posInProgr = " + numInProgr);
			L64PO dto = poList.get(i);
			//log.debug("PO: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
			
			po = mapToRowPO(dto.getL64Pompa(), dto.getL64Numero());
			
			List<L64PompaSostituito> l64POSostList = dto.getL64PompaSostituitoList();
			if (l64POSostList != null && l64POSostList.size() > 0)
			{
				for (L64PompaSostituito l64PompaSostituito : l64POSostList) {
					listSost.add(mapToRowPOSost(l64PompaSostituito));
				}
				
				po.addNewSezPOsostituite();
				po.getSezPOsostituite().getRowPOsostList().addAll(listSost);
				listSost.clear();
			}
			
			listPo.add(po);
		}
		sezPO.getRowPOList().addAll(listPo);
		
		
		log.debug("mapToL64PO: END");
	}
	
	private static RowPO mapToRowPO(SigitVCompPoDto dto) {
		RowPO po = RowPO.Factory.newInstance();
		po.setL64DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		po.setL64DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		po.setL64Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		po.xsetL64GiriVarNO(getXmlBoolean(dto.getFlgGiriVariabili()!=null && Constants.NO_0 == dto.getFlgGiriVariabili().intValue()));
		po.xsetL64GiriVarSI(getXmlBoolean(dto.getFlgGiriVariabili()!=null && Constants.SI_1 == dto.getFlgGiriVariabili().intValue()));
		po.setL64Modello(dto.getModello());
		po.setL64NumPO(ConvertUtil.convertToBigInteger(dto.getProgressivo()));
		po.setL64PotNominale(dto.getPotNominaleKw());
		po.xsetFlagDismissione(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgDismissione())));
		return po;
	}

	private static RowPO mapToRowPO(L64Pompa dto, BigInteger progressivo) {
		RowPO po = RowPO.Factory.newInstance();
		
		po.setL64DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL64DataDismissione()));
		po.setL64DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL64DataInstallazione()));
		
		if (dto.getL64Fabbricante() != 0)
		{
			po.setL64Fabbricante(ConvertUtil.convertToString(dto.getL64Fabbricante()));
		}
		
		if (dto.xgetL64GiriVariabiliSI() != null)
		{
			po.xsetL64GiriVarNO(getXmlBoolean(!dto.getL64GiriVariabiliSI()));
			po.xsetL64GiriVarSI(getXmlBoolean(dto.getL64GiriVariabiliSI()));
		}
		
		po.setL64Modello(dto.getL64Modello());
		po.setL64NumPO(progressivo);
		po.setL64PotNominale(dto.getL64PotenzaNominale());
		po.xsetFlagDismissione(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL64DataDismissione())));
		return po;
	}
	
	private static RowPOsost mapToRowPOSost(SigitVCompPoDto dto) {
		RowPOsost po = RowPOsost.Factory.newInstance();
		po.setL64DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		po.setL64DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		po.setL64Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		po.xsetL64GiriVarNO(getXmlBoolean(dto.getFlgGiriVariabili()!=null && Constants.NO_0 == dto.getFlgGiriVariabili().intValue()));
		po.xsetL64GiriVarSI(getXmlBoolean(dto.getFlgGiriVariabili()!=null && Constants.SI_1 == dto.getFlgGiriVariabili().intValue()));
		po.setL64Modello(dto.getModello());
		po.setL64PotNominale(dto.getPotNominaleKw());
		return po;
	}

	private static RowPOsost mapToRowPOSost(L64PompaSostituito dto) {
		RowPOsost po = RowPOsost.Factory.newInstance();
		po.setL64DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getL64DataDismissione()));
		po.setL64DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getL64DataInstallazione()));
		
		if (dto.getL64Fabbricante() != 0)
		{
			po.setL64Fabbricante(ConvertUtil.convertToString(dto.getL64Fabbricante()));
		}
		
		if (dto.xgetL64GiriVariabiliSI() != null)
		{
			po.xsetL64GiriVarNO(getXmlBoolean(!dto.getL64GiriVariabiliSI()));
			po.xsetL64GiriVarSI(getXmlBoolean(dto.getL64GiriVariabiliSI()));
		}
		
		po.setL64Modello(dto.getL64Modello());
		po.setL64PotNominale(dto.getL64PotenzaNominale());
		return po;
	}
	
	public static void mapToSchedaSistemiEmissione(DatiSchedaSistemaEmissione em, SigitTCompXSempliceDto dto) {
		em.setL7DescrAltro(dto.getL70Altro());
		em.xsetL7FlagAltro(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getL70Altro())));
		em.xsetL7FlagBocchette(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL70FlgBocchette())));
		em.xsetL7FlagPannelRadianti(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL70FlgPannelli())));
		em.xsetL7FlagRadiatori(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL70FlgRadiatori())));
		em.xsetL7FlagStrisce(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL70FlgStrisce())));
		em.xsetL7FlagTermoConvett(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL70FlgTermoconvettori())));
		em.xsetL7FlagTravi(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL70FlgTravi())));
		em.xsetL7FlagVentilConvett(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getL70FlgVentilconvettori())));
	}

	public static void mapToSchedaAC(SezAC sezAC, List<SigitVCompAcDto> acList) {
		log.debug("mapToSchedaAc: START");
		BigDecimal progressivo = null;
		List<RowAC> listPo = new ArrayList<RowAC>();
		RowAC ac = null;
		List<RowACsost> listSost = new ArrayList<RowACsost>();
		if(acList.size()>0)
			progressivo = acList.get(0).getProgressivo();
		log.debug("mapping scheda AC");
		int numInProgr = 1;
		for (int i=0; i<acList.size();i++) {
			log.debug("i="+i +", posInProgr = " + numInProgr);
			SigitVCompAcDto dto = acList.get(i);
			log.debug("AC: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
			if(!progressivo.equals(dto.getProgressivo()))
			{
				log.debug("cambio progressivo");
				if(!listSost.isEmpty())
				{
					log.debug("aggiungo AC sostituite "+listSost.size());
					ac.addNewSezACsostituite().getRowACsostList().addAll(listSost);
				}
				listPo.add(ac);
				progressivo = dto.getProgressivo();
				listSost= new ArrayList<RowACsost>();
				numInProgr = 1;
			}
			if(numInProgr++ == 1)
			{
				log.debug("AC principale");
				ac = mapToRowAC(dto);
			}
			else
			{
				log.debug("AC sost");
				listSost.add(mapToRowACSost(dto));
			}
		}
		if(!listSost.isEmpty())
		{
			log.debug("aggiungo AC sostituite "+listSost.size());
			ac.addNewSezACsostituite();
			ac.getSezACsostituite().getRowACsostList().addAll(listSost);
		}
		listPo.add(ac);
		sezAC.getRowACList().addAll(listPo);
		log.debug("mapToSchedaAC: END");		
	}


	private static RowAC mapToRowAC(SigitVCompAcDto dto) {
		RowAC ac = RowAC.Factory.newInstance();
		ac.setL81Capacita(dto.getCapacita());
		ac.setL81DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		ac.setL81DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		ac.setL81Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		ac.xsetL81FlagACS(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgAcs())));
		ac.xsetL81FlagRaffresc(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgRaff())));
		ac.xsetL81FlagRiscald(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgRisc())));
		ac.xsetL81FlagCoibentNO(getXmlBoolean(Constants.FLAG_ASSENTE.equals(dto.getFlgCoib())));
		ac.xsetL81FlagCoibentSI(getXmlBoolean(Constants.FLAG_PRESENTE.equals(dto.getFlgCoib())));
		ac.setL81Matricola(dto.getMatricola());
		ac.setL81Modello(dto.getModello());
		ac.setL81NumAC(ConvertUtil.convertToBigInteger(dto.getProgressivo()));
		ac.xsetFlagDismissione(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgDismissione())));
		return ac;
	}

	private static RowACsost mapToRowACSost(SigitVCompAcDto dto) {
		RowACsost ac = RowACsost.Factory.newInstance();
		ac.setL81Capacita(dto.getCapacita());
		ac.setL81DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		ac.setL81DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		ac.setL81Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		ac.xsetL81FlagACS(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgAcs())));
		ac.xsetL81FlagRaffresc(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgRaff())));
		ac.xsetL81FlagRiscald(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgRisc())));
		ac.xsetL81FlagCoibentNO(getXmlBoolean(Constants.FLAG_ASSENTE.equals(dto.getFlgCoib())));
		ac.xsetL81FlagCoibentSI(getXmlBoolean(Constants.FLAG_PRESENTE.equals(dto.getFlgCoib())));
		ac.setL81Matricola(dto.getMatricola());
		ac.setL81Modello(dto.getModello());
		return ac;
	}

	public static void mapToSchedaTE(SezTE sezTE, List<SigitVCompTeDto> teList) {
		log.debug("mapToSchedaTE: START");
		BigDecimal progressivo = null;
		List<RowTE> listTe = new ArrayList<RowTE>();
		RowTE ac = null;
		List<RowTEsost> listSost = new ArrayList<RowTEsost>();
		if(teList.size()>0)
			progressivo = teList.get(0).getProgressivo();
		log.debug("mapping scheda TE");
		int numInProgr = 1;
		for (int i=0; i<teList.size();i++) {
			log.debug("i="+i +", posInProgr = " + numInProgr);
			SigitVCompTeDto dto = teList.get(i);
			log.debug("TE: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
			if(!progressivo.equals(dto.getProgressivo()))
			{
				log.debug("cambio progressivo");
				if(!listSost.isEmpty())
				{
					log.debug("aggiungo TE sostituite "+listSost.size());
					ac.addNewSezTEsostituite().getRowTEsostList().addAll(listSost);
				}
				listTe.add(ac);
				progressivo = dto.getProgressivo();
				listSost= new ArrayList<RowTEsost>();
				numInProgr = 1;
			}
			if(numInProgr++ == 1)
			{
				log.debug("TE principale");
				ac = mapToRowTE(dto);
			}
			else
			{
				log.debug("TE sost");
				listSost.add(mapToRowTESost(dto));
			}
		}
		if(!listSost.isEmpty())
		{
			log.debug("aggiungo TE sostituite "+listSost.size());
			ac.addNewSezTEsostituite();
			ac.getSezTEsostituite().getRowTEsostList().addAll(listSost);
		}
		listTe.add(ac);
		sezTE.getRowTEList().addAll(listTe);
		log.debug("mapToSchedaTE: END");
	}


	private static RowTE mapToRowTE(SigitVCompTeDto dto) {
		RowTE te = RowTE.Factory.newInstance();
		te.setL91Capacita(dto.getCapacitaL());
		te.setL91DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		te.setL91DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		te.setL91Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		te.setL91Matricola(dto.getMatricola());
		te.setL91Modello(dto.getModello());
		te.setL91NumTE(ConvertUtil.convertToBigInteger(dto.getProgressivo()));
		te.setL91NumVentilatori(dto.getNumVentilatori());
		te.setL91TipoVentilatori(dto.getTipoVentilatori());
		te.xsetFlagDismissione(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgDismissione())));
		return te;
	}

	private static RowTEsost mapToRowTESost(SigitVCompTeDto dto) {
		RowTEsost te = RowTEsost.Factory.newInstance();
		te.setL91Capacita(dto.getCapacitaL());
		te.setL91DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		te.setL91DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		te.setL91Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		te.setL91Matricola(dto.getMatricola());
		te.setL91Modello(dto.getModello());
		te.setL91NumVentilatori(dto.getNumVentilatori());
		te.setL91TipoVentilatori(dto.getTipoVentilatori());
		return te;
	}

	public static void mapToSchedaRV(SezRV sezRV, List<SigitVCompRvDto> rvList) {
		log.debug("mapToSchedaRV: START");
		BigDecimal progressivo = null;
		List<RowRV> listTe = new ArrayList<RowRV>();
		RowRV ac = null;
		List<RowRVsost> listSost = new ArrayList<RowRVsost>();
		if(rvList.size()>0)
			progressivo = rvList.get(0).getProgressivo();
		log.debug("mapping scheda RV");
		int numInProgr = 1;
		for (int i=0; i<rvList.size();i++) {
			log.debug("i="+i +", posInProgr = " + numInProgr);
			SigitVCompRvDto dto = rvList.get(i);
			log.debug("RV: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
			if(!progressivo.equals(dto.getProgressivo()))
			{
				log.debug("cambio progressivo");
				if(!listSost.isEmpty())
				{
					log.debug("aggiungo RV sostituite "+listSost.size());
					ac.addNewSezRVsostituite().getRowRVsostList().addAll(listSost);
				}
				listTe.add(ac);
				progressivo = dto.getProgressivo();
				listSost= new ArrayList<RowRVsost>();
				numInProgr = 1;
			}
			if(numInProgr++ == 1)
			{
				log.debug("RV principale");
				ac = mapToRowRV(dto);
			}
			else
			{
				log.debug("RV sost");
				listSost.add(mapToRowRVSost(dto));
			}
		}
		if(!listSost.isEmpty())
		{
			log.debug("aggiungo RV sostituite "+listSost.size());
			ac.addNewSezRVsostituite();
			ac.getSezRVsostituite().getRowRVsostList().addAll(listSost);
		}
		listTe.add(ac);
		sezRV.getRowRVList().addAll(listTe);
		log.debug("mapToSchedaRV: END");
	}

	private static RowRV mapToRowRV(SigitVCompRvDto dto) {
		RowRV rv = RowRV.Factory.newInstance();
		rv.setL92DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		rv.setL92DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		rv.setL92Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		rv.setL92Matricola(dto.getMatricola());
		rv.setL92Modello(dto.getModello());
		rv.setL92NumRV(ConvertUtil.convertToBigInteger(dto.getProgressivo()));
		rv.setL92NumVentilatori(dto.getNumVentilatori());
		rv.setL92TipoVentilatori(dto.getTipoVentilatori());
		rv.xsetFlagDismissione(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgDismissione())));
		return rv;
	}

	private static RowRVsost mapToRowRVSost(SigitVCompRvDto dto) {
		RowRVsost rv = RowRVsost.Factory.newInstance();
		rv.setL92DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		rv.setL92DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		rv.setL92Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		rv.setL92Matricola(dto.getMatricola());
		rv.setL92Modello(dto.getModello());
		rv.setL92NumVentilatori(dto.getNumVentilatori());
		rv.setL92TipoVentilatori(dto.getTipoVentilatori());
		return rv;
	}

	public static void mapToSchedaSCX(it.csi.sigit.sigitwebn.xml.libretto.data.DatiAltriComponentiSCDocument.DatiAltriComponentiSC.SezSC sezSC,
			List<SigitTCompXDto> scxList) {
		log.debug("mapToSchedaSCX: START");
		BigDecimal progressivo = null;
		List<RowSCcal> listScx = new ArrayList<RowSCcal>();
		RowSCcal ac = null;
		List<RowSCcalsost> listSost = new ArrayList<RowSCcalsost>();
		if(scxList.size()>0)
			progressivo = scxList.get(0).getProgressivo();
		log.debug("mapping scheda SCX");
		int numInProgr = 1;
		for (int i=0; i<scxList.size();i++) {
			log.debug("i="+i +", posInProgr = " + numInProgr);
			SigitTCompXDto dto = scxList.get(i);
			log.debug("SCX: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
			if(!progressivo.equals(dto.getProgressivo()))
			{
				log.debug("cambio progressivo");
				if(!listSost.isEmpty())
				{
					log.debug("aggiungo SCX sostituite "+listSost.size());
					ac.addNewSezSCsostituite().getRowSCcalsostList().addAll(listSost);
				}
				listScx.add(ac);
				progressivo = dto.getProgressivo();
				listSost= new ArrayList<RowSCcalsost>();
				numInProgr = 1;
			}
			if(numInProgr++ == 1)
			{
				log.debug("SCX principale");
				ac = mapToRowSCX(dto);
			}
			else
			{
				log.debug("SCX sost");
				listSost.add(mapToRowSCXSost(dto));
			}
		}
		if(!listSost.isEmpty())
		{
			log.debug("aggiungo SCX sostituite "+listSost.size());
			ac.addNewSezSCsostituite();
			ac.getSezSCsostituite().getRowSCcalsostList().addAll(listSost);
		}
		listScx.add(ac);
		sezSC.getRowSCcalList().addAll(listScx);
		log.debug("mapToSchedaSCX: END");
	}

	private static RowSCcal mapToRowSCX(SigitTCompXDto dto) {
		RowSCcal sc = RowSCcal.Factory.newInstance();
		sc.setL93NumSC(ConvertUtil.convertToBigInteger(dto.getProgressivo()));
		sc.setL93DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		sc.setL93DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		sc.setL93Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		sc.setL93Modello(dto.getModello());
		sc.xsetFlagDismissione(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgDismissione())));
		return sc;
	}

	private static RowSCcalsost mapToRowSCXSost(SigitTCompXDto dto) {
		RowSCcalsost sc = RowSCcalsost.Factory.newInstance();
		sc.setL93DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		sc.setL93DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		sc.setL93Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		sc.setL93Modello(dto.getModello());
		return sc;
	}

	public static void mapToSchedaCI(SezCI sez, List<SigitVCompCiDto> list) {
		log.debug("mapToSchedaCI: START");
		BigDecimal progressivo = null;
		List<RowCI> listCi = new ArrayList<RowCI>();
		RowCI ac = null;
		List<RowCIsost> listSost = new ArrayList<RowCIsost>();
		if(list.size()>0)
			progressivo = list.get(0).getProgressivo();
		log.debug("mapping scheda CI");
		int numInProgr = 1;
		for (int i=0; i<list.size();i++) {
			log.debug("i="+i +", posInProgr = " + numInProgr);
			SigitVCompCiDto dto = list.get(i);
			log.debug("CI: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
			if(!progressivo.equals(dto.getProgressivo()))
			{
				log.debug("cambio progressivo");
				if(!listSost.isEmpty())
				{
					log.debug("aggiungo CI sostituite "+listSost.size());
					ac.addNewSezCIsostituite().getRowCIsostList().addAll(listSost);
				}
				listCi.add(ac);
				progressivo = dto.getProgressivo();
				listSost= new ArrayList<RowCIsost>();
				numInProgr = 1;
			}
			if(numInProgr++ == 1)
			{
				log.debug("CI principale");
				ac = mapToRowCI(dto);
			}
			else
			{
				log.debug("CI sost");
				listSost.add(mapToRowCISost(dto));
			}
		}
		if(!listSost.isEmpty())
		{
			log.debug("aggiungo CI sostituite "+listSost.size());
			ac.addNewSezCIsostituite().getRowCIsostList().addAll(listSost);
		}
		listCi.add(ac);
		sez.getRowCIList().addAll(listCi);
		log.debug("mapToSchedaCI: END");
	}

	private static RowCI mapToRowCI(SigitVCompCiDto dto) {
		RowCI ci = RowCI.Factory.newInstance();
		ci.setL94NumCI(ConvertUtil.convertToBigInteger(dto.getProgressivo()));
		ci.setL94DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		ci.setL94DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		ci.setL94LungCircuito(dto.getLunghezzaCircM());
		ci.setL94ProfInstallaz(dto.getProfInstallM());
		ci.setL94SuperfScamb(dto.getSuperfScambM2());
		ci.xsetFlagDismissione(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgDismissione())));
		return ci;
	}

	private static RowCIsost mapToRowCISost(SigitVCompCiDto dto) {
		RowCIsost ci = RowCIsost.Factory.newInstance();
		ci.setL94DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		ci.setL94DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		ci.setL94LungCircuito(dto.getLunghezzaCircM());
		ci.setL94ProfInstallaz(dto.getProfInstallM());
		ci.setL94SuperfScamb(dto.getSuperfScambM2());
		return ci;
	}

	public static void mapToSchedaUT(SezUT sez, List<SigitVCompUtDto> list) {
		log.debug("mapToSchedaUT: START");
		BigDecimal progressivo = null;
		List<RowUT> listUT = new ArrayList<RowUT>();
		RowUT ac = null;
		List<RowUTsost> listSost = new ArrayList<RowUTsost>();
		if(list.size()>0)
			progressivo = list.get(0).getProgressivo();
		log.debug("mapping scheda UT");
		int numInProgr = 1;
		for (int i=0; i<list.size();i++) {
			log.debug("i="+i +", posInProgr = " + numInProgr);
			SigitVCompUtDto dto = list.get(i);
			log.debug("UT: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
			if(!progressivo.equals(dto.getProgressivo()))
			{
				log.debug("cambio progressivo");
				if(!listSost.isEmpty())
				{
					log.debug("aggiungo UT sostituite "+listSost.size());
					ac.addNewSezUTsostituite().getRowUTsostList().addAll(listSost);
				}
				listUT.add(ac);
				progressivo = dto.getProgressivo();
				listSost= new ArrayList<RowUTsost>();
				numInProgr = 1;
			}
			if(numInProgr++ == 1)
			{
				log.debug("UT principale");
				ac = mapToRowUT(dto);
			}
			else
			{
				log.debug("UT sost");
				listSost.add(mapToRowUTSost(dto));
			}
		}
		if(!listSost.isEmpty())
		{
			log.debug("aggiungo UT sostituite "+listSost.size());
			ac.addNewSezUTsostituite().getRowUTsostList().addAll(listSost);
		}
		listUT.add(ac);
		sez.getRowUTList().addAll(listUT);
		log.debug("mapToSchedaUT: END");
	}

	private static RowUT mapToRowUT(SigitVCompUtDto dto) {
		RowUT ut = RowUT.Factory.newInstance();
		ut.setL95NumUT(ConvertUtil.convertToBigInteger(dto.getProgressivo()));
		ut.setL95DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		ut.setL95DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		ut.setL95Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		ut.setL95Matricola(dto.getMatricola());
		ut.setL95Modello(dto.getModello());
		ut.setL95PortataVentMandata(dto.getPortataMandataLs());
		ut.setL95PortataVentRipresa(dto.getPortataRipresaLs());
		ut.setL95PotenzaVentMandata(dto.getPotenzaMandataKw());
		ut.setL95PotenzaVentRipresa(dto.getPotenzaRipresaKw());
		ut.xsetFlagDismissione(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgDismissione())));
		return ut;
	}

	private static RowUTsost mapToRowUTSost(SigitVCompUtDto dto) {
		RowUTsost ut = RowUTsost.Factory.newInstance();
		ut.setL95DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		ut.setL95DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		ut.setL95Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		ut.setL95Matricola(dto.getMatricola());
		ut.setL95Modello(dto.getModello());
		ut.setL95PortataVentMandata(dto.getPortataMandataLs());
		ut.setL95PortataVentRipresa(dto.getPortataRipresaLs());
		ut.setL95PotenzaVentMandata(dto.getPotenzaMandataKw());
		ut.setL95PotenzaVentRipresa(dto.getPotenzaRipresaKw());
		return ut;
	}

	public static void mapToSchedaRC(it.csi.sigit.sigitwebn.xml.libretto.data.DatiAltriComponentiRCDocument.DatiAltriComponentiRC.SezRC sez,
			List<SigitVCompRcDto> list) {
		log.debug("mapToSchedaRC: START");
		BigDecimal progressivo = null;
		List<RowRCcal> listRC = new ArrayList<RowRCcal>();
		RowRCcal ac = null;
		List<RowRCcalsost> listSost = new ArrayList<RowRCcalsost>();
		if(list.size()>0)
			progressivo = list.get(0).getProgressivo();
		log.debug("mapping scheda RC");
		int numInProgr = 1;
		for (int i=0; i<list.size();i++) {
			log.debug("i="+i +", posInProgr = " + numInProgr);
			SigitVCompRcDto dto = list.get(i);
			log.debug("RC: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
			if(!progressivo.equals(dto.getProgressivo()))
			{
				log.debug("cambio progressivo");
				if(!listSost.isEmpty())
				{
					log.debug("aggiungo RC sostituite "+listSost.size());
					ac.addNewSezRCsostituite().getRowRCcalsostList().addAll(listSost);
				}
				listRC.add(ac);
				progressivo = dto.getProgressivo();
				listSost= new ArrayList<RowRCcalsost>();
				numInProgr = 1;
			}
			if(numInProgr++ == 1)
			{
				log.debug("RC principale");
				ac = mapToRowRCX(dto);
			}
			else
			{
				log.debug("RC sost");
				listSost.add(mapToRowRCXSost(dto));
			}
		}
		if(!listSost.isEmpty())
		{
			log.debug("aggiungo RC sostituite "+listSost.size());
			ac.addNewSezRCsostituite().getRowRCcalsostList().addAll(listSost);
		}
		listRC.add(ac);
		sez.getRowRCcalList().addAll(listRC);
		log.debug("mapToSchedaRC: END");
	}

	private static RowRCcal mapToRowRCX(SigitVCompRcDto dto) {
		RowRCcal rc = RowRCcal.Factory.newInstance();
		rc.setL96NumRC(ConvertUtil.convertToBigInteger(dto.getProgressivo()));
		rc.setL96DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		rc.setL96DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		rc.setL96PortataVentMandata(dto.getPortataMandataLs());
		rc.setL96PortataVentRipresa(dto.getPortataRipresaLs());
		rc.setL96PotenzaVentMandata(dto.getPotenzaMandataKw());
		rc.setL96PotenzaVentRipresa(dto.getPotenzaRipresaKw());
		rc.setL96Tipologia(dto.getTipologia());
		rc.xsetL96FlagIndipendente(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgIndipendente())));
		rc.xsetL96FlagInstallato(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgInstallato())));
		rc.xsetFlagDismissione(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgDismissione())));
		return rc;
	}

	private static RowRCcalsost mapToRowRCXSost(SigitVCompRcDto dto) {
		RowRCcalsost rc = RowRCcalsost.Factory.newInstance();
		rc.setL96DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		rc.setL96DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		rc.setL96PortataVentMandata(dto.getPortataMandataLs());
		rc.setL96PortataVentRipresa(dto.getPortataRipresaLs());
		rc.setL96PotenzaVentMandata(dto.getPotenzaMandataKw());
		rc.setL96PotenzaVentRipresa(dto.getPotenzaRipresaKw());
		rc.setL96Tipologia(dto.getTipologia());
		rc.xsetL96FlagIndipendente(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgIndipendente())));
		rc.xsetL96FlagInstallato(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgInstallato())));
		return rc;
	}

	public static void mapToSchedaVM(SezVM sez, List<SigitVCompVmDto> list) {
		log.debug("mapToSchedaVM: START");
		BigDecimal progressivo = null;
		List<RowVM> listVM = new ArrayList<RowVM>();
		RowVM ac = null;
		List<RowVMsost> listSost = new ArrayList<RowVMsost>();
		if(list.size()>0)
			progressivo = list.get(0).getProgressivo();
		log.debug("mapping scheda VM");
		int numInProgr = 1;
		for (int i=0; i<list.size();i++) {
			log.debug("i="+i +", posInProgr = " + numInProgr);
			SigitVCompVmDto dto = list.get(i);
			log.debug("VM: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
			if(!progressivo.equals(dto.getProgressivo()))
			{
				log.debug("cambio progressivo");
				if(!listSost.isEmpty())
				{
					log.debug("aggiungo VM sostituite "+listSost.size());
					ac.addNewSezVMsostituite().getRowVMsostList().addAll(listSost);
				}
				listVM.add(ac);
				progressivo = dto.getProgressivo();
				listSost= new ArrayList<RowVMsost>();
				numInProgr = 1;
			}
			if(numInProgr++ == 1)
			{
				log.debug("VM principale");
				ac = mapToRowVM(dto);
			}
			else
			{
				log.debug("VM sost");
				listSost.add(mapToRowVMSost(dto));
			}
		}
		if(!listSost.isEmpty())
		{
			log.debug("aggiungo VM sostituite "+listSost.size());
			ac.addNewSezVMsostituite().getRowVMsostList().addAll(listSost);
		}
		listVM.add(ac);
		sez.getRowVMList().addAll(listVM);
		log.debug("mapToSchedaVM: END");
	}

	private static RowVM mapToRowVM(SigitVCompVmDto dto) {
		RowVM vm = RowVM.Factory.newInstance();
		vm.setL101NumVM(ConvertUtil.convertToBigInteger(dto.getProgressivo()));
		vm.setL101DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		vm.setL101DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		vm.setL101Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		vm.setL101Modello(dto.getModello());
		vm.setL101DescrAltro(dto.getAltroTipologia());
		vm.xsetL101FlagAltro(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getAltroTipologia())));
		vm.xsetL101FlagSolaEstraz(getXmlBoolean(new BigDecimal("1").equals(dto.getFkDettaglioVm())));
		vm.xsetL101FlagFlussoIncrociato(getXmlBoolean(new BigDecimal("2").equals(dto.getFkDettaglioVm())));
		vm.xsetL101FlagFlussoTermoDinamico(getXmlBoolean(new BigDecimal("3").equals(dto.getFkDettaglioVm())));
		vm.setL101MaxPortataAria(dto.getPortataMaxAriaM3h());
		vm.setL101RendimentoRecupero(ConvertUtil.convertToBigDecimal(dto.getRendimentoCop()));
		vm.xsetFlagDismissione(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgDismissione())));
		return vm;
	}

	private static RowVMsost mapToRowVMSost(SigitVCompVmDto dto) {
		RowVMsost vm = RowVMsost.Factory.newInstance();
		vm.setL101DataInstallaz(ConvertUtil.convertToXmlCalendar(dto.getDataInstall()));
		vm.setL101DataDismiss(ConvertUtil.convertToXmlCalendar(dto.getDataDismiss()));
		vm.setL101Fabbricante(ConvertUtil.convertToString(dto.getFkMarca()));
		vm.setL101Modello(dto.getModello());
		vm.setL101DescrAltro(dto.getAltroTipologia());
		vm.xsetL101FlagAltro(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getAltroTipologia())));
		vm.xsetL101FlagSolaEstraz(getXmlBoolean(new BigDecimal("1").equals(dto.getFkDettaglioVm())));
		vm.xsetL101FlagFlussoIncrociato(getXmlBoolean(new BigDecimal("2").equals(dto.getFkDettaglioVm())));
		vm.xsetL101FlagFlussoTermoDinamico(getXmlBoolean(new BigDecimal("3").equals(dto.getFkDettaglioVm())));
		vm.setL101MaxPortataAria(dto.getPortataMaxAriaM3h());
		vm.setL101RendimentoRecupero(ConvertUtil.convertToBigDecimal(dto.getRendimentoCop()));
		return vm;
	}

	public static void mapToSchedaCombustibile(SezCombu sez, List<SigitTConsumoDto> list) {
		log.debug("mapToSchedaCombustibile: START");
		
		BigDecimal lastCombustibile = ConvertUtil.getBigDecimalValid(list.get(0).getFkCombustibile());
		String lastUM = ConvertUtil.getStringValid(list.get(0).getFkUnitaMisura());

		RowCombu rc = RowCombu.Factory.newInstance();
		rc.setL141TipoCombu(ConvertUtil.convertToString(list.get(0).getFkCombustibile()));
		rc.setL141UnitaMisura(list.get(0).getFkUnitaMisura());
		rc.addNewSezRowConsumo();
		
		BigDecimal newCombustibile = null;
		String newUM = null;
		
		List<RowConsumo> listRc = new ArrayList<RowConsumo>();
		for (SigitTConsumoDto dto : list) {
			log.debug("tipo combustibile: " + dto.getFkCombustibile() + ", lettura iniziale: " + dto.getLetturaIniziale());
			RowConsumo row = mapToRowConsumo(dto);
			
			newCombustibile = ConvertUtil.getBigDecimalValid(dto.getFkCombustibile());
			newUM = ConvertUtil.getStringValid(dto.getFkUnitaMisura());
			
			if(lastCombustibile.equals(newCombustibile) && lastUM.equals(newUM))
			{
				log.debug("stesso combustibile/um di prima");
				listRc.add(row);
			}
			else
			{//cambiato tipo combustibile, creo sezione nuova
				log.debug("cambiato tipo combustibile");
				rc.getSezRowConsumo().setRowConsumoArray(listRc.toArray(new RowConsumo[]{}));
				sez.getRowCombuList().add(rc);
				rc = RowCombu.Factory.newInstance();
				rc.setL141TipoCombu(ConvertUtil.convertToString(dto.getFkCombustibile()));
				rc.setL141UnitaMisura(dto.getFkUnitaMisura());
				rc.addNewSezRowConsumo();
				
//				lastCombustibile = ConvertUtil.getBigDecimalValid(dto.getFkCombustibile());
//				lastUM = ConvertUtil.getStringValid(dto.getFkUnitaMisura());
				
				lastCombustibile = newCombustibile;
				lastUM = newUM;
				
				listRc = new ArrayList<RowConsumo>();
				listRc.add(row);
			}
		}
		rc.getSezRowConsumo().setRowConsumoArray(listRc.toArray(new RowConsumo[]{}));
		sez.getRowCombuList().add(rc);
		log.debug("mapToSchedaCombustibile: END");
	}

	public static void mapToSchedaCombustibileLight(it.csi.sigit.sigitwebn.xml.librettoLight.data.DatiConsumoCombuDocument.DatiConsumoCombu.SezCombu sez, List<SigitTConsumoDto> list) {
		log.debug("mapToSchedaCombustibile: START");
		
//		BigDecimal lastCombustibile = list.get(0).getFkCombustibile();
//		String lastUM = list.get(0).getFkUnitaMisura();
		BigDecimal lastCombustibile = ConvertUtil.getBigDecimalValid(list.get(0).getFkCombustibile());
		String lastUM = ConvertUtil.getStringValid(list.get(0).getFkUnitaMisura());
		
		it.csi.sigit.sigitwebn.xml.librettoLight.data.RowCombuDocument.RowCombu rc = it.csi.sigit.sigitwebn.xml.librettoLight.data.RowCombuDocument.RowCombu.Factory.newInstance();
		rc.setL141TipoCombu(ConvertUtil.convertToString(list.get(0).getFkCombustibile()));
		rc.setL141UnitaMisura(list.get(0).getFkUnitaMisura());
		rc.addNewSezRowConsumo();
		
		List<it.csi.sigit.sigitwebn.xml.librettoLight.data.RowConsumoDocument.RowConsumo> listRc = new ArrayList<it.csi.sigit.sigitwebn.xml.librettoLight.data.RowConsumoDocument.RowConsumo>();
		
		BigDecimal newCombustibile = null;
		String newUM = null;
				
		log.debug("*****************************");
		for (SigitTConsumoDto dto : list) {
			log.debug("********");
			log.debug("tipo combustibile: " + dto.getFkCombustibile() + ", lettura iniziale: " + dto.getLetturaIniziale());
			
			
			log.debug("lastCombustibile: *"+lastCombustibile+"*");
			log.debug("lastUM: *"+lastUM+"*");
			
			log.debug("dto.getFkCombustibile(): *"+dto.getFkCombustibile()+"*");
			log.debug("dto.getFkUnitaMisura(): *"+dto.getFkUnitaMisura()+"*");
			
			newCombustibile = ConvertUtil.getBigDecimalValid(dto.getFkCombustibile());
			newUM = ConvertUtil.getStringValid(dto.getFkUnitaMisura());
			
			it.csi.sigit.sigitwebn.xml.librettoLight.data.RowConsumoDocument.RowConsumo row = mapToRowConsumoLight(dto);
			if(lastCombustibile.equals(newCombustibile) && lastUM.equals(newUM))
			{
				log.debug("stesso combustibile/um di prima");
				listRc.add(row);
			}
			else
			{//cambiato tipo combustibile, creo sezione nuova
				log.debug("cambiato tipo combustibile");
				rc.getSezRowConsumo().setRowConsumoArray(listRc.toArray(new it.csi.sigit.sigitwebn.xml.librettoLight.data.RowConsumoDocument.RowConsumo[]{}));
				sez.getRowCombuList().add(rc);
				rc = it.csi.sigit.sigitwebn.xml.librettoLight.data.RowCombuDocument.RowCombu.Factory.newInstance();
				rc.setL141TipoCombu(ConvertUtil.convertToString(dto.getFkCombustibile()));
				rc.setL141UnitaMisura(dto.getFkUnitaMisura());
				rc.addNewSezRowConsumo();
				
//				lastCombustibile = dto.getFkCombustibile();
//				lastUM = dto.getFkUnitaMisura();
				
				lastCombustibile = newCombustibile;
				lastUM = newUM;
				
				listRc = new ArrayList<it.csi.sigit.sigitwebn.xml.librettoLight.data.RowConsumoDocument.RowConsumo>();
				listRc.add(row);
			}
		}
		log.debug("*****************************");

		
		
		rc.getSezRowConsumo().setRowConsumoArray(listRc.toArray(new RowConsumoDocument.RowConsumo[]{}));
		sez.getRowCombuList().add(rc);
		log.debug("mapToSchedaCombustibile: END");
	}

	private static RowConsumo mapToRowConsumo(SigitTConsumoDto dto) {
		RowConsumo row = RowConsumo.Factory.newInstance();
		row.setL141Acquisti(dto.getAcquisti());
		row.setL141Consumo(dto.getConsumo());
		row.setL141Esercizio1(ConvertUtil.convertToBigInteger(dto.getEsercizioDa()));
		row.setL141Esercizio2(ConvertUtil.convertToBigInteger(dto.getEsercizioA()));
		row.setL141LetturaFinale(dto.getLetturaFinale());
		row.setL141LetturaIniz(dto.getLetturaIniziale());
		return row;
	}

	private static it.csi.sigit.sigitwebn.xml.librettoLight.data.RowConsumoDocument.RowConsumo mapToRowConsumoLight(SigitTConsumoDto dto) {
		it.csi.sigit.sigitwebn.xml.librettoLight.data.RowConsumoDocument.RowConsumo row = it.csi.sigit.sigitwebn.xml.librettoLight.data.RowConsumoDocument.RowConsumo.Factory.newInstance();
		row.setL141Acquisti(dto.getAcquisti());
		row.setL141Consumo(dto.getConsumo());
		row.setL141Esercizio1(ConvertUtil.convertToBigInteger(dto.getEsercizioDa()));
		row.setL141Esercizio2(ConvertUtil.convertToBigInteger(dto.getEsercizioA()));
		row.setL141LetturaFinale(dto.getLetturaFinale());
		row.setL141LetturaIniz(dto.getLetturaIniziale());
		return row;
	}

	public static void mapToSchedaEnergiaElettrica(SezConsumo sez, List<SigitTConsumoDto> list) {
		log.debug("mapToSchedaEnergiaElettrica: START");
		for (SigitTConsumoDto dto : list) {
			RowConsumoEE ee = mapToRowConsumoEE(dto);
			sez.getRowConsumoEEList().add(ee);
		}
		log.debug("mapToSchedaEnergiaElettrica: END");
	}

	public static void mapToSchedaEnergiaElettricaLight(it.csi.sigit.sigitwebn.xml.librettoLight.data.DatiConsumoEEDocument.DatiConsumoEE.SezConsumo sez, List<SigitTConsumoDto> list) {
		log.debug("mapToSchedaEnergiaElettricaLight: START");
		for (SigitTConsumoDto dto : list) {
			it.csi.sigit.sigitwebn.xml.librettoLight.data.RowConsumoEEDocument.RowConsumoEE ee = mapToRowConsumoEELight(dto);
			sez.getRowConsumoEEList().add(ee);
		}
		log.debug("mapToSchedaEnergiaElettrica: END");
	}

	private static RowConsumoEE mapToRowConsumoEE(SigitTConsumoDto dto) {
		RowConsumoEE ee = RowConsumoEE.Factory.newInstance();
		ee.setL142ConsumoTot(dto.getConsumo());
		ee.setL142Esercizio1(ConvertUtil.convertToBigInteger(dto.getEsercizioDa()));
		ee.setL142Esercizio2(ConvertUtil.convertToBigInteger(dto.getEsercizioA()));
		ee.setL142LetturaFinale(dto.getLetturaFinale());
		ee.setL142LetturaIniz(dto.getLetturaIniziale());
		return ee;
	}

	private static it.csi.sigit.sigitwebn.xml.librettoLight.data.RowConsumoEEDocument.RowConsumoEE mapToRowConsumoEELight(SigitTConsumoDto dto) {
		it.csi.sigit.sigitwebn.xml.librettoLight.data.RowConsumoEEDocument.RowConsumoEE ee = 
				it.csi.sigit.sigitwebn.xml.librettoLight.data.RowConsumoEEDocument.RowConsumoEE.Factory.newInstance();
		ee.setL142ConsumoTot(dto.getConsumo());
		ee.setL142Esercizio1(ConvertUtil.convertToBigInteger(dto.getEsercizioDa()));
		ee.setL142Esercizio2(ConvertUtil.convertToBigInteger(dto.getEsercizioA()));
		ee.setL142LetturaFinale(dto.getLetturaFinale());
		ee.setL142LetturaIniz(dto.getLetturaIniziale());
		return ee;
	}

	public static void mapToSchedaAcquaImpianto(DatiConsumoH2O datiConsumoH2O,
			List<SigitTConsumoDto> list) {
		log.debug("mapToSchedaAcquaImpianto: START");
		it.csi.sigit.sigitwebn.xml.libretto.data.DatiConsumoH2ODocument.DatiConsumoH2O.SezConsumo sezConsumo = datiConsumoH2O.addNewSezConsumo();
		for (SigitTConsumoDto dto : list) {
			RowConsumoH2O ee = mapToRowConsumoH2O(dto);
			sezConsumo.getRowConsumoH2OList().add(ee);
			datiConsumoH2O.setL143UnitaMisura(dto.getFkUnitaMisura());
		}
		log.debug("mapToSchedaAcquaImpianto: END");
	}

	public static void mapToSchedaAcquaImpiantoLight(it.csi.sigit.sigitwebn.xml.librettoLight.data.DatiConsumoH2ODocument.DatiConsumoH2O datiConsumoH2O,
			List<SigitTConsumoDto> list) {
		log.debug("mapToSchedaAcquaImpianto: START");
		it.csi.sigit.sigitwebn.xml.librettoLight.data.DatiConsumoH2ODocument.DatiConsumoH2O.SezConsumo sezConsumo = datiConsumoH2O.addNewSezConsumo();
		for (SigitTConsumoDto dto : list) {
			it.csi.sigit.sigitwebn.xml.librettoLight.data.RowConsumoH2ODocument.RowConsumoH2O ee = mapToRowConsumoH2OLight(dto);
			sezConsumo.getRowConsumoH2OList().add(ee);
			datiConsumoH2O.setL143UnitaMisura(dto.getFkUnitaMisura());
		}
		log.debug("mapToSchedaAcquaImpianto: END");
	}

	private static RowConsumoH2O mapToRowConsumoH2O(SigitTConsumoDto dto) {
		RowConsumoH2O r = RowConsumoH2O.Factory.newInstance();
		r.setL143ConsumoTot(dto.getConsumo());
		r.setL143Esercizio1(ConvertUtil.convertToBigInteger(dto.getEsercizioDa()));
		r.setL143Esercizio2(ConvertUtil.convertToBigInteger(dto.getEsercizioA()));
		r.setL143LetturaFinale(dto.getLetturaFinale());
		r.setL143LetturaIniz(dto.getLetturaIniziale());
		return r;
	}

	private static it.csi.sigit.sigitwebn.xml.librettoLight.data.RowConsumoH2ODocument.RowConsumoH2O mapToRowConsumoH2OLight(SigitTConsumoDto dto) {
		it.csi.sigit.sigitwebn.xml.librettoLight.data.RowConsumoH2ODocument.RowConsumoH2O r = 
				it.csi.sigit.sigitwebn.xml.librettoLight.data.RowConsumoH2ODocument.RowConsumoH2O.Factory.newInstance();
		r.setL143ConsumoTot(dto.getConsumo());
		r.setL143Esercizio1(ConvertUtil.convertToBigInteger(dto.getEsercizioDa()));
		r.setL143Esercizio2(ConvertUtil.convertToBigInteger(dto.getEsercizioA()));
		r.setL143LetturaFinale(dto.getLetturaFinale());
		r.setL143LetturaIniz(dto.getLetturaIniziale());
		return r;
	}

	public static void mapToSchedaProdottiChimici(
			it.csi.sigit.sigitwebn.xml.libretto.data.DatiConsumoProdottiChimiciDocument.DatiConsumoProdottiChimici.SezConsumo sez,
			List<SigitTConsumo14_4Dto> list) {
		log.debug("mapToSchedaProdottiChimici: START");
		for (SigitTConsumo14_4Dto dto : list) {
			RowConsumoPROD ee = mapToRowConsumoPROD(dto);
			sez.getRowConsumoPRODList().add(ee);
		}
		log.debug("mapToSchedaProdottiChimici: END");
	}

	public static void mapToSchedaProdottiChimiciLight(
			it.csi.sigit.sigitwebn.xml.librettoLight.data.DatiConsumoProdottiChimiciDocument.DatiConsumoProdottiChimici.SezConsumo sez,
			List<SigitTConsumo14_4Dto> list) {
		log.debug("mapToSchedaProdottiChimiciLight: START");
		for (SigitTConsumo14_4Dto dto : list) {
			it.csi.sigit.sigitwebn.xml.librettoLight.data.RowConsumoPRODDocument.RowConsumoPROD ee = mapToRowConsumoPRODLight(dto);
			sez.getRowConsumoPRODList().add(ee);
		}
		log.debug("mapToSchedaProdottiChimici: END");
	}

	private static RowConsumoPROD mapToRowConsumoPROD(SigitTConsumo14_4Dto dto) {
		RowConsumoPROD row = RowConsumoPROD.Factory.newInstance();
		row.setL144Esercizio1(ConvertUtil.convertToBigInteger(dto.getEsercizioDa()));
		row.setL144Esercizio2(ConvertUtil.convertToBigInteger(dto.getEsercizioA()));
		row.xsetL144FlagCircuitoACS(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgCircuitoAcs())));
		row.xsetL144FlagCircuitoIT(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgCircuitoIt())));
		row.xsetL144FlagCircuitoAltri(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgAca())));
		row.setL144NomeProdotto(dto.getNomeProdotto());
		row.setL144UnitaMisura(dto.getFkUnitaMisura());
		row.setL144QtaConsumata(dto.getQtaConsumata());
		return row;
	}

	private static it.csi.sigit.sigitwebn.xml.librettoLight.data.RowConsumoPRODDocument.RowConsumoPROD mapToRowConsumoPRODLight(SigitTConsumo14_4Dto dto) {
		it.csi.sigit.sigitwebn.xml.librettoLight.data.RowConsumoPRODDocument.RowConsumoPROD row = 
				it.csi.sigit.sigitwebn.xml.librettoLight.data.RowConsumoPRODDocument.RowConsumoPROD.Factory.newInstance();
		row.setL144Esercizio1(ConvertUtil.convertToBigInteger(dto.getEsercizioDa()));
		row.setL144Esercizio2(ConvertUtil.convertToBigInteger(dto.getEsercizioA()));
		row.xsetL144FlagCircuitoACS(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgCircuitoAcs())));
		row.xsetL144FlagCircuitoIT(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgCircuitoIt())));
		row.xsetL144FlagCircuitoAltri(getXmlBoolean(ConvertUtil.convertToBooleanAllways(dto.getFlgAca())));
		row.setL144NomeProdotto(dto.getNomeProdotto());
		row.setL144UnitaMisura(dto.getFkUnitaMisura());
		row.setL144QtaConsumata(dto.getQtaConsumata());
		return row;
	}

	public static ElencoUM mapToElencoUnitaMisura(List<SigitDUnitaMisuraDto> elencoUM) {
		ElencoUM ec = ElencoUM.Factory.newInstance();
		UnitaMisura[] arr = new UnitaMisura[elencoUM.size()];
		int i=0;
		for (SigitDUnitaMisuraDto dto : elencoUM) {
			UnitaMisura um = UnitaMisura.Factory.newInstance();
			um.setCodice(dto.getIdUnitaMisura());
			um.setDescrizione(dto.getDesUnitaMisura());
			arr[i++] = um;
		}
		ec.setUnitaMisuraArray(arr);
		return ec;
	}

	public static it.csi.sigit.sigitwebn.xml.librettoLight.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoUM mapToElencoUnitaMisuraLight(
			List<SigitDUnitaMisuraDto> elencoUM) {
		it.csi.sigit.sigitwebn.xml.librettoLight.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoUM ec = it.csi.sigit.sigitwebn.xml.librettoLight.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoUM.Factory
				.newInstance();
		it.csi.sigit.sigitwebn.xml.librettoLight.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoUM.UnitaMisura[] arr = new it.csi.sigit.sigitwebn.xml.librettoLight.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoUM.UnitaMisura[elencoUM
				.size()];
		int i = 0;
		for (SigitDUnitaMisuraDto dto : elencoUM) {
			it.csi.sigit.sigitwebn.xml.librettoLight.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoUM.UnitaMisura um = it.csi.sigit.sigitwebn.xml.librettoLight.data.DatiPrecompilatiDocument.DatiPrecompilati.ElencoUM.UnitaMisura.Factory
					.newInstance();
			um.setCodice(dto.getIdUnitaMisura());
			um.setDescrizione(dto.getDesUnitaMisura());
			arr[i++] = um;
		}
		ec.setUnitaMisuraArray(arr);
		return ec;
	}
	
	public static void main(String[] args) {
		List<SigitVCompGtDettDto> compGtImpiantoDett = new ArrayList<SigitVCompGtDettDto>();
		SigitVCompGtDettDto dto = new SigitVCompGtDettDto();
		dto.setProgressivo(new BigDecimal("1"));
		dto.setDataInstall(ConvertUtil.convertToSqlDate("01/11/2014"));
		dto.setDataControllo(ConvertUtil.convertToSqlDate("02/11/2014"));
		dto.setENModuloTermico(1);
		compGtImpiantoDett.add(dto);
		SigitVCompGtDettDto dto2 = new SigitVCompGtDettDto();
		dto2.setProgressivo(new BigDecimal("1"));
		dto2.setDataInstall(ConvertUtil.convertToSqlDate("01/11/2014"));
		dto2.setDataControllo(ConvertUtil.convertToSqlDate("02/11/2014"));
		dto2.setENModuloTermico(2);
		compGtImpiantoDett.add(dto2);
		SigitVCompGtDettDto dto3 = new SigitVCompGtDettDto();
		dto3.setProgressivo(new BigDecimal("1"));
		dto3.setDataInstall(ConvertUtil.convertToSqlDate("01/11/2014"));
		dto3.setDataControllo(ConvertUtil.convertToSqlDate("01/11/2014"));
		dto3.setENModuloTermico(1);
		compGtImpiantoDett.add(dto3);
		SigitVCompGtDettDto dto4 = new SigitVCompGtDettDto();
		dto4.setProgressivo(new BigDecimal("1"));
		dto4.setDataInstall(ConvertUtil.convertToSqlDate("01/11/2014"));
		dto4.setDataControllo(ConvertUtil.convertToSqlDate("01/11/2014"));
		dto4.setENModuloTermico(2);
		compGtImpiantoDett.add(dto4);
		SigitVCompGtDettDto dto5 = new SigitVCompGtDettDto();
		dto5.setProgressivo(new BigDecimal("2"));
		dto5.setDataInstall(ConvertUtil.convertToSqlDate("02/11/2014"));
		dto5.setDataControllo(ConvertUtil.convertToSqlDate("02/11/2014"));
		dto5.setENModuloTermico(1);
		compGtImpiantoDett.add(dto5);
		//mapToDatiRisultatiGT(DatiRisultatiGT.Factory.newInstance(), compGtImpiantoDett);
	}
	
	public static void mapToDatiRisultatiGT(it.csi.sigit.sigitwebn.xml.libretto.data.DatiRisultatiGTDocument.DatiRisultatiGT.SezGruppiTermici sezGT, List<SigitVCompGtDettDto> compGtImpiantoDett) {
		log.debug("mapToDatiRisultatiGT: START");
		if(compGtImpiantoDett == null) return;
		//it.csi.sigit.sigitwebn.xml.libretto.data.DatiRisultatiGTDocument.DatiRisultatiGT.SezGruppiTermici sezGT = datiRisultatiGT.addNewSezGruppiTermici();
		BigDecimal progressivo = null;
		Date lastDataControllo = null;
		List<L111RowGT> listGt = new ArrayList<L111RowGT>();
		L111RowGT gt = L111RowGT.Factory.newInstance();
		gt.addNewSezDateGT();
		if(compGtImpiantoDett.size()>0)
			progressivo = compGtImpiantoDett.get(0).getProgressivo();
		log.debug("mapping scheda RisultatiGT");
		RowNumModuliGT modulo;
		RowDateGT rowDateGT = RowDateGT.Factory.newInstance();
		rowDateGT.addNewSezNumeroModuliGT();
		for (int i=0; i<compGtImpiantoDett.size();i++) {
			log.debug("i="+i+ ", progressivo: " + progressivo);
			SigitVCompGtDettDto dto = compGtImpiantoDett.get(i);
			java.sql.Date dataControllo = dto.getDataControllo();
			
//			log.debug("GT: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall()+"," +
//					" data controllo: " + dataControllo+", data dismiss: " + dto.getDataDismiss());
			
			log.debug("GT: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall()+"," +
					" data controllo: " + dataControllo);
			
			//le componenti non controllate, non si riportano
			if(dataControllo==null)
			{
				log.debug("senza data controllo");
				continue;
			}
			
			//controllo validita' componente in data controllo
			/*
			if(!(!dataControllo.before(dto.getDataInstall()) && (dto.getDataDismiss()==null || !dataControllo.after(dto.getDataDismiss()))))
			{
				log.debug("non attiva in data " + dataControllo);
				continue;
			}
			*/
			
			if(!progressivo.equals(dto.getProgressivo()))
			{
				log.debug("cambio progressivo");
				if(!rowDateGT.getSezNumeroModuliGT().getRowNumModuliGTList().isEmpty())
				{//se non ci sono dati, non aggiungo la lista vuota
					gt.setL111NumGT(ConvertUtil.convertToBigInteger(progressivo));
					gt.getSezDateGT().getRowDateGTList().add(rowDateGT);
					listGt.add(gt);
				}
				rowDateGT = RowDateGT.Factory.newInstance();
				rowDateGT.addNewSezNumeroModuliGT();
				progressivo = dto.getProgressivo();
				gt = L111RowGT.Factory.newInstance();
				gt.addNewSezDateGT();
			}
			else if(lastDataControllo!=null && lastDataControllo.compareTo(dataControllo)!=0)
			{
				log.debug("cambio data controllo");
				//altra data controllo
				gt.getSezDateGT().getRowDateGTList().add(rowDateGT);
				rowDateGT = RowDateGT.Factory.newInstance();
				rowDateGT.addNewSezNumeroModuliGT();
			}
			log.debug("GT attivo");
			modulo = mapToRowNumModuliGT(dto);
			rowDateGT.getSezNumeroModuliGT().getRowNumModuliGTList().add(modulo);
			gt.setL111NumGT(ConvertUtil.convertToBigInteger(progressivo));
			rowDateGT.setL111Data(ConvertUtil.convertToXmlCalendar(dataControllo));
			
			lastDataControllo = dataControllo;
		}
		gt.getSezDateGT().getRowDateGTList().add(rowDateGT);
		listGt.add(gt);
		sezGT.getL111RowGTList().addAll(listGt);
		
		log.debug("mapToDatiRisultatiGT: END");
	}

	private static RowNumModuliGT mapToRowNumModuliGT(SigitVCompGtDettDto dto) {
		RowNumModuliGT modulo = RowNumModuliGT.Factory.newInstance();
		
		modulo.setL111CO(dto.getL111CoNoAriaPpm());
		modulo.setL111COsenzaAria(dto.getECoCorrettoPpm());
		
		modulo.setL111CO2(dto.getECo2Perc());
		
		
		if (GenericUtil.isNullOrEmpty(dto.getNumeroRea()) && dto.getFkRuolo().intValue() == Constants.ID_RUOLO_ISPETTORE)
		{
			modulo.setL111Firma(Constants.DESC_ISPEZIONE);
		}
		else
		{
			modulo.setL111Firma(getCodiceRea(dto.getSiglaRea(), ConvertUtil.convertToInteger(dto.getNumeroRea())));
		}
		
		
		if(dto.getL111FlgCoMin1000() != null)
		{
			if(!ConvertUtil.convertToBooleanAllways(dto.getL111FlgCoMin1000()))
				modulo.xsetL111FlagfumiSecchiNO(getXmlBoolean(true));
			else
				modulo.xsetL111FlagfumiSecchiSI(getXmlBoolean(true));
		}
		
		/*
		if(dto.getL111CoNoAriaPpm()!=null)
		{
			if(dto.getL111CoNoAriaPpm().compareTo(new BigDecimal("1000"))>0)
				modulo.xsetL111FlagfumiSecchiNO(getXmlBoolean(true));
			else
				modulo.xsetL111FlagfumiSecchiSI(getXmlBoolean(true));
		}
		*/
		
		if(dto.getL111FlgRispettaBacharach()!=null)
		{
			if(!ConvertUtil.convertToBooleanAllways(dto.getL111FlgRispettaBacharach()))
				modulo.xsetL111FlagIndBachNO(getXmlBoolean(true));
			else
				modulo.xsetL111FlagIndBachSI(getXmlBoolean(true));
		}
		
		if(dto.getL111FlgRendMagRendMin()!=null)
		{
			if(!ConvertUtil.convertToBooleanAllways(dto.getL111FlgRendMagRendMin()))
				modulo.xsetL111FlagMinimoNO(getXmlBoolean(true));
			else
				modulo.xsetL111FlagMinimoSI(getXmlBoolean(true));
		}
		
		modulo.setL111IndBacharach1(dto.getEBacharachMin());
		modulo.setL111IndBacharach2(dto.getEBacharachMed());
		modulo.setL111IndBacharach3(dto.getEBacharachMax());
		modulo.setL111Nox(dto.getENoxPpm());
		modulo.setL111NumModulo(ConvertUtil.convertToString(dto.getENModuloTermico()));
		modulo.setL111O2(dto.getEO2Perc());
		modulo.setL111PercMinimoLegge(dto.getERendMinLeggePerc());
		modulo.setL111PortataCombu(getPortataCombustibileCompleto(dto));
		modulo.setL111PortataTermEff(dto.getEPotTermFocolKw());
		modulo.setL111RendimentoCombu(dto.getERendCombPerc());
		modulo.setL111TempAriaComb(dto.getETempAriaC());
		modulo.setL111TempFumi(dto.getETempFumiC());
		return modulo;
	}

	public static void mapToDatiInterventiControllo(SezInterventi sezInterventi, List<SigitVRicercaAllegatiDto> list) {
		log.debug("mapToDatiInterventiControllo: START");
		if(list!=null && !list.isEmpty())
		{
			for (SigitVRicercaAllegatiDto dto : list) {
				sezInterventi.getIntervControlloList().add(mapToIntervControllo(dto));
			}
		}
		log.debug("mapToDatiInterventiControllo: END");
	}

	private static IntervControllo mapToIntervControllo(SigitVRicercaAllegatiDto dto)
	{
		IntervControllo ic = IntervControllo.Factory.newInstance();
		ic.setL12DataControllo(ConvertUtil.convertToXmlCalendar(dto.getDataControllo()));
		if (dto.getRuoloFunz().equalsIgnoreCase(Constants.RUOLO_ISPETTORE))
		{
			ic.setL12Cciaa(Constants.DESC_ISPEZIONE);
			ic.setL12RagioneSociale(Constants.DESC_PG_RUOLO_ISPETTORE);
		}
		else
		{
			ic.setL12Cciaa(getCodiceRea(dto.getPgSiglaRea(), ConvertUtil.convertToInteger(dto.getPgNumeroRea())));
			ic.setL12RagioneSociale(dto.getPgDenominazione());
		}
		
		ic.xsetL12FlagPrescrNO(getXmlBoolean(GenericUtil.isNullOrEmpty(dto.getFPrescrizioni())));
		ic.xsetL12FlagPrescrSI(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getFPrescrizioni())));
		ic.xsetL12FlagRaccNO(getXmlBoolean(GenericUtil.isNullOrEmpty(dto.getFRaccomandazioni())));
		ic.xsetL12FlagRaccSI(getXmlBoolean(GenericUtil.isNotNullOrEmpty(dto.getFRaccomandazioni())));
		ic.setL12TipoAllegato(dto.getDesTipoDocumento());
		return ic;		
	}

	public static void mapToDatiIspezioni(SezRisultati sezInterventi, List<SigitVRicercaIspezioniDto> list) {
		log.debug("mapToDatiIspezioni: START");
		if(list!=null && !list.isEmpty())
		{
			for (SigitVRicercaIspezioniDto dto : list) {
				sezInterventi.getRowRisultatiIspezList().add(mapToIspezioneControllo(dto));
			}
		}
		
		log.debug("mapToDatiIspezioni: END");
	}

	private static RowRisultatiIspez mapToIspezioneControllo(SigitVRicercaIspezioniDto dto)
	{
		RowRisultatiIspez ri = RowRisultatiIspez.Factory.newInstance();

		ri.setL13DataIspez(ConvertUtil.convertToXmlCalendar(dto.getDtCreazione()));
		ri.setL13CognomeTecnico(dto.getCognome());
		ri.setL13NomeTecnico(dto.getNome());
		ri.setL13CodiceFiscale(dto.getCodiceFiscale());

		ri.setL13EnteCompetente(dto.getEnteCompetente());


		if(ConvertUtil.convertToBooleanAllways(dto.getFlgEsito()))
			ri.xsetL13FlagPositivo(getXmlBoolean(true));
		else
			ri.xsetL13FlagNegativo(getXmlBoolean(true));


		ri.setL13Note(dto.getNote());

		if (GenericUtil.isNotNullOrEmpty(dto.getFkNumeroBollino()))
		{
			ri.setL13RapportoProva(costruisciCodiceBollino(dto.getFkSiglaBollino(), dto.getFkNumeroBollino()));
		}
		return ri;		
	}

	public static void mapToDatiRisultatiGF(SezMacchineFrigo sezGF, List<SigitVCompGfDettDto> compGfImpianto) {
		log.debug("mapToDatiRisultatiGF: START");
		if(compGfImpianto == null || compGfImpianto.isEmpty()) return;
		BigDecimal progressivo = null;
		Date lastDataControllo = null;
		List<L112RowGF> listGf = new ArrayList<L112RowGF>();
		L112RowGF gf = L112RowGF.Factory.newInstance();
		gf.addNewSezDateGF();
		if(compGfImpianto.size()>0)
			progressivo = compGfImpianto.get(0).getProgressivo();
		log.debug("mapping scheda RisultatiGF");
		RowCircuitiGF modulo = RowCircuitiGF.Factory.newInstance();
		RowDateGF rowDateGF = RowDateGF.Factory.newInstance();
		rowDateGF.addNewSezCircuitiGF();
		for (int i=0; i<compGfImpianto.size();i++) {
			log.debug("i="+i+ ", progressivo: " + progressivo);
			SigitVCompGfDettDto dto = compGfImpianto.get(i);
			java.sql.Date dataControllo = dto.getDataControllo();
			
			log.debug("GF: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall()+
					", data controllo: " + dataControllo);
			
			//le componenti non controllate, non si riportano
			if(dataControllo==null)
			{
				log.debug("senza data controllo");
				continue;
			}
			/*
			//controllo validita' componente in data controllo
			if(!(!dataControllo.before(dto.getDataInstall()) && (dto.getDataDismiss()==null || !dataControllo.after(dto.getDataDismiss()))))
			{
				log.debug("non attiva in data " + dataControllo);
				continue;
			}
			*/
			
			if(!progressivo.equals(dto.getProgressivo()))
			{
				log.debug("cambio progressivo");
				if(!rowDateGF.getSezCircuitiGF().getRowCircuitiGFList().isEmpty())
				{//se non ci sono dati, non aggiungo la lista vuota
					gf.setL112NumGF(ConvertUtil.convertToBigInteger(progressivo));
					gf.getSezDateGF().getRowDateGFList().add(rowDateGF);
					listGf.add(gf);
				}
				rowDateGF = RowDateGF.Factory.newInstance();
				rowDateGF.addNewSezCircuitiGF();
				progressivo = dto.getProgressivo();
				gf = L112RowGF.Factory.newInstance();
				gf.addNewSezDateGF();
			}
			else if(lastDataControllo!=null && lastDataControllo.compareTo(dataControllo)!=0)
			{
				log.debug("cambio data controllo");
				//altra data controllo
				gf.getSezDateGF().getRowDateGFList().add(rowDateGF);
				rowDateGF = RowDateGF.Factory.newInstance();
				rowDateGF.addNewSezCircuitiGF();
			}
			log.debug("GF attivo");
			modulo = mapToRowNumModuliGF(dto);
			rowDateGF.getSezCircuitiGF().getRowCircuitiGFList().add(modulo);
			gf.setL112NumGF(ConvertUtil.convertToBigInteger(progressivo));
			rowDateGF.setL112Data(ConvertUtil.convertToXmlCalendar(dataControllo));
			
			lastDataControllo = dataControllo;
		}
		gf.getSezDateGF().getRowDateGFList().add(rowDateGF);
		listGf.add(gf);
		sezGF.getL112RowGFList().addAll(listGf);
		log.debug("mapToDatiRisultatiGF: END");
	}

	private static RowCircuitiGF mapToRowNumModuliGF(SigitVCompGfDettDto dto) {
		RowCircuitiGF row = RowCircuitiGF.Factory.newInstance();
		row.setL112BulboUmido(dto.getL112TorreTBulboUmido());
		row.setL112Condens(dto.getETCondensazioneC());
		row.setL112DataRispristino(ConvertUtil.convertDateToXmlCalendar(dto.getL112DataRipristino()));
		row.setL112Evaporaz(dto.getETEvaporazioneC());
		
		if (GenericUtil.isNullOrEmpty(dto.getNumeroRea()) && dto.getFkRuolo().intValue() == Constants.ID_RUOLO_ISPETTORE)
		{
			row.setL112Firma(Constants.DESC_ISPEZIONE);
		}
		else
		{
			row.setL112Firma(getCodiceRea(dto.getSiglaRea(), ConvertUtil.convertToInteger(dto.getNumeroRea())));
		}
		//row.setL112Firma(getCodiceRea(dto.getSiglaRea(), ConvertUtil.convertToInteger(dto.getNumeroRea())));
		
		//segnalazione 145 libretto_ree
		if(dto.getEFlgPerditaGas()!=null)
		{
			row.xsetL112FlagAssenzaPerditeNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dto.getEFlgPerditaGas())));
			row.xsetL112FlagAssenzaPerditeSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dto.getEFlgPerditaGas())));
		}
		
		if(dto.getL112FlgPuliziaFiltri()!=null)
		{
			if(!ConvertUtil.convertToBooleanAllways(dto.getL112FlgPuliziaFiltri()))
				row.xsetL112FlagFiltriNO(getXmlBoolean(true));
			else
				row.xsetL112FlagFiltriSI(getXmlBoolean(true));
		}
		
		row.xsetL112FlagRaffr(getXmlBoolean(Constants.FLG_RAFFREDDAMENTO.equals(dto.getEFlgModProva())));
		row.xsetL112FlagRisc(getXmlBoolean(Constants.FLG_RISCALDAMENTO.equals(dto.getEFlgModProva())));
		
		if(dto.getL112FlgVerificaSuperata()!=null)
		{
			if(!ConvertUtil.convertToBooleanAllways(dto.getL112FlgVerificaSuperata()))
				row.xsetL112FlagVerificaNO(getXmlBoolean(true));
			else
				row.xsetL112FlagVerificaSI(getXmlBoolean(true));
		}
		
		row.setL112IngressoFluido(dto.getL112ScambiatoreTInExt());
		row.setL112IngressoFluidoMacc(dto.getL112ScambiatTInMacchina());
		row.setL112IngressoUtenze(dto.getETInUtenzeC());
		row.setL112NumCircuito(dto.getENCircuito());
		row.setL112PotAssorbita(dto.getL112PotenzaAssorbitaKw());
		row.setL112SorgenteIngresso(dto.getETInExtC());
		row.setL112SorgenteUscita(dto.getETOutExtC());
		row.setL112Sottoraffr(dto.getETSottorafC());
		row.setL112Surrisc(dto.getETSurriscC());
		row.setL112UscitaFluido(dto.getL112TorreTOutFluido());
		row.setL112UscitaFluidoMacc(dto.getL112ScambiatTOutMacchina());
		row.setL112UscitaFluidoSorg(dto.getL112ScambiatoreTOutExt());
		row.setL112UsciteUtenze(dto.getETOutUtenzeC());
		return row;
	}

	public static void mapToDatiRisultatiSC(SezScambiatori sezSC, List<SigitVCompScDettDto> compScImpianto) {
		log.debug("mapToDatiRisultatiSC: START");
		if(compScImpianto == null || compScImpianto.isEmpty()) return;
		BigDecimal progressivo = null;
		List<L113RowSC> listSC = new ArrayList<L113RowSC>();
		L113RowSC sc = L113RowSC.Factory.newInstance();
		sc.addNewSezSC();
		progressivo = compScImpianto.get(0).getProgressivo();
		log.debug("mapping scheda RisultatiSC");
		RowDateSC rowDateSC = RowDateSC.Factory.newInstance();
		for (int i=0; i<compScImpianto.size();i++) {
			log.debug("i="+i+ ", progressivo: " + progressivo);
			SigitVCompScDettDto dto = compScImpianto.get(i);
			java.sql.Date dataControllo = dto.getDataControllo();
			log.debug("SC: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall()+
					", data controllo: " + dataControllo);
			
			//le componenti non controllate, non si riportano
			if(dataControllo==null)
			{
				log.debug("senza data controllo");
				continue;
			}
			
			/*
			//controllo validita' componente in data controllo
			if(!(!dataControllo.before(dto.getDataInstall()) && (dto.getDataDismiss()==null || !dataControllo.after(dto.getDataDismiss()))))
			{
				log.debug("non attiva in data " + dataControllo);
				continue;
			}
			*/
			
			if(!progressivo.equals(dto.getProgressivo()))
			{
				log.debug("cambio progressivo");
				listSC.add(sc);

				rowDateSC = RowDateSC.Factory.newInstance();
				progressivo = dto.getProgressivo();
				sc = L113RowSC.Factory.newInstance();
				sc.addNewSezSC();
			}
			log.debug("SC attivo");
			rowDateSC = mapToRowDateSC(dto);
			sc.setL113NumSC(ConvertUtil.convertToBigInteger(progressivo));
			rowDateSC.setL113Data(ConvertUtil.convertToXmlCalendar(dataControllo));
			sc.getSezSC().getRowDateSCList().add(rowDateSC);
		}
		listSC.add(sc);
		sezSC.getL113RowSCList().addAll(listSC);
		log.debug("mapToDatiRisultatiSC: END");
	}

	private static RowDateSC mapToRowDateSC(SigitVCompScDettDto dto) {
		RowDateSC row = RowDateSC.Factory.newInstance();
		row.setL113Data(ConvertUtil.convertDateToXmlCalendar(dto.getDataControllo()));
		
		if (GenericUtil.isNullOrEmpty(dto.getNumeroRea()) && dto.getFkRuolo().intValue() == Constants.ID_RUOLO_ISPETTORE)
		{
			row.setL113Firma(Constants.DESC_ISPEZIONE);
		}
		else
		{
			row.setL113Firma(getCodiceRea(dto.getSiglaRea(), ConvertUtil.convertToInteger(dto.getNumeroRea())));
		}
		//row.setL113Firma(getCodiceRea(dto.getSiglaRea(), ConvertUtil.convertToInteger(dto.getNumeroRea())));
		
		
		if(dto.getEFlgDispFunzionanti()!=null)
		{
			row.xsetL113FlagDispRegNC(getXmlBoolean(new BigDecimal("2").equals(dto.getEFlgDispFunzionanti())));
			row.xsetL113FlagDispRegNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dto.getEFlgDispFunzionanti())));
			row.xsetL113FlagDispRegSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dto.getEFlgDispFunzionanti())));
		}
		if(dto.getEFlgPotenzaCompatibile()!=null)
		{
			row.xsetL113FlagPotCompatibNC(getXmlBoolean(new BigDecimal("2").equals(dto.getEFlgPotenzaCompatibile())));
			row.xsetL113FlagPotCompatibNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dto.getEFlgPotenzaCompatibile())));
			row.xsetL113FlagPotCompatibSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dto.getEFlgPotenzaCompatibile())));
		}
		if(dto.getEFlgCoibIdonea()!=null)
		{
			row.xsetL113FlagStatoCoibNC(getXmlBoolean(new BigDecimal("2").equals(dto.getEFlgCoibIdonea())));
			row.xsetL113FlagStatoCoibNO(getXmlBoolean(new BigDecimal(Constants.NO_0).equals(dto.getEFlgCoibIdonea())));
			row.xsetL113FlagStatoCoibSI(getXmlBoolean(new BigDecimal(Constants.SI_1).equals(dto.getEFlgCoibIdonea())));
		}
		row.setL113PortataFluidoPrim(dto.getEPortFluidoM3H());
		row.setL113PotTermica(dto.getEPotenzaTermKw());
		row.setL113TempEsterna(dto.getETempExtC());
		row.setL113TempMandPrimario(dto.getETempMandPrimarioC());
		row.setL113TempMandSecond(dto.getETempMandSecondarioC());
		row.setL113TempRitPrimario(dto.getETempRitorPrimarioC());
		row.setL113TempRitSecond(dto.getETempRitSecondarioC());
		return row;
	}

	public static void mapToDatiRisultatiCG(SezCogen sezCG, List<SigitVCompCgDettDto> compCgImpiantoDett) {
		log.debug("mapToDatiRisultatiCG: START");
		if(compCgImpiantoDett == null || compCgImpiantoDett.isEmpty()) return;
		BigDecimal progressivo = null;
		List<L114RowCG> listCG = new ArrayList<L114RowCG>();
		L114RowCG cg = L114RowCG.Factory.newInstance();
		cg.addNewSezCG();
		progressivo = compCgImpiantoDett.get(0).getProgressivo();
		log.debug("mapping scheda RisultatiCG");
		RowDateCG rowDateCG = RowDateCG.Factory.newInstance();
		for (int i=0; i<compCgImpiantoDett.size();i++) {
			log.debug("i="+i+ ", progressivo: " + progressivo);
			SigitVCompCgDettDto dto = compCgImpiantoDett.get(i);
			java.sql.Date dataControllo = dto.getDataControllo();
			log.debug("CG: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall()+
					", data controllo: " + dataControllo);
			
			//le componenti non controllate, non si riportano
			if(dataControllo==null)
			{
				log.debug("senza data controllo");
				continue;
			}
			
			/*
			//controllo validita' componente in data controllo
			if(!(!dataControllo.before(dto.getDataInstall()) && (dto.getDataDismiss()==null || !dataControllo.after(dto.getDataDismiss()))))
			{
				log.debug("non attiva in data " + dataControllo);
				continue;
			}
			*/
			
			if(!progressivo.equals(dto.getProgressivo()))
			{
				log.debug("cambio progressivo");
				listCG.add(cg);

				rowDateCG = RowDateCG.Factory.newInstance();
				progressivo = dto.getProgressivo();
				cg = L114RowCG.Factory.newInstance();
				cg.addNewSezCG();
			}
			log.debug("CG attivo");
			rowDateCG = mapToRowDateCG(dto);
			cg.setL114NumCG(ConvertUtil.convertToBigInteger(progressivo));
			rowDateCG.setL114Data(ConvertUtil.convertToXmlCalendar(dataControllo));
			cg.getSezCG().getRowDateCGList().add(rowDateCG);
		}
		listCG.add(cg);
		sezCG.getL114RowCGList().addAll(listCG);
		log.debug("mapToDatiRisultatiCG: END");
		
	}

	private static RowDateCG mapToRowDateCG(SigitVCompCgDettDto dto) {
		RowDateCG row = RowDateCG.Factory.newInstance();
		row.setL114Data(ConvertUtil.convertDateToXmlCalendar(dto.getDataControllo()));
		
		String co = "";
		if (GenericUtil.isNotNullOrEmpty(dto.getCoMin()))
		{
			co += dto.getCoMin();
		}
	
		co += "/";

		if (GenericUtil.isNotNullOrEmpty(dto.getCoMax()))
		{
			co += dto.getCoMax();
		}
		
		row.setL114EmissioniCO(co);
		
		if (GenericUtil.isNullOrEmpty(dto.getNumeroRea()) && dto.getFkRuolo().intValue() == Constants.ID_RUOLO_ISPETTORE)
		{
			row.setL114Firma(Constants.DESC_ISPEZIONE);
		}
		else
		{
			row.setL114Firma(getCodiceRea(dto.getSiglaRea(), ConvertUtil.convertToInteger(dto.getNumeroRea())));
		}
		//row.setL114Firma(getCodiceRea(dto.getSiglaRea(), ConvertUtil.convertToInteger(dto.getNumeroRea())));
		
		
		row.setL114PotElettricaMorsetti(dto.getEPotenzaMorsettiKw());
		row.setL114SottoFreqSoglia1(dto.getL114SottofreqSogliaHzMin());
		row.setL114SottoFreqSoglia2(dto.getL114SottofreqSogliaHzMed());
		row.setL114SottoFreqSoglia3(dto.getL114SottofreqSogliaHzMax());
		row.setL114SottoFreqTempo1(dto.getL114SottofreqTempoSMin());
		row.setL114SottoFreqTempo2(dto.getL114SottofreqTempoSMed());
		row.setL114SottoFreqTempo3(dto.getL114SottofreqTempoSMax());
		row.setL114SottoTensSoglia1(dto.getL114SottotensSogliaVMin());
		row.setL114SottoTensSoglia2(dto.getL114SottotensSogliaVMed());
		row.setL114SottoTensSoglia3(dto.getL114SottotensSogliaVMax());
		row.setL114SottoTensTempo1(dto.getL114SottotensTempoSMin());
		row.setL114SottoTensTempo2(dto.getL114SottotensTempoSMed());
		row.setL114SottoTensTempo3(dto.getL114SottotensTempoSMax());
		row.setL114SovraFreqSoglia1(dto.getL114SovrafreqSogliaHzMin());
		row.setL114SovraFreqSoglia2(dto.getL114SovrafreqSogliaHzMed());
		row.setL114SovraFreqSoglia3(dto.getL114SovrafreqSogliaHzMax());
		row.setL114SovraFreqTempo1(dto.getL114SovrafreqTempoSMin());
		row.setL114SovraFreqTempo2(dto.getL114SovrafreqTempoSMed());
		row.setL114SovraFreqTempo3(dto.getL114SovrafreqTempoSMax());
		row.setL114SovraTensSoglia1(dto.getL114SovratensSogliaVMin());
		row.setL114SovraTensSoglia2(dto.getL114SovratensSogliaVMed());
		row.setL114SovraTensSoglia3(dto.getL114SovratensSogliaVMax());
		row.setL114SovraTensTempo1(dto.getL114SovratensTempoSMin());
		row.setL114SovraTensTempo2(dto.getL114SovratensTempoSMed());
		row.setL114SovraTensTempo3(dto.getL114SovratensTempoSMax());
		row.setL114TempAriaComb(dto.getETempAriaC());
		row.setL114TempFumiMonte(dto.getETempFumiMonteC());
		row.setL114TempFumiValle(dto.getETempFumiValleC());
		row.setL114TempH2Oingresso(dto.getETempH2oInC());
		row.setL114TempH2Omotore(dto.getETempH2oMotoreC());
		row.setL114TempH2Ouscita(dto.getETempH2oOutC());
		return row;
	}

	public static SigitTUnitaImmobiliareDto mapToSigitTUnitaImmobiliareDto(
			TerzoResponsabile obj) {
			SigitTUnitaImmobiliareDto dto = new SigitTUnitaImmobiliareDto();
		
		dto.setCodiceImpianto(ConvertUtil.convertToBigDecimal(obj.getImpCodImpianto()));
		
		if (GenericUtil.isNotNullOrEmpty(obj.getImpLocIdIndirizzo())) {
			//PATCH PROBLEMA TOPE
			if(!obj.getImpLocIdIndirizzo().equals(Constants.DATO_NON_DISPONIBILE_S)){
				dto.setFkL2(ConvertUtil.convertToBigDecimal(obj.getImpLocIdIndirizzo()));
				dto.setIndirizzoNonTrovato(null);
				dto.setIndirizzoSitad(obj.getImpLocIndirizzoSitad());
			}else{
				dto.setFkL2(null);
				dto.setIndirizzoNonTrovato(GenericUtil.getStringUpperSql(obj.getImpLocIndirizzoNoStrad()));
				dto.setIndirizzoSitad(null);
			}
		}else{
			dto.setFkL2(null);
			dto.setIndirizzoNonTrovato(GenericUtil.getStringUpperSql(obj.getImpLocIndirizzoNoStrad()));
			dto.setIndirizzoSitad(null);
		}
		dto.setCivico(obj.getImpLocCivico());
		dto.setFlgPrincipale(ConvertUtil.convertToBigDecimal(Constants.SI_1));
		return dto;
	}

	/*
	public static SigitTContrattoDto mapToSigitTContrattoDto(TerzoResponsabile resp) {
		SigitTContrattoDto dto = new SigitTContrattoDto();
		dto.setDataFine(ConvertUtil.convertToSqlDate(resp.getDataFineContratto()));
		dto.setDataInizio(ConvertUtil.convertToSqlDate(resp.getDataInizioContratto()));
		if(resp.getImpIdRuoloResp()==Constants.ID_RUOLO_AMMINISTRATORE || resp.getImpIdRuoloResp()==Constants.ID_RUOLO_PROPRIETARIO || resp.getImpIdRuoloResp()==Constants.ID_RUOLO_OCCUPANTE)
			dto.setFkPfResponsabile(ConvertUtil.convertToBigDecimal(resp.getImpIdRespAttivo()));
		if(resp.getImpIdRuoloResp()==Constants.ID_RUOLO_RESPONSABILE_IMPRESA_AMMINISTRATORE || resp.getImpIdRuoloResp()==Constants.ID_RUOLO_RESPONSABILE_IMPRESA_PROPRIETARIO || resp.getImpIdRuoloResp()==Constants.ID_RUOLO_RESPONSABILE_IMPRESA_OCCUPANTE)
			dto.setFkPgResponsabile(ConvertUtil.convertToBigDecimal(resp.getImpIdRespAttivo()));
		dto.setFkPg3Resp(ConvertUtil.convertToBigDecimal(resp.getRespImpId()));
		dto.setFkTipoContratto(Constants.ID_TIPO_CONTRATTO_3_RESP);
		dto.setFlgTacitoRinnovo(ConvertUtil.convertToBigDecimal(resp.getFlgTacitoRinnovo()));
		return dto;
	}
	*/
	
	public static SigitTContratto2019Dto mapToSigitTContratto2019Dto(TerzoResponsabile resp, BigDecimal idImpRuoloPfPg) {
		SigitTContratto2019Dto dto = new SigitTContratto2019Dto();
		dto.setDataFine(ConvertUtil.convertToSqlDate(resp.getDataFineContratto()));
		dto.setDataInizio(ConvertUtil.convertToSqlDate(resp.getDataInizioContratto()));
		dto.setFkImpRuoloPfpgResp(idImpRuoloPfPg);
		dto.setFkPg3Resp(ConvertUtil.convertToBigDecimal(resp.getRespImpId()));
		dto.setFlgTacitoRinnovo(ConvertUtil.convertToBigDecimal(resp.getFlgTacitoRinnovo()));
		dto.setCodiceImpianto(ConvertUtil.convertToBigDecimal(resp.getImpCodImpianto()));
		dto.setNote(resp.getNote());
		
		return dto;
	}
	
	public static DettaglioTerzoResponsabile mapToDettaglioTerzoResponsabile(TerzoResponsabile resp, SigitVTotImpiantoDto responsabile) 
	{
	
		DettaglioTerzoResponsabile dto = new DettaglioTerzoResponsabile();
		
		dto.setCodiceRea(getCodiceRea(resp.getRespImpIdSiglaRea(), ConvertUtil.convertToInteger(resp.getRespImpNumeroRea())));
		dto.setCodiceFiscale(resp.getRespImpCf());
		dto.setDenominazioneImp(resp.getRespImpImpresa());
		dto.setDataInizioContratto(resp.getDataInizioContratto());
		dto.setDataFineContratto(resp.getDataFineContratto());
		dto.setDescTacitoRinnovo(ConvertUtil.convertToBooleanAllways(resp.getFlgTacitoRinnovo())?Constants.LABEL_SI:Constants.LABEL_NO);
		dto.setFlgTacitoRinnovo(resp.getFlgTacitoRinnovo());
		dto.setCodImpianto(resp.getImpCodImpianto());
		dto.setUbicazione(getIndirizzoCompleto(resp.getImpLocDesComune(), resp.getImpLocDesIndirizzo(), resp.getImpLocIndirizzoNoStrad(), resp.getImpLocCivico(), resp.getImpLocIdProvincia()));
		
		dto.setResponsabile(getResponsabile(responsabile.getDenominazione(), responsabile.getNome(), responsabile.getDesRuolo()));
		dto.setNote(resp.getNote());
		return dto;
	}
	
//	public static List<SigitVTotImpiantoDto> convertToListTotImpiantoOld(List<SigitExtContrattoImpDto> list) {
//		//DCOSTA: METODO PRIMA DELLA REINGEGNERIZZAZIONE DELLE VISTE
//		List<SigitVTotImpiantoDto> output = new ArrayList<SigitVTotImpiantoDto>();
//		if(list!=null)
//		{
//			for (SigitExtContrattoImpDto cont : list) {
//				SigitVTotImpiantoDto imp = new SigitVTotImpiantoDto();
//				imp.setDenominazione3r(cont.getTerzoRespDenominazione());
//				imp.setCodiceFiscale3r(cont.getCodiceFiscale3Resp());
//				imp.setIdPersonaGiuridica3r(cont.getFkPg3Resp());
//				imp.setSiglaRea3r(cont.getTerzoRespSiglaRea());
//				imp.setNumeroRea3r(cont.getTerzoRespNumeroRea());
//				imp.setDenominazioneComune(cont.getDenomComuneImpianto());
//				imp.setDenominazioneProvincia(cont.getDenomProvImpianto());
//				imp.setSiglaProvincia(cont.getSiglaProvImpianto());
//				imp.setIdContratto(cont.getIdContratto());
//				//FIXME completare
//				output.add(imp);
//			}
//		}
//		return output;
//	}
	
	
	public static List<SigitVRicerca3ResponsabileDto> convertToListTotImpianto(List<SigitExtContrattoImpDto> list) {
		List<SigitVRicerca3ResponsabileDto> output = new ArrayList<SigitVRicerca3ResponsabileDto>();
		if(list!=null)
		{
			for (SigitExtContrattoImpDto cont : list) {
				SigitVRicerca3ResponsabileDto resp = new SigitVRicerca3ResponsabileDto();
				
				resp.setTerzoRespDenominazione(cont.getTerzoRespDenominazione());
				resp.setCodiceFiscale3Resp(cont.getCodiceFiscale3Resp());
				resp.setFkPg3Resp(cont.getFkPg3Resp());
				resp.setTerzoRespSiglaRea(cont.getTerzoRespSiglaRea());
				resp.setTerzoRespNumeroRea(cont.getTerzoRespNumeroRea());
				resp.setDenomComune3Resp(cont.getDenomComuneImpianto());
				resp.setDenomProvincia3Resp(cont.getDenomProvImpianto());
				resp.setSiglaProv3Resp(cont.getSiglaProvImpianto());
				resp.setIdContratto(cont.getIdContratto());
				//FIXME completare
				output.add(resp);
			}
		}
		return output;
	}

	public static it.csi.sigit.sigitwebn.xml.importmassivo.allegato2.data.MODIIDocument mapToImportMODIIDocument(byte[] theXml){
		try {
			log.debug("[MapDto::mapToImportMODIIDocument] start");
			String theXmlString = ModolXFAReader.getXMLData(theXml, "MODII");
			InputStream is = new ByteArrayInputStream(XmlBeanUtils.readString(theXmlString));
			it.csi.sigit.sigitwebn.xml.importmassivo.allegato2.data.MODIIDocument allegatoDoc = it.csi.sigit.sigitwebn.xml.importmassivo.allegato2.data.MODIIDocument.Factory.parse(is);
			log.debug("[MapDto::mapToImportMODIIDocument] end");
			return allegatoDoc;
		} catch (Exception e) {
			log.error("Errore mapToImportMODIIDocument - Exception",e);
			return null;
		}		
	}

	public static it.csi.sigit.sigitwebn.xml.importmassivo.allegato3.data.MODIIIDocument mapToImportMODIIIDocument(byte[] theXml){
		try {
			log.debug("[MapDto::mapToImportMODIIIDocument] start");
			String theXmlString = ModolXFAReader.getXMLData(theXml, "MODIII");
			InputStream is = new ByteArrayInputStream(XmlBeanUtils.readString(theXmlString));
			it.csi.sigit.sigitwebn.xml.importmassivo.allegato3.data.MODIIIDocument allegatoDoc = it.csi.sigit.sigitwebn.xml.importmassivo.allegato3.data.MODIIIDocument.Factory.parse(is);
			log.debug("[MapDto::mapToImportMODIIIDocument] end");
			return allegatoDoc;
		} catch (Exception e) {
			log.error("Errore mapToImportMODIIIDocument - Exception",e);
			return null;
		}		
	}

	public static it.csi.sigit.sigitwebn.xml.importmassivo.allegato4.data.MODIVDocument mapToImportMODIVDocument(byte[] theXml){
		try {
			log.debug("[MapDto::mapToImportMODIVDocument] start");
			String theXmlString = ModolXFAReader.getXMLData(theXml, "MODIV");
			InputStream is = new ByteArrayInputStream(XmlBeanUtils.readString(theXmlString));
			it.csi.sigit.sigitwebn.xml.importmassivo.allegato4.data.MODIVDocument allegatoDoc = it.csi.sigit.sigitwebn.xml.importmassivo.allegato4.data.MODIVDocument.Factory.parse(is);
			log.debug("[MapDto::mapToImportMODIVDocument] end");
			return allegatoDoc;
		} catch (Exception e) {
			log.error("Errore mapToImportMODIVDocument - Exception",e);
			return null;
		}		
	}

	public static it.csi.sigit.sigitwebn.xml.importmassivo.allegato5.data.MODVDocument mapToImportMODVDocument(byte[] theXml){
		try {
			log.debug("[MapDto::mapToImportMODVDocument] start");
			String theXmlString = ModolXFAReader.getXMLData(theXml, "MODV");
			InputStream is = new ByteArrayInputStream(XmlBeanUtils.readString(theXmlString));
			it.csi.sigit.sigitwebn.xml.importmassivo.allegato5.data.MODVDocument allegatoDoc = it.csi.sigit.sigitwebn.xml.importmassivo.allegato5.data.MODVDocument.Factory.parse(is);
			log.debug("[MapDto::mapToImportMODVDocument] end");
			return allegatoDoc;
		} catch (Exception e) {
			log.error("Errore mapToImportMODVDocument - Exception",e);
			return null;
		}		
	}
	

	public static it.csi.sigit.sigitwebn.xml.importmassivo.manutenzionegt.data.MANUTENZIONEDocument mapToImportMANUTENZIONEGTDocument(byte[] theXml){
		try {
			log.debug("[MapDto::mapToImportMANUTENZIONEGTDocument] start");
			String theXmlString = ModolXFAReader.getXMLData(theXml, "MANUTENZIONE");
			InputStream is = new ByteArrayInputStream(XmlBeanUtils.readString(theXmlString));
			it.csi.sigit.sigitwebn.xml.importmassivo.manutenzionegt.data.MANUTENZIONEDocument allegatoDoc = it.csi.sigit.sigitwebn.xml.importmassivo.manutenzionegt.data.MANUTENZIONEDocument.Factory.parse(is);
			log.debug("[MapDto::mapToImportMANUTENZIONEGTDocument] end");
			return allegatoDoc;
		} catch (Exception e) {
			log.error("Errore mapToImportMANUTENZIONEGTDocument - Exception",e);
			return null;
		}		
	}
	
	public static it.csi.sigit.sigitwebn.xml.importmassivo.manutenzionegf.data.MANUTENZIONEDocument mapToImportMANUTENZIONEGFDocument(byte[] theXml){
		try {
			log.debug("[MapDto::mapToImportMANUTENZIONEGFDocument] start");
			String theXmlString = ModolXFAReader.getXMLData(theXml, "MANUTENZIONE");
			InputStream is = new ByteArrayInputStream(XmlBeanUtils.readString(theXmlString));
			it.csi.sigit.sigitwebn.xml.importmassivo.manutenzionegf.data.MANUTENZIONEDocument allegatoDoc = it.csi.sigit.sigitwebn.xml.importmassivo.manutenzionegf.data.MANUTENZIONEDocument.Factory.parse(is);
			log.debug("[MapDto::mapToImportMANUTENZIONEGFDocument] end");
			return allegatoDoc;
		} catch (Exception e) {
			log.error("Errore mapToImportMANUTENZIONEGFDocument - Exception",e);
			return null;
		}		
	}
	
	public static it.csi.sigit.sigitwebn.xml.importmassivo.manutenzionesc.data.MANUTENZIONEDocument mapToImportMANUTENZIONESCDocument(byte[] theXml){
		try {
			log.debug("[MapDto::mapToImportMANUTENZIONESCDocument] start");
			String theXmlString = ModolXFAReader.getXMLData(theXml, "MANUTENZIONE");
			InputStream is = new ByteArrayInputStream(XmlBeanUtils.readString(theXmlString));
			it.csi.sigit.sigitwebn.xml.importmassivo.manutenzionesc.data.MANUTENZIONEDocument allegatoDoc = it.csi.sigit.sigitwebn.xml.importmassivo.manutenzionesc.data.MANUTENZIONEDocument.Factory.parse(is);
			log.debug("[MapDto::mapToImportMANUTENZIONESCDocument] end");
			return allegatoDoc;
		} catch (Exception e) {
			log.error("Errore mapToImportMANUTENZIONESCDocument - Exception",e);
			return null;
		}		
	}
	
	public static it.csi.sigit.sigitwebn.xml.importmassivo.manutenzionecg.data.MANUTENZIONEDocument mapToImportMANUTENZIONECGDocument(byte[] theXml){
		try {
			log.debug("[MapDto::mapToImportMANUTENZIONECGDocument] start");
			String theXmlString = ModolXFAReader.getXMLData(theXml, "MANUTENZIONE");
			InputStream is = new ByteArrayInputStream(XmlBeanUtils.readString(theXmlString));
			it.csi.sigit.sigitwebn.xml.importmassivo.manutenzionecg.data.MANUTENZIONEDocument allegatoDoc = it.csi.sigit.sigitwebn.xml.importmassivo.manutenzionecg.data.MANUTENZIONEDocument.Factory.parse(is);
			log.debug("[MapDto::mapToImportMANUTENZIONECGDocument] end");
			return allegatoDoc;
		} catch (Exception e) {
			log.error("Errore mapToImportMANUTENZIONECGDocument - Exception",e);
			return null;
		}		
	}

	public static SigitTImportDto mapToSigitTImport(ImportFilter importData, Integer idPgCat, Integer idPg) {
		SigitTImportDto dto = new SigitTImportDto();
		dto.setCodiceImpianto(ConvertUtil.convertToBigDecimal(importData.getCodiceImpianto()));
		dto.setNomeFileImport(importData.getNomeFile());
		dto.setDataInizio(importData.getDataInizio());
		dto.setFkPreImport(importData.getIdPreImport());
		//dto.setFkPersonaGiuridica(ConvertUtil.convertToBigDecimal(idPg));
		
		if (GenericUtil.isNotNullOrEmpty(idPgCat))
		{
			dto.setFkPgCat(ConvertUtil.convertToBigDecimal(idPgCat));
		}
		
		return dto;
	}

	
	public static ElencoCombustibile mapToElencoCombustibileLight(
			List<SigitDCombustibileDto> elencoCombustibile) {
		ElencoCombustibile ec = ElencoCombustibile.Factory.newInstance();
		Combustibile[] arr = new Combustibile[elencoCombustibile.size()];
		int i=0;
		for (SigitDCombustibileDto dto : elencoCombustibile) {
			Combustibile com = Combustibile.Factory.newInstance();
			com.setCodice(ConvertUtil.convertToString(dto.getIdCombustibile()));
			com.setDescrizione(dto.getDesCombustibile());
			arr[i++] = com;
		}
		ec.setCombustibileArray(arr);
		return ec;
	}

	public static void mapToDatiPrecompilatiLight(
			it.csi.sigit.sigitwebn.xml.librettoLight.data.DatiPrecompilatiDocument.DatiPrecompilati datiPrecompilati,
			SigitTUnitaImmobiliareDto unitaImmobPrincipale,
			SigitTImpiantoDto impianto,
			List<SigitTUnitaImmobiliareDto> unitaImmobSecondarie) {
		if (GenericUtil.isNotNullOrEmpty(unitaImmobPrincipale.getIndirizzoSitad()))
		{
			datiPrecompilati.setL12Indirizzo(unitaImmobPrincipale.getIndirizzoSitad());
		}
		else
		{
			datiPrecompilati.setL12Indirizzo(unitaImmobPrincipale.getIndirizzoNonTrovato());
		}
		
		datiPrecompilati.setL12Civico(unitaImmobPrincipale.getCivico());
		datiPrecompilati.setL12Scala(unitaImmobPrincipale.getScala());
		datiPrecompilati.setL12Interno(unitaImmobPrincipale.getInterno());
		datiPrecompilati.setL12Comune(impianto.getDenominazioneComune());
		datiPrecompilati.setL12Prov(impianto.getSiglaProvincia());
		datiPrecompilati.setL12Palazzo(unitaImmobPrincipale.getPalazzo());

		datiPrecompilati.setCodiceCatasto(ConvertUtil.convertToString(impianto.getCodiceImpianto()));
		datiPrecompilati.setSezCatasto(SezCatasto.Factory.newInstance());
		
		//dati sezione
		it.csi.sigit.sigitwebn.xml.librettoLight.data.RowCatastoDocument.RowCatasto catastoPrincipale = 
				it.csi.sigit.sigitwebn.xml.librettoLight.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
		catastoPrincipale.setL12Foglio(unitaImmobPrincipale.getFoglio());
		catastoPrincipale.setL12Particella(unitaImmobPrincipale.getParticella());
		catastoPrincipale.setL12Pdr(unitaImmobPrincipale.getPdrGas());
		catastoPrincipale.setL12Pod(unitaImmobPrincipale.getPodElettrico());
		catastoPrincipale.setL12Sezione(unitaImmobPrincipale.getSezione());
		catastoPrincipale.setL12Sub(unitaImmobPrincipale.getSubalterno());
		List<it.csi.sigit.sigitwebn.xml.librettoLight.data.RowCatastoDocument.RowCatasto> rowCatastoList = 
				datiPrecompilati.getSezCatasto().getRowCatastoList();
		rowCatastoList.add(catastoPrincipale);
		for (SigitTUnitaImmobiliareDto umSec : unitaImmobSecondarie) {
			it.csi.sigit.sigitwebn.xml.librettoLight.data.RowCatastoDocument.RowCatasto catastoSec = 
					it.csi.sigit.sigitwebn.xml.librettoLight.data.RowCatastoDocument.RowCatasto.Factory.newInstance();
			catastoSec.setL12Foglio(umSec.getFoglio());
			catastoSec.setL12Particella(umSec.getParticella());
			catastoSec.setL12Pdr(umSec.getPdrGas());
			catastoSec.setL12Pod(umSec.getPodElettrico());
			catastoSec.setL12Sezione(umSec.getSezione());
			catastoSec.setL12Sub(umSec.getSubalterno());
			rowCatastoList.add(catastoSec);
		}
	}
	
	public static ArrayList<CodeDescription> mapToCodeDescriptionList(List<SigitDMarcaDto> obj) {
		ArrayList<CodeDescription> list = new ArrayList<CodeDescription>();
		for (SigitDMarcaDto dto : obj) {
			CodeDescription cd = new CodeDescription();
			cd.setCode(ConvertUtil.convertToString(dto.getIdMarca()));
			cd.setDescription(dto.getDesMarca());
			list.add(cd);
		}
		return list;
	}

	public static ArrayList<CodeDescription> mapToCodeDescriptionElencoDettaglioVm(List<SigitDDettaglioVmDto> obj) {
		ArrayList<CodeDescription> list = new ArrayList<CodeDescription>();
		CodeDescription cd = null;
		for (SigitDDettaglioVmDto dto : obj) {
			cd = new CodeDescription();
			cd.setCode(ConvertUtil.convertToString(dto.getIdDettaglioVm()));
			cd.setDescription(dto.getDesDettaglioVm());
			list.add(cd);
		}
		
		return list;
	}
	
	public static ArrayList<CodeDescription> mapToCodeDescriptionElencoDettaglioGt(List<SigitDDettaglioGtDto> obj) {
		ArrayList<CodeDescription> list = new ArrayList<CodeDescription>();
		CodeDescription cd = null;
		for (SigitDDettaglioGtDto dto : obj) {
			cd = new CodeDescription();
			cd.setCode(ConvertUtil.convertToString(dto.getIdDettaglioGt()));
			cd.setDescription(dto.getDesDettaglioGt());
			list.add(cd);
		}
		
		return list;
	}
	
	public static ArrayList<CodeDescription> mapToCodeDescriptionElencoDettaglioGf(List<SigitDDettaglioGfDto> obj) {
		ArrayList<CodeDescription> list = new ArrayList<CodeDescription>();
		CodeDescription cd = null;
		for (SigitDDettaglioGfDto dto : obj) {
			cd = new CodeDescription();
			cd.setCode(ConvertUtil.convertToString(dto.getIdDettaglioGf()));
			cd.setDescription(dto.getDesDettaglioGf());
			list.add(cd);
		}
		
		return list;
	}
	
	public static ArrayList<CodeDescription> mapToCodeDescriptionElencoFluidi(List<SigitDFluidoDto> obj) {
		ArrayList<CodeDescription> list = new ArrayList<CodeDescription>();
		CodeDescription cd = null;
		for (SigitDFluidoDto dto : obj) {
			cd = new CodeDescription();
			cd.setCode(ConvertUtil.convertToString(dto.getIdFluido()));
			cd.setDescription(dto.getDesFluido());
			list.add(cd);
		}
		
		return list;
	}

	public static ArrayList<CodeDescription> mapToCodeDescriptionElencoComponente(List<SigitDTipoComponenteDto> obj) {
		ArrayList<CodeDescription> list = new ArrayList<CodeDescription>();
		for (SigitDTipoComponenteDto dto : obj) {
			CodeDescription cd = new CodeDescription();
			cd.setCode(dto.getIdTipoComponente());
			cd.setDescription(dto.getDesTipoComponente());
			if(GenericUtil.isNotNullOrEmpty(cd.getDescription()))
				list.add(cd);
		}
		return list;
	}

	public static ArrayList<CodeDescription> mapToCodeDescriptionElencoCombustibile(List<SigitDCombustibileDto> obj) {
		ArrayList<CodeDescription> list = new ArrayList<CodeDescription>();
		for (SigitDCombustibileDto dto : obj) {
			CodeDescription cd = new CodeDescription();
			cd.setCode(ConvertUtil.convertToString(dto.getIdCombustibile()));
			cd.setDescription(dto.getDesCombustibile());
			list.add(cd);
		}
		return list;
	}
	
	public static ArrayList<CodeDescription> mapToCodeDescriptionElencoUnitaMisura(List<SigitDUnitaMisuraDto> obj) {
		ArrayList<CodeDescription> list = new ArrayList<CodeDescription>();
		for (SigitDUnitaMisuraDto dto : obj) {
			CodeDescription cd = new CodeDescription();
			cd.setCode(dto.getIdUnitaMisura());
			cd.setDescription(dto.getDesUnitaMisura());
			list.add(cd);
		}
		return list;
	}
	
	
	
	public static ArrayList<IdDescription> mapToTipoContrattoDistrib(List<SigitDTipoContrattoDistribDto> obj) {
		ArrayList<IdDescription> list = new ArrayList<IdDescription>();
		for (SigitDTipoContrattoDistribDto dto : obj) {
			IdDescription cd = new IdDescription();
			cd.setId(dto.getIdTipoContrattoDistrib());
			cd.setDescription(dto.getDesTipoContrattoDistrib());
			list.add(cd);
		}
		return list;
	}

	public static ArrayList<IdDescription> mapToImpresa(List<SigitTPersonaGiuridicaDto> obj) {
		ArrayList<IdDescription> list = new ArrayList<IdDescription>();
		for (SigitTPersonaGiuridicaDto dto : obj) {
			IdDescription cd = new IdDescription();
			cd.setId(ConvertUtil.convertToInteger(dto.getIdPersonaGiuridica()));
			cd.setDescription(dto.getDenominazione() + " " + getCodiceRea(dto.getSiglaRea(), dto.getNumeroRea()));
			list.add(cd);
		}
		return list;
	}

	
	public static ArrayList<CodeDescription> mapToCategoriaUtil(List<SigitDCategoriaUtilDto> obj) {
		ArrayList<CodeDescription> list = new ArrayList<CodeDescription>();
		for (SigitDCategoriaUtilDto dto : obj) {
			CodeDescription cd = new CodeDescription();
			cd.setCode(dto.getIdCategoriaUtil());
			cd.setDescription(dto.getDesCategoriaUtil());
			list.add(cd);
		}
		return list;
	}
	
	public static ArrayList<CodeDescription> mapToCodeDescriptionElencoFluido(List<SigitDFluidoDto> obj) {
		ArrayList<CodeDescription> list = new ArrayList<CodeDescription>();
		for (SigitDFluidoDto dto : obj) {
			CodeDescription cd = new CodeDescription();
			cd.setCode(ConvertUtil.convertToString(dto.getIdFluido()));
			cd.setDescription(dto.getDesFluido());
			list.add(cd);
		}
		return list;
	}
	
	
	public static RicercaAvanzataImpiantoFilter mapToRicercaAvanzataFilter(RicercaAvanzataImpianti r)
	{
		RicercaAvanzataImpiantoFilter f = new RicercaAvanzataImpiantoFilter();

		f.setCodiceImpianto(ConvertUtil.convertToInteger(r.getCodiceImpianto()));
		f.setSiglaProvincia(r.getIdProvincia());
		f.setSiglaComune(r.getIdComune());
		f.setDescComune(r.getDescComune());
		f.setIndirizzo(r.getIndirizzo());
		f.setCfResponsabile(normalizeString(r.getCfResponsabile()));
		f.setSezione(normalizeString(r.getSezione()));
		f.setFoglio(normalizeString(r.getFoglio()));
		f.setParticella(normalizeString(r.getParticella()));
		f.setSubalterno(normalizeString(r.getSubalterno()));
		f.setPod(normalizeString(r.getPod()));
		f.setPdr(normalizeString(r.getPdr()));
		
		f.setSenzaPdr(r.getSenzaPdr());
		f.setStatoImpianto(r.getStatoImpianto());
		
		f.setPotenzaAcsA(r.getPotenzaAcsA());
		f.setPotenzaAcsDa(r.getPotenzaAcsDa());
		f.setPotenzaClimaEstDa(r.getPotenzaClimaEstDa());
		f.setPotenzaClimaEstA(r.getPotenzaClimaEstA());
		f.setPotenzaClimaInvDa(r.getPotenzaClimaInvDa());
		f.setPotenzaClimaInvA(r.getPotenzaClimaInvA());
		
		f.setTipoImpianto(r.getTipoImpianto());
		f.setFlgAppareccUiExt(ConvertUtil.convertToBoolean(r.getFlgAppareccUiExt()));
		f.setFlgContabilizzatore(ConvertUtil.convertToBoolean(r.getFlgContabilizzatore()));
		
		f.setSiglaRea(r.getIdSiglaRea());
		f.setNumeroRea(ConvertUtil.convertToInteger(r.getNumeroRea()));
		f.setCfDitta(normalizeString(r.getCfImpresa()));
		
		if(GenericUtil.isNotNullOrEmpty(r.getIdSiglaRea()) || 
				GenericUtil.isNotNullOrEmpty(r.getNumeroRea()) || 
				GenericUtil.isNotNullOrEmpty(r.getCfImpresa()))
			f.setRicercaImpresa(true);
		
		//dati componenti
		f.setMarca(r.getMarca());
		f.setTipoComponente(r.getTipoComponente());
		f.setFlgDismesse(r.getFlgDismesse());
		
		f.setCombustibile(r.getCombustibile());
		f.setRendimentoPercDa(r.getRendimentoPercDa());
		f.setRendimentoPercA(r.getRendimentoPercA());
		
		f.setPotenzaTermicaA(r.getPotenzaTermicaA());
		f.setPotenzaTermicaDa(r.getPotenzaTermicaDa());
		try {f.setDataInstallazioneA(ConvertUtil.convertToDate(r.getDataInstallazioneA()));} catch (Exception e) {f.setDataInstallazioneA(null);}
		try {f.setDataInstallazioneDa(ConvertUtil.convertToDate(r.getDataInstallazioneDa()));} catch (Exception e) {f.setDataInstallazioneDa(null);}

		if(GenericUtil.isNotNullOrEmpty(r.getMarca()) || 
				GenericUtil.isNotNullOrEmpty(r.getTipoComponente()) || 
				GenericUtil.isNotNullOrEmpty(r.getCombustibile()) ||
				GenericUtil.isNotNullOrEmpty(r.getPotenzaTermicaA()) ||
				GenericUtil.isNotNullOrEmpty(r.getPotenzaTermicaDa()) ||
				GenericUtil.isNotNullOrEmpty(r.getDataInstallazioneA()) ||
				GenericUtil.isNotNullOrEmpty(r.getDataInstallazioneDa()))
			f.setRicercaComponenti(true);
		
		//dati allegato
		f.setTipoRapporto(r.getTipoRapporto());
		f.setSicurezzaImpianti(ConvertUtil.convertToBoolean(r.getSicurezzaImpianti()));
		f.setConOsservazioni(r.getConOsservazioni());
		f.setConPrescrizioni(r.getConPrescrizioni());
		f.setConRaccomandazioni(r.getConRaccomandazioni());
		f.setFlgVerificaAssociata(ConvertUtil.convertToBoolean(r.getFlgVerificaAssociata()));
		
		f.setIdTipoDocumento(r.getIdTipoDocumento());
		
		
		try {f.setDataControlloDa(ConvertUtil.convertToDate(r.getDataControlloDa()));} catch (Exception e) {f.setDataControlloDa(null);}
		try {f.setDataControlloA(ConvertUtil.convertToDate(r.getDataControlloA()));} catch (Exception e) {f.setDataControlloA(null);}
		try {f.setInterventoManutentivoA(ConvertUtil.convertToDate(r.getInterventoManutentivoA()));} catch (Exception e) {f.setInterventoManutentivoA(null);}
		try {f.setInterventoManutentivoDa(ConvertUtil.convertToDate(r.getInterventoManutentivoDa()));} catch (Exception e) {f.setInterventoManutentivoDa(null);}
		
		if (r.getNumGiorniInviatoDopoDataControllo() != null) {
			f.setNumGiorniInviatoDopoDataControllo(r.getNumGiorniInviatoDopoDataControllo().getValue());
		}
		
		f.setUnitaMisEnox(ConvertUtil.convertToString(r.getIdTipoUnitaMisura()));
		f.seteNoxDa(r.getNoxDa());
		f.seteNoxA(r.getNoxA());
		
		f.setSiglaBollino(r.getSiglaBollino());
		f.setNumeroBollino(r.getNumeroBollino());

		f.setIdIncaricato(r.getIdIncaricato());

		if(		GenericUtil.isNotNullOrEmpty(r.getSicurezzaImpianti()) || 
				ConvertUtil.convertToBooleanAllways(r.getConOsservazioni()) || 
				ConvertUtil.convertToBooleanAllways(r.getConPrescrizioni()) ||
				ConvertUtil.convertToBooleanAllways(r.getConRaccomandazioni()) ||
				ConvertUtil.isNotNullOrEmpty(r.getFlgVerificaAssociata()) || 
				GenericUtil.isNotNullOrEmpty(r.getTipoRapporto()) ||
				GenericUtil.isNotNullOrEmpty(r.getDataControlloDa()) ||
				GenericUtil.isNotNullOrEmpty(r.getDataControlloA()) ||
				GenericUtil.isNotNullOrEmpty(r.getInterventoManutentivoDa()) ||
				GenericUtil.isNotNullOrEmpty(r.getInterventoManutentivoA()) ||
				GenericUtil.isNotNullOrEmpty(r.getNumGiorniInviatoDopoDataControllo()) ||
				GenericUtil.isNotNullOrEmpty(r.getNoxDa()) ||
				GenericUtil.isNotNullOrEmpty(r.getNoxA()) ||
				GenericUtil.isNotNullOrEmpty(r.getSiglaBollino()) ||
				GenericUtil.isNotNullOrEmpty(r.getNumeroBollino()) ||
				GenericUtil.isNotNullOrEmpty(r.getIdIncaricato()))
			f.setRicercaAllegati(true);

		//dati terzo responsabile 
		f.setCf3Responsabile(normalizeString(r.getCf3Responsabile()));
		if(r.getGgInserimentoContratto()!=null)
			f.setGgInserimentoContratto(r.getGgInserimentoContratto().getValue());
		if(r.getGgRevoca()!=null)
			f.setGgRevoca(r.getGgRevoca().getValue());
		try {f.setDataInizioContrattoDa(ConvertUtil.convertToDate(r.getDataInizioContrattoDa()));} catch (Exception e) {f.setDataInizioContrattoDa(null);}
		try {f.setDataInizioContrattoA(ConvertUtil.convertToDate(r.getDataInizioContrattoA()));} catch (Exception e) {f.setDataInizioContrattoA(null);}
		try {f.setDataFineContrattoA(ConvertUtil.convertToDate(r.getDataFineContrattoA()));} catch (Exception e) {f.setDataFineContrattoA(null);}
		try {f.setDataFineContrattoDa(ConvertUtil.convertToDate(r.getDataFineContrattoDa()));} catch (Exception e) {f.setDataFineContrattoDa(null);}

		if(GenericUtil.isNotNullOrEmpty(f.getCf3Responsabile()) || 
				GenericUtil.isNotNullOrEmpty(f.getGgRevoca()) ||
				GenericUtil.isNotNullOrEmpty(f.getGgInserimentoContratto()) ||
				GenericUtil.isNotNullOrEmpty(f.getDataInizioContrattoDa()) ||
				GenericUtil.isNotNullOrEmpty(f.getDataInizioContrattoA()) ||
				GenericUtil.isNotNullOrEmpty(f.getDataFineContrattoDa()) ||
				GenericUtil.isNotNullOrEmpty(f.getDataFineContrattoA()))
				f.setRicercaTerzoResp(true);
		return f;
		
	}
	
	public static void mappaturaDatiAllegatoTipo1(MODIIDocument modulo){
		List<RowAllegatoII> allegatoList = modulo.getMODII().getRichiesta().getDatiAllegato().getAllegatoII().getRowAllegatoIIList();
		
		DocumentazioneTecnica documentazioneTecnica = null;
		CheckList checkList = null;
		ControlloVerificaEnergetica cve = null;
		TrattamentoAcqua ta = null;
		ControlloImpianto controlloImpianto = null;
		DatiTecnico datiTecnico = null;
		DatiIdentificativi datiIdentificativi = null; 
		
		boolean isFirstRound = true;
		for (RowAllegatoII rowAllegato : allegatoList) {
			if(isFirstRound)
			{
				documentazioneTecnica = rowAllegato.getDocumentazioneTecnica();
				checkList = rowAllegato.getCheckList();
				cve = rowAllegato.getControlloVerificaEnergetica();
				ta = rowAllegato.getTrattamentoAcqua();
				controlloImpianto = rowAllegato.getControlloImpianto();
				datiTecnico = rowAllegato.getDatiTecnico();
				datiIdentificativi = rowAllegato.getDatiIdentificativi();
				isFirstRound = false;
			}
			else
			{
				//copiamo i valori nell altre pagine
				rowAllegato.setCheckList(checkList);
				rowAllegato.setControlloImpianto(controlloImpianto);
				
				//rowAllegato.setControlloVerificaEnergetica(cve);
				rowAllegato.setDocumentazioneTecnica(documentazioneTecnica);
				rowAllegato.setTrattamentoAcqua(ta);
				rowAllegato.setDatiTecnico(datiTecnico);
				rowAllegato.setDatiIdentificativi(datiIdentificativi);
			}
		}
	}

	public static void mappaturaDatiAllegatoTipo2(MODIIIDocument modulo){
		List<RowAllegatoIII> allegatoList = modulo.getMODIII().getRichiesta().getDatiAllegato().getAllegatoIII().getRowAllegatoIIIList();
		
		it.csi.sigit.sigitwebn.xml.allegato3.data.DocumentazioneTecnicaDocument.DocumentazioneTecnica documentazioneTecnica = null;
		it.csi.sigit.sigitwebn.xml.allegato3.data.CheckListDocument.CheckList checkList = null;
		it.csi.sigit.sigitwebn.xml.allegato3.data.ControlloVerificaEnergeticaDocument.ControlloVerificaEnergetica cve = null;
		it.csi.sigit.sigitwebn.xml.allegato3.data.TrattamentoAcquaDocument.TrattamentoAcqua ta = null;
		it.csi.sigit.sigitwebn.xml.allegato3.data.ControlloImpiantoDocument.ControlloImpianto controlloImpianto = null;
		it.csi.sigit.sigitwebn.xml.allegato3.data.DatiTecnicoDocument.DatiTecnico datiTecnico = null;
		it.csi.sigit.sigitwebn.xml.allegato3.data.DatiIdentificativiDocument.DatiIdentificativi datiIdentificativi = null;
		
		boolean isFirstRound = true;
		for (RowAllegatoIII rowAllegato : allegatoList) {
			if(isFirstRound)
			{
				documentazioneTecnica = rowAllegato.getDocumentazioneTecnica();
				checkList = rowAllegato.getCheckList();
				cve = rowAllegato.getControlloVerificaEnergetica();
				ta = rowAllegato.getTrattamentoAcqua();
				controlloImpianto = rowAllegato.getControlloImpianto();
				datiTecnico = rowAllegato.getDatiTecnico();
				datiIdentificativi = rowAllegato.getDatiIdentificativi();
				isFirstRound = false;
			}
			else
			{
				//copiamo i valori nell altre pagine
				rowAllegato.setCheckList(checkList);
				rowAllegato.setControlloImpianto(controlloImpianto);
				//rowAllegato.setControlloVerificaEnergetica(cve);
				rowAllegato.setDocumentazioneTecnica(documentazioneTecnica);
				rowAllegato.setTrattamentoAcqua(ta);
				rowAllegato.setDatiTecnico(datiTecnico);
				rowAllegato.setDatiIdentificativi(datiIdentificativi);
			}
		}
	}

	public static void mappaturaDatiAllegatoTipo3(MODIVDocument modulo){
		List<RowAllegatoIV> allegatoList = modulo.getMODIV().getRichiesta().getDatiAllegato().getAllegatoIV().getRowAllegatoIVList();
		
		it.csi.sigit.sigitwebn.xml.allegato4.data.DocumentazioneTecnicaDocument.DocumentazioneTecnica documentazioneTecnica = null;
		it.csi.sigit.sigitwebn.xml.allegato4.data.CheckListDocument.CheckList checkList = null;
		it.csi.sigit.sigitwebn.xml.allegato4.data.ControlloVerificaEnergeticaDocument.ControlloVerificaEnergetica cve = null;
		it.csi.sigit.sigitwebn.xml.allegato4.data.TrattamentoAcquaDocument.TrattamentoAcqua ta = null;
		it.csi.sigit.sigitwebn.xml.allegato4.data.ControlloImpiantoDocument.ControlloImpianto controlloImpianto = null;
		it.csi.sigit.sigitwebn.xml.allegato4.data.DatiTecnicoDocument.DatiTecnico datiTecnico = null;
		it.csi.sigit.sigitwebn.xml.allegato4.data.DatiIdentificativiDocument.DatiIdentificativi datiIdentificativi = null;
		
		boolean isFirstRound = true;
		for (RowAllegatoIV rowAllegato : allegatoList) {
			if(isFirstRound)
			{
				documentazioneTecnica = rowAllegato.getDocumentazioneTecnica();
				checkList = rowAllegato.getCheckList();
				cve = rowAllegato.getControlloVerificaEnergetica();
				ta = rowAllegato.getTrattamentoAcqua();
				controlloImpianto = rowAllegato.getControlloImpianto();
				datiTecnico = rowAllegato.getDatiTecnico();
				datiIdentificativi = rowAllegato.getDatiIdentificativi();
				isFirstRound = false;
			}
			else
			{
				//copiamo i valori nell altre pagine
				rowAllegato.setCheckList(checkList);
				rowAllegato.setControlloImpianto(controlloImpianto);
				//rowAllegato.setControlloVerificaEnergetica(cve);
				rowAllegato.setDocumentazioneTecnica(documentazioneTecnica);
				rowAllegato.setTrattamentoAcqua(ta);
				rowAllegato.setDatiTecnico(datiTecnico);
				rowAllegato.setDatiIdentificativi(datiIdentificativi);
			}
		}
	}

	public static void mappaturaDatiAllegatoTipo4(MODVDocument modulo){
		List<RowAllegatoV> allegatoList = modulo.getMODV().getRichiesta().getDatiAllegato().getAllegatoV().getRowAllegatoVList();
		
		it.csi.sigit.sigitwebn.xml.allegato5.data.DocumentazioneTecnicaDocument.DocumentazioneTecnica documentazioneTecnica = null;
		it.csi.sigit.sigitwebn.xml.allegato5.data.CheckListDocument.CheckList checkList = null;
		it.csi.sigit.sigitwebn.xml.allegato5.data.ControlloVerificaEnergeticaDocument.ControlloVerificaEnergetica cve = null;
		it.csi.sigit.sigitwebn.xml.allegato5.data.TrattamentoAcquaDocument.TrattamentoAcqua ta = null;
		it.csi.sigit.sigitwebn.xml.allegato5.data.ControlloImpiantoDocument.ControlloImpianto controlloImpianto = null;
		it.csi.sigit.sigitwebn.xml.allegato5.data.DatiTecnicoDocument.DatiTecnico datiTecnico = null;
		it.csi.sigit.sigitwebn.xml.allegato5.data.DatiIdentificativiDocument.DatiIdentificativi datiIdentificativi = null;
		
		boolean isFirstRound = true;
		for (RowAllegatoV rowAllegato : allegatoList) {
			if(isFirstRound)
			{
				documentazioneTecnica = rowAllegato.getDocumentazioneTecnica();
				checkList = rowAllegato.getCheckList();
				cve = rowAllegato.getControlloVerificaEnergetica();
				ta = rowAllegato.getTrattamentoAcqua();
				controlloImpianto = rowAllegato.getControlloImpianto();
				datiTecnico = rowAllegato.getDatiTecnico();
				datiIdentificativi = rowAllegato.getDatiIdentificativi();
				isFirstRound = false;
			}
			else
			{
				//copiamo i valori nell altre pagine
				rowAllegato.setCheckList(checkList);
				rowAllegato.setControlloImpianto(controlloImpianto);
				//rowAllegato.setControlloVerificaEnergetica(cve);
				rowAllegato.setDocumentazioneTecnica(documentazioneTecnica);
				rowAllegato.setTrattamentoAcqua(ta);
				rowAllegato.setDatiTecnico(datiTecnico);
				rowAllegato.setDatiIdentificativi(datiIdentificativi);
			}
		}
	}
	
	public static SigitTImportDistribDto getSigitTImportDistribDto(ImportDistribFilter dataFile, String utenteUltMod)
	{
		SigitTImportDistribDto dto = new SigitTImportDistribDto();
		
		dto.setIdImportDistrib(dataFile.getIdImport());
		dto.setFkPersonaGiuridica(ConvertUtil.convertToBigDecimal(dataFile.getIdPersonaGiuridica()));
		dto.setAnnoRiferimento(ConvertUtil.convertToBigDecimal(dataFile.getAnnoRiferimento()));
		dto.setNomeFileImport(dataFile.getNomeFile());
		dto.setUidIndex(dataFile.getUidIndex());
		dto.setDataInizioElab(dataFile.getDataInizio());
		dto.setFkStatoDistrib(Constants.ID_STATO_IMP_DISTRIBUTORE_DA_ELABORARE);
		dto.setUtenteCaricamento(utenteUltMod);
		dto.setUtenteUltMod(utenteUltMod);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());

		return dto;
	}
	
	public static MODDocument margeLibrettoDocumentToMODDocument(MODDocument document, LibrettoDocument librettoImport)
	{
		log.debug("[MapDto::margeLibrettoDocumentToMODDocument] start");

		Richiesta richiesta = document.getMOD().getRichiesta();

		LibrettoCatasto librettoCat = librettoImport.getLibretto().getLibrettoCatasto();
		
		MapDto.mapToSchedaIdentificativaImpiantoImport(richiesta.addNewDatiSchedaIdentificativaImp(), librettoCat.getL1SchedaIdentificativa());
		
		
		// Questo comando lo inserisco in modo che non vada in eccezione quando apro il libretto, nella parte web questo comando comando viene in serito quando si settano i dati precompilati. 
		richiesta.addNewDatiRisultatiGT();
		
		//MapDto.mapToL1SchedaIdentificativa
		
		//librettoCat.getL1SchedaIdentificativa().get
		
		L2TrattamentoAcqua l2TrattamentoAcqua = librettoCat.getL2TrattamentoAcqua();

		if (l2TrattamentoAcqua != null)
		{
			//MapDto.mapToSchedaTrattH2o(l2TrattamentoAcqua, richiesta.addNewDatiSchedaTrattH2O());
			MapDto.mapToL2TrattamentoAcquaImport(l2TrattamentoAcqua, richiesta.addNewDatiSchedaTrattH2O());
		}

		
		L4Generatori l4Generatori = librettoCat.getL4Generatori();
		
		if (l4Generatori != null)
		{
			MapDto.mapToL4GeneratoriSezGT(l4Generatori.getL41GTList(), richiesta.addNewDatiSchedaGT().addNewSezGruppiTermici());
			MapDto.mapToL4GeneratoriSezBR(l4Generatori.getL42BRList(), richiesta.addNewDatiSchedaBR().addNewSezBR());
			MapDto.mapToL4GeneratoriSezRC(l4Generatori.getL43RCList(), richiesta.addNewDatiSchedaRC().addNewSezRC());
			MapDto.mapToL4GeneratoriSezGF(l4Generatori.getL44GFList(), richiesta.addNewDatiSchedaGF().addNewSezGF());
			MapDto.mapToL4GeneratoriSezSC(l4Generatori.getL45SCList(), richiesta.addNewDatiSchedaSC().addNewSezSC());
			MapDto.mapToL4GeneratoriSezCG(l4Generatori.getL46CGList(), richiesta.addNewDatiSchedaCG().addNewSezCG());
			MapDto.mapToL4GeneratoriSezCS(l4Generatori.getL47CSList(), richiesta.addNewDatiSchedaCS().addNewSezCS());
			MapDto.mapToL4GeneratoriSezAG(l4Generatori.getL48AGList(), richiesta.addNewDatiSchedaAG().addNewSezAG());
		}
		
		L5SistemiRegolazioneContabilizzazione l5SistRegCont = librettoCat.getL5SistemiRegolazioneContabilizzazione();

		if (l5SistRegCont != null)
		{
			//5.1
			//MapDto.mapToSchedaSistemiRegolarizzazionePrimaria(richiesta.addNewDatiSchedaSistemiRegolaz().addNewRegolazionePrimaria(), compXSemplice);
			// 5.2 5.3 5.4
			//MapDto.mapToSchedaSistemiRegolarizzazioneSingoloAmbiente(richiesta.getDatiSchedaSistemiRegolaz().addNewRegolazioneSingoloAmb(), compXSemplice);
			// 5.1 5.2 5.3 5.4
			DatiSchedaSistemiRegolaz datiSistSchedaRegolaz = richiesta.addNewDatiSchedaSistemiRegolaz();
			MapDto.mapToL5SistRegCont(l5SistRegCont, datiSistSchedaRegolaz.addNewRegolazionePrimaria());
			MapDto.mapToL5SistRegCont(l5SistRegCont, datiSistSchedaRegolaz.addNewRegolazioneSingoloAmb());

		}

		L6SistemiDistribuzione l6SistDistr = librettoCat.getL6SistemiDistribuzione();
		
		if (l6SistDistr != null)
		{
			MapDto.mapToL6SistDistribuzione(l6SistDistr, richiesta.addNewDatiSchedaSistemiDistrib());
		}

		L7SistemiEmissione l7SistEmiss = librettoCat.getL7SistemiEmissione();
		
		if (l7SistEmiss != null)
		{
			MapDto.mapToL7SistDistribuzione(l7SistEmiss, richiesta.addNewDatiSchedaSistemaEmissione());
		}
		
		L8SistemiAccumulo l8SistAcc = librettoCat.getL8SistemiAccumulo();
		
		if (l8SistAcc != null && l8SistAcc.getL81ACList() != null && l8SistAcc.getL81ACList().size() > 0)
		{
			MapDto.mapToL8SistAccSezAC(l8SistAcc.getL81ACList(), richiesta.addNewDatiSchedaSistemaAC().addNewSezAC());

		}
		
		L9AltriComponenti l9AltriComponenti = librettoCat.getL9AltriComponenti();
		
		if (l9AltriComponenti != null)
		{
			MapDto.mapToL9AltriCompSezTE(l9AltriComponenti.getL91TEList(), richiesta.addNewDatiAltriComponentiTE().addNewSezTE());
			MapDto.mapToL9AltriCompSezRV(l9AltriComponenti.getL92RVList(), richiesta.addNewDatiAltriComponentiRV().addNewSezRV());
			MapDto.mapToL9AltriCompSezSC(l9AltriComponenti.getL93SCXList(), richiesta.addNewDatiAltriComponentiSC().addNewSezSC());
			MapDto.mapToL9AltriCompSezCI(l9AltriComponenti.getL94CIList(), richiesta.addNewDatiAltriComponentiCI().addNewSezCI());
			MapDto.mapToL9AltriCompSezUT(l9AltriComponenti.getL95UTList(), richiesta.addNewDatiAltriComponentiUT().addNewSezUT());
			MapDto.mapToL9AltriCompSezRC(l9AltriComponenti.getL96RCXList(), richiesta.addNewDatiAltriComponentiRC().addNewSezRC());
		}

		L10Ventilazione l10Ventilazione = librettoCat.getL10Ventilazione();
		if (l10Ventilazione != null)
		{
			MapDto.mapToL10VentilazioneSezVM(l10Ventilazione.getL101VMList(), richiesta.addNewDatiVentilazMeccanicaVM().addNewSezVM());
		}
		
		L14Consumi l14Consumi = librettoCat.getL14Consumi();
		
		if (l14Consumi != null)
		{
			MapDto.mapToL14ConsumiSezCombu(l14Consumi.getL141ConsumoCombustibileList(), richiesta.addNewDatiConsumoCombu().addNewSezCombu());
			MapDto.mapToL14ConsumiSezEE(l14Consumi.getL142ConsumoEnergiaElettrica(), richiesta.addNewDatiConsumoEE().addNewSezConsumo());
			MapDto.mapToL14ConsumiSezH2O(l14Consumi.getL143ConsumoAcqua(), richiesta.addNewDatiConsumoH2O());
			MapDto.mapToL14ConsumiSezPChim(l14Consumi.getL144ConsumoProdottiChimici(), richiesta.addNewDatiConsumoProdottiChimici().addNewSezConsumo());
		}
		
		//xxxxx
		
		log.debug("[MapDto::margeLibrettoDocumentToMODDocument] end");
		return document;
	}
	
	public static ArrayList<LabelValue> mapDatiAnagraficiAaep(it.csi.aaep.aaeporch.business.ImpresaINFOC impresa)
	{
		
		ArrayList<LabelValue> labelValueList = new ArrayList<LabelValue>();

		
		labelValueList.add(getLabelValue("<b>DATI ANAGRAFICI</b>", null));
		labelValueList.add(getLabelValue("Ragione Sociale", GenericUtil.getStringValid(impresa.getRagioneSociale())));
		labelValueList.add(getLabelValue("Partita IVA", GenericUtil.getStringValid(impresa.getPartitaIva())));
		labelValueList.add(getLabelValue("Codice fiscale", GenericUtil.getStringValid(impresa.getCodiceFiscale())));
		labelValueList.add(getLabelValue("Indirizzo PEC", GenericUtil.getStringValid(impresa.getPostaElettronicaCertificata())));
		
		SedeListItem sede = null;
		for (int i = 0; i < impresa.getSedi().size(); i++) {
			sede = (SedeListItem)impresa.getSedi().get(i);
		
			if (sede.getDescrTipoSede().equalsIgnoreCase(Constants.DESC_SEDE_LEGALE))
			{
				// Devo creare l'indirizzo
				//sede.getUbicazione().ge
				labelValueList.add(getLabelValue("Indirizzo sede legale", getIndirizzoCompletoAaep(sede.getUbicazione())));

				// Devo creare Numero REA
				labelValueList.add(getLabelValue("Numero REA", getCodiceRea(sede.getSiglaProvCCIAA(), sede.getNumIscrizREA())));
			}
		}
		
		labelValueList.add(getLabelValue("Forma giuridica", GenericUtil.getStringValid(impresa.getDescrNaturaGiuridica())));
		labelValueList.add(getLabelValue("Data atto costituzione", impresa.getDatoCostitutivo()!=null?GenericUtil.getStringValid(impresa.getDatoCostitutivo().getDataCostituzione()):""));
		labelValueList.add(getLabelValue("Data iscrizione registro impresa", impresa.getDettagliCameraCommercio()!=null?GenericUtil.getStringValid(impresa.getDettagliCameraCommercio().getDataIscrizioneRegistroImprese()):""));

		labelValueList.add(getLabelValue(" ", " "));
		labelValueList.add(getLabelValue("<b>ATTIVITA'</b>", null));
		labelValueList.add(getLabelValue("Stato attivita' impesa", GenericUtil.getStringValid(impresa.getDescrIndicStatoAttiv())));
		labelValueList.add(getLabelValue("Data inizio attivita'", GenericUtil.getStringValid(impresa.getDataInizioValidita())));
		
		// Devo concatenare
		labelValueList.add(getLabelValue("Oggetto sociale", getDescrizioneConcatenata(impresa.getTestoOggettoSociale())));
		
		labelValueList.add(getLabelValue("Data cessazione", impresa.getCessazione()!=null?GenericUtil.getStringValid(impresa.getCessazione().getDataCessazione()):""));
		labelValueList.add(getLabelValue("Causale cessazione", impresa.getCessazione()!=null?GenericUtil.getStringValid(impresa.getCessazione().getDescrCausaleCessazione()):""));
		
		
		
		return labelValueList;
		
	}
	
	public static void mapDatiSedeAaep(ArrayList<LabelValue> labelValueList, it.csi.aaep.aaeporch.business.SedeINFOC sede)
	{
		
		labelValueList.add(new LabelValue());

		StringBuffer sbSedeL = new StringBuffer();
		
		sbSedeL.append(sede.getTipoSede().toString());
		sbSedeL.append(Constants.VALUE_ENTER_HTML);
		sbSedeL.append(getCodiceRea(sede.getSiglaProvCCIAA(), sede.getNumIscrizREA()));
		
		
		StringBuffer sbSedeV = new StringBuffer();

		
		sbSedeV.append("Indirizzo sede: ");
		sbSedeV.append(getIndirizzoCompletoAaep(sede.getUbicazione()));
		sbSedeV.append(Constants.VALUE_ENTER_HTML);

		sbSedeV.append("Inizio attivita' sede: ");
		sbSedeV.append(GenericUtil.getStringValid(sede.getDataInizioAttivita()));
		sbSedeV.append(Constants.VALUE_ENTER_HTML);

		sbSedeV.append("Cessazione attivita' sede: ");
		sbSedeV.append(GenericUtil.getStringValid(sede.getDataCessazione()));
		sbSedeV.append(Constants.VALUE_ENTER_HTML);
		
		sbSedeV.append("Causale cessazione attivita' sede: ");
		sbSedeV.append(GenericUtil.getStringValid(sede.getDescrCausaleCessazione()));
		sbSedeV.append(Constants.VALUE_ENTER_HTML);
		sbSedeV.append(Constants.VALUE_ENTER_HTML);

		sbSedeV.append("Attivita': ");
		sbSedeV.append(getDescrizioneConcatenata(sede.getTestoAttivita()));
		sbSedeV.append(Constants.VALUE_ENTER_HTML);
		sbSedeV.append(Constants.VALUE_ENTER_HTML);

		sbSedeV.append("Abilitazioni: ");
		sbSedeV.append(Constants.VALUE_ENTER_HTML);
		sbSedeV.append(getAbilitazioniAaep(sede.getListaAlboRuolo()));
		sbSedeV.append(Constants.VALUE_ENTER_HTML);
		
		labelValueList.add(getLabelValue(sbSedeL.toString(), sbSedeV.toString()));
		
		/*
		labelValueList.add(new LabelValue());

		labelValueList.add(getLabelValue("Tipo sede", sede.getTipoSede().toString()));
		
		// Devo creare l'indirizzo
		labelValueList.add(getLabelValue("Indirizzo sede", getIndirizzoCompletoAaep(sede.getUbicazione())));

		// Devo creare Numero REA
		labelValueList.add(getLabelValue("Numero rea", getCodiceRea(sede.getSiglaProvCCIAA(), sede.getNumIscrizREA())));

		labelValueList.add(getLabelValue("Inizio attivita' sede", sede.getDataInizioAttivita()));
		labelValueList.add(getLabelValue("Cessazione attivita' sede", sede.getDataCessazione()));
		labelValueList.add(getLabelValue("Causale cessazione attivita' sede", sede.getDescrCausaleCessazione()));
		
		// Devo concatenare
		labelValueList.add(getLabelValue("Attivita'", getDescrizioneConcatenata(sede.getTestoAttivita())));
		
		// Devo creare le abilitazioni
		labelValueList.add(getLabelValue("Abilitazioni", getAbilitazioniAaep(sede.getListaAlboRuolo())));
		*/
		
	}
	
	public static void mapDatiPersonaAaep(ArrayList<LabelValue> labelValueList, it.csi.aaep.aaeporch.business.PersonaINFOC persona)
	{
		
		labelValueList.add(new LabelValue());

		// Devo creare la persona
		//labelValueList.add(getLabelValue("Persona", ));
		
		// Devo creare la lista cariche
		labelValueList.add(getLabelValue(costruisciCognomeNomeCF(persona.getCognome(), persona.getNome(), persona.getCodiceFiscale()), getCaricheAaep(persona.getListaCariche())));

	}
	
	public static LabelValue getLabelValue(String label, String value)
	{
		LabelValue labelValue = new LabelValue();
		labelValue.setLabel(GenericUtil.getStringValid(label));
		labelValue.setValue(GenericUtil.getStringValid(value));
		
		return labelValue;
	}
	
	/**
	 * Carica una lista di {@link CodeDescription} per tipi intervento
	 * 
	 * @param p
	 *            Lista dei tipi intervento
	 * @return Lista di {@link CodeDescription}
	 */
	public static ArrayList<CodeDescription> mapTipiIntervento(List<SigitDTipoInterventoDto> tipoIntervento) {
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (tipoIntervento != null) {
			for (SigitDTipoInterventoDto obj : tipoIntervento) {
				if(ConvertUtil.convertToInteger(obj.getIdTipoIntervento())!=Constants.ID_TIPO_INTERVENTO_ZERO){
					result.add(mapToCodeDescription(obj));
				}
			}
		}
		Collections.sort(result, ComparatorUtil.compare());
		return result;
	}
	
	/**
	 * Carica una lista di {@link CodeDescription} per categoria
	 * 
	 * @param p
	 *            Lista delle categorie
	 * @return Lista di {@link CodeDescription}
	 */
	public static ArrayList<CodeDescription> mapCategoria(List<SigitDCategoriaDto> listaCategorie) {
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (listaCategorie != null) {
			for (SigitDCategoriaDto obj : listaCategorie) {
					result.add(mapToCodeDescription(obj));
			}
		}
		Collections.sort(result, ComparatorUtil.compare());
		return result;
	}
	
	public static SigitTLibrettoDto mapToSigitTLibrettoDto(Scheda1 obj, String cfUtenteMod, SigitTLibrettoDto dto) {
		log.debug("[DANIELE    mapToSigitTLibrettoDto] BEGIN");

		if (log.isDebugEnabled())
			GenericUtil.stampa(obj, true, 3);
		
		if(GenericUtil.isNullOrEmpty(dto.getFkStato())){
			dto.setFkStato(ConvertUtil.convertToBigDecimal(Constants.ID_STATO_BOZZA));
		}
		if(GenericUtil.isNullOrEmpty(dto.getFkTipoDocumento())){
			dto.setFkTipoDocumento(ConvertUtil.convertToBigDecimal(Constants.ID_TIPO_DOC_LIBRETTO));
		}
		//dto.setDataIntervento(ConvertUtil.convertToSqlDate(obj.getDataIntervento()));
		//dto.setFkTipoIntervento(ConvertUtil.convertToBigDecimal(obj.getIdTipoIntervento()));
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		dto.setUtenteUltMod(cfUtenteMod);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		
		log.debug("[DANIELE    mapToSigitTLibrettoDto] END");
		
		return dto;
	}
	
	public static SigitTUnitaImmobiliareDto mapToSigitTUnitaImmobiliareDto(Scheda1 obj, String cfUtenteMod, SigitTUnitaImmobiliareDto dto) {
		log.debug("[DANIELE    mapToSigitTUnitaImmobiliareDto] BEGIN");

		if (log.isDebugEnabled())
			GenericUtil.stampa(obj, true, 3);
		
		//flag singola unita' immobiliare
		
		if(obj.getFlagSingolaUnita()==null){
			log.debug("[DANIELE    obj.getFlagSingolaUnita() NULL");
		} else{
			log.debug("[DANIELE    obj.getFlagSingolaUnita()" + obj.getFlagSingolaUnita());
		}
		if(obj.getFlagSingolaUnita()){
			dto.setL12FlgSingolaUnita(ConvertUtil.convertToBigDecimal(Constants.SI_1));
		} else{
			dto.setL12FlgSingolaUnita(ConvertUtil.convertToBigDecimal(Constants.NO_0));
		}
		
		// categoria unita' immobiliare
		dto.setL12FkCategoria(obj.getCategoria());
		
		// Volume lordo raffrescato e riscaldato
		dto.setL12VolRiscM3(ConvertUtil.convertToBigDecimal(obj.getVolumeLordoRiscaldato()));
		dto.setL12VolRaffM3(ConvertUtil.convertToBigDecimal(obj.getVolumeLordoRaffrescato()));
		
		
		
		
		
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		dto.setUtenteUltMod(cfUtenteMod);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		
		log.debug("[DANIELE    SigitTUnitaImmobiliareDto] BEGIN");
		
		return dto;
	}
	
	// tipo Combustibile
	
	public static ArrayList<CodeDescription> mapToCodeDescriptionCombustibileList(List<SigitDCombustibileDto> obj) {
		ArrayList<CodeDescription> list = new ArrayList<CodeDescription>();
		for (SigitDCombustibileDto dto : obj) {
			CodeDescription cd = new CodeDescription();
			cd.setCode(ConvertUtil.convertToString(dto.getIdCombustibile()));
			cd.setDescription(dto.getDesCombustibile());
			list.add(cd);
		}
		return list;
	}
	
	public static SigitTUnitaImmobiliareDto getUnitaImmobiliareSecondarie(DatiExtra obj, Integer idUnitaImm, String idImpianto, String cfUtenteMod)
	{
		SigitTUnitaImmobiliareDto dto = null;

		if (obj != null)
		{
			dto = new SigitTUnitaImmobiliareDto();
			
			// Se sono in update il idUnitaImm  valorizzato
			if (idUnitaImm != null)
			{
				dto.setIdUnitaImm(ConvertUtil.convertToBigDecimal(idUnitaImm));
			}
			
			dto.setCodiceImpianto(new BigDecimal(idImpianto));
			dto.setSezione(obj.getSezione());
			dto.setFoglio(obj.getFoglio());
			dto.setParticella(obj.getParticella());
			dto.setSubalterno(obj.getSubalterno());
			dto.setPodElettrico(obj.getPod());
			dto.setPdrGas(obj.getPdr());
			
			dto.setUtenteUltMod(cfUtenteMod);
			dto.setDataUltMod(DateUtil.getSqlDataCorrente());
			dto.setFlgPrincipale(ConvertUtil.convertToBigDecimal(false));
		}
		return dto;
	}
	
	public static SigitTConsumoDto mapToSigitTConsumoCombustibileDto(Consumo obj, Integer idConsumo, String idImpianto, String cfUtenteMod) {
		SigitTConsumoDto dto = null;
				
		if (obj != null)
		{	
			dto = new SigitTConsumoDto();
			
			// Se sono in update il idConsumo  valorizzato
			if (idConsumo != null)
			{
				dto.setIdConsumo(ConvertUtil.convertToBigDecimal(idConsumo));
			}

			dto.setCodiceImpianto(new BigDecimal(idImpianto));
			dto.setFkTipoConsumo(Constants.TIPO_CONSUMO_CB);
			dto.setFkCombustibile(ConvertUtil.convertToBigDecimal(obj.getCombustibile()));
			dto.setFkUnitaMisura(obj.getUnitaMisura().toString());
			dto.setAcquisti(obj.getAcquisti());
			
			dto.setLetturaIniziale(ConvertUtil.convertToBigDecimal(obj.getLetturaIniziale(), 14));
			dto.setLetturaFinale(ConvertUtil.convertToBigDecimal(obj.getLetturaFinale(), 14));
			dto.setConsumo(ConvertUtil.convertToBigDecimal(obj.getConsumo(), 14));
			
			dto.setEsercizioDa(ConvertUtil.convertToBigDecimal(obj.getEsercizioDa()));
			dto.setEsercizioA(ConvertUtil.convertToBigDecimal(obj.getEsercizioA()));

			dto.setUtenteUltMod(cfUtenteMod);
			dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		}
		return dto;
	}
	
	public static SigitTConsumoDto mapToSigitTConsumoElettricoDto(Consumo obj, Integer idConsumo, String idImpianto, String cfUtenteMod) {
		SigitTConsumoDto dto = null;
				
		if (obj != null)
		{	
			dto = new SigitTConsumoDto();
			
			// Se sono in update il idConsumo  valorizzato
			if (idConsumo != null)
			{
				dto.setIdConsumo(ConvertUtil.convertToBigDecimal(idConsumo));
			}

			dto.setCodiceImpianto(new BigDecimal(idImpianto));
			dto.setFkTipoConsumo(Constants.TIPO_CONSUMO_EE);
			dto.setLetturaIniziale(ConvertUtil.convertToBigDecimal(obj.getLetturaIniziale(), 14));
			dto.setLetturaFinale(ConvertUtil.convertToBigDecimal(obj.getLetturaFinale(), 14));
			dto.setConsumo(ConvertUtil.convertToBigDecimal(obj.getConsumo(), 14));
			dto.setEsercizioDa(ConvertUtil.convertToBigDecimal(obj.getEsercizioDa()));
			dto.setEsercizioA(ConvertUtil.convertToBigDecimal(obj.getEsercizioA()));
			
			dto.setUtenteUltMod(cfUtenteMod);
			dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		}
		return dto;
	}
	
	/*
	public static SigitTConsumoDto mapToSigitTConsumoElettricoDto(Consumo obj, BigDecimal idImpianto, String cfUtenteMod) {
		SigitTConsumoDto dto = new SigitTConsumoDto();
		dto.setCodiceImpianto(idImpianto);
		dto.setFkTipoConsumo(Constants.TIPO_CONSUMO_EE);
		dto.setLetturaIniziale(ConvertUtil.convertToBigDecimal(obj.getLetturaIniziale(), 14));
		dto.setLetturaFinale(ConvertUtil.convertToBigDecimal(obj.getLetturaFinale(), 14));
		dto.setConsumo(ConvertUtil.convertToBigDecimal(obj.getConsumo(), 14));
		dto.setEsercizioDa(ConvertUtil.convertToBigDecimal(obj.getEsercizioDa()));
		dto.setEsercizioA(ConvertUtil.convertToBigDecimal(obj.getEsercizioA()));
		
		dto.setUtenteUltMod(cfUtenteMod);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		
		return dto;
	}
	*/
	
	public static SigitTConsumoDto mapToSigitTConsumoAcquaDto(Consumo obj, Integer idConsumo, String idImpianto, String cfUtenteMod) {
		SigitTConsumoDto dto = null;
				
		if (obj != null)
		{	
			dto = new SigitTConsumoDto();
			
			// Se sono in update il idConsumo  valorizzato
			if (idConsumo != null)
			{
				dto.setIdConsumo(ConvertUtil.convertToBigDecimal(idConsumo));
			}

			dto.setCodiceImpianto(new BigDecimal(idImpianto));
			dto.setFkTipoConsumo(Constants.TIPO_CONSUMO_H2O);
			dto.setFkUnitaMisura(obj.getUnitaMisura().toString());
			dto.setLetturaIniziale(ConvertUtil.convertToBigDecimal(obj.getLetturaIniziale(), 14));
			dto.setLetturaFinale(ConvertUtil.convertToBigDecimal(obj.getLetturaFinale(), 14));
			dto.setConsumo(ConvertUtil.convertToBigDecimal(obj.getConsumo(), 14));
			dto.setEsercizioDa(ConvertUtil.convertToBigDecimal(obj.getEsercizioDa()));
			dto.setEsercizioA(ConvertUtil.convertToBigDecimal(obj.getEsercizioA()));
			
			dto.setUtenteUltMod(cfUtenteMod);
			dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		}
		return dto;
	}
	
	
	public static SigitTConsumo14_4Dto mapToSigitTProdottiChimiciDto(Consumo obj, Integer idConsumo, String idImpianto, String cfUtenteMod) {
		SigitTConsumo14_4Dto dto = null;
				
		if (obj != null)
		{	
			dto = new SigitTConsumo14_4Dto();
			
			// Se sono in update il idConsumo  valorizzato
			if (idConsumo != null)
			{
				dto.setIdConsumoH2o(ConvertUtil.convertToBigDecimal(idConsumo));
			}

			dto.setEsercizioDa(ConvertUtil.convertToBigDecimal(obj.getEsercizioDa()));
			dto.setEsercizioA(ConvertUtil.convertToBigDecimal(obj.getEsercizioA()));

			dto.setFlgCircuitoIt(ConvertUtil.convertToBigDecimal(obj.getFlgCircuitoImpTer()));
			dto.setFlgCircuitoAcs(ConvertUtil.convertToBigDecimal(obj.getFlgCircuitoAcs()));
			dto.setFlgAca(ConvertUtil.convertToBigDecimal(obj.getFlgCircuitoAltri()));
			
			dto.setCodiceImpianto(new BigDecimal(idImpianto));
		
			dto.setFkUnitaMisura(obj.getUnitaMisura().toString());
			dto.setNomeProdotto(obj.getNomeProdotto());
			dto.setQtaConsumata(ConvertUtil.convertToBigDecimal(obj.getConsumo(), 14));
			
			dto.setUtenteUltMod(cfUtenteMod);
			dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		}
		return dto;
	}
	
	public static ArrayList<Componente> mapToComponentiPrincAC(List<SigitVCompAcDto> acList) {
		log.debug("mapToComponentiPrincAC: START");
		BigDecimal progressivo = null;
		ArrayList<Componente> listComp = new ArrayList<Componente>();

		Componente ac = null;

		if(acList.size()>0)
		{
			progressivo = acList.get(0).getProgressivo();

			log.debug("mapping scheda AC");

			int numInProgr = 1;

			for (int i=0; i<acList.size();i++) {
				log.debug("i="+i +", posInProgr = " + numInProgr);
				SigitVCompAcDto dto = acList.get(i);
				log.debug("AC: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
				if(!progressivo.equals(dto.getProgressivo()))
				{
					log.debug("cambio progressivo");

					listComp.add(ac);
					progressivo = dto.getProgressivo();
					numInProgr = 1;
				}
				if(numInProgr++ == 1)
				{
					log.debug("AC principale");
					ac = mapToComponenteAC(dto);
				}

			}

			listComp.add(ac);
		}
		
		log.debug("mapToComponentiPrincAC: END");
		
		return listComp;
	}
	
	public static ComponenteAC mapToComponentePrincAC(List<SigitVCompAcDto> compList) {
		log.debug("mapToComponentePrincAC: START");
		
		ComponenteAC componente = new ComponenteAC();
		
		if (compList != null && compList.size() > 0)
		{
			// Il primo elemento e' il principale
			SigitVCompAcDto dto = compList.get(0);
			
			componente = mapToComponenteDettAC(dto);
			
			/*
			String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
			componente.setIdTipoComponente(dto.getIdTipoComponente());
			componente.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
			componente.setIdComponente(codiceComp);
			componente.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
			componente.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));
			componente.setIdFabbricante(ConvertUtil.convertToInteger(dto.getFkMarca()));
			componente.setModello(dto.getModello());
			componente.setMatricola(dto.getMatricola());

			componente.setCapacita(ConvertUtil.convertToString(dto.getCapacita()));
			
			componente.setCoibentazione(dto.getFlgCoib());
			
			componente.setFlgAcs(ConvertUtil.convertToBoolean(dto.getFlgAcs()));
			componente.setFlgRiscaldamento(ConvertUtil.convertToBoolean(dto.getFlgRisc()));
			componente.setFlgRaffrescamento(ConvertUtil.convertToBoolean(dto.getFlgRaff()));
			*/
			
		}
		
		log.debug("mapToComponentePrincAC: END");
		
		return componente;
	}
	
	public static ArrayList<ComponenteAC> mapToComponenteSostAC(List<SigitVCompAcDto> acList, boolean isRiattivabile) {
		log.debug("mapToComponenteSostAC: START");

		ArrayList<ComponenteAC> listComp = new ArrayList<ComponenteAC>();
		
		// Devo escludere il primo perche' e' il principale
		if (acList != null && acList.size() > 1)
		{
			SigitVCompAcDto dto = null;
			ComponenteAC ac = null;

			for (int i = 1; i < acList.size(); i++) {
				dto = acList.get(i);
				
				ac = mapToComponenteDettAC(dto);
				
				if (i == 1 && isRiattivabile)
				{
					ac.setRipristina(Constants.LABEL_RIPRISTINA);
					ac.setRipristinaAttivabile(true);
				}
				
				listComp.add(ac);

			}
		}
		
		log.debug("mapToComponenteSostAC: END");
		
		return listComp;
	}
	
	private static Componente mapToComponenteAC(SigitVCompAcDto dto) {
		
		String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
		Componente ac = new Componente();
		ac.setIdComponente(codiceComp);
		ac.setIdTipoComponente(dto.getIdTipoComponente());
		ac.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
		ac.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
		ac.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));
		ac.setDescFabbricante(dto.getDesMarca());
		ac.setModello(dto.getModello());
		return ac;
	}

	private static ComponenteAC mapToComponenteDettAC(SigitVCompAcDto dto) {
		
		ComponenteAC componente = new ComponenteAC();

		String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
		componente.setIdTipoComponente(dto.getIdTipoComponente());
		componente.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
		componente.setIdComponente(codiceComp);
		componente.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
		componente.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));
		
		if (GenericUtil.isNotNullOrEmpty(dto.getDataDismiss()))
		{
			componente.setFlgDismesso(true);
		}
		
		componente.setIdFabbricante(ConvertUtil.convertToInteger(dto.getFkMarca()));
		componente.setDescFabbricante(dto.getDesMarca());
		componente.setModello(dto.getModello());
		componente.setMatricola(dto.getMatricola());

		componente.setCapacita(ConvertUtil.convertToString(dto.getCapacita()));
		
		componente.setCoibentazione(dto.getFlgCoib());
		
		componente.setFlgAcs(ConvertUtil.convertToBoolean(dto.getFlgAcs()));
		componente.setFlgRiscaldamento(ConvertUtil.convertToBoolean(dto.getFlgRisc()));
		componente.setFlgRaffrescamento(ConvertUtil.convertToBoolean(dto.getFlgRaff()));
		
		return componente;
	}
	
	public static SigitTCompAcDto getSigitTCompAC(ComponenteAC comp, BigDecimal codImpianto) {
		
		SigitTCompAcDto dto = new SigitTCompAcDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(comp.getProgrComponente()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_AC);
		dto.setDataInstall(ConvertUtil.convertToSqlDate(comp.getDataInstallazione()));
		dto.setCapacita(ConvertUtil.convertToBigDecimal(comp.getCapacita()));
		dto.setFlgAcs(ConvertUtil.convertToBigDecimal(comp.getFlgAcs()));
		dto.setFlgRaff(ConvertUtil.convertToBigDecimal(comp.getFlgRaffrescamento()));
		dto.setFlgRisc(ConvertUtil.convertToBigDecimal(comp.getFlgRiscaldamento()));
		
		if (GenericUtil.isNotNullOrEmpty(comp.getCoibentazione()))
		{
			dto.setFlgCoib(comp.getCoibentazione());
		}
		
		return dto;
	}
	
	public static SigitTCompXDto getSigitTCompX(ComponenteAC comp, BigDecimal codImpianto, String cfUtente) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(comp.getProgrComponente()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_AC);
		dto.setDataInstall(ConvertUtil.convertToSqlDate(comp.getDataInstallazione()));
		dto.setDataDismiss(ConvertUtil.convertToSqlDate(comp.getDataDismissione()));
		dto.setFkMarca(ConvertUtil.convertToBigDecimal(comp.getIdFabbricante()));
		dto.setModello(comp.getModello());
		dto.setMatricola(comp.getMatricola());
		dto.setUtenteUltMod(cfUtente);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		return dto;
	}
	


	//////////////////////////////////////////

	// SCHEDA 4.7 CS - inizio

	public static ArrayList<Componente> mapToComponentiPrincCS(List<SigitVCompCsDto> compList) {
		log.debug("mapToComponentiPrincCS: START");
		BigDecimal progressivo = null;
		ArrayList<Componente> listComp = new ArrayList<Componente>();

		Componente comp = null;

		if(compList.size()>0)
		{
			progressivo = compList.get(0).getProgressivo();

			log.debug("mapping scheda CS");

			int numInProgr = 1;

			for (int i=0; i<compList.size();i++) {
				log.debug("i="+i +", posInProgr = " + numInProgr);
				SigitVCompCsDto dto = compList.get(i);
				log.debug("CS: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
				if(!progressivo.equals(dto.getProgressivo()))
				{
					log.debug("cambio progressivo");

					listComp.add(comp);
					progressivo = dto.getProgressivo();
					numInProgr = 1;
				}
				if(numInProgr++ == 1)
				{
					log.debug("CS principale");
					comp = mapToComponenteCS(dto);
				}

			}

			listComp.add(comp);
		}

		log.debug("mapToComponentiPrincCS: END");

		return listComp;
	}


	public static ComponenteCS mapToComponentePrincCS(List<SigitVCompCsDto> compList) {
		log.debug("mapToComponentePrincCS: START");

		ComponenteCS componente = new ComponenteCS();

		if (compList != null && compList.size() > 0)
		{
			// Il primo elemento e' il principale
			SigitVCompCsDto dto = compList.get(0);

			componente = mapToComponenteDettCS(dto);

		}

		log.debug("mapToComponentePrincCS: END");

		return componente;
	}

	public static ArrayList<ComponenteCS> mapToComponenteSostCS(List<SigitVCompCsDto> compList, boolean isRiattivabile) {
		log.debug("mapToComponenteSostCS: START");

		ArrayList<ComponenteCS> listComp = new ArrayList<ComponenteCS>();

		// Devo escludere il primo perche' e' il principale
		if (compList != null && compList.size() > 1)
		{
			SigitVCompCsDto dto = null;
			ComponenteCS comp = null;

			for (int i = 1; i < compList.size(); i++) {
				dto = compList.get(i);

				comp = mapToComponenteDettCS(dto);

				if (i == 1 && isRiattivabile)
				{
					comp.setRipristina(Constants.LABEL_RIPRISTINA);
					comp.setRipristinaAttivabile(true);
				}

				listComp.add(comp);

			}
		}

		log.debug("mapToComponenteSostAC: END");

		return listComp;
	}

	private static Componente mapToComponenteCS(SigitVCompCsDto dto) {

		String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
		Componente comp = new Componente();
		comp.setIdComponente(codiceComp);
		comp.setIdTipoComponente(dto.getIdTipoComponente());
		comp.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
		comp.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
		comp.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));
		comp.setDescFabbricante(dto.getDesMarca());
		return comp;
	}

	private static ComponenteCS mapToComponenteDettCS(SigitVCompCsDto dto) {

		ComponenteCS componente = new ComponenteCS();

		String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
		componente.setIdTipoComponente(dto.getIdTipoComponente());
		componente.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
		componente.setIdComponente(codiceComp);
		componente.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
		componente.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));

		if (GenericUtil.isNotNullOrEmpty(dto.getDataDismiss()))
		{
			componente.setFlgDismesso(true);
		}

		componente.setIdFabbricante(ConvertUtil.convertToInteger(dto.getFkMarca()));
		componente.setDescFabbricante(dto.getDesMarca());
		
		componente.setCollettori(ConvertUtil.convertToString(dto.getNumCollettori()));
		componente.setSupTotAp(ConvertUtil.convertToString(dto.getSupApertura()));

		return componente;
	}

	public static SigitTCompCsDto getSigitTCompCS(ComponenteCS comp, BigDecimal codImpianto, String cfUtente) {

		SigitTCompCsDto dto = new SigitTCompCsDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(comp.getProgrComponente()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_CS);
		dto.setDataInstall(ConvertUtil.convertToSqlDate(comp.getDataInstallazione()));
		dto.setDataDismiss(ConvertUtil.convertToSqlDate(comp.getDataDismissione()));
		dto.setNumCollettori(ConvertUtil.convertToBigDecimal(comp.getCollettori()));
		dto.setSupApertura(ConvertUtil.convertToBigDecimal(comp.getSupTotAp()));

		dto.setFkMarca(ConvertUtil.convertToBigDecimal(comp.getIdFabbricante()));
		dto.setUtenteUltMod(cfUtente);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());

		return dto;
	}

	/*
	public static SigitTCompXDto getSigitTCompX(ComponenteCS comp, BigDecimal codImpianto, String cfUtente) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(comp.getProgrComponente()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_CS);
		dto.setDataInstall(ConvertUtil.convertToSqlDate(comp.getDataInstallazione()));
		dto.setDataDismiss(ConvertUtil.convertToSqlDate(comp.getDataDismissione()));
		dto.setFkMarca(ConvertUtil.convertToBigDecimal(comp.getIdFabbricante()));

		dto.setUtenteUltMod(cfUtente);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		return dto;
	}
	*/
	// SCHEDA 4.7 CS - fine

	//////////////////////////////////////////

	// SCHEDA 4.8 AG - inizio

	public static ArrayList<Componente> mapToComponentiPrincAG(List<SigitVCompAgDto> compList) {
		log.debug("mapToComponentiPrincAG: START");
		BigDecimal progressivo = null;
		ArrayList<Componente> listComp = new ArrayList<Componente>();

		Componente comp = null;

		if(compList.size()>0)
		{
			progressivo = compList.get(0).getProgressivo();

			log.debug("mapping scheda AG");

			int numInProgr = 1;

			for (int i=0; i<compList.size();i++) {
				log.debug("i="+i +", posInProgr = " + numInProgr);
				SigitVCompAgDto dto = compList.get(i);
				log.debug("AG: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
				if(!progressivo.equals(dto.getProgressivo()))
				{
					log.debug("cambio progressivo");

					listComp.add(comp);
					progressivo = dto.getProgressivo();
					numInProgr = 1;
				}
				if(numInProgr++ == 1)
				{
					log.debug("AG principale");
					comp = mapToComponenteAG(dto);
				}

			}

			listComp.add(comp);
		}

		log.debug("mapToComponentiPrincAG: END");

		return listComp;
	}


	public static ComponenteAG mapToComponentePrincAG(List<SigitVCompAgDto> compList) {
		log.debug("mapToComponentePrincAG: START");

		ComponenteAG componente = new ComponenteAG();

		if (compList != null && compList.size() > 0)
		{
			// Il primo elemento e' il principale
			SigitVCompAgDto dto = compList.get(0);

			componente = mapToComponenteDettAG(dto);

		}

		log.debug("mapToComponentePrincAG: END");

		return componente;
	}

	public static ArrayList<ComponenteAG> mapToComponenteSostAG(List<SigitVCompAgDto> compList, boolean isRiattivabile) {
		log.debug("mapToComponenteSostAG: START");

		ArrayList<ComponenteAG> listComp = new ArrayList<ComponenteAG>();

		// Devo escludere il primo perche' e' il principale
		if (compList != null && compList.size() > 1)
		{
			SigitVCompAgDto dto = null;
			ComponenteAG comp = null;

			for (int i = 1; i < compList.size(); i++) {
				dto = compList.get(i);

				comp = mapToComponenteDettAG(dto);

				if (i == 1 && isRiattivabile)
				{
					comp.setRipristina(Constants.LABEL_RIPRISTINA);
					comp.setRipristinaAttivabile(true);
				}

				listComp.add(comp);

			}
		}

		log.debug("mapToComponenteSostAC: END");

		return listComp;
	}

	private static Componente mapToComponenteAG(SigitVCompAgDto dto) {

		String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
		Componente comp = new Componente();
		comp.setIdComponente(codiceComp);
		comp.setIdTipoComponente(dto.getIdTipoComponente());
		comp.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
		comp.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
		comp.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));
		comp.setDescFabbricante(dto.getDesMarca());
		comp.setModello(dto.getModello());
		return comp;
	}

	private static ComponenteAG mapToComponenteDettAG(SigitVCompAgDto dto) {

		ComponenteAG componente = new ComponenteAG();

		String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
		componente.setIdTipoComponente(dto.getIdTipoComponente());
		componente.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
		componente.setIdComponente(codiceComp);
		componente.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
		componente.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));

		if (GenericUtil.isNotNullOrEmpty(dto.getDataDismiss()))
		{
			componente.setFlgDismesso(true);
		}

		componente.setIdFabbricante(ConvertUtil.convertToInteger(dto.getFkMarca()));
		componente.setDescFabbricante(dto.getDesMarca());
		componente.setModello(dto.getModello());
		componente.setMatricola(dto.getMatricola());

		componente.setTipologia(dto.getTipologia());

		componente.setPotenza(ConvertUtil.convertToString(dto.getPotenzaTermicaKw()));

		return componente;
	}

	public static SigitTCompAgDto getSigitTCompAG(ComponenteAG comp, BigDecimal codImpianto, String cfUtente) {

		SigitTCompAgDto dto = new SigitTCompAgDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(comp.getProgrComponente()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_AG);
		dto.setDataInstall(ConvertUtil.convertToSqlDate(comp.getDataInstallazione()));
		dto.setDataDismiss(ConvertUtil.convertToSqlDate(comp.getDataDismissione()));

		dto.setTipologia(comp.getTipologia());
		dto.setPotenzaTermicaKw(ConvertUtil.convertToBigDecimal(comp.getPotenza()));
		
		dto.setFkMarca(ConvertUtil.convertToBigDecimal(comp.getIdFabbricante()));
		dto.setUtenteUltMod(cfUtente);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());

		dto.setMatricola(comp.getMatricola());
		dto.setModello(comp.getModello());
		return dto;
	}

	/*
	public static SigitTCompXDto getSigitTCompX(ComponenteAG comp, BigDecimal codImpianto, String cfUtente) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(comp.getProgrComponente()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_AG);
		dto.setDataInstall(ConvertUtil.convertToSqlDate(comp.getDataInstallazione()));
		dto.setDataDismiss(ConvertUtil.convertToSqlDate(comp.getDataDismissione()));
		dto.setFkMarca(ConvertUtil.convertToBigDecimal(comp.getIdFabbricante()));
		dto.setModello(comp.getModello());
		dto.setMatricola(comp.getMatricola());

		dto.setUtenteUltMod(cfUtente);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		return dto;
	}
	*/
	
	// SCHEDA 4.8 AG - fine

	//////////////////////////////////////////

	// SCHEDA 5.1 SR - inizio

	public static ArrayList<Componente> mapToComponentiPrincSR(List<SigitVCompSrDto> compList) {
		log.debug("mapToComponentiPrincSR: START");
		BigDecimal progressivo = null;
		ArrayList<Componente> listComp = new ArrayList<Componente>();

		Componente comp = null;

		if(compList.size()>0)
		{
			progressivo = compList.get(0).getProgressivo();

			log.debug("mapping scheda SR");

			int numInProgr = 1;

			for (int i=0; i<compList.size();i++) {
				log.debug("i="+i +", posInProgr = " + numInProgr);
				SigitVCompSrDto dto = compList.get(i);
				log.debug("SR: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
				if(!progressivo.equals(dto.getProgressivo()))
				{
					log.debug("cambio progressivo");

					listComp.add(comp);
					progressivo = dto.getProgressivo();
					numInProgr = 1;
				}
				if(numInProgr++ == 1)
				{
					log.debug("SR principale");
					comp = mapToComponenteSR(dto);
				}

			}

			listComp.add(comp);
		}

		log.debug("mapToComponentiPrincSR: END");

		return listComp;
	}


	public static ComponenteSR mapToComponentePrincSR(List<SigitVCompSrDto> compList) {
		log.debug("mapToComponentePrincSR: START");

		ComponenteSR componente = new ComponenteSR();

		if (compList != null && compList.size() > 0)
		{
			// Il primo elemento e' il principale
			SigitVCompSrDto dto = compList.get(0);

			componente = mapToComponenteDettSR(dto);

		}

		log.debug("mapToComponentePrincSR: END");

		return componente;
	}

	public static ArrayList<ComponenteSR> mapToComponenteSostSR(List<SigitVCompSrDto> compList, boolean isRiattivabile) {
		log.debug("mapToComponenteSostSR: START");

		ArrayList<ComponenteSR> listComp = new ArrayList<ComponenteSR>();

		// Devo escludere il primo perche' e' il principale
		if (compList != null && compList.size() > 1)
		{
			SigitVCompSrDto dto = null;
			ComponenteSR comp = null;

			for (int i = 1; i < compList.size(); i++) {
				dto = compList.get(i);

				comp = mapToComponenteDettSR(dto);

				if (i == 1 && isRiattivabile)
				{
					comp.setRipristina(Constants.LABEL_RIPRISTINA);
					comp.setRipristinaAttivabile(true);
				}

				listComp.add(comp);

			}
		}

		log.debug("mapToComponenteSostAC: END");

		return listComp;
	}

	private static Componente mapToComponenteSR(SigitVCompSrDto dto) {

		String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
		Componente comp = new Componente();
		comp.setIdComponente(codiceComp);
		comp.setIdTipoComponente(dto.getIdTipoComponente());
		comp.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
		comp.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
		comp.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));
		comp.setDescFabbricante(dto.getDesMarca());
		comp.setModello(dto.getModello());
		return comp;
	}

	private static ComponenteSR mapToComponenteDettSR(SigitVCompSrDto dto) {

		ComponenteSR componente = new ComponenteSR();

		String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
		componente.setIdTipoComponente(dto.getIdTipoComponente());
		componente.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
		componente.setIdComponente(codiceComp);
		componente.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
		componente.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));

		if (GenericUtil.isNotNullOrEmpty(dto.getDataDismiss()))
		{
			componente.setFlgDismesso(true);
		}

		componente.setIdFabbricante(ConvertUtil.convertToInteger(dto.getFkMarca()));
		componente.setDescFabbricante(dto.getDesMarca());
		componente.setModello(dto.getModello());

		componente.setNumPunti(ConvertUtil.convertToString(dto.getNumPtiRegolazione()));
		componente.setNumLivelli(ConvertUtil.convertToString(dto.getNumLivTemp()));

		return componente;
	}

	public static SigitTCompSrDto getSigitTCompSR(ComponenteSR comp, BigDecimal codImpianto) {

		SigitTCompSrDto dto = new SigitTCompSrDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(comp.getProgrComponente()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_SR);
		dto.setDataInstall(ConvertUtil.convertToSqlDate(comp.getDataInstallazione()));
		
		dto.setNumPtiRegolazione(ConvertUtil.convertToBigDecimal(comp.getNumPunti()));

		dto.setNumLivTemp(ConvertUtil.convertToBigDecimal(comp.getNumLivelli()));

		return dto;
	}

	public static SigitTCompXDto getSigitTCompX(ComponenteSR comp, BigDecimal codImpianto, String cfUtente) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(comp.getProgrComponente()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_SR);
		dto.setDataInstall(ConvertUtil.convertToSqlDate(comp.getDataInstallazione()));
		dto.setDataDismiss(ConvertUtil.convertToSqlDate(comp.getDataDismissione()));
		dto.setFkMarca(ConvertUtil.convertToBigDecimal(comp.getIdFabbricante()));
		dto.setModello(comp.getModello());

		dto.setUtenteUltMod(cfUtente);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		return dto;
	}

	// SCHEDA 5.1 SR - fine

	//////////////////////////////////////////

	// SCHEDA 5.1 VR - inizio

	public static ArrayList<Componente> mapToComponentiPrincVR(List<SigitVCompVrDto> compList) {
		log.debug("mapToComponentiPrincVR: START");
		BigDecimal progressivo = null;
		ArrayList<Componente> listComp = new ArrayList<Componente>();

		Componente comp = null;

		if(compList.size()>0)
		{
			progressivo = compList.get(0).getProgressivo();

			log.debug("mapping scheda VR");

			int numInProgr = 1;

			for (int i=0; i<compList.size();i++) {
				log.debug("i="+i +", posInProgr = " + numInProgr);
				SigitVCompVrDto dto = compList.get(i);
				log.debug("VR: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
				if(!progressivo.equals(dto.getProgressivo()))
				{
					log.debug("cambio progressivo");

					listComp.add(comp);
					progressivo = dto.getProgressivo();
					numInProgr = 1;
				}
				if(numInProgr++ == 1)
				{
					log.debug("VR principale");
					comp = mapToComponenteVR(dto);
				}

			}

			listComp.add(comp);
		}

		log.debug("mapToComponentiPrincVR: END");

		return listComp;
	}


	public static ComponenteVR mapToComponentePrincVR(List<SigitVCompVrDto> compList) {
		log.debug("mapToComponentePrincVR: START");

		ComponenteVR componente = new ComponenteVR();

		if (compList != null && compList.size() > 0)
		{
			// Il primo elemento e' il principale
			SigitVCompVrDto dto = compList.get(0);

			componente = mapToComponenteDettVR(dto);

		}

		log.debug("mapToComponentePrincVR: END");

		return componente;
	}

	public static ArrayList<ComponenteVR> mapToComponenteSostVR(List<SigitVCompVrDto> compList, boolean isRiattivabile) {
		log.debug("mapToComponenteSostVR: START");

		ArrayList<ComponenteVR> listComp = new ArrayList<ComponenteVR>();

		// Devo escludere il primo perche' e' il principale
		if (compList != null && compList.size() > 1)
		{
			SigitVCompVrDto dto = null;
			ComponenteVR comp = null;

			for (int i = 1; i < compList.size(); i++) {
				dto = compList.get(i);

				comp = mapToComponenteDettVR(dto);

				if (i == 1 && isRiattivabile)
				{
					comp.setRipristina(Constants.LABEL_RIPRISTINA);
					comp.setRipristinaAttivabile(true);
				}

				listComp.add(comp);

			}
		}

		log.debug("mapToComponenteSostAC: END");

		return listComp;
	}

	private static Componente mapToComponenteVR(SigitVCompVrDto dto) {

		String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
		Componente comp = new Componente();
		comp.setIdComponente(codiceComp);
		comp.setIdTipoComponente(dto.getIdTipoComponente());
		comp.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
		comp.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
		comp.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));
		comp.setDescFabbricante(dto.getDesMarca());
		comp.setModello(dto.getModello());
		return comp;
	}

	private static ComponenteVR mapToComponenteDettVR(SigitVCompVrDto dto) {

		ComponenteVR componente = new ComponenteVR();

		String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
		componente.setIdTipoComponente(dto.getIdTipoComponente());
		componente.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
		componente.setIdComponente(codiceComp);
		componente.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
		componente.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));

		if (GenericUtil.isNotNullOrEmpty(dto.getDataDismiss()))
		{
			componente.setFlgDismesso(true);
		}

		componente.setIdFabbricante(ConvertUtil.convertToInteger(dto.getFkMarca()));
		componente.setDescFabbricante(dto.getDesMarca());
		componente.setModello(dto.getModello());
		

		componente.setNumVie(ConvertUtil.convertToString(dto.getNumVie()));
		componente.setServomotore(dto.getServomotore());

		return componente;
	}

	public static SigitTCompVrDto getSigitTCompVR(ComponenteVR comp, BigDecimal codImpianto) {

		SigitTCompVrDto dto = new SigitTCompVrDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(comp.getProgrComponente()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_VR);
		dto.setDataInstall(ConvertUtil.convertToSqlDate(comp.getDataInstallazione()));

		dto.setNumVie(ConvertUtil.convertToBigDecimal(comp.getNumVie()));
		dto.setServomotore(comp.getServomotore());

		return dto;
	}

	public static SigitTCompXDto getSigitTCompX(ComponenteVR comp, BigDecimal codImpianto, String cfUtente) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(comp.getProgrComponente()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_VR);
		dto.setDataInstall(ConvertUtil.convertToSqlDate(comp.getDataInstallazione()));
		dto.setDataDismiss(ConvertUtil.convertToSqlDate(comp.getDataDismissione()));
		dto.setFkMarca(ConvertUtil.convertToBigDecimal(comp.getIdFabbricante()));
		dto.setModello(comp.getModello());

		dto.setUtenteUltMod(cfUtente);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		return dto;
	}

	// SCHEDA 5.1 VR - fine

	//////////////////////////////////////////

	// SCHEDA 6.4 PO - inizio

	public static ArrayList<Componente> mapToComponentiPrincPO(List<SigitVCompPoDto> compList) {
		log.debug("mapToComponentiPrincPO: START");
		BigDecimal progressivo = null;
		ArrayList<Componente> listComp = new ArrayList<Componente>();

		Componente comp = null;

		if(compList.size()>0)
		{
			progressivo = compList.get(0).getProgressivo();

			log.debug("mapping scheda PO");

			int numInProgr = 1;

			for (int i=0; i<compList.size();i++) {
				log.debug("i="+i +", posInProgr = " + numInProgr);
				SigitVCompPoDto dto = compList.get(i);
				log.debug("PO: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
				if(!progressivo.equals(dto.getProgressivo()))
				{
					log.debug("cambio progressivo");

					listComp.add(comp);
					progressivo = dto.getProgressivo();
					numInProgr = 1;
				}
				if(numInProgr++ == 1)
				{
					log.debug("PO principale");
					comp = mapToComponentePO(dto);
				}

			}

			listComp.add(comp);
		}

		log.debug("mapToComponentiPrincPO: END");

		return listComp;
	}


	public static ComponentePO mapToComponentePrincPO(List<SigitVCompPoDto> compList) {
		log.debug("mapToComponentePrincPO: START");

		ComponentePO componente = new ComponentePO();

		if (compList != null && compList.size() > 0)
		{
			// Il primo elemento e' il principale
			SigitVCompPoDto dto = compList.get(0);

			componente = mapToComponenteDettPO(dto);

		}

		log.debug("mapToComponentePrincPO: END");

		return componente;
	}

	public static ArrayList<ComponentePO> mapToComponenteSostPO(List<SigitVCompPoDto> compList, boolean isRiattivabile) {
		log.debug("mapToComponenteSostPO: START");

		ArrayList<ComponentePO> listComp = new ArrayList<ComponentePO>();

		// Devo escludere il primo perche' e' il principale
		if (compList != null && compList.size() > 1)
		{
			SigitVCompPoDto dto = null;
			ComponentePO comp = null;

			for (int i = 1; i < compList.size(); i++) {
				dto = compList.get(i);

				comp = mapToComponenteDettPO(dto);

				if (i == 1 && isRiattivabile)
				{
					comp.setRipristina(Constants.LABEL_RIPRISTINA);
					comp.setRipristinaAttivabile(true);
				}

				listComp.add(comp);

			}
		}

		log.debug("mapToComponenteSostAC: END");

		return listComp;
	}

	private static Componente mapToComponentePO(SigitVCompPoDto dto) {

		String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
		Componente comp = new Componente();
		comp.setIdComponente(codiceComp);
		comp.setIdTipoComponente(dto.getIdTipoComponente());
		comp.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
		comp.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
		comp.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));
		comp.setDescFabbricante(dto.getDesMarca());
		comp.setModello(dto.getModello());
		return comp;
	}

	private static ComponentePO mapToComponenteDettPO(SigitVCompPoDto dto) {

		ComponentePO componente = new ComponentePO();

		String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
		componente.setIdTipoComponente(dto.getIdTipoComponente());
		componente.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
		componente.setIdComponente(codiceComp);
		componente.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
		componente.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));

		if (GenericUtil.isNotNullOrEmpty(dto.getDataDismiss()))
		{
			componente.setFlgDismesso(true);
		}

		componente.setIdFabbricante(ConvertUtil.convertToInteger(dto.getFkMarca()));
		componente.setDescFabbricante(dto.getDesMarca());
		componente.setModello(dto.getModello());
		
		if (GenericUtil.isNotNullOrEmpty(dto.getFlgGiriVariabili()))
		{
			componente.setFlgGiriVariabili(ConvertUtil.convertToBoolean(dto.getFlgGiriVariabili()) ? SiNoEnum.SI_1.getCodice() : SiNoEnum.NO_0.getCodice()); 
		}

		componente.setPotenza(ConvertUtil.convertToString(dto.getPotNominaleKw()));

		return componente;
	}

	public static SigitTCompPoDto getSigitTCompPO(ComponentePO comp, BigDecimal codImpianto) {

		SigitTCompPoDto dto = new SigitTCompPoDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(comp.getProgrComponente()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_PO);
		dto.setDataInstall(ConvertUtil.convertToSqlDate(comp.getDataInstallazione()));
		
		
		if (GenericUtil.isNotNullOrEmpty(comp.getFlgGiriVariabili()))
		{
			dto.setFlgGiriVariabili(!StringUtils.isBlank(comp.getFlgGiriVariabili()) ? ConvertUtil.convertToBigDecimal(comp.getFlgGiriVariabili()) : null);
		}

		dto.setPotNominaleKw(ConvertUtil.convertToBigDecimal(comp.getPotenza()));
		
		return dto;
	}

	public static SigitTCompXDto getSigitTCompX(ComponentePO comp, BigDecimal codImpianto, String cfUtente) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(comp.getProgrComponente()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_PO);
		dto.setDataInstall(ConvertUtil.convertToSqlDate(comp.getDataInstallazione()));
		dto.setDataDismiss(ConvertUtil.convertToSqlDate(comp.getDataDismissione()));
		dto.setFkMarca(ConvertUtil.convertToBigDecimal(comp.getIdFabbricante()));
		dto.setModello(comp.getModello());

		dto.setUtenteUltMod(cfUtente);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		return dto;
	}

	// SCHEDA 6.4 PO - fine

	//////////////////////////////////////////



	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	/////////////////////////////////////////
	
	// SCHEDA 9.1 TE - inizio

	public static ArrayList<Componente> mapToComponentiPrincTE(List<SigitVCompTeDto> compList) {
		log.debug("mapToComponentiPrincTE: START");
		BigDecimal progressivo = null;
		ArrayList<Componente> listComp = new ArrayList<Componente>();

		Componente comp = null;

		if(compList.size()>0)
		{
			progressivo = compList.get(0).getProgressivo();

			log.debug("mapping scheda TE");

			int numInProgr = 1;

			for (int i=0; i<compList.size();i++) {
				log.debug("i="+i +", posInProgr = " + numInProgr);
				SigitVCompTeDto dto = compList.get(i);
				log.debug("TE: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
				if(!progressivo.equals(dto.getProgressivo()))
				{
					log.debug("cambio progressivo");

					listComp.add(comp);
					progressivo = dto.getProgressivo();
					numInProgr = 1;
				}
				if(numInProgr++ == 1)
				{
					log.debug("TE principale");
					comp = mapToComponenteTE(dto);
				}

			}

			listComp.add(comp);
		}
		
		log.debug("mapToComponentiPrincTE: END");
		
		return listComp;
	}
	
	
	public static ComponenteTE mapToComponentePrincTE(List<SigitVCompTeDto> compList) {
		log.debug("mapToComponentePrincTE: START");
		
		ComponenteTE componente = new ComponenteTE();
		
		if (compList != null && compList.size() > 0)
		{
			// Il primo elemento e' il principale
			SigitVCompTeDto dto = compList.get(0);
			
			componente = mapToComponenteDettTE(dto);
			
		}
		
		log.debug("mapToComponentePrincTE: END");
		
		return componente;
	}
	
	public static ArrayList<ComponenteTE> mapToComponenteSostTE(List<SigitVCompTeDto> compList, boolean isRiattivabile) {
		log.debug("mapToComponenteSostTE: START");

		ArrayList<ComponenteTE> listComp = new ArrayList<ComponenteTE>();
		
		// Devo escludere il primo perche' e' il principale
		if (compList != null && compList.size() > 1)
		{
			SigitVCompTeDto dto = null;
			ComponenteTE comp = null;

			for (int i = 1; i < compList.size(); i++) {
				dto = compList.get(i);
				
				comp = mapToComponenteDettTE(dto);
				
				if (i == 1 && isRiattivabile)
				{
					comp.setRipristina(Constants.LABEL_RIPRISTINA);
					comp.setRipristinaAttivabile(true);
				}
				
				listComp.add(comp);

			}
		}
		
		log.debug("mapToComponenteSostAC: END");
		
		return listComp;
	}
	
	private static Componente mapToComponenteTE(SigitVCompTeDto dto) {
		
		String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
		Componente comp = new Componente();
		comp.setIdComponente(codiceComp);
		comp.setIdTipoComponente(dto.getIdTipoComponente());
		comp.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
		comp.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
		comp.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));
		comp.setDescFabbricante(dto.getDesMarca());
		comp.setModello(dto.getModello());
		return comp;
	}

	private static ComponenteTE mapToComponenteDettTE(SigitVCompTeDto dto) {
		
		ComponenteTE componente = new ComponenteTE();

		String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
		componente.setIdTipoComponente(dto.getIdTipoComponente());
		componente.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
		componente.setIdComponente(codiceComp);
		componente.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
		componente.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));
		
		if (GenericUtil.isNotNullOrEmpty(dto.getDataDismiss()))
		{
			componente.setFlgDismesso(true);
		}
		
		componente.setIdFabbricante(ConvertUtil.convertToInteger(dto.getFkMarca()));
		componente.setDescFabbricante(dto.getDesMarca());
		componente.setModello(dto.getModello());
		componente.setMatricola(dto.getMatricola());

		componente.setCapacita(ConvertUtil.convertToString(dto.getCapacitaL()));
		
		componente.setNumVentilatori(ConvertUtil.convertToString(dto.getNumVentilatori()));
		componente.setTipoVentilatori(dto.getTipoVentilatori());
		
		return componente;
	}
	
	public static SigitTCompTeDto getSigitTCompTE(ComponenteTE comp, BigDecimal codImpianto) {
		
		SigitTCompTeDto dto = new SigitTCompTeDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(comp.getProgrComponente()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_TE);
		dto.setDataInstall(ConvertUtil.convertToSqlDate(comp.getDataInstallazione()));
		dto.setCapacitaL(ConvertUtil.convertToBigDecimal(comp.getCapacita()));
		
		dto.setNumVentilatori(ConvertUtil.convertToBigDecimal(comp.getNumVentilatori()));
		dto.setTipoVentilatori(comp.getTipoVentilatori());
		
		return dto;
	}
	
	public static SigitTCompXDto getSigitTCompX(ComponenteTE comp, BigDecimal codImpianto, String cfUtente) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(comp.getProgrComponente()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_TE);
		dto.setDataInstall(ConvertUtil.convertToSqlDate(comp.getDataInstallazione()));
		dto.setDataDismiss(ConvertUtil.convertToSqlDate(comp.getDataDismissione()));
		dto.setFkMarca(ConvertUtil.convertToBigDecimal(comp.getIdFabbricante()));
		dto.setModello(comp.getModello());
		dto.setMatricola(comp.getMatricola());
		
		dto.setUtenteUltMod(cfUtente);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		return dto;
	}
	
	// SCHEDA 9.1 TE - fine

	//////////////////////////////////////////
	
	
	/////////////////////////////////////////
	
	// SCHEDA 9.2 RV - inizio
	
	public static ArrayList<Componente> mapToComponentiPrincRV(List<SigitVCompRvDto> compList) {
		log.debug("mapToComponentiPrincRV: START");
		BigDecimal progressivo = null;
		ArrayList<Componente> listComp = new ArrayList<Componente>();

		Componente comp = null;

		if(compList.size()>0)
		{
			progressivo = compList.get(0).getProgressivo();

			log.debug("mapping scheda RV");

			int numInProgr = 1;

			for (int i=0; i<compList.size();i++) {
				log.debug("i="+i +", posInProgr = " + numInProgr);
				SigitVCompRvDto dto = compList.get(i);
				log.debug("RV: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
				if(!progressivo.equals(dto.getProgressivo()))
				{
					log.debug("cambio progressivo");

					listComp.add(comp);
					progressivo = dto.getProgressivo();
					numInProgr = 1;
				}
				if(numInProgr++ == 1)
				{
					log.debug("RV principale");
					comp = mapToComponenteRV(dto);
				}

			}

			listComp.add(comp);
		}
		
		log.debug("mapToComponentiPrincRV: END");
		
		return listComp;
	}
	
	
	public static ComponenteRV mapToComponentePrincRV(List<SigitVCompRvDto> compList) {
		log.debug("mapToComponentePrincRV: START");
		
		ComponenteRV componente = new ComponenteRV();
		
		if (compList != null && compList.size() > 0)
		{
			// Il primo elemento e' il principale
			SigitVCompRvDto dto = compList.get(0);
			
			componente = mapToComponenteDettRV(dto);
			
		}
		
		log.debug("mapToComponentePrincRV: END");
		
		return componente;
	}
	
	public static ArrayList<ComponenteRV> mapToComponenteSostRV(List<SigitVCompRvDto> compList, boolean isRiattivabile) {
		log.debug("mapToComponenteSostRV: START");

		ArrayList<ComponenteRV> listComp = new ArrayList<ComponenteRV>();
		
		// Devo escludere il primo perche' e' il principale
		if (compList != null && compList.size() > 1)
		{
			SigitVCompRvDto dto = null;
			ComponenteRV comp = null;

			for (int i = 1; i < compList.size(); i++) {
				dto = compList.get(i);
				
				comp = mapToComponenteDettRV(dto);
				
				if (i == 1 && isRiattivabile)
				{
					comp.setRipristina(Constants.LABEL_RIPRISTINA);
					comp.setRipristinaAttivabile(true);
				}
				
				listComp.add(comp);

			}
		}
		
		log.debug("mapToComponenteSostAC: END");
		
		return listComp;
	}
	
	private static Componente mapToComponenteRV(SigitVCompRvDto dto) {
		
		String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
		Componente comp = new Componente();
		comp.setIdComponente(codiceComp);
		comp.setIdTipoComponente(dto.getIdTipoComponente());
		comp.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
		comp.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
		comp.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));
		comp.setDescFabbricante(dto.getDesMarca());
		comp.setModello(dto.getModello());
		return comp;
	}

	private static ComponenteRV mapToComponenteDettRV(SigitVCompRvDto dto) {
		
		ComponenteRV componente = new ComponenteRV();

		String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
		componente.setIdTipoComponente(dto.getIdTipoComponente());
		componente.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
		componente.setIdComponente(codiceComp);
		componente.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
		componente.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));
		
		if (GenericUtil.isNotNullOrEmpty(dto.getDataDismiss()))
		{
			componente.setFlgDismesso(true);
		}
		
		componente.setIdFabbricante(ConvertUtil.convertToInteger(dto.getFkMarca()));
		componente.setDescFabbricante(dto.getDesMarca());
		componente.setModello(dto.getModello());
		componente.setMatricola(dto.getMatricola());
		
		componente.setNumVentilatori(ConvertUtil.convertToString(dto.getNumVentilatori()));
		componente.setTipoVentilatori(dto.getTipoVentilatori());
		
		return componente;
	}
	
	public static SigitTCompRvDto getSigitTCompRV(ComponenteRV comp, BigDecimal codImpianto) {
		
		SigitTCompRvDto dto = new SigitTCompRvDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(comp.getProgrComponente()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_RV);
		dto.setDataInstall(ConvertUtil.convertToSqlDate(comp.getDataInstallazione()));
		
		dto.setNumVentilatori(ConvertUtil.convertToBigDecimal(comp.getNumVentilatori()));
		dto.setTipoVentilatori(comp.getTipoVentilatori());
		
		return dto;
	}
	
	public static SigitTCompXDto getSigitTCompX(ComponenteRV comp, BigDecimal codImpianto, String cfUtente) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(comp.getProgrComponente()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_RV);
		dto.setDataInstall(ConvertUtil.convertToSqlDate(comp.getDataInstallazione()));
		dto.setDataDismiss(ConvertUtil.convertToSqlDate(comp.getDataDismissione()));
		dto.setFkMarca(ConvertUtil.convertToBigDecimal(comp.getIdFabbricante()));
		dto.setModello(comp.getModello());
		dto.setMatricola(comp.getMatricola());
		
		dto.setUtenteUltMod(cfUtente);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		return dto;
	}
	
	// SCHEDA 9.2 RV - fine

	//////////////////////////////////////////
	
	
	/////////////////////////////////////////
	
	// SCHEDA 9.3 SCX - inizio

	public static ArrayList<Componente> mapToComponentiPrincSCX(List<SigitVCompScxDto> compList) {
		log.debug("mapToComponentiPrincSCX: START");
		BigDecimal progressivo = null;
		ArrayList<Componente> listComp = new ArrayList<Componente>();

		Componente comp = null;

		if(compList.size()>0)
		{
			progressivo = compList.get(0).getProgressivo();

			log.debug("mapping scheda SCX");

			int numInProgr = 1;

			for (int i=0; i<compList.size();i++) {
				log.debug("i="+i +", posInProgr = " + numInProgr);
				SigitVCompScxDto dto = compList.get(i);
				log.debug("SCX: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
				if(!progressivo.equals(dto.getProgressivo()))
				{
					log.debug("cambio progressivo");

					listComp.add(comp);
					progressivo = dto.getProgressivo();
					numInProgr = 1;
				}
				if(numInProgr++ == 1)
				{
					log.debug("SCX principale");
					comp = mapToComponenteSCX(dto);
				}

			}

			listComp.add(comp);
		}
		
		log.debug("mapToComponentiPrincSCX: END");
		
		return listComp;
	}
	
	
	public static ComponenteSCX mapToComponentePrincSCX(List<SigitVCompScxDto> compList) {
		log.debug("mapToComponentePrincSCX: START");
		
		ComponenteSCX componente = new ComponenteSCX();
		
		if (compList != null && compList.size() > 0)
		{
			// Il primo elemento e' il principale
			SigitVCompScxDto dto = compList.get(0);
			
			componente = mapToComponenteDettSCX(dto);
			
			
		}
		
		log.debug("mapToComponentePrincSCX: END");
		
		return componente;
	}
	
	public static ArrayList<ComponenteSCX> mapToComponenteSostSCX(List<SigitVCompScxDto> compList, boolean isRiattivabile) {
		log.debug("mapToComponenteSostSCX: START");

		ArrayList<ComponenteSCX> listComp = new ArrayList<ComponenteSCX>();
		
		// Devo escludere il primo perche' e' il principale
		if (compList != null && compList.size() > 1)
		{
			SigitVCompScxDto dto = null;
			ComponenteSCX comp = null;

			for (int i = 1; i < compList.size(); i++) {
				dto = compList.get(i);
				
				comp = mapToComponenteDettSCX(dto);
				
				if (i == 1 && isRiattivabile)
				{
					comp.setRipristina(Constants.LABEL_RIPRISTINA);
					comp.setRipristinaAttivabile(true);
				}
				
				listComp.add(comp);

			}
		}
		
		log.debug("mapToComponenteSostAC: END");
		
		return listComp;
	}
	
	private static Componente mapToComponenteSCX(SigitVCompScxDto dto) {
		
		String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
		Componente comp = new Componente();
		comp.setIdComponente(codiceComp);
		comp.setIdTipoComponente(dto.getIdTipoComponente());
		comp.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
		comp.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
		comp.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));
		comp.setDescFabbricante(dto.getDesMarca());
		comp.setModello(dto.getModello());
		return comp;
	}

	private static ComponenteSCX mapToComponenteDettSCX(SigitVCompScxDto dto) {
		
		ComponenteSCX componente = new ComponenteSCX();

		String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
		componente.setIdTipoComponente(dto.getIdTipoComponente());
		componente.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
		componente.setIdComponente(codiceComp);
		componente.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
		componente.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));
		
		if (GenericUtil.isNotNullOrEmpty(dto.getDataDismiss()))
		{
			componente.setFlgDismesso(true);
		}
		
		componente.setIdFabbricante(ConvertUtil.convertToInteger(dto.getFkMarca()));
		componente.setDescFabbricante(dto.getDesMarca());
		componente.setModello(dto.getModello());
		
		return componente;
	}
	
	public static SigitTCompScxDto getSigitTCompSCX(ComponenteSCX comp, BigDecimal codImpianto) {
		
		SigitTCompScxDto dto = new SigitTCompScxDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(comp.getProgrComponente()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_SCX);
		dto.setDataInstall(ConvertUtil.convertToSqlDate(comp.getDataInstallazione()));
		
		return dto;
	}
	
	public static SigitTCompXDto getSigitTCompX(ComponenteSCX comp, BigDecimal codImpianto, String cfUtente) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(comp.getProgrComponente()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_SCX);
		dto.setDataInstall(ConvertUtil.convertToSqlDate(comp.getDataInstallazione()));
		dto.setDataDismiss(ConvertUtil.convertToSqlDate(comp.getDataDismissione()));
		dto.setFkMarca(ConvertUtil.convertToBigDecimal(comp.getIdFabbricante()));
		dto.setModello(comp.getModello());
		
		dto.setUtenteUltMod(cfUtente);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		return dto;
	}
	
	// SCHEDA 9.3 SCX - fine

	//////////////////////////////////////////
	
	
	/////////////////////////////////////////
	
	// SCHEDA 9.4 CI - inizio

	public static ArrayList<Componente> mapToComponentiPrincCI(List<SigitVCompCiDto> compList) {
		log.debug("mapToComponentiPrincCI: START");
		BigDecimal progressivo = null;
		ArrayList<Componente> listComp = new ArrayList<Componente>();

		Componente comp = null;

		if(compList.size()>0)
		{
			progressivo = compList.get(0).getProgressivo();

			log.debug("mapping scheda CI");

			int numInProgr = 1;

			for (int i=0; i<compList.size();i++) {
				log.debug("i="+i +", posInProgr = " + numInProgr);
				SigitVCompCiDto dto = compList.get(i);
				log.debug("CI: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
				if(!progressivo.equals(dto.getProgressivo()))
				{
					log.debug("cambio progressivo");

					listComp.add(comp);
					progressivo = dto.getProgressivo();
					numInProgr = 1;
				}
				if(numInProgr++ == 1)
				{
					log.debug("CI principale");
					comp = mapToComponenteCI(dto);
				}

			}

			listComp.add(comp);
		}
		
		log.debug("mapToComponentiPrincCI: END");
		
		return listComp;
	}
	
	
	public static ComponenteCI mapToComponentePrincCI(List<SigitVCompCiDto> compList) {
		log.debug("mapToComponentePrincCI: START");
		
		ComponenteCI componente = new ComponenteCI();
		
		if (compList != null && compList.size() > 0)
		{
			// Il primo elemento e' il principale
			SigitVCompCiDto dto = compList.get(0);
			
			componente = mapToComponenteDettCI(dto);
			
		}
		
		log.debug("mapToComponentePrincCI: END");
		
		return componente;
	}
	
	public static ArrayList<ComponenteCI> mapToComponenteSostCI(List<SigitVCompCiDto> compList, boolean isRiattivabile) {
		log.debug("mapToComponenteSostCI: START");

		ArrayList<ComponenteCI> listComp = new ArrayList<ComponenteCI>();
		
		// Devo escludere il primo perche' e' il principale
		if (compList != null && compList.size() > 1)
		{
			SigitVCompCiDto dto = null;
			ComponenteCI comp = null;

			for (int i = 1; i < compList.size(); i++) {
				dto = compList.get(i);
				
				comp = mapToComponenteDettCI(dto);
				
				if (i == 1 && isRiattivabile)
				{
					comp.setRipristina(Constants.LABEL_RIPRISTINA);
					comp.setRipristinaAttivabile(true);
				}
				
				listComp.add(comp);

			}
		}
		
		log.debug("mapToComponenteSostAC: END");
		
		return listComp;
	}
	
	private static Componente mapToComponenteCI(SigitVCompCiDto dto) {
		
		String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
		Componente comp = new Componente();
		comp.setIdComponente(codiceComp);
		comp.setIdTipoComponente(dto.getIdTipoComponente());
		comp.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
		comp.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
		comp.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));

		comp.setLungCircuito(ConvertUtil.convertToString(dto.getLunghezzaCircM()));
//		comp.setDescFabbricante(dto.getDesMarca());
//		comp.setModello(dto.getModello());
		return comp;
	}

	private static ComponenteCI mapToComponenteDettCI(SigitVCompCiDto dto) {
		
		ComponenteCI componente = new ComponenteCI();

		String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
		componente.setIdTipoComponente(dto.getIdTipoComponente());
		componente.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
		componente.setIdComponente(codiceComp);
		componente.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
		componente.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));
		
		if (GenericUtil.isNotNullOrEmpty(dto.getDataDismiss()))
		{
			componente.setFlgDismesso(true);
		}
		
		componente.setLungCircuito(ConvertUtil.convertToString(dto.getLunghezzaCircM()));
		componente.setSupScambiatore(ConvertUtil.convertToString(dto.getSuperfScambM2()));
		componente.setProfInstallaz(ConvertUtil.convertToString(dto.getProfInstallM()));
		
		return componente;
	}
	
	public static SigitTCompCiDto getSigitTCompCI(ComponenteCI comp, BigDecimal codImpianto) {
		
		SigitTCompCiDto dto = new SigitTCompCiDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(comp.getProgrComponente()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_CI);
		dto.setDataInstall(ConvertUtil.convertToSqlDate(comp.getDataInstallazione()));
		
		dto.setLunghezzaCircM(ConvertUtil.convertToBigDecimal(comp.getLungCircuito()));
		
		dto.setSuperfScambM2(ConvertUtil.convertToBigDecimal(comp.getSupScambiatore()));
		dto.setProfInstallM(ConvertUtil.convertToBigDecimal(comp.getProfInstallaz()));
		
		return dto;
	}
	
	public static SigitTCompXDto getSigitTCompX(ComponenteCI comp, BigDecimal codImpianto, String cfUtente) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(comp.getProgrComponente()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_CI);
		dto.setDataInstall(ConvertUtil.convertToSqlDate(comp.getDataInstallazione()));
		dto.setDataDismiss(ConvertUtil.convertToSqlDate(comp.getDataDismissione()));
		
		dto.setUtenteUltMod(cfUtente);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		return dto;
	}
	
	// SCHEDA 9.4 CI - fine

	//////////////////////////////////////////
	
	
	/////////////////////////////////////////
	
	// SCHEDA 9.5 UT - inizio

	public static ArrayList<Componente> mapToComponentiPrincUT(List<SigitVCompUtDto> compList) {
		log.debug("mapToComponentiPrincUT: START");
		BigDecimal progressivo = null;
		ArrayList<Componente> listComp = new ArrayList<Componente>();

		Componente comp = null;

		if(compList.size()>0)
		{
			progressivo = compList.get(0).getProgressivo();

			log.debug("mapping scheda UT");

			int numInProgr = 1;

			for (int i=0; i<compList.size();i++) {
				log.debug("i="+i +", posInProgr = " + numInProgr);
				SigitVCompUtDto dto = compList.get(i);
				log.debug("UT: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
				if(!progressivo.equals(dto.getProgressivo()))
				{
					log.debug("cambio progressivo");

					listComp.add(comp);
					progressivo = dto.getProgressivo();
					numInProgr = 1;
				}
				if(numInProgr++ == 1)
				{
					log.debug("UT principale");
					comp = mapToComponenteUT(dto);
				}

			}

			listComp.add(comp);
		}
		
		log.debug("mapToComponentiPrincUT: END");
		
		return listComp;
	}
	
	
	public static ComponenteUT mapToComponentePrincUT(List<SigitVCompUtDto> compList) {
		log.debug("mapToComponentePrincUT: START");
		
		ComponenteUT componente = new ComponenteUT();
		
		if (compList != null && compList.size() > 0)
		{
			// Il primo elemento e' il principale
			SigitVCompUtDto dto = compList.get(0);
			
			componente = mapToComponenteDettUT(dto);
			
		}
		
		log.debug("mapToComponentePrincUT: END");
		
		return componente;
	}
	
	public static ArrayList<ComponenteUT> mapToComponenteSostUT(List<SigitVCompUtDto> compList, boolean isRiattivabile) {
		log.debug("mapToComponenteSostUT: START");

		ArrayList<ComponenteUT> listComp = new ArrayList<ComponenteUT>();
		
		// Devo escludere il primo perche' e' il principale
		if (compList != null && compList.size() > 1)
		{
			SigitVCompUtDto dto = null;
			ComponenteUT comp = null;

			for (int i = 1; i < compList.size(); i++) {
				dto = compList.get(i);
				
				comp = mapToComponenteDettUT(dto);
				
				if (i == 1 && isRiattivabile)
				{
					comp.setRipristina(Constants.LABEL_RIPRISTINA);
					comp.setRipristinaAttivabile(true);
				}
				
				listComp.add(comp);

			}
		}
		
		log.debug("mapToComponenteSostAC: END");
		
		return listComp;
	}
	
	private static Componente mapToComponenteUT(SigitVCompUtDto dto) {
		
		String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
		Componente comp = new Componente();
		comp.setIdComponente(codiceComp);
		comp.setIdTipoComponente(dto.getIdTipoComponente());
		comp.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
		comp.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
		comp.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));
		comp.setDescFabbricante(dto.getDesMarca());
		comp.setModello(dto.getModello());
		return comp;
	}

	private static ComponenteUT mapToComponenteDettUT(SigitVCompUtDto dto) {
		
		ComponenteUT componente = new ComponenteUT();

		String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
		componente.setIdTipoComponente(dto.getIdTipoComponente());
		componente.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
		componente.setIdComponente(codiceComp);
		componente.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
		componente.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));
		
		if (GenericUtil.isNotNullOrEmpty(dto.getDataDismiss()))
		{
			componente.setFlgDismesso(true);
		}
		
		componente.setIdFabbricante(ConvertUtil.convertToInteger(dto.getFkMarca()));
		componente.setDescFabbricante(dto.getDesMarca());
		componente.setModello(dto.getModello());
		componente.setMatricola(dto.getMatricola());

		componente.setPortVentMandLs(ConvertUtil.convertToString(dto.getPortataMandataLs()));
		componente.setPortVentMandKw(ConvertUtil.convertToString(dto.getPotenzaMandataKw()));
		componente.setPortVentRipresaLs(ConvertUtil.convertToString(dto.getPortataRipresaLs()));
		componente.setPortVentRipresaKw(ConvertUtil.convertToString(dto.getPotenzaRipresaKw()));
		
		return componente;
	}
	
	public static SigitTCompUtDto getSigitTCompUT(ComponenteUT comp, BigDecimal codImpianto) {
		
		SigitTCompUtDto dto = new SigitTCompUtDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(comp.getProgrComponente()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_UT);
		dto.setDataInstall(ConvertUtil.convertToSqlDate(comp.getDataInstallazione()));
		
		dto.setPortataMandataLs(ConvertUtil.convertToBigDecimal(comp.getPortVentMandLs()));
		dto.setPotenzaMandataKw(ConvertUtil.convertToBigDecimal(comp.getPortVentMandKw()));
		dto.setPortataRipresaLs(ConvertUtil.convertToBigDecimal(comp.getPortVentRipresaLs()));
		dto.setPotenzaRipresaKw(ConvertUtil.convertToBigDecimal(comp.getPortVentRipresaKw()));
		
		return dto;
	}
	
	public static SigitTCompXDto getSigitTCompX(ComponenteUT comp, BigDecimal codImpianto, String cfUtente) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(comp.getProgrComponente()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_UT);
		dto.setDataInstall(ConvertUtil.convertToSqlDate(comp.getDataInstallazione()));
		dto.setDataDismiss(ConvertUtil.convertToSqlDate(comp.getDataDismissione()));
		dto.setFkMarca(ConvertUtil.convertToBigDecimal(comp.getIdFabbricante()));
		dto.setModello(comp.getModello());
		dto.setMatricola(comp.getMatricola());
		
		dto.setUtenteUltMod(cfUtente);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		return dto;
	}
	
	// SCHEDA 9.5 UT - fine

	//////////////////////////////////////////
	
	
	/////////////////////////////////////////
	
	// SCHEDA 9.6 RC - inizio

	public static ArrayList<Componente> mapToComponentiPrincRC(List<SigitVCompRcDto> compList) {
		log.debug("mapToComponentiPrincRC: START");
		BigDecimal progressivo = null;
		ArrayList<Componente> listComp = new ArrayList<Componente>();

		Componente comp = null;

		if(compList.size()>0)
		{
			progressivo = compList.get(0).getProgressivo();

			log.debug("mapping scheda RC");

			int numInProgr = 1;

			for (int i=0; i<compList.size();i++) {
				log.debug("i="+i +", posInProgr = " + numInProgr);
				SigitVCompRcDto dto = compList.get(i);
				log.debug("RC: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
				if(!progressivo.equals(dto.getProgressivo()))
				{
					log.debug("cambio progressivo");

					listComp.add(comp);
					progressivo = dto.getProgressivo();
					numInProgr = 1;
				}
				if(numInProgr++ == 1)
				{
					log.debug("RC principale");
					comp = mapToComponenteRC(dto);
				}

			}

			listComp.add(comp);
		}
		
		log.debug("mapToComponentiPrincRC: END");
		
		return listComp;
	}
	
	
	public static ComponenteRC mapToComponentePrincRC(List<SigitVCompRcDto> compList) {
		log.debug("mapToComponentePrincRC: START");
		
		ComponenteRC componente = new ComponenteRC();
		
		if (compList != null && compList.size() > 0)
		{
			// Il primo elemento e' il principale
			SigitVCompRcDto dto = compList.get(0);
			
			componente = mapToComponenteDettRC(dto);
			
		}
		
		log.debug("mapToComponentePrincRC: END");
		
		return componente;
	}
	
	public static ArrayList<ComponenteRC> mapToComponenteSostRC(List<SigitVCompRcDto> compList, boolean isRiattivabile) {
		log.debug("mapToComponenteSostRC: START");

		ArrayList<ComponenteRC> listComp = new ArrayList<ComponenteRC>();
		
		// Devo escludere il primo perche' e' il principale
		if (compList != null && compList.size() > 1)
		{
			SigitVCompRcDto dto = null;
			ComponenteRC comp = null;

			for (int i = 1; i < compList.size(); i++) {
				dto = compList.get(i);
				
				comp = mapToComponenteDettRC(dto);
				
				if (i == 1 && isRiattivabile)
				{
					comp.setRipristina(Constants.LABEL_RIPRISTINA);
					comp.setRipristinaAttivabile(true);
				}
				
				listComp.add(comp);

			}
		}
		
		log.debug("mapToComponenteSostAC: END");
		
		return listComp;
	}
	
	private static Componente mapToComponenteRC(SigitVCompRcDto dto) {
		
		String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
		Componente comp = new Componente();
		comp.setIdComponente(codiceComp);
		comp.setIdTipoComponente(dto.getIdTipoComponente());
		comp.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
		comp.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
		comp.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));
		comp.setDescFabbricante(dto.getDesMarca());
		comp.setModello(dto.getModello());
		return comp;
	}

	private static ComponenteRC mapToComponenteDettRC(SigitVCompRcDto dto) {
		
		ComponenteRC componente = new ComponenteRC();

		String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
		componente.setIdTipoComponente(dto.getIdTipoComponente());
		componente.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
		componente.setIdComponente(codiceComp);
		componente.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
		componente.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));
		
		if (GenericUtil.isNotNullOrEmpty(dto.getDataDismiss()))
		{
			componente.setFlgDismesso(true);
		}
		
		componente.setTipologia(dto.getTipologia());

		if (ConvertUtil.convertToBooleanAllways(dto.getFlgInstallato()))
		{
			componente.setTipoInstall(ConvertUtil.convertToString(Constants.ID_TIPO_INST_INSTALLATO));
		}
		else if (ConvertUtil.convertToBooleanAllways(dto.getFlgIndipendente()))
		{
			componente.setTipoInstall(ConvertUtil.convertToString(Constants.ID_TIPO_INST_INDIPENDENTE));
		}
		
		componente.setPortVentMandLs(ConvertUtil.convertToString(dto.getPortataMandataLs()));
		componente.setPortVentMandKw(ConvertUtil.convertToString(dto.getPotenzaMandataKw()));
		componente.setPortVentRipresaLs(ConvertUtil.convertToString(dto.getPortataRipresaLs()));
		componente.setPortVentRipresaKw(ConvertUtil.convertToString(dto.getPotenzaRipresaKw()));
		
		return componente;
	}
	
	public static SigitTCompRcDto getSigitTCompRC(ComponenteRC comp, BigDecimal codImpianto) {
		
		SigitTCompRcDto dto = new SigitTCompRcDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(comp.getProgrComponente()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_RC);
		dto.setDataInstall(ConvertUtil.convertToSqlDate(comp.getDataInstallazione()));
		
		dto.setTipologia(comp.getTipologia());
		
		if (GenericUtil.isNotNullOrEmpty(comp.getTipoInstall()))
		{
			int idTipoInst = ConvertUtil.convertToInteger(comp.getTipoInstall()).intValue();
			
			if (Constants.ID_TIPO_INST_INSTALLATO == idTipoInst)
			{
				dto.setFlgInstallato(ConvertUtil.convertToBigDecimal(Constants.SI_1));
				dto.setFlgIndipendente(ConvertUtil.convertToBigDecimal(Constants.NO_0));
			}
			else if (Constants.ID_TIPO_INST_INDIPENDENTE == idTipoInst)
			{
				dto.setFlgInstallato(ConvertUtil.convertToBigDecimal(Constants.NO_0));
				dto.setFlgIndipendente(ConvertUtil.convertToBigDecimal(Constants.SI_1));
			}

		}
		
		dto.setPortataMandataLs(ConvertUtil.convertToBigDecimal(comp.getPortVentMandLs()));
		dto.setPotenzaMandataKw(ConvertUtil.convertToBigDecimal(comp.getPortVentMandKw()));
		dto.setPortataRipresaLs(ConvertUtil.convertToBigDecimal(comp.getPortVentRipresaLs()));
		dto.setPotenzaRipresaKw(ConvertUtil.convertToBigDecimal(comp.getPortVentRipresaKw()));
		
		
		return dto;
	}
	
	public static SigitTCompXDto getSigitTCompX(ComponenteRC comp, BigDecimal codImpianto, String cfUtente) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(comp.getProgrComponente()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_RC);
		dto.setDataInstall(ConvertUtil.convertToSqlDate(comp.getDataInstallazione()));
		dto.setDataDismiss(ConvertUtil.convertToSqlDate(comp.getDataDismissione()));
		
		dto.setUtenteUltMod(cfUtente);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		return dto;
	}
	
	// SCHEDA 9.6 RC - fine

/////////////////////////////////////////
	
	// SCHEDA 10.1 VM - inizio

	public static ArrayList<Componente> mapToComponentiPrincVM(List<SigitVCompVmDto> compList) {
		log.debug("mapToComponentiPrincVM: START");
		BigDecimal progressivo = null;
		ArrayList<Componente> listComp = new ArrayList<Componente>();

		Componente comp = null;

		if(compList.size()>0)
		{
			progressivo = compList.get(0).getProgressivo();

			log.debug("mapping scheda VM");

			int numInProgr = 1;

			for (int i=0; i<compList.size();i++) {
				log.debug("i="+i +", posInProgr = " + numInProgr);
				SigitVCompVmDto dto = compList.get(i);
				log.debug("VM: progr:"+dto.getProgressivo()+", data install: "+ dto.getDataInstall());
				if(!progressivo.equals(dto.getProgressivo()))
				{
					log.debug("cambio progressivo");

					listComp.add(comp);
					progressivo = dto.getProgressivo();
					numInProgr = 1;
				}
				if(numInProgr++ == 1)
				{
					log.debug("VM principale");
					comp = mapToComponenteVM(dto);
				}

			}

			listComp.add(comp);
		}

		log.debug("mapToComponentiPrincVM: END");

		return listComp;
	}


	public static ComponenteVM mapToComponentePrincVM(List<SigitVCompVmDto> compList) {
		log.debug("mapToComponentePrincVM: START");

		ComponenteVM componente = new ComponenteVM();

		if (compList != null && compList.size() > 0)
		{
			// Il primo elemento e' il principale
			SigitVCompVmDto dto = compList.get(0);

			componente = mapToComponenteDettVM(dto);

		}

		log.debug("mapToComponentePrincVM: END");

		return componente;
	}

	public static ArrayList<ComponenteVM> mapToComponenteSostVM(List<SigitVCompVmDto> compList, boolean isRiattivabile) {
		log.debug("mapToComponenteSostVM: START");

		ArrayList<ComponenteVM> listComp = new ArrayList<ComponenteVM>();

		// Devo escludere il primo perche' e' il principale
		if (compList != null && compList.size() > 1)
		{
			SigitVCompVmDto dto = null;
			ComponenteVM comp = null;

			for (int i = 1; i < compList.size(); i++) {
				dto = compList.get(i);

				comp = mapToComponenteDettVM(dto);

				if (i == 1 && isRiattivabile)
				{
					comp.setRipristina(Constants.LABEL_RIPRISTINA);
					comp.setRipristinaAttivabile(true);
				}

				listComp.add(comp);

			}
		}

		log.debug("mapToComponenteSostAC: END");

		return listComp;
	}

	private static Componente mapToComponenteVM(SigitVCompVmDto dto) {

		String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
		Componente comp = new Componente();
		comp.setIdComponente(codiceComp);
		comp.setIdTipoComponente(dto.getIdTipoComponente());
		comp.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
		comp.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
		comp.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));
		comp.setDescFabbricante(dto.getDesMarca());
		comp.setModello(dto.getModello());
		comp.setTipologia(dto.getDesDettaglioVm());
		
		return comp;
	}

	private static ComponenteVM mapToComponenteDettVM(SigitVCompVmDto dto) {

		ComponenteVM componente = new ComponenteVM();

		String codiceComp = dto.getIdTipoComponente() + Constants.INTERVAL_SEP + dto.getProgressivo();
		componente.setIdTipoComponente(dto.getIdTipoComponente());
		componente.setProgrComponente(ConvertUtil.convertToString(dto.getProgressivo()));
		componente.setIdComponente(codiceComp);
		componente.setDataInstallazione(ConvertUtil.convertToString(dto.getDataInstall()));
		componente.setDataDismissione(ConvertUtil.convertToString(dto.getDataDismiss()));

		if (GenericUtil.isNotNullOrEmpty(dto.getDataDismiss()))
		{
			componente.setFlgDismesso(true);
		}

		if (GenericUtil.isNotNullOrEmpty(dto.getFkDettaglioVm()))
		{
			componente.setIdDettVm(ConvertUtil.convertToString(dto.getFkDettaglioVm()));
		}
		
		if (GenericUtil.isNotNullOrEmpty(dto.getAltroTipologia()))
		{
			componente.setDescAltro(dto.getAltroTipologia());
		}
		
		componente.setPortMassima(ConvertUtil.convertToString(dto.getPortataMaxAriaM3h()));
		componente.setRendimentoRec(dto.getRendimentoCop());
		componente.setDescFabbricante(dto.getDesMarca());
		componente.setIdFabbricante(ConvertUtil.convertToInteger(dto.getFkMarca()));
		componente.setModello(dto.getModello());

		return componente;
	}

	public static SigitTCompVmDto getSigitTCompVM(ComponenteVM comp, BigDecimal codImpianto) {

		SigitTCompVmDto dto = new SigitTCompVmDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(comp.getProgrComponente()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_VM);
		dto.setDataInstall(ConvertUtil.convertToSqlDate(comp.getDataInstallazione()));

		
		if (GenericUtil.isNotNullOrEmpty(comp.getIdDettVm()))
		{
			dto.setFkDettaglioVm(ConvertUtil.convertToBigDecimal(comp.getIdDettVm()));
			dto.setAltroTipologia(comp.getDescAltro());
		}

		dto.setPortataMaxAriaM3h(ConvertUtil.convertToBigDecimal(comp.getPortMassima()));
		dto.setRendimentoCop(comp.getRendimentoRec());

		return dto;
	}

	public static SigitTCompXDto getSigitTCompX(ComponenteVM comp, BigDecimal codImpianto, String cfUtente) {
		SigitTCompXDto dto = new SigitTCompXDto();
		dto.setCodiceImpianto(codImpianto);
		dto.setProgressivo(ConvertUtil.convertToBigDecimal(comp.getProgrComponente()));
		dto.setIdTipoComponente(Constants.TIPO_COMPONENTE_VM);
		dto.setDataInstall(ConvertUtil.convertToSqlDate(comp.getDataInstallazione()));
		dto.setDataDismiss(ConvertUtil.convertToSqlDate(comp.getDataDismissione()));
		dto.setModello(comp.getModello());
		dto.setFkMarca(ConvertUtil.convertToBigDecimal(comp.getIdFabbricante()));
		
		dto.setUtenteUltMod(cfUtente);
		dto.setDataUltMod(DateUtil.getSqlDataCorrente());
		return dto;
	}

	// SCHEDA 10.1 VM - fine

	//////////////////////////////////////////
	
	public static ArrayList<Scheda12> mapToScheda12(List<SigitVRicercaAllegatiDto> listControlli) {
		log.debug("mapToScheda12: START");

		ArrayList<Scheda12> listComp = new ArrayList<Scheda12>();
		
		if (listControlli != null && listControlli.size() > 0)
		{
			Scheda12 scheda = null;

			for (SigitVRicercaAllegatiDto dto : listControlli) {
				
				scheda = new Scheda12();
				scheda.setIdAllegato(ConvertUtil.convertToInteger(dto.getIdAllegato()));
				scheda.setDataControllo(ConvertUtil.convertToString(dto.getDataControllo()));


				if (dto.getRuoloFunz().equalsIgnoreCase(Constants.RUOLO_ISPETTORE))
				{
					scheda.setCCIAA(Constants.DESC_ISPEZIONE);
					scheda.setRagSocManut(Constants.DESC_PG_RUOLO_ISPETTORE);
				}
				else
				{
					scheda.setCCIAA(getCodiceRea(dto.getPgSiglaRea(), ConvertUtil.convertToInteger(dto.getPgNumeroRea())));
					scheda.setRagSocManut(dto.getPgDenominazione());
				}
				
				scheda.setDesctipoAllegato(dto.getDesTipoDocumento());
//				scheda.setDescFlgRaccomand(ConvertUtil.convertToString(ConvertUtil.convertToBoolean(dto.getFRaccomandazioni())));
//				scheda.setDescFlgPrescrizioni(ConvertUtil.convertToString(ConvertUtil.convertToBoolean(dto.getFPrescrizioni())));
				//segnalazione 150 test_libretto
				scheda.setDescFlgRaccomand(!StringUtils.isEmpty(dto.getFRaccomandazioni()) ? "Si" : "No");
				scheda.setDescFlgPrescrizioni(!StringUtils.isEmpty(dto.getFPrescrizioni()) ? "Si" : "No");
				
				scheda.setElencoComponenti(MapDto.mapToElencoApparecchiatureSplit(dto.getElencoApparecchiature()));
				
				listComp.add(scheda);
			}
			
		}
		
		log.debug("mapToScheda12: END");
		
		return listComp;
	}
	
	public static ArrayList<Scheda15> mapToScheda15(List<SigitVRicercaAllegatiDto> listControlli) {
		log.debug("mapToScheda15: START");

		ArrayList<Scheda15> listComp = new ArrayList<Scheda15>();
		if (listControlli != null && listControlli.size() > 0)
		{
			Scheda15 scheda = null;

			for (SigitVRicercaAllegatiDto dto : listControlli) {
				
				scheda = new Scheda15();
				scheda.setIdAllegato(ConvertUtil.convertToInteger(dto.getIdAllegato()));
				scheda.setDataControllo(ConvertUtil.convertToString(dto.getDataControllo()));


				scheda.setRagSocManut(dto.getPgDenominazione());
				scheda.setCCIAA(getCodiceRea(dto.getPgSiglaRea(), ConvertUtil.convertToInteger(dto.getPgNumeroRea())));
				scheda.setDescTipoIntervento(dto.getDesTipoManutenzione());
				
				//scheda.setDescTipoIntervento(dto.getDes);
				scheda.setInterventoEntro(ConvertUtil.convertToString(dto.getFInterventoEntro()));
				
				StringBuffer note = new StringBuffer();
				
				note.append("Comp.: ");
				note.append(MapDto.mapToElencoApparecchiatureSplit(dto.getElencoApparecchiature()));
				
				if (GenericUtil.isNotNullOrEmpty(dto.getFPrescrizioni()))
				{
					note.append("<BR>Prescr.: ");
					note.append(dto.getFPrescrizioni());
				}
				
				if (GenericUtil.isNotNullOrEmpty(dto.getFRaccomandazioni()))
				{
					note.append("<BR>Racc.: ");
					note.append(dto.getFRaccomandazioni());
				}
				
				if (GenericUtil.isNotNullOrEmpty(dto.getFOsservazioni()))
				{
					note.append("<BR>Oss.: ");
					note.append(dto.getFOsservazioni());
				}
				
				scheda.setNote(GenericUtil.getSubstring(note.toString(), Constants.MAX_2030_LEN));

				scheda.setDescStato(getDescStatoRapManutenzione(dto.getFkStatoRapp(), dto.getFkTipoDocumento(), dto.getDesStatoRapp()));

				listComp.add(scheda);
			}
			
		}
		
		log.debug("mapToScheda15: END");
		
		return listComp;
	}
	
	public static Scheda11Intest mapToScheda11IntestOld(SigitTImpiantoDto impianto, String componente) {
		Scheda11Intest scheda11Intest = new Scheda11Intest();

		scheda11Intest.setComponente(componente);
		scheda11Intest.setFlgNormaUni103891(ConvertUtil.convertToBooleanAllways(impianto.getL111FlgNormaUni103891()));
		scheda11Intest.setAltraNorma(impianto.getL111AltraNorma());
		
		return scheda11Intest;
	}
	
	
	public static ArrayList<Scheda11> mapToScheda11_1(List<SigitVCompGtDettDto> listControlliAll)
	{
		ArrayList<Scheda11> scheda11List = new ArrayList<Scheda11>();

		int righeMax = 20;
		int righeNum = 0; // questo valore serve per la paginazione, qui non siamo nella paginazione quindi passo 0

		scheda11List = mapToScheda11_1_Intestazione(scheda11List, righeNum, righeMax);
		scheda11List = mapToScheda11_1_Dati(scheda11List, listControlliAll, righeNum);
		
		return scheda11List;
	}
	
	public static ArrayList<Scheda11> mapToScheda11_1Pag(List<SigitVCompGtDettDto> listControlliAll)
	{
		ArrayList<Scheda11> scheda11List = new ArrayList<Scheda11>();

		List<SigitVCompGtDettDto> listControlli = null;
		
		int righeMax = 20;
		int righeNum = 0; // per la paginazione

		int listAll = listControlliAll.size();
		int listAnalizzati = 0; 
		
		int collMax = Constants.MAX_NUMERO_NON_PAGINATO;
		int listStart = 0;
		int listStop = 0;
		
		
		boolean condition = true;
		
		while (condition) {
			
			if (listAnalizzati <= listAll)
			{
				// devo calcolare lo stop
				if ((listAnalizzati+collMax) >= listAll)
				{
					listStop = listAll;
					
					// Al prossimo giro devo uscire
					condition = false;
				}
				else
				{
					listStop = listAnalizzati+collMax;
				}
				
			}
			
			
			// Recupero solo il numero massimo per pagina (orizzontale, 6 per esempio)
			listControlli = listControlliAll.subList(listStart, listStop);
			
			scheda11List = mapToScheda11_1_Intestazione(scheda11List, righeNum, righeMax);
			scheda11List = mapToScheda11_1_Dati(scheda11List, listControlli, righeNum);
			
			listStart = listStop;
			listAnalizzati = listStop;
			righeNum = righeNum + righeMax;

		}
		
		return scheda11List;
	}
	
	private static ArrayList<Scheda11> mapToScheda11_1_Intestazione(ArrayList<Scheda11> scheda11List, int rigaNum, int righeMax)
	{

		// Il numero  uguale alle righe per singola pagina
		for (int i = 0; i < righeMax; i++) {
			scheda11List.add(new Scheda11());
		}


		// Ho settato le intestazioni
		
		//scheda11List.get(rigaNum++).setIntestazione("DATA");
		scheda11List.get(rigaNum++).setIntestazione("Numero modulo");
		scheda11List.get(rigaNum++).setIntestazione("Portata termica effettiva (kW)");
		
		// riga4
		scheda11List.get(rigaNum++).setIntestazione("<B>VALORI MISURATI</B>");
		scheda11List.get(rigaNum++).setIntestazione("Temperatura fumi (C)");
		scheda11List.get(rigaNum++).setIntestazione("Temperatura aria comburente (C)");
		scheda11List.get(rigaNum++).setIntestazione("O2 (%)");
		scheda11List.get(rigaNum++).setIntestazione("CO2 (%)");
		scheda11List.get(rigaNum++).setIntestazione("Indice di Bacharach");
		scheda11List.get(rigaNum++).setIntestazione("CO nei fumi secchi (ppm v/v)");
		scheda11List.get(rigaNum++).setIntestazione("Portata combustibile (m3/h oppure kg/h)");
		scheda11List.get(rigaNum++).setIntestazione("NOx");
		
		// riga13
		scheda11List.get(rigaNum++).setIntestazione("<B>VALORI CALCOLATI</B>");
		scheda11List.get(rigaNum++).setIntestazione("CO nei fumi secchi e senz'aria (ppm v/v)");
		scheda11List.get(rigaNum++).setIntestazione("Rendimento di combustione nc (%)");

		// riga16
		scheda11List.get(rigaNum++).setIntestazione("<B>VERIFICHE</B>");
		scheda11List.get(rigaNum++).setIntestazione("Rispetta l'indice di Bacharach");
		scheda11List.get(rigaNum++).setIntestazione("CO nei fumi secchi e senz'aria <= 1.000 ppm v/v");
		scheda11List.get(rigaNum++).setIntestazione("n minimo di legge (%)");
		scheda11List.get(rigaNum++).setIntestazione("nc >=n minimo");
		scheda11List.get(rigaNum++).setIntestazione("FIRMA");

		
		return scheda11List;
	}
	
	private static String getPortataCombustibileCompleto (SigitVCompGtDettDto dto) {
		String output = "";
		if (dto != null && dto.getL111PortataCombustibile() != null) {
			output += ConvertUtil.convertToString(dto.getL111PortataCombustibile());
			
			if (dto.getL111PortataCombustibileUm() != null) {
				output += " " + dto.getL111PortataCombustibileUm();
			}
		}
		return output;
	}
	
	private static ArrayList<Scheda11> mapToScheda11_1_Dati(ArrayList<Scheda11> scheda11List, List<SigitVCompGtDettDto> listControlli, int rigaNum)
	{
		
		int riga = rigaNum;
		int collMax = listControlli.size();
		// Devo settare i dati
		int i = 0;
		SigitVCompGtDettDto dto  = null;

		if (collMax > 0)
		{
			dto  = listControlli.get(i++);
			riga = rigaNum;

			//scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getDataControllo()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getENModuloTermico()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getEPotTermFocolKw()));

			// riga4
			scheda11List.get(riga++).setCol1(""); // VALORI MISURATI 
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getETempFumiC()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getETempAriaC()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getEO2Perc()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getECo2Perc()));

			scheda11List.get(riga++).setCol1(GenericUtil.getMinMedMaxFormat(dto.getEBacharachMin(), dto.getEBacharachMed(), dto.getEBacharachMax()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getL111CoNoAriaPpm()));
			scheda11List.get(riga++).setCol1(getPortataCombustibileCompleto(dto));
			scheda11List.get(riga++).setCol1(getNOxToString(dto.getENoxMgKwh(), dto.getENoxPpm()));


			// riga13
			scheda11List.get(riga++).setCol1(""); // VALORI CALCOLATI
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getECoCorrettoPpm()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getERendCombPerc()));

			// riga16
			scheda11List.get(riga++).setCol1(""); // VERIFICHE
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToStringSiNo(dto.getL111FlgRispettaBacharach())); // E' un flag
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToStringSiNo(dto.getL111FlgCoMin1000())); // E' un flag
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getERendMinLeggePerc()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToStringSiNo(dto.getL111FlgRendMagRendMin())); // E' un flag

			String firma = dto.getSiglaRea() + Constants.INTERVAL_SEP + dto.getNumeroRea();
			scheda11List.get(riga++).setCol1(firma);
		}

		if (collMax > 1)
		{
			dto  = listControlli.get(i++);
			riga = rigaNum;

			//scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getDataControllo()));
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getENModuloTermico()));
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getEPotTermFocolKw()));

			scheda11List.get(riga++).setCol2(""); // VALORI MISURATI 
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getETempFumiC()));
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getETempAriaC()));
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getEO2Perc()));
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getECo2Perc()));

			scheda11List.get(riga++).setCol2(GenericUtil.getMinMedMaxFormat(dto.getEBacharachMin(), dto.getEBacharachMed(), dto.getEBacharachMax()));
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getL111CoNoAriaPpm()));
			scheda11List.get(riga++).setCol2(getPortataCombustibileCompleto(dto));
			scheda11List.get(riga++).setCol2(getNOxToString(dto.getENoxMgKwh(), dto.getENoxPpm()));

			scheda11List.get(riga++).setCol2(""); // VALORI CALCOLATI
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getECoCorrettoPpm()));
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getERendCombPerc()));

			scheda11List.get(riga++).setCol2(""); // VERIFICHE
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToStringSiNo(dto.getL111FlgRispettaBacharach())); // E' un flag
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToStringSiNo(dto.getL111FlgCoMin1000())); // E' un flag
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getERendMinLeggePerc()));
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToStringSiNo(dto.getL111FlgRendMagRendMin())); // E' un flag

			String firma = dto.getSiglaRea() + Constants.INTERVAL_SEP + dto.getNumeroRea();
			scheda11List.get(riga++).setCol2(firma);

		}

		if (collMax > 2)
		{
			dto  = listControlli.get(i++);
			riga = rigaNum;

			//scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getDataControllo()));
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getENModuloTermico()));
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getEPotTermFocolKw()));

			scheda11List.get(riga++).setCol3(""); // VALORI MISURATI 
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getETempFumiC()));
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getETempAriaC()));
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getEO2Perc()));
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getECo2Perc()));

			scheda11List.get(riga++).setCol3(GenericUtil.getMinMedMaxFormat(dto.getEBacharachMin(), dto.getEBacharachMed(), dto.getEBacharachMax()));
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getL111CoNoAriaPpm()));
			scheda11List.get(riga++).setCol3(getPortataCombustibileCompleto(dto));
			scheda11List.get(riga++).setCol3(getNOxToString(dto.getENoxMgKwh(), dto.getENoxPpm()));

			scheda11List.get(riga++).setCol3(""); // VALORI CALCOLATI
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getECoCorrettoPpm()));
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getERendCombPerc()));

			scheda11List.get(riga++).setCol3(""); // VERIFICHE
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToStringSiNo(dto.getL111FlgRispettaBacharach())); // E' un flag
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToStringSiNo(dto.getL111FlgCoMin1000())); // E' un flag
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getERendMinLeggePerc()));
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToStringSiNo(dto.getL111FlgRendMagRendMin())); // E' un flag

			String firma = dto.getSiglaRea() + Constants.INTERVAL_SEP + dto.getNumeroRea();
			scheda11List.get(riga++).setCol3(firma);
		}

		if (collMax > 3)
		{
			dto  = listControlli.get(i++);
			riga = rigaNum;

			//scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getDataControllo()));
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getENModuloTermico()));
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getEPotTermFocolKw()));

			scheda11List.get(riga++).setCol4(""); // VALORI MISURATI 
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getETempFumiC()));
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getETempAriaC()));
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getEO2Perc()));
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getECo2Perc()));

			scheda11List.get(riga++).setCol4(GenericUtil.getMinMedMaxFormat(dto.getEBacharachMin(), dto.getEBacharachMed(), dto.getEBacharachMax()));
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getL111CoNoAriaPpm()));
			scheda11List.get(riga++).setCol4(getPortataCombustibileCompleto(dto));
			scheda11List.get(riga++).setCol4(getNOxToString(dto.getENoxMgKwh(), dto.getENoxPpm()));

			scheda11List.get(riga++).setCol4(""); // VALORI CALCOLATI
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getECoCorrettoPpm()));
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getERendCombPerc()));

			scheda11List.get(riga++).setCol4(""); // VERIFICHE
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToStringSiNo(dto.getL111FlgRispettaBacharach())); // E' un flag
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToStringSiNo(dto.getL111FlgCoMin1000())); // E' un flag
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getERendMinLeggePerc()));
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToStringSiNo(dto.getL111FlgRendMagRendMin())); // E' un flag

			String firma = dto.getSiglaRea() + Constants.INTERVAL_SEP + dto.getNumeroRea();
			scheda11List.get(riga++).setCol4(firma);
		}

		/*
		if (collMax > 4)
		{
			dto  = listControlli.get(i++);
			riga = rigaNum;

			//scheda11List.get(riga++).setCol5(ConvertUtil.convertToString(dto.getDataControllo()));
			scheda11List.get(riga++).setCol5(dto.getENModuloTermico());
			scheda11List.get(riga++).setCol5(ConvertUtil.convertToString(dto.getEPotTermFocolKw()));

			scheda11List.get(riga++).setCol5(""); // VALORI MISURATI 
			scheda11List.get(riga++).setCol5(ConvertUtil.convertToString(dto.getETempFumiC()));
			scheda11List.get(riga++).setCol5(ConvertUtil.convertToString(dto.getETempAriaC()));
			scheda11List.get(riga++).setCol5(ConvertUtil.convertToString(dto.getEO2Perc()));
			scheda11List.get(riga++).setCol5(ConvertUtil.convertToString(dto.getECo2Perc()));

			scheda11List.get(riga++).setCol5(GenericUtil.getBacharachFormat(dto.getEBacharachMin(), dto.getEBacharachMed(), dto.getEBacharachMax()));
			scheda11List.get(riga++).setCol5(ConvertUtil.convertToString(dto.getL111CoNoAriaPpm()));
			scheda11List.get(riga++).setCol5(ConvertUtil.convertToString(dto.getL111PortataCombustibile()));
			scheda11List.get(riga++).setCol5(ConvertUtil.convertToString(dto.getENoxPpm()));

			scheda11List.get(riga++).setCol5(""); // VALORI CALCOLATI
			scheda11List.get(riga++).setCol5(ConvertUtil.convertToString(dto.getECoCorrettoPpm()));
			scheda11List.get(riga++).setCol5(ConvertUtil.convertToString(dto.getERendCombPerc()));

			scheda11List.get(riga++).setCol5(""); // VERIFICHE
			scheda11List.get(riga++).setCol5(ConvertUtil.convertToStringSiNo(dto.getL111FlgRispettaBacharach())); // E' un flag
			scheda11List.get(riga++).setCol5(ConvertUtil.convertToStringSiNo(dto.getL111FlgCoMin1000())); // E' un flag
			scheda11List.get(riga++).setCol5(ConvertUtil.convertToString(dto.getERendMinLeggePerc()));
			scheda11List.get(riga++).setCol5(ConvertUtil.convertToStringSiNo(dto.getL111FlgRendMagRendMin())); // E' un flag

			String firma = dto.getSiglaRea() + Constants.INTERVAL_SEP + dto.getNumeroRea();
			scheda11List.get(riga++).setCol5(firma);
		}

		if (collMax > 5)
		{
			dto  = listControlli.get(i++);
			riga = rigaNum;

			//scheda11List.get(riga++).setCol6(ConvertUtil.convertToString(dto.getDataControllo()));
			scheda11List.get(riga++).setCol6(dto.getENModuloTermico());
			scheda11List.get(riga++).setCol6(ConvertUtil.convertToString(dto.getEPotTermFocolKw()));

			scheda11List.get(riga++).setCol6(""); // VALORI MISURATI 
			scheda11List.get(riga++).setCol6(ConvertUtil.convertToString(dto.getETempFumiC()));
			scheda11List.get(riga++).setCol6(ConvertUtil.convertToString(dto.getETempAriaC()));
			scheda11List.get(riga++).setCol6(ConvertUtil.convertToString(dto.getEO2Perc()));
			scheda11List.get(riga++).setCol6(ConvertUtil.convertToString(dto.getECo2Perc()));

			scheda11List.get(riga++).setCol6(GenericUtil.getBacharachFormat(dto.getEBacharachMin(), dto.getEBacharachMed(), dto.getEBacharachMax()));
			scheda11List.get(riga++).setCol6(ConvertUtil.convertToString(dto.getL111CoNoAriaPpm()));
			scheda11List.get(riga++).setCol6(ConvertUtil.convertToString(dto.getL111PortataCombustibile()));
			scheda11List.get(riga++).setCol6(ConvertUtil.convertToString(dto.getENoxPpm()));

			scheda11List.get(riga++).setCol6(""); // VALORI CALCOLATI
			scheda11List.get(riga++).setCol6(ConvertUtil.convertToString(dto.getECoCorrettoPpm()));
			scheda11List.get(riga++).setCol6(ConvertUtil.convertToString(dto.getERendCombPerc()));

			scheda11List.get(riga++).setCol6(""); // VERIFICHE
			scheda11List.get(riga++).setCol6(ConvertUtil.convertToStringSiNo(dto.getL111FlgRispettaBacharach())); // E' un flag
			scheda11List.get(riga++).setCol6(ConvertUtil.convertToStringSiNo(dto.getL111FlgCoMin1000())); // E' un flag
			scheda11List.get(riga++).setCol6(ConvertUtil.convertToString(dto.getERendMinLeggePerc()));
			scheda11List.get(riga++).setCol6(ConvertUtil.convertToStringSiNo(dto.getL111FlgRendMagRendMin())); // E' un flag

			String firma = dto.getSiglaRea() + Constants.INTERVAL_SEP + dto.getNumeroRea();
			scheda11List.get(riga++).setCol6(firma);
		}
		*/
		return scheda11List;
	}
	
	// SCHEDA 11_2
	
	public static ArrayList<Scheda11> mapToScheda11_2(List<SigitVCompGfDettDto> listControlliAll)
	{
		ArrayList<Scheda11> scheda11List = new ArrayList<Scheda11>();

		int righeMax = 25;
		int righeNum = 0; // questo valore serve per la paginazione, qui non siamo nella paginazione quindi passo 0

		scheda11List = mapToScheda11_2_Intestazione(scheda11List, righeNum, righeMax);
		scheda11List = mapToScheda11_2_Dati(scheda11List, listControlliAll, righeNum);
		
		return scheda11List;
	}
	
	public static ArrayList<Scheda11> mapToScheda11_2Pag(List<SigitVCompGfDettDto> listControlliAll)
	{
		ArrayList<Scheda11> scheda11List = new ArrayList<Scheda11>();

		List<SigitVCompGfDettDto> listControlli = null;
		
		int righeMax = 25;
		int righeNum = 0; // per la paginazione

		int listAll = listControlliAll.size();
		int listAnalizzati = 0; 
		
		int collMax = Constants.MAX_NUMERO_NON_PAGINATO;
		int listStart = 0;
		int listStop = 0;
		
		
		boolean condition = true;
		
		while (condition) {
			
			if (listAnalizzati <= listAll)
			{
				// devo calcolare lo stop
				if ((listAnalizzati+collMax) >= listAll)
				{
					listStop = listAll;
					
					// Al prossimo giro devo uscire
					condition = false;
				}
				else
				{
					listStop = listAnalizzati+collMax;
				}
				
			}
			
			// Recupero solo il numero massimo per pagina (orizzontale, 6 per esempio)
			listControlli = listControlliAll.subList(listStart, listStop);
			
			scheda11List = mapToScheda11_2_Intestazione(scheda11List, righeNum, righeMax);
			scheda11List = mapToScheda11_2_Dati(scheda11List, listControlli, righeNum);
			
			listStart = listStop;
			listAnalizzati = listStop;
			righeNum = righeNum + righeMax;

		}
		
		return scheda11List;
	}
	
	private static ArrayList<Scheda11> mapToScheda11_2_Intestazione(ArrayList<Scheda11> scheda11List, int rigaNum, int righeMax)
	{

		// Il numero  uguale alle righe per singola pagina
		for (int i = 0; i < righeMax; i++) {
			scheda11List.add(new Scheda11());
		}

		// Ho settato le intestazioni
//		scheda11List.get(rigaNum++).setIntestazione("<B>VALORI MISURATI</B>");
		
		
		scheda11List.get(rigaNum++).setIntestazione("Numero circuito");
		scheda11List.get(rigaNum++).setIntestazione("Assenza perdite refrigerante");
		scheda11List.get(rigaNum++).setIntestazione("Modalita' di funzionamento");
		scheda11List.get(rigaNum++).setIntestazione("Surriscaldamento (K)");
		scheda11List.get(rigaNum++).setIntestazione("Sottoraffreddamento (K)");
		scheda11List.get(rigaNum++).setIntestazione("T condensazione (C)");
		scheda11List.get(rigaNum++).setIntestazione("T evaporazione (C)");
		scheda11List.get(rigaNum++).setIntestazione("T sorgente ingresso lato esterno (C)");
		scheda11List.get(rigaNum++).setIntestazione("T sorgente uscita lato esterno (C)");
		scheda11List.get(rigaNum++).setIntestazione("T ingresso fluido utenze (C)");
		scheda11List.get(rigaNum++).setIntestazione("T uscita fluido utenze (C)");
		
		// riga12
		scheda11List.get(rigaNum++).setIntestazione("<B>Se usata Torre raffreddamento o raffreddatore a fluido</B>");
		scheda11List.get(rigaNum++).setIntestazione("T uscita fluido (C)");
		scheda11List.get(rigaNum++).setIntestazione("T bulbo umido aria (C)");

		// riga15
		scheda11List.get(rigaNum++).setIntestazione("<B>Se usato Scambiatore di calore intermedio</B>");
		scheda11List.get(rigaNum++).setIntestazione("T ingresso fluido sorgente esterna (C)");
		scheda11List.get(rigaNum++).setIntestazione("T uscita fluido sorgente esterna (C)");
		scheda11List.get(rigaNum++).setIntestazione("T ingresso fluido alla macchina (C)");
		scheda11List.get(rigaNum++).setIntestazione("T uscita fluido dalla macchina (C)");

		// riga20
		scheda11List.get(rigaNum++).setIntestazione("&nbsp;"); // riga vuota
		scheda11List.get(rigaNum++).setIntestazione("Potenza assorbita (kW)");
		scheda11List.get(rigaNum++).setIntestazione("Filtri puliti");
		scheda11List.get(rigaNum++).setIntestazione("Verifica superata");
		scheda11List.get(rigaNum++).setIntestazione("<B>Se NO, l'efficienza dell'impianto va ripristinata entro la data del</B>");
		scheda11List.get(rigaNum++).setIntestazione("FIRMA");

		
		return scheda11List;
	}
	
	private static ArrayList<Scheda11> mapToScheda11_2_Dati(ArrayList<Scheda11> scheda11List, List<SigitVCompGfDettDto> listControlli, int rigaNum)
	{
		
		int riga = rigaNum;
		int collMax = listControlli.size();
		// Devo settare i dati
		int i = 0;
		SigitVCompGfDettDto dto  = null;

		if (collMax > 0)
		{
			dto  = listControlli.get(i++);
			riga = rigaNum;

			/*
			scheda11List.get(rigaNum++).setIntestazione("Numero circuito");
			scheda11List.get(rigaNum++).setIntestazione("Assenza perdite refrigerante");
			scheda11List.get(rigaNum++).setIntestazione("Modalita' di funzionamento");
			scheda11List.get(rigaNum++).setIntestazione("Surriscaldamento (K)");
			scheda11List.get(rigaNum++).setIntestazione("Sottoraffreddamento (K)");
			scheda11List.get(rigaNum++).setIntestazione("T condensazione (C)");
			scheda11List.get(rigaNum++).setIntestazione("T evaporazione (C)");
			scheda11List.get(rigaNum++).setIntestazione("T sorgente ingresso lato esterno (C)");
			scheda11List.get(rigaNum++).setIntestazione("T sorgente uscita lato esterno (C)");
			scheda11List.get(rigaNum++).setIntestazione("T ingresso fluido utenze (C)");
			scheda11List.get(rigaNum++).setIntestazione("T uscita fluido utenze (C)");
			*/
			
			scheda11List.get(riga++).setCol1(dto.getENCircuito());
			//segnalazione 151 libretto-web
//			scheda11List.get(riga++).setCol1(ConvertUtil.convertToStringSiNo(dto.getEFlgPerditaGas())); // E' un flag
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToStringSiNoNc(dto.getEFlgPerditaGas(), false));
			scheda11List.get(riga++).setCol1(ConvertUtil.getDescFlgModFunzionamento(dto.getEFlgModProva())); // E' un flag
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getETSurriscC()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getETSottorafC()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getETCondensazioneC()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getETEvaporazioneC()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getETInExtC()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getETOutExtC()));

			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getETInUtenzeC()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getETOutUtenzeC()));

			//scheda11List.get(rigaNum++).setIntestazione("T uscita fluido (C)");
			//scheda11List.get(rigaNum++).setIntestazione("T bulbo umido aria (C)");

			// riga 12
			scheda11List.get(riga++).setCol1(""); // Se usata Torre raffreddamento o raffreddatore a fluido
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getL112TorreTOutFluido()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getL112TorreTBulboUmido()));
			
			
			/*
			// riga15
			scheda11List.get(rigaNum++).setIntestazione("<B>Se usato Scambiatore di calore intermedio</B>");
			scheda11List.get(rigaNum++).setIntestazione("T ingresso fluido sorgente esterna (C)");
			scheda11List.get(rigaNum++).setIntestazione("T uscita fluido sorgente esterna (C)");
			scheda11List.get(rigaNum++).setIntestazione("T ingresso fluido alla macchina (C)");
			scheda11List.get(rigaNum++).setIntestazione("T uscita fluido dalla macchina (C)");
			*/

			// riga15
			scheda11List.get(riga++).setCol1(""); // Se usato Scambiatore di calore intermedio 
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getL112ScambiatoreTInExt()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getL112ScambiatoreTOutExt()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getL112ScambiatTInMacchina()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getL112ScambiatTOutMacchina()));
			
			/*
			// riga20
			scheda11List.get(rigaNum++).setIntestazione("&nbsp;"); // riga vuota
			scheda11List.get(rigaNum++).setIntestazione("Potenza assorbita (kW)");
			scheda11List.get(rigaNum++).setIntestazione("Filtri puliti");
			scheda11List.get(rigaNum++).setIntestazione("Verifica superata");
			scheda11List.get(rigaNum++).setIntestazione("<B>Se NO, l'efficienza dell'impianto va ripristinata entro la data del</B>");
			scheda11List.get(rigaNum++).setIntestazione("FIRMA");
			*/
			
			scheda11List.get(riga++).setCol1(""); // riga vuota
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getL112PotenzaAssorbitaKw()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToStringSiNo(dto.getL112FlgPuliziaFiltri())); // E' un flag
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToStringSiNo(dto.getL112FlgVerificaSuperata())); // E' un flag
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getL112DataRipristino()));

			String firma = dto.getSiglaRea() + Constants.INTERVAL_SEP + dto.getNumeroRea();
			scheda11List.get(riga++).setCol1(firma);
		}

		if (collMax > 1)
		{
			dto  = listControlli.get(i++);
			riga = rigaNum;

			scheda11List.get(riga++).setCol2(dto.getENCircuito());
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToStringSiNoNc(dto.getEFlgPerditaGas(), false)); // E' un flag
			scheda11List.get(riga++).setCol2(ConvertUtil.getDescFlgModFunzionamento(dto.getEFlgModProva())); // E' un flag
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getETSurriscC()));
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getETSottorafC()));
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getETCondensazioneC()));
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getETEvaporazioneC()));
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getETInExtC()));
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getETOutExtC()));

			scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getETInUtenzeC()));
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getETOutUtenzeC()));

			// riga 12
			scheda11List.get(riga++).setCol2(""); // Se usata Torre raffreddamento o raffreddatore a fluido
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getL112TorreTOutFluido()));
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getL112TorreTBulboUmido()));
			
			// riga15
			scheda11List.get(riga++).setCol2(""); // Se usato Scambiatore di calore intermedio 
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getL112ScambiatoreTInExt()));
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getL112ScambiatoreTOutExt()));
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getL112ScambiatTInMacchina()));
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getL112ScambiatTOutMacchina()));
			
			// riga20
			scheda11List.get(riga++).setCol2(""); // riga vuota
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getL112PotenzaAssorbitaKw()));
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToStringSiNo(dto.getL112FlgPuliziaFiltri())); // E' un flag
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToStringSiNo(dto.getL112FlgVerificaSuperata())); // E' un flag
			scheda11List.get(riga++).setCol2(ConvertUtil.convertToString(dto.getL112DataRipristino()));

			String firma = dto.getSiglaRea() + Constants.INTERVAL_SEP + dto.getNumeroRea();
			scheda11List.get(riga++).setCol2(firma);

		}

		if (collMax > 2)
		{
			dto  = listControlli.get(i++);
			riga = rigaNum;

			scheda11List.get(riga++).setCol3(dto.getENCircuito());
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToStringSiNoNc(dto.getEFlgPerditaGas(), false)); // E' un flag
			scheda11List.get(riga++).setCol3(ConvertUtil.getDescFlgModFunzionamento(dto.getEFlgModProva())); // E' un flag
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getETSurriscC()));
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getETSottorafC()));
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getETCondensazioneC()));
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getETEvaporazioneC()));
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getETInExtC()));
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getETOutExtC()));

			scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getETInUtenzeC()));
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getETOutUtenzeC()));

			// riga 12
			scheda11List.get(riga++).setCol3(""); // Se usata Torre raffreddamento o raffreddatore a fluido
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getL112TorreTOutFluido()));
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getL112TorreTBulboUmido()));
			
			// riga15
			scheda11List.get(riga++).setCol3(""); // Se usato Scambiatore di calore intermedio 
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getL112ScambiatoreTInExt()));
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getL112ScambiatoreTOutExt()));
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getL112ScambiatTInMacchina()));
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getL112ScambiatTOutMacchina()));
			
			// riga20
			scheda11List.get(riga++).setCol3(""); // riga vuota
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getL112PotenzaAssorbitaKw()));
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToStringSiNo(dto.getL112FlgPuliziaFiltri())); // E' un flag
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToStringSiNo(dto.getL112FlgVerificaSuperata())); // E' un flag
			scheda11List.get(riga++).setCol3(ConvertUtil.convertToString(dto.getL112DataRipristino()));

			String firma = dto.getSiglaRea() + Constants.INTERVAL_SEP + dto.getNumeroRea();
			scheda11List.get(riga++).setCol3(firma);
		}

		if (collMax > 3)
		{
			dto  = listControlli.get(i++);
			riga = rigaNum;

			scheda11List.get(riga++).setCol4(dto.getENCircuito());
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToStringSiNoNc(dto.getEFlgPerditaGas(), false)); // E' un flag
			scheda11List.get(riga++).setCol4(ConvertUtil.getDescFlgModFunzionamento(dto.getEFlgModProva())); // E' un flag
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getETSurriscC()));
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getETSottorafC()));
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getETCondensazioneC()));
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getETEvaporazioneC()));
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getETInExtC()));
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getETOutExtC()));

			scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getETInUtenzeC()));
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getETOutUtenzeC()));

			// riga 12
			scheda11List.get(riga++).setCol4(""); // Se usata Torre raffreddamento o raffreddatore a fluido
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getL112TorreTOutFluido()));
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getL112TorreTBulboUmido()));
			
			// riga15
			scheda11List.get(riga++).setCol4(""); // Se usato Scambiatore di calore intermedio 
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getL112ScambiatoreTInExt()));
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getL112ScambiatoreTOutExt()));
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getL112ScambiatTInMacchina()));
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getL112ScambiatTOutMacchina()));
			
			// riga20
			scheda11List.get(riga++).setCol4(""); // riga vuota
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getL112PotenzaAssorbitaKw()));
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToStringSiNo(dto.getL112FlgPuliziaFiltri())); // E' un flag
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToStringSiNo(dto.getL112FlgVerificaSuperata())); // E' un flag
			scheda11List.get(riga++).setCol4(ConvertUtil.convertToString(dto.getL112DataRipristino()));

			String firma = dto.getSiglaRea() + Constants.INTERVAL_SEP + dto.getNumeroRea();
			scheda11List.get(riga++).setCol4(firma);
		}

		return scheda11List;
	}
	
	public static ArrayList<Scheda11> mapToScheda11_3(List<SigitVCompScDettDto> listControlliAll)
	{
		ArrayList<Scheda11> scheda11List = new ArrayList<Scheda11>();

		int righeMax = 13;
		int righeNum = 0; // questo valore serve per la paginazione, qui non siamo nella paginazione quindi passo 0

		scheda11List = mapToScheda11_3_Intestazione(scheda11List, righeNum, righeMax);
		scheda11List = mapToScheda11_3_Dati(scheda11List, listControlliAll, righeNum);
		
		return scheda11List;
	}
	
	private static ArrayList<Scheda11> mapToScheda11_3_Intestazione(ArrayList<Scheda11> scheda11List, int rigaNum, int righeMax)
	{

		// Il numero  uguale alle righe per singola pagina
		for (int i = 0; i < righeMax; i++) {
			scheda11List.add(new Scheda11());
		}

		// Ho settato le intestazioni
	
		
		scheda11List.get(rigaNum++).setIntestazione("<B>VALORI MISURATI</B>");
		scheda11List.get(rigaNum++).setIntestazione("Temperatura esterna (C)");
		scheda11List.get(rigaNum++).setIntestazione("Temperatura mandata primario (C)");
		scheda11List.get(rigaNum++).setIntestazione("Temperatura ritorno primario (C)");
		scheda11List.get(rigaNum++).setIntestazione("Temperatura mandata secondario (C)");
		scheda11List.get(rigaNum++).setIntestazione("Temperatura ritorno secondario (C)");
		scheda11List.get(rigaNum++).setIntestazione("Portata fluido primario (m3/ h)");
		scheda11List.get(rigaNum++).setIntestazione("Potenza termica nominale totale (kW)");
		
		
		// riga9
		scheda11List.get(rigaNum++).setIntestazione("<B>ALTRE VERIFICHE EFFETTUATE</B>");
		scheda11List.get(rigaNum++).setIntestazione("Potenza compatibile con i dati di progetto");
		scheda11List.get(rigaNum++).setIntestazione("Stato dellle coibentazioni idoneo");
		scheda11List.get(rigaNum++).setIntestazione("Dispositivi di regolazione e controllo <BR><I>(assenza di trafilamenti sulla valvola di regolazione)</I>");
		scheda11List.get(rigaNum++).setIntestazione("FIRMA");

		
		return scheda11List;
	}
	
	private static ArrayList<Scheda11> mapToScheda11_3_Dati(ArrayList<Scheda11> scheda11List, List<SigitVCompScDettDto> listControlli, int rigaNum)
	{
		
		int riga = rigaNum;
		int collMax = listControlli.size();
		// Devo settare i dati
		int i = 0;
		SigitVCompScDettDto dto  = null;

		if (collMax > 0)
		{
			dto  = listControlli.get(i++);
			riga = rigaNum;
			
			/*
			scheda11List.get(rigaNum++).setIntestazione("<B>VALORI MISURATI</B>");
			scheda11List.get(rigaNum++).setIntestazione("Temperatura esterna (C)");
			scheda11List.get(rigaNum++).setIntestazione("Temperatura mandata primario (C)");
			scheda11List.get(rigaNum++).setIntestazione("Temperatura ritorno primario (C)");
			scheda11List.get(rigaNum++).setIntestazione("Temperatura mandata secondario (C)");
			scheda11List.get(rigaNum++).setIntestazione("Temperatura ritorno secondario (C)");
			scheda11List.get(rigaNum++).setIntestazione("Portata fluido primario (m3/ h)");
			scheda11List.get(rigaNum++).setIntestazione("Potenza termica nominale totale (kW)");
			*/
			
			scheda11List.get(riga++).setCol1(""); // VALORI MISURATI
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getETempExtC()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getETempMandPrimarioC()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getETempRitorPrimarioC()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getETempMandSecondarioC()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getETempRitSecondarioC()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getEPortFluidoM3H()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getEPotenzaTermKw()));

			
			/*
			scheda11List.get(rigaNum++).setIntestazione("<B>ALTRE VERIFICHE EFFETTUATE</B>");
			scheda11List.get(rigaNum++).setIntestazione("Potenza compatibile con i dati di progetto");
			scheda11List.get(rigaNum++).setIntestazione("Stato dellle coibentazioni idoneo");
			scheda11List.get(rigaNum++).setIntestazione("Dispositivi di regolazione e controllo <BR><I>(assenza di trafilamenti sulla valvola di regolazione)</I>");
			scheda11List.get(rigaNum++).setIntestazione("FIRMA");
			*/
			
			// riga9
			scheda11List.get(riga++).setCol1(""); // ALTRE VERIFICHE EFFETTUATE
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToStringSiNoNc(dto.getEFlgPotenzaCompatibile())); // E' un flag
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToStringSiNoNc(dto.getEFlgCoibIdonea())); // E' un flag
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToStringSiNoNc(dto.getEFlgDispFunzionanti())); // E' un flag

			String firma = dto.getSiglaRea() + Constants.INTERVAL_SEP + dto.getNumeroRea();
			scheda11List.get(riga++).setCol1(firma);
		}


		return scheda11List;
	}
	
	
	public static ArrayList<Scheda11> mapToScheda11_4(List<SigitVCompCgDettDto> listControlliAll)
	{
		ArrayList<Scheda11> scheda11List = new ArrayList<Scheda11>();

		int righeMax = 18;
		int righeNum = 0; // questo valore serve per la paginazione, qui non siamo nella paginazione quindi passo 0

		scheda11List = mapToScheda11_4_Intestazione(scheda11List, righeNum, righeMax);
		scheda11List = mapToScheda11_4_Dati(scheda11List, listControlliAll, righeNum);
		
		return scheda11List;
	}
	
	private static ArrayList<Scheda11> mapToScheda11_4_Intestazione(ArrayList<Scheda11> scheda11List, int rigaNum, int righeMax)
	{

		// Il numero  uguale alle righe per singola pagina
		for (int i = 0; i < righeMax; i++) {
			scheda11List.add(new Scheda11());
		}

		// Ho settato le intestazioni
	
		
		scheda11List.get(rigaNum++).setIntestazione("Temperatura aria comburente (C)");
		scheda11List.get(rigaNum++).setIntestazione("Temperatura acqua in uscita (C)");
		scheda11List.get(rigaNum++).setIntestazione("Temperatura acqua in ingresso (C)");
		scheda11List.get(rigaNum++).setIntestazione("Temperatura acqua motore [solo m.c.i.] (C)");
		scheda11List.get(rigaNum++).setIntestazione("Temperatura fumi a valle dello scambiatore fumi (C)");
		scheda11List.get(rigaNum++).setIntestazione("Temperatura fumi a monte dello scambiatore fumi (C)");
		scheda11List.get(rigaNum++).setIntestazione("Potenza elettrica ai morsetti (kW)");
		scheda11List.get(rigaNum++).setIntestazione("Emissioni di monossido di carbonio CO<BR>(mg/Nm3 riportati al 5% di O2 nei fumi)");
		
		// riga9
		scheda11List.get(rigaNum++).setIntestazione("<B>Protezione di interfaccia con la rete<BR>elettrica, verifica per ciascuna fase.<BR>L1/L2/L3</B>");
		scheda11List.get(rigaNum++).setIntestazione("Sovrafrequenza: soglia di intervento (Hz)");
		scheda11List.get(rigaNum++).setIntestazione("Sovrafrequenza: tempo di intervento (s)");
		scheda11List.get(rigaNum++).setIntestazione("Sottofrequenza: soglia di intervento (Hz)");
		scheda11List.get(rigaNum++).setIntestazione("Sottofrequenza: tempo di intervento (s)");
		scheda11List.get(rigaNum++).setIntestazione("Sovratensione: soglia di intervento (V)");
		scheda11List.get(rigaNum++).setIntestazione("Sovratensione: tempo di intervento (s)");
		scheda11List.get(rigaNum++).setIntestazione("Sottotensione: soglia di intervento (V)");
		scheda11List.get(rigaNum++).setIntestazione("Sottotensione: tempo di intervento (s)");
		scheda11List.get(rigaNum++).setIntestazione("FIRMA");

		
		return scheda11List;
	}
	
	private static ArrayList<Scheda11> mapToScheda11_4_Dati(ArrayList<Scheda11> scheda11List, List<SigitVCompCgDettDto> listControlli, int rigaNum)
	{
		
		int riga = rigaNum;
		int collMax = listControlli.size();
		// Devo settare i dati
		int i = 0;
		SigitVCompCgDettDto dto  = null;

		if (collMax > 0)
		{
			dto  = listControlli.get(i++);
			riga = rigaNum;
			
			/*
			scheda11List.get(rigaNum++).setIntestazione("Temperatura aria comburente (C)");
		scheda11List.get(rigaNum++).setIntestazione("Temperatura acqua in uscita (C)");
		scheda11List.get(rigaNum++).setIntestazione("Temperatura acqua in ingresso (C)");
		scheda11List.get(rigaNum++).setIntestazione("Temperatura acqua motore [solo m.c.i.] (C)");
		scheda11List.get(rigaNum++).setIntestazione("Temperatura fumi a valle dello scambiatore fumi (C)");
		scheda11List.get(rigaNum++).setIntestazione("Temperatura fumi a monte dello scambiatore fumi (C)");
		scheda11List.get(rigaNum++).setIntestazione("Potenza elettrica ai morsetti (kW)");
		scheda11List.get(rigaNum++).setIntestazione("Emissioni di monossido di carbonio CO<BR>(mg/Nm3 riportati al 5% di O2 nei fumi)");
		
			*/
			
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getETempAriaC()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getETempH2oOutC()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getETempH2oInC()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getETempH2oMotoreC()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getETempFumiValleC()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getETempFumiMonteC()));
			scheda11List.get(riga++).setCol1(ConvertUtil.convertToString(dto.getEPotenzaMorsettiKw()));
			scheda11List.get(riga++).setCol1(ConvertUtil.getMinMaxFormat(dto.getCoMin(), dto.getCoMax()));


			
			/*
		scheda11List.get(rigaNum++).setIntestazione("<B>Protezione di interfaccia con la rete<BR>elettrica, verifica per ciascuna fase.<BR>L1/L2/L3</B>");
		scheda11List.get(rigaNum++).setIntestazione("Sovrafrequenza: soglia di intervento (Hz)");
		scheda11List.get(rigaNum++).setIntestazione("Sovrafrequenza: tempo di intervento (s)");
		scheda11List.get(rigaNum++).setIntestazione("Sottofrequenza: soglia di intervento (Hz)");
		scheda11List.get(rigaNum++).setIntestazione("Sottofrequenza: tempo di intervento (s)");
		scheda11List.get(rigaNum++).setIntestazione("Sovratensione: soglia di intervento (V)");
		scheda11List.get(rigaNum++).setIntestazione("Sovratensione: tempo di intervento (s)");
		scheda11List.get(rigaNum++).setIntestazione("Sottotensione: soglia di intervento (V)");
		scheda11List.get(rigaNum++).setIntestazione("Sottotensione: tempo di intervento (s)");
		scheda11List.get(rigaNum++).setIntestazione("FIRMA");

			*/
			// riga9
			scheda11List.get(riga++).setCol1(""); // Protezione di interfaccia con la rete

			scheda11List.get(riga++).setCol1(ConvertUtil.getMinMedMaxFormat(dto.getL114SovrafreqSogliaHzMin(), dto.getL114SovrafreqSogliaHzMed(), dto.getL114SovrafreqSogliaHzMax()));
			scheda11List.get(riga++).setCol1(ConvertUtil.getMinMedMaxFormat(dto.getL114SovrafreqTempoSMin(), dto.getL114SovrafreqTempoSMed(), dto.getL114SovrafreqTempoSMax()));
			scheda11List.get(riga++).setCol1(ConvertUtil.getMinMedMaxFormat(dto.getL114SottofreqSogliaHzMin(), dto.getL114SottofreqSogliaHzMed(), dto.getL114SottofreqSogliaHzMax()));
			scheda11List.get(riga++).setCol1(ConvertUtil.getMinMedMaxFormat(dto.getL114SottofreqTempoSMin(), dto.getL114SottofreqTempoSMed(), dto.getL114SottofreqTempoSMax()));
			scheda11List.get(riga++).setCol1(ConvertUtil.getMinMedMaxFormat(dto.getL114SovratensSogliaVMin(), dto.getL114SovratensSogliaVMed(), dto.getL114SovratensSogliaVMax()));
			scheda11List.get(riga++).setCol1(ConvertUtil.getMinMedMaxFormat(dto.getL114SovratensTempoSMin(), dto.getL114SovratensTempoSMed(), dto.getL114SovratensTempoSMax()));
			scheda11List.get(riga++).setCol1(ConvertUtil.getMinMedMaxFormat(dto.getL114SottotensSogliaVMin(), dto.getL114SottotensSogliaVMed(), dto.getL114SottotensSogliaVMax()));
			scheda11List.get(riga++).setCol1(ConvertUtil.getMinMedMaxFormat(dto.getL114SottotensTempoSMin(), dto.getL114SottotensTempoSMed(), dto.getL114SottotensTempoSMax()));

			String firma = dto.getSiglaRea() + Constants.INTERVAL_SEP + dto.getNumeroRea();
			scheda11List.get(riga++).setCol1(firma);
		}


		return scheda11List;
	}
	
	public static it.csi.sigit.sigitwebn.dto.libretto.TrattamentoAcqua mapToTrattamentoAcqua(SigitTTrattH2ODto dto) {
		log.debug("[mapToTrattamentoAcqua] BEGIN");
		it.csi.sigit.sigitwebn.dto.libretto.TrattamentoAcqua trattamentoAcqua = new it.csi.sigit.sigitwebn.dto.libretto.TrattamentoAcqua();
		
		trattamentoAcqua.setL21H2oClimaM3(ConvertUtil.convertToStringLogic(dto.getL21H2oClimaM3()));
		trattamentoAcqua.setL22DurezzaH2oFr(ConvertUtil.convertToStringLogic(dto.getL22DurezzaH2oFr()));
		trattamentoAcqua.setL23FlgTrattClimaAssente(ConvertUtil.convertToBooleanAllways(dto.getL23FlgTrattClimaAssente()));
		trattamentoAcqua.setL23FlgTrattClimaFiltr(ConvertUtil.convertToBooleanAllways(dto.getL23FlgTrattClimaFiltr()));
		trattamentoAcqua.setL23FlgTrattClimaAddolc(ConvertUtil.convertToBooleanAllways(dto.getL23FlgTrattClimaAddolc()));
		trattamentoAcqua.setL23DurezzaTotH2oFr(ConvertUtil.convertToStringLogic(dto.getL23DurezzaTotH2oFr()));
		trattamentoAcqua.setL23FlgTrattClimaChimico(ConvertUtil.convertToBooleanAllways(dto.getL23FlgTrattClimaChimico()));
		trattamentoAcqua.setL23FlgTrattGeloAssente(ConvertUtil.convertToBooleanAllways(dto.getL23FlgTrattGeloAssente()));
		trattamentoAcqua.setL23FlgTrattGeloGliEtil(ConvertUtil.convertToBooleanAllways(dto.getL23FlgTrattGeloGliEtil()));
		trattamentoAcqua.setL23PercGliEtil(ConvertUtil.convertToStringLogic(dto.getL23PercGliEtil()));
		trattamentoAcqua.setL23PhGliEtil(ConvertUtil.convertToStringLogic(dto.getL23PhGliEtil()));
		trattamentoAcqua.setL23FlgTrattGeloGliProp(ConvertUtil.convertToBooleanAllways(dto.getL23FlgTrattGeloGliProp()));
		trattamentoAcqua.setL23PercGliProp(ConvertUtil.convertToStringLogic(dto.getL23PercGliProp()));
		trattamentoAcqua.setL23PhGliProp(ConvertUtil.convertToStringLogic(dto.getL23PhGliProp()));
		trattamentoAcqua.setL24FlgTrattAcsAssente(ConvertUtil.convertToBooleanAllways(dto.getL24FlgTrattAcsAssente()));
		trattamentoAcqua.setL24FlgTrattAcsFiltr(ConvertUtil.convertToBooleanAllways(dto.getL24FlgTrattAcsFiltr()));
		trattamentoAcqua.setL24FlgTrattAcsAddolc(ConvertUtil.convertToBooleanAllways(dto.getL24FlgTrattAcsAddolc()));
		trattamentoAcqua.setL24DurezzaAddolcFr(ConvertUtil.convertToStringLogic(dto.getL24DurezzaAddolcFr()));
		trattamentoAcqua.setL24FlgTrattAcsChimico(ConvertUtil.convertToBooleanAllways(dto.getL24FlgTrattAcsChimico()));
		trattamentoAcqua.setL25FlgTrattRaffAssente(ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattRaffAssente()));
		
		TipologiaCircuitoRaffreddamentoEnum tipologiaRaffreddamento = null;
		if (ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattRaffNoRt())) {
			tipologiaRaffreddamento = TipologiaCircuitoRaffreddamentoEnum.NO_REC_TERMICO;
		} else if (ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattRaffRtp())) {
			tipologiaRaffreddamento = TipologiaCircuitoRaffreddamentoEnum.REC_TERMICO_PARZIALE;
		} else if (ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattRaffRtt())) {
			tipologiaRaffreddamento = TipologiaCircuitoRaffreddamentoEnum.REC_TERMICO_TOTALE;
		}
		
		trattamentoAcqua.setL25FlgTrattRaff(tipologiaRaffreddamento != null ? tipologiaRaffreddamento.name() : null);
		
		OrigineAcquaAlimentoEnum origineAcquaAlimentoEnum = null;
		if (ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattRaffAcq())) {
			origineAcquaAlimentoEnum = OrigineAcquaAlimentoEnum.ACQUEDOTTO;
		} else if (ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattRaffPzz())) {
			origineAcquaAlimentoEnum = OrigineAcquaAlimentoEnum.POZZO;
		} else if (ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattRaffH2oSup())) {
			origineAcquaAlimentoEnum = OrigineAcquaAlimentoEnum.ACQUA_SUPERFICIALE;
		}
		
		trattamentoAcqua.setL25OrigAcquaAlim(origineAcquaAlimentoEnum != null ? origineAcquaAlimentoEnum.name() : null);
		
		TrattamentiAcquaFiltrazioneEnum trattamentiFiltrazione = null;
		if (ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattFFiltSic())) {
			trattamentiFiltrazione = TrattamentiAcquaFiltrazioneEnum.SICUREZZA;
		} else if (ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattFFiltMas())) {
			trattamentiFiltrazione = TrattamentiAcquaFiltrazioneEnum.MASSE;
		} else if (ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattFNoTratt())) {
			trattamentiFiltrazione = TrattamentiAcquaFiltrazioneEnum.NO_TRATTAMENTO;
		} else if (dto.getL25TrattFAltro() != null && !"".equals(dto.getL25TrattFAltro())) {
			trattamentiFiltrazione = TrattamentiAcquaFiltrazioneEnum.ALTRO;
			trattamentoAcqua.setL25TrattFAltro(dto.getL25TrattFAltro());
		}
		
		trattamentoAcqua.setL25FlgTrattF(trattamentiFiltrazione != null ? trattamentiFiltrazione.name() : null);
		
		TrattamentiAcquaTrattamentoEnum trattamentiTrattamentoAcqua = null;
		if (ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattTAddolc())) {
			trattamentiTrattamentoAcqua = TrattamentiAcquaTrattamentoEnum.ADDOLCIMENTO;
		} else if (ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattTOsmosi())) {
			trattamentiTrattamentoAcqua = TrattamentiAcquaTrattamentoEnum.OSMOSI;
		} else if (ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattTDemin())) {
			trattamentiTrattamentoAcqua = TrattamentiAcquaTrattamentoEnum.DEMINERALIZZAZIONE;
		} else if (ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattTNoTratt())) {
			trattamentiTrattamentoAcqua = TrattamentiAcquaTrattamentoEnum.NESSUNO;
		} else if (dto.getL25TrattTAltro() != null && !"".equals(dto.getL25TrattTAltro())) {
			trattamentiTrattamentoAcqua = TrattamentiAcquaTrattamentoEnum.ALTRO;
			trattamentoAcqua.setL25TrattTAltro(dto.getL25TrattTAltro());
		}
		trattamentoAcqua.setL25FlgTrattT(trattamentiTrattamentoAcqua != null ? trattamentiTrattamentoAcqua.name() : null);
		
		TrattamentiAcquaCondizionamentoChimicoEnum trattamentiCondizionamentoChimico = null;
		if (ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattCPaantincro())) {
			trattamentiCondizionamentoChimico = TrattamentiAcquaCondizionamentoChimicoEnum.ANTINCROSTANTE;
		} else if (ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattCPaanticorr())) {
			trattamentiCondizionamentoChimico = TrattamentiAcquaCondizionamentoChimicoEnum.ANTICORROSIVA;
		} else if (ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattCAaa())) {
			trattamentiCondizionamentoChimico = TrattamentiAcquaCondizionamentoChimicoEnum.ANTINCROSTANTE_ANTICORROSIVA;
		} else if (ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattCBiocida())) {
			trattamentiCondizionamentoChimico = TrattamentiAcquaCondizionamentoChimicoEnum.BIOCIDA;
		} else if (ConvertUtil.convertToBooleanAllways(dto.getL25FlgTrattCNoTratt())) {
			trattamentiCondizionamentoChimico = TrattamentiAcquaCondizionamentoChimicoEnum.NESSUNO;
		} else if (dto.getL25TrattCAltro() != null && !"".equals(dto.getL25TrattCAltro())) {
			trattamentoAcqua.setL25TrattCAltro(dto.getL25TrattCAltro());
			trattamentiCondizionamentoChimico = TrattamentiAcquaCondizionamentoChimicoEnum.ALTRO;
		}
		trattamentoAcqua.setL25FlgTrattC(trattamentiCondizionamentoChimico != null ? trattamentiCondizionamentoChimico.name() : null);
		
		trattamentoAcqua.setL25FlgSpurgoAutom(ConvertUtil.convertToBooleanAllways(dto.getL25FlgSpurgoAutom()));
		trattamentoAcqua.setL25ConducH2oIng(ConvertUtil.convertToStringLogic(dto.getL25ConducH2oIng()));
		trattamentoAcqua.setL25Taratura(ConvertUtil.convertToStringLogic(dto.getL25Taratura()));
		
		log.debug("[mapToTrattamentoAcqua] END");
		return trattamentoAcqua;
	}
	
	public static SigitTTrattH2ODto mapToSigitTTrattH2ODto (it.csi.sigit.sigitwebn.dto.libretto.TrattamentoAcqua obj, SigitTTrattH2ODto dto) {
		log.debug("[mapToSigitTTrattH2ODto] BEGIN");
		
		dto.setL21H2oClimaM3(ConvertUtil.convertToBigDecimal(obj.getL21H2oClimaM3()));
		dto.setL22DurezzaH2oFr(ConvertUtil.convertToBigDecimal(obj.getL22DurezzaH2oFr()));
		dto.setL23FlgTrattClimaAssente(ConvertUtil.convertToBigDecimal(obj.getL23FlgTrattClimaAssente()));
		dto.setL23FlgTrattClimaFiltr(ConvertUtil.convertToBigDecimal(obj.getL23FlgTrattClimaFiltr()));
		dto.setL23FlgTrattClimaAddolc(ConvertUtil.convertToBigDecimal(obj.getL23FlgTrattClimaAddolc()));
		dto.setL23DurezzaTotH2oFr(ConvertUtil.convertToBigDecimal(obj.getL23DurezzaTotH2oFr()));
		dto.setL23FlgTrattClimaChimico(ConvertUtil.convertToBigDecimal(obj.getL23FlgTrattClimaChimico()));
		dto.setL23FlgTrattGeloAssente(ConvertUtil.convertToBigDecimal(obj.getL23FlgTrattGeloAssente()));
		dto.setL23FlgTrattGeloGliEtil(ConvertUtil.convertToBigDecimal(obj.getL23FlgTrattGeloGliEtil()));
		dto.setL23PercGliEtil(ConvertUtil.convertToBigDecimal(obj.getL23PercGliEtil()));
		dto.setL23PhGliEtil(ConvertUtil.convertToBigDecimal(obj.getL23PhGliEtil()));
		dto.setL23FlgTrattGeloGliProp(ConvertUtil.convertToBigDecimal(obj.getL23FlgTrattGeloGliProp()));
		dto.setL23PercGliProp(ConvertUtil.convertToBigDecimal(obj.getL23PercGliProp()));
		dto.setL23PhGliProp(ConvertUtil.convertToBigDecimal(obj.getL23PhGliProp()));
		
		dto.setL24FlgTrattAcsAssente(ConvertUtil.convertToBigDecimal(obj.getL24FlgTrattAcsAssente()));
		dto.setL24FlgTrattAcsFiltr(ConvertUtil.convertToBigDecimal(obj.getL24FlgTrattAcsFiltr()));
		dto.setL24FlgTrattAcsFiltr(ConvertUtil.convertToBigDecimal(obj.getL24FlgTrattAcsFiltr()));
		dto.setL24FlgTrattAcsAddolc(ConvertUtil.convertToBigDecimal(obj.getL24FlgTrattAcsAddolc()));
		dto.setL24DurezzaAddolcFr(ConvertUtil.convertToBigDecimal(obj.getL24DurezzaAddolcFr()));
		dto.setL24FlgTrattAcsChimico(ConvertUtil.convertToBigDecimal(obj.getL24FlgTrattAcsChimico()));
		dto.setL25FlgTrattRaffAssente(ConvertUtil.convertToBigDecimal(obj.getL25FlgTrattRaffAssente()));
		
		dto.setL25FlgTrattRaffNoRt(new BigDecimal(0));
		dto.setL25FlgTrattRaffRtp(new BigDecimal(0));
		dto.setL25FlgTrattRaffRtt(new BigDecimal(0));
		
		if (!StringUtils.isBlank(obj.getL25FlgTrattRaff())) {
			TipologiaCircuitoRaffreddamentoEnum tipologiaCircuitoRaffreddamento = TipologiaCircuitoRaffreddamentoEnum.valueOf(TipologiaCircuitoRaffreddamentoEnum.class, obj.getL25FlgTrattRaff());
			switch (tipologiaCircuitoRaffreddamento) {
			case NO_REC_TERMICO:
				dto.setL25FlgTrattRaffNoRt(new BigDecimal(1));
				break;
			case REC_TERMICO_PARZIALE:
				dto.setL25FlgTrattRaffRtp(new BigDecimal(1));
				break;
			case REC_TERMICO_TOTALE:
				dto.setL25FlgTrattRaffRtt(new BigDecimal(1));
				break;
			}
		}
		
		dto.setL25FlgTrattRaffAcq(new BigDecimal(0));
		dto.setL25FlgTrattRaffPzz(new BigDecimal(0));
		dto.setL25FlgTrattRaffH2oSup(new BigDecimal(0));
		
		if (!StringUtils.isBlank(obj.getL25OrigAcquaAlim())) {
			it.csi.sigit.sigitwebn.util.enumutil.OrigineAcquaAlimentoEnum origineAcquaAlimentare = OrigineAcquaAlimentoEnum.valueOf(OrigineAcquaAlimentoEnum.class, obj.getL25OrigAcquaAlim());
			switch (origineAcquaAlimentare) {
			case ACQUA_SUPERFICIALE:
				dto.setL25FlgTrattRaffH2oSup(new BigDecimal(1));
				break;
			case ACQUEDOTTO:
				dto.setL25FlgTrattRaffAcq(new BigDecimal(1));
				break;
			case POZZO:
				dto.setL25FlgTrattRaffPzz(new BigDecimal(1));
				break;
			}
		}
		
		dto.setL25FlgTrattFFiltSic(new BigDecimal(0));
		dto.setL25FlgTrattFNoTratt(new BigDecimal(0));
		dto.setL25FlgTrattFFiltMas(new BigDecimal(0));
		dto.setL25TrattFAltro(null);
		
		if (!StringUtils.isBlank(obj.getL25FlgTrattF())) {
			TrattamentiAcquaFiltrazioneEnum trattamentiAcquaFiltrazione = TrattamentiAcquaFiltrazioneEnum.valueOf(TrattamentiAcquaFiltrazioneEnum.class, obj.getL25FlgTrattF());
				switch (trattamentiAcquaFiltrazione) {
				case SICUREZZA:
					dto.setL25FlgTrattFFiltSic(new BigDecimal(1));
					break;
				case NO_TRATTAMENTO:
					dto.setL25FlgTrattFNoTratt(new BigDecimal(1));
					break;
				case MASSE:
					dto.setL25FlgTrattFFiltMas(new BigDecimal(1));
					break;
				case ALTRO:
					dto.setL25TrattFAltro(obj.getL25TrattFAltro());
					break;
				}
		}
		
		dto.setL25FlgTrattTAddolc(new BigDecimal(0));
		dto.setL25FlgTrattTDemin(new BigDecimal(0));
		dto.setL25FlgTrattTNoTratt(new BigDecimal(0));
		dto.setL25FlgTrattTOsmosi(new BigDecimal(0));
		dto.setL25TrattTAltro(null);
		
		
		if (!StringUtils.isBlank(obj.getL25FlgTrattT())) {
			TrattamentiAcquaTrattamentoEnum trattamentiAcquaTrattamento = TrattamentiAcquaTrattamentoEnum.valueOf(TrattamentiAcquaTrattamentoEnum.class, obj.getL25FlgTrattT());
			switch (trattamentiAcquaTrattamento) {
			case ADDOLCIMENTO:
				dto.setL25FlgTrattTAddolc(new BigDecimal(1));
				break;
			case DEMINERALIZZAZIONE:
				dto.setL25FlgTrattTDemin(new BigDecimal(1));
				break;
			case NESSUNO:
				dto.setL25FlgTrattTNoTratt(new BigDecimal(1));
				break;
			case OSMOSI:
				dto.setL25FlgTrattTOsmosi(new BigDecimal(1));
				break;
			case ALTRO:
				dto.setL25TrattTAltro(obj.getL25TrattTAltro());
				break;
			}
		}
		
		dto.setL25FlgTrattCPaanticorr(new BigDecimal(0));
		dto.setL25FlgTrattCPaantincro(new BigDecimal(0));
		dto.setL25FlgTrattCAaa(new BigDecimal(0));
		dto.setL25FlgTrattCBiocida(new BigDecimal(0));
		dto.setL25FlgTrattCNoTratt(new BigDecimal(0));
		dto.setL25TrattCAltro(null);
		
		if (!StringUtils.isBlank(obj.getL25FlgTrattC())) {
			TrattamentiAcquaCondizionamentoChimicoEnum trattamentiAcquaCondizionamento = TrattamentiAcquaCondizionamentoChimicoEnum.valueOf(TrattamentiAcquaCondizionamentoChimicoEnum.class, obj.getL25FlgTrattC());
			switch (trattamentiAcquaCondizionamento) {
			case ANTICORROSIVA:
				dto.setL25FlgTrattCPaanticorr(new BigDecimal(1));
				break;
			case ANTINCROSTANTE:
				dto.setL25FlgTrattCPaantincro(new BigDecimal(1));
				break;
			case ANTINCROSTANTE_ANTICORROSIVA:
				dto.setL25FlgTrattCAaa(new BigDecimal(1));
				break;
			case BIOCIDA:
				dto.setL25FlgTrattCBiocida(new BigDecimal(1));
				break;
			case NESSUNO:
				dto.setL25FlgTrattCNoTratt(new BigDecimal(1));
				break;
			case ALTRO:
				dto.setL25TrattCAltro(obj.getL25TrattCAltro());
				break;
			}
		}
		
		dto.setL25FlgSpurgoAutom(ConvertUtil.convertToBigDecimal(obj.getL25FlgSpurgoAutom()));
		dto.setL25ConducH2oIng(ConvertUtil.convertToBigDecimal(obj.getL25ConducH2oIng()));
		dto.setL25Taratura(ConvertUtil.convertToBigDecimal(obj.getL25Taratura()));
		
		log.debug("[mapToSigitTTrattH2ODto] END");
		return dto;
	}
	
	public static SistemaEmissione mapToSistemaEmissione(SigitTCompXSempliceDto dto) {
		log.debug("[mapToSistemaEmissione] BEGIN");
		SistemaEmissione sistemaEmissione = new SistemaEmissione();
		sistemaEmissione.setAltro(dto.getL70Altro());
		sistemaEmissione.setFlagAltro(dto.getL70Altro() != null && !"".equals(dto.getL70Altro()));
		sistemaEmissione.setFlagBocchette(ConvertUtil.convertToBoolean(dto.getL70FlgBocchette()));
		sistemaEmissione.setFlagPannelliRadianti(ConvertUtil.convertToBoolean(dto.getL70FlgPannelli()));
		sistemaEmissione.setFlagRadiatori(ConvertUtil.convertToBoolean(dto.getL70FlgRadiatori()));
		sistemaEmissione.setFlagStrisceRadianti(ConvertUtil.convertToBoolean(dto.getL70FlgStrisce()));
		sistemaEmissione.setFlagTermoconvettori(ConvertUtil.convertToBoolean(dto.getL70FlgTermoconvettori()));
		sistemaEmissione.setFlagTraviFredde(ConvertUtil.convertToBoolean(dto.getL70FlgTravi()));
		sistemaEmissione.setFlagVentilconvettori(ConvertUtil.convertToBoolean(dto.getL70FlgVentilconvettori()));
		log.debug("[mapToSistemaEmissione] END");
		return sistemaEmissione;
	}
	
	public static SistemiRegolazioneContabilizzazione mapToSistemaRegolazione(SigitTCompXSempliceDto dto) {
		//metodo che recupera le info da dto da persistere e lo riversa nel dto grafico
		log.debug("[mapToSistemaRegolazione] BEGIN");
		SistemiRegolazioneContabilizzazione sistemaRegolazione = new SistemiRegolazioneContabilizzazione();
		sistemaRegolazione.setL5_1flgSrONOFF(ConvertUtil.convertToBooleanAllways(dto.getL51FlgSrOnoff()));
		sistemaRegolazione.setL5_1flgSrGeneratore(ConvertUtil.convertToBooleanAllways(dto.getL51FlgSrGeneratore()));
		sistemaRegolazione.setL5_1flgSrIndipendente(ConvertUtil.convertToBooleanAllways(dto.getL51FlgSrIndipendente()));
		sistemaRegolazione.setL5_1flgSrMultigradino(ConvertUtil.convertToBooleanAllways(dto.getL51FlgSrMultigradino()));
		sistemaRegolazione.setL5_1flgSrInverter(ConvertUtil.convertToBooleanAllways(dto.getL51FlgSrInverter()));
		sistemaRegolazione.setL5_1flgSrAltri(ConvertUtil.convertToBooleanAllways(dto.getL51FlgSrAltri()));
		sistemaRegolazione.setL5_1flgSrDescrizione(dto.getL51SrDescrizione());
		
		if (ConvertUtil.convertToBooleanAllways(dto.getL52FlgTermoOnoff())) {
			sistemaRegolazione.setL5_2flgTipoRegolazione(TipoRegolazioneEnum.TERMOSTATO_ON_OFF.name());
		} else if (ConvertUtil.convertToBooleanAllways(dto.getL52FlgTermoProporzionale())) {
			sistemaRegolazione.setL5_2flgTipoRegolazione(TipoRegolazioneEnum.TERMOSTATO_PROPORZIONALE.name());
		} else if (ConvertUtil.convertToBooleanAllways(dto.getL52FlgContrEntalpico())) {
			sistemaRegolazione.setL5_2flgTipoRegolazione(TipoRegolazioneEnum.CONTROLLO_ARIA_ESTERNA.name());
		} else if (ConvertUtil.convertToBooleanAllways(dto.getL52FlgContrPortata())) {
			sistemaRegolazione.setL5_2flgTipoRegolazione(TipoRegolazioneEnum.CONTROLLO_ARIA_CANALIZZATA.name());
		}

		//presente/assente
		sistemaRegolazione.setL5_2flgValvoleTermo(ConvertUtil.getEnumFromString(PresenteAssenteEnum.class, dto.getL52FlgValvoleTermo()) != null ? dto.getL52FlgValvoleTermo() : null);
		sistemaRegolazione.setL5_2flgValvole2(ConvertUtil.getEnumFromString(PresenteAssenteEnum.class, dto.getL52FlgValvole2()) != null ? dto.getL52FlgValvole2() : null);
		sistemaRegolazione.setL5_2flgValvole3(ConvertUtil.getEnumFromString(PresenteAssenteEnum.class, dto.getL52FlgValvole3()) != null ? dto.getL52FlgValvole3() : null);
		sistemaRegolazione.setL5_2note(dto.getL52Note());
		sistemaRegolazione.setL5_3flgTelelettura(ConvertUtil.getEnumFromString(PresenteAssenteEnum.class, dto.getL53FlgTelelettura()) != null ? dto.getL53FlgTelelettura() : null);
		sistemaRegolazione.setL5_3flgTelegestione(ConvertUtil.getEnumFromString(PresenteAssenteEnum.class, dto.getL53FlgTelegestione()) != null ? dto.getL53FlgTelegestione() : null);
		sistemaRegolazione.setL5_3desSistemaInstallaz(dto.getL53DesSistemaInstallaz());
		sistemaRegolazione.setL5_3dataSostituz(ConvertUtil.convertToString(dto.getL53DataSostituz()));
		sistemaRegolazione.setL5_3desSistemaSostituz(dto.getL53DesSistemaSostituz());
		//siNo
		if (dto.getL54FlgUic() != null) {
			sistemaRegolazione.setL5_4flgUic(ConvertUtil.convertToBoolean(dto.getL54FlgUic()) ? SiNoEnum.SI_1.getCodice() : SiNoEnum.NO_0.getCodice());
		}
		sistemaRegolazione.setL5_4flgRisc(ConvertUtil.convertToBooleanAllways(dto.getL54FlgRisc()));
		sistemaRegolazione.setL5_4flgRaff(ConvertUtil.convertToBooleanAllways(dto.getL54FlgRaff()));
		sistemaRegolazione.setL5_4flgAcs(ConvertUtil.convertToBooleanAllways(dto.getL54FlgAcs()));
		
		sistemaRegolazione.setL5_4flgTipologia(ConvertUtil.getEnumFromString(DirettoIndirettoEnum.class, dto.getL54FlgTipologia()) != null ? dto.getL54FlgTipologia() : null);
		sistemaRegolazione.setL5_4desSistemaInstallaz(dto.getL54DesSistemaInstallaz());
		sistemaRegolazione.setL5_4dataSostituz(ConvertUtil.convertToString(dto.getL54DataSostituz()));
		sistemaRegolazione.setL5_4desSistemaSostituz(dto.getL54DesSistemaSostituz());
		log.debug("[mapToSistemaRegolazione] END");
		return sistemaRegolazione;
	}
	
	public static SistemiDistribuzione mapToSistemiDistribuzione (SigitTCompXSempliceDto entity) {
		SistemiDistribuzione dto = new SistemiDistribuzione();
		
		dto.setL6_1flagTipoVerticale(ConvertUtil.convertToBooleanAllways(entity.getL61FlgVerticale()));
		dto.setL6_1flagTipoOrizzontale(ConvertUtil.convertToBooleanAllways(entity.getL61FlgOrizzontale()));
		dto.setL6_1flagTipoCanali(ConvertUtil.convertToBooleanAllways(entity.getL61FlgCan()));
		
		dto.setL6_1flagAltro(GenericUtil.isNotNullOrEmpty(entity.getL61Altro()));
		dto.setL6_1Altro(entity.getL61Altro());

		/*
		if (ConvertUtil.convertToBooleanAllways(entity.getL61FlgCan())) {
			dto.setL6_1flagTipoCanali(Distribuzione(TipoDistribuzioneEnum.CANALI.name());
		} else if (ConvertUtil.convertToBooleanAllways(entity.getL61FlgOrizzontale())) {
			dto.setL61TipoDistribuzione(TipoDistribuzioneEnum.ORIZZONTALE.name());
		} else if (ConvertUtil.convertToBooleanAllways(entity.getL61FlgVerticale())) {
			dto.setL61TipoDistribuzione(TipoDistribuzioneEnum.VERTICALE.name());
		} else if (!StringUtils.isBlank(entity.getL61Altro())) {
			dto.setL61TipoDistribuzione(TipoDistribuzioneEnum.ALTRO.name());
			dto.setL61Altro(entity.getL61Altro());
		}
		*/
		dto.setL6_2Coibent(ConvertUtil.getEnumFromString(PresenteAssenteEnum.class, entity.getL62FlgCoibent()) != null ? entity.getL62FlgCoibent() : null);
		dto.setL6_2Note(entity.getL62Note());
		
		return dto;
	}
	
	public static ComponenteVX mapToComponenteVX (SigitTCompVxDto entity) {

		ComponenteVX dto = new ComponenteVX();
		dto.setCapacita(ConvertUtil.convertToStringLogic(entity.getCapacitaL()));
		dto.setIndice(ConvertUtil.convertToInteger(entity.getProgressivo()));
		dto.setPressioneBar(ConvertUtil.convertToStringLogic(entity.getPressioneBar()));
		dto.setRigaEditabile(true);
		ApertoChiusoEnum flgApertoChiuso = ConvertUtil.getEnumFromString(ApertoChiusoEnum.class, entity.getFlgVaso());
		if (flgApertoChiuso != null) {
			dto.setVaso(flgApertoChiuso.name());
		}
		return dto;
		
	}
	
	public static SigitTCompVxDto mapToSigitTCompVXDto (ComponenteVX dto, BigDecimal codiceImpianto) {
		
		SigitTCompVxDto entity = new SigitTCompVxDto();
		entity.setCodiceImpianto(codiceImpianto);
		try{entity.setDataInstall(ConvertUtil.convertToSqlDate("31/12/9999"));}catch (Exception e) {entity.setDataInstall(null);}
		entity.setIdTipoComponente(Constants.TIPO_COMPONENTE_VX);
		entity.setProgressivo(ConvertUtil.convertToBigDecimal(dto.getIndice()));
		entity.setCapacitaL(ConvertUtil.convertToBigDecimal(dto.getCapacita()));
		ApertoChiusoEnum flgApertoChiuso = ConvertUtil.getEnumFromString(ApertoChiusoEnum.class, dto.getVaso());
		if (flgApertoChiuso != null) {
			entity.setFlgVaso(flgApertoChiuso.name());
		}
		entity.setPressioneBar(ConvertUtil.convertToBigDecimal(dto.getPressioneBar()));
		return entity;
	}
	
	
	public static SigitTCompXDto mapToSigitTCompX(ComponenteVX dto, BigDecimal codiceImpianto, String cfUtente) {
		SigitTCompXDto entity = new SigitTCompXDto();
		entity.setCodiceImpianto(codiceImpianto);
		try{entity.setDataInstall(ConvertUtil.convertToSqlDate("31/12/9999"));}catch (Exception e) {entity.setDataInstall(null);}
		entity.setIdTipoComponente(Constants.TIPO_COMPONENTE_VX);
		entity.setProgressivo(ConvertUtil.convertToBigDecimal(dto.getIndice()));
		entity.setUtenteUltMod(cfUtente);
		entity.setDataUltMod(DateUtil.getSqlDataCorrente());
		return entity;
	}
	
	
	public static SigitTCompXSempliceDto mapToSigitTCompXSempliceDto(SistemaEmissione obj, SigitTCompXSempliceDto dto) {
		log.debug("[MapDto:mapToSigitTCompXSempliceDto] BEGIN");
		
		dto.setL70Altro(obj.getAltro());
		dto.setL70FlgBocchette(ConvertUtil.convertToBigDecimal(obj.getFlagBocchette()));
		dto.setL70FlgPannelli(ConvertUtil.convertToBigDecimal(obj.getFlagPannelliRadianti()));
		dto.setL70FlgRadiatori(ConvertUtil.convertToBigDecimal(obj.getFlagRadiatori()));
		dto.setL70FlgStrisce(ConvertUtil.convertToBigDecimal(obj.getFlagStrisceRadianti()));
		dto.setL70FlgTermoconvettori(ConvertUtil.convertToBigDecimal(obj.getFlagTermoconvettori()));
		dto.setL70FlgTravi(ConvertUtil.convertToBigDecimal(obj.getFlagTraviFredde()));
		dto.setL70FlgVentilconvettori(ConvertUtil.convertToBigDecimal(obj.getFlagVentilconvettori()));
		
		log.debug("[MapDto:mapToSigitTCompXSempliceDto] END");
		
		return dto;
	}
	
	public static SigitTCompXSempliceDto mapToSigitTCompXSempliceDto(SistemiRegolazioneContabilizzazione sistemaRegolazione, SigitTCompXSempliceDto dto) {
		//metodo che recupera le info da dto grafico e lo riversa nel dto da persistere
		log.debug("[MapDto:mapToSigitTCompXSempliceDto] BEGIN");
		
		dto.setL51FlgSrOnoff(ConvertUtil.convertToBigDecimal(sistemaRegolazione.getL5_1flgSrONOFF()));
		dto.setL51FlgSrGeneratore(ConvertUtil.convertToBigDecimal(sistemaRegolazione.getL5_1flgSrGeneratore()));
		dto.setL51FlgSrIndipendente(ConvertUtil.convertToBigDecimal(sistemaRegolazione.getL5_1flgSrIndipendente()));
		dto.setL51FlgSrMultigradino(ConvertUtil.convertToBigDecimal(sistemaRegolazione.getL5_1flgSrMultigradino()));
		dto.setL51FlgSrInverter(ConvertUtil.convertToBigDecimal(sistemaRegolazione.getL5_1flgSrInverter()));
		dto.setL51FlgSrAltri(ConvertUtil.convertToBigDecimal(sistemaRegolazione.getL5_1flgSrAltri()));
		dto.setL51SrDescrizione(sistemaRegolazione.getL5_1flgSrDescrizione());
		
		dto.setL52FlgTermoOnoff(new BigDecimal(0));
		dto.setL52FlgTermoProporzionale(new BigDecimal(0));
		dto.setL52FlgContrEntalpico(new BigDecimal(0));
		dto.setL52FlgContrPortata(new BigDecimal(0));
		if (!StringUtils.isBlank(sistemaRegolazione.getL5_2flgTipoRegolazione())) {
			TipoRegolazioneEnum tipoRegolazione = TipoRegolazioneEnum.valueOf(sistemaRegolazione.getL5_2flgTipoRegolazione());
			if (tipoRegolazione != null) {
				switch (tipoRegolazione) {
				case TERMOSTATO_ON_OFF:
					dto.setL52FlgTermoOnoff(new BigDecimal(1));
					break;
				case TERMOSTATO_PROPORZIONALE:
					dto.setL52FlgTermoProporzionale(new BigDecimal(1));
					break;
				case CONTROLLO_ARIA_ESTERNA:
					dto.setL52FlgContrEntalpico(new BigDecimal(1));
					break;
				case CONTROLLO_ARIA_CANALIZZATA:
					dto.setL52FlgContrPortata(new BigDecimal(1));
					break;
				}
			} else {
				log.debug("[MapDto:mapToSigitTCompXSempliceDto] valore tipoRegolazione non riconosciuto: " + sistemaRegolazione.getL5_2flgTipoRegolazione());
			}
		}
		
		//valori presente/assente
		dto.setL52FlgValvoleTermo(ConvertUtil.getEnumFromString(PresenteAssenteEnum.class, sistemaRegolazione.getL5_2flgValvoleTermo()) != null ? sistemaRegolazione.getL5_2flgValvoleTermo() : null);
		dto.setL52FlgValvole2(ConvertUtil.getEnumFromString(PresenteAssenteEnum.class, sistemaRegolazione.getL5_2flgValvole2()) != null ? sistemaRegolazione.getL5_2flgValvole2() : null);
		dto.setL52FlgValvole3(ConvertUtil.getEnumFromString(PresenteAssenteEnum.class, sistemaRegolazione.getL5_2flgValvole3()) != null ? sistemaRegolazione.getL5_2flgValvole3() : null);
		
		dto.setL52Note(sistemaRegolazione.getL5_2note());
		dto.setL53FlgTelelettura(sistemaRegolazione.getL5_3flgTelelettura() != null && PresenteAssenteEnum.valueOf(sistemaRegolazione.getL5_3flgTelelettura()) != null ? sistemaRegolazione.getL5_3flgTelelettura() : null);
		dto.setL53FlgTelegestione(sistemaRegolazione.getL5_3flgTelegestione() != null && PresenteAssenteEnum.valueOf(sistemaRegolazione.getL5_3flgTelegestione()) != null ? sistemaRegolazione.getL5_3flgTelegestione() : null);
		dto.setL53DesSistemaInstallaz(sistemaRegolazione.getL5_3desSistemaInstallaz());
		dto.setL53DataSostituz(ConvertUtil.convertToSqlDate(sistemaRegolazione.getL5_3dataSostituz()));

		dto.setL53DesSistemaSostituz(sistemaRegolazione.getL5_3desSistemaSostituz());
		//si-no
		dto.setL54FlgUic(!StringUtils.isBlank(sistemaRegolazione.getL5_4flgUic()) ? ConvertUtil.convertToBigDecimal(sistemaRegolazione.getL5_4flgUic()) : null);
		dto.setL54FlgRisc(ConvertUtil.convertToBigDecimal(sistemaRegolazione.getL5_4flgRisc()));
		dto.setL54FlgRaff(ConvertUtil.convertToBigDecimal(sistemaRegolazione.getL5_4flgRaff()));
		dto.setL54FlgAcs(ConvertUtil.convertToBigDecimal(sistemaRegolazione.getL5_4flgAcs()));
		//diretto-indiretto
		dto.setL54FlgTipologia(ConvertUtil.getEnumFromString(DirettoIndirettoEnum.class, sistemaRegolazione.getL5_4flgTipologia()) != null ? sistemaRegolazione.getL5_4flgTipologia() : null);
		dto.setL54DesSistemaInstallaz(sistemaRegolazione.getL5_4desSistemaInstallaz());
		dto.setL54DataSostituz(ConvertUtil.convertToSqlDate(sistemaRegolazione.getL5_4dataSostituz()));
		dto.setL54DesSistemaSostituz(sistemaRegolazione.getL5_4desSistemaSostituz());
		
		log.debug("[MapDto:mapToSigitTCompXSempliceDto] END");
		
		return dto;
	}
	
	public static SigitTCompXSempliceDto mapToSigitTCompXSempliceDto(SistemiDistribuzione dto, SigitTCompXSempliceDto entity) {
		log.debug("[MapDto:mapToSigitTCompXSempliceDto] BEGIN");
		
		entity.setL61FlgVerticale(ConvertUtil.convertToBigDecimal(dto.getL6_1flagTipoVerticale() ? Constants.SI_1: Constants.NO_0));
		entity.setL61FlgOrizzontale(ConvertUtil.convertToBigDecimal(dto.getL6_1flagTipoOrizzontale() ? Constants.SI_1: Constants.NO_0));
		entity.setL61FlgCan(ConvertUtil.convertToBigDecimal(dto.getL6_1flagTipoCanali() ? Constants.SI_1: Constants.NO_0));
		entity.setL61Altro(dto.getL6_1Altro());;

		/*
		entity.setL61FlgVerticale(new BigDecimal(0));
		entity.setL61FlgOrizzontale(new BigDecimal(0));
		entity.setL61FlgCan(new BigDecimal(0));
		entity.setL61Altro(null);
		
		if (!StringUtils.isBlank(dto.getL61TipoDistribuzione())) {
			TipoDistribuzioneEnum tipoDis = TipoDistribuzioneEnum.valueOf(dto.getL61TipoDistribuzione());
			switch (tipoDis) {
			case VERTICALE:
				entity.setL61FlgVerticale(new BigDecimal(1));
				break;
			case ORIZZONTALE:
				entity.setL61FlgOrizzontale(new BigDecimal(1));
				break;
			case CANALI:
				entity.setL61FlgCan(new BigDecimal(1));
				break;
			case ALTRO:
				entity.setL61Altro(dto.getL61Altro());
				break;
			}
		}
		*/
		
		entity.setL62FlgCoibent(ConvertUtil.getEnumFromString(PresenteAssenteEnum.class, dto.getL6_2Coibent()) != null ? dto.getL6_2Coibent() : null);
		entity.setL62Note(dto.getL6_2Note());
		log.debug("[MapDto:mapToSigitTCompXSempliceDto] END");
		return entity;
	}
	
	
	public static TipoGFDett mapToTipoGFDett(SigitRAllegatoCompGfDto rAllCompGf, SigitVCompGfDto vCompGf) {
		TipoGFDett dett = new TipoGFDett();
		
		dett.setGFdesc(ConvertUtil.getStringByConcat(" ", rAllCompGf.getIdTipoComponente(), ConvertUtil.convertToString(rAllCompGf.getProgressivo())));
		dett.setNCircuiti(ConvertUtil.convertToInteger(vCompGf.getNCircuiti()));
		dett.setDataInstallazione(ConvertUtil.convertToString(rAllCompGf.getDataInstall()));
		dett.setMarca(vCompGf.getDesMarca());
		dett.setModello(vCompGf.getModello());
		dett.setMatricola(vCompGf.getMatricola());
		dett.setFluidoFrigo(vCompGf.getFluidoFrigorigeno());
		dett.setSorgenteExt(vCompGf.getFlgSorgenteExt());
		dett.setFluidoUtenze(vCompGf.getFlgFluidoUtenze());
		dett.setRiscaldamentoCop(vCompGf.getRiscaldamentoCop());
		dett.setPotenzaTermicaNominale(ConvertUtil.convertToString(vCompGf.getRiscPotenzaKw()));
		dett.setPotenzaAssorbitaNominale(ConvertUtil.convertToString(vCompGf.getRiscPotenzaAssKw()));
		dett.setRaffrescamentoEER(vCompGf.getRaffrescamentoEer());
		dett.setPotenzaFrigoriferaNominale(ConvertUtil.convertToString(vCompGf.getRaffPotenzaKw()));
		dett.setPotenzaAssorbitaNominaleRaff(ConvertUtil.convertToString(vCompGf.getRaffPotenzaAss()));
		dett.setTipoMacchina(ConvertUtil.getStringByConcat(" ", vCompGf.getDesDettaglioGf(), vCompGf.getDesCombustibile()));
		
		log.debug("[mapToTipoGFDett] END");
		
		return dett;
	}
	
	public static TipoGTDett mapToTipoGTDett(SigitRAllegatoCompGtDto rAllCompGt, SigitVCompGtDto vCompGt, List<SigitTCompBrRcBrRcLegateAGtComplexDto> bruciatoriAssociati) {
		log.debug("[mapToTipoGTDett] BEGIN");
		
		TipoGTDett dett = new TipoGTDett();
		
		dett.setGTdesc(ConvertUtil.getStringByConcat(" ", rAllCompGt.getIdTipoComponente(), ConvertUtil.convertToString(rAllCompGt.getProgressivo())));
		dett.setCombustibile(vCompGt.getDesCombustibile());
		dett.setDataInstallazione(ConvertUtil.convertToString(rAllCompGt.getDataInstall()));
		dett.setFluido(vCompGt.getDesFluido());
		dett.setMarca(vCompGt.getDesMarca());
		dett.setModelloMatricola(ConvertUtil.getStringByConcat(" ", vCompGt.getModello(), vCompGt.getMatricola()));

		String marche = "";
		String matricoleModelli = "";
		if (bruciatoriAssociati != null && !bruciatoriAssociati.isEmpty()) {
			Set<String> elencoMarche = new HashSet<String>();
			Set<String> elencoModelliMatricole = new HashSet<String>();
					
			for (SigitTCompBrRcBrRcLegateAGtComplexDto bruciatore : bruciatoriAssociati) {
				if (GenericUtil.isNotNullOrEmpty(bruciatore.getDesMarca())) {
					elencoMarche.add(bruciatore.getDesMarca());
				}
				
				if (GenericUtil.isNotNullOrEmpty(bruciatore.getMatricola()) || GenericUtil.isNotNullOrEmpty(bruciatore.getModello())) {
					elencoModelliMatricole.add(ConvertUtil.getStringByConcat(" ", bruciatore.getModello(), bruciatore.getMatricola()));
				}
			}
			
			marche = ConvertUtil.getStringByList(new ArrayList(elencoMarche), Constants.INTERVAL_SEP_SLASH);
			matricoleModelli = ConvertUtil.getStringByList(new ArrayList(elencoModelliMatricole), Constants.INTERVAL_SEP_SLASH);
		}
		
		dett.setMarcaBruciatori(marche); 
		dett.setModelloMatricolaBruciatori(matricoleModelli);
		
		
		dett.setDettaglioCompGT(vCompGt.getDesDettaglioGt());
		dett.setPotenzaTermicaCompGT(ConvertUtil.convertToString(vCompGt.getPotenzaTermicaKw()));

		log.debug("[mapToTipoGTDett] END");
		
		return dett;
	}
	
	public static Tipo1Dett mapToTipo1Dett(SigitRAllegatoCompGtDto rAllCompGt, SigitVSk4GtDto vCompGt) {
		//metodo che recupera le info da dto grafico e lo riversa nel dto da persistere
		log.debug("[MapDto:mapToTipo1Dett] BEGIN");
		
		Tipo1Dett dett = new Tipo1Dett();
		
		dett.setIdTipoComponente(rAllCompGt.getIdTipoComponente());
		dett.setProgressivo(ConvertUtil.convertToString(rAllCompGt.getProgressivo()));
		dett.setDescComponente(costruisciTipoComponente(rAllCompGt.getIdTipoComponente(), rAllCompGt.getProgressivo()));
		
		dett.setDataInstallazione(ConvertUtil.convertToString(rAllCompGt.getDataInstall()));
		dett.setMarca(vCompGt.getDesMarca());
		dett.setModello(vCompGt.getModello());
		dett.setMatricola(vCompGt.getMatricola());
		dett.setDescTipo(vCompGt.getDesDettaglioGt());
		dett.setPotenzaTermicaKw(ConvertUtil.convertToString(vCompGt.getPotenzaTermicaKw()));

		dett.setCombustibile(vCompGt.getDesCombustibile());
		dett.setIdCombustibile(ConvertUtil.convertToString(vCompGt.getIdCombustibile()));
		
		log.debug("[MapDto:mapToTipo1Dett] END");
		
		return dett;
	}
	
	public static Tipo2Dett mapToTipo2Dett(SigitRAllegatoCompGfDto rAllCompGf, SigitVSk4GfDto vCompGf) {
		//metodo che recupera le info da dto grafico e lo riversa nel dto da persistere
		log.debug("[MapDto:mapToTipo2Dett] BEGIN");
		
		Tipo2Dett dett = new Tipo2Dett();
		
		dett.setIdTipoComponente(rAllCompGf.getIdTipoComponente());
		dett.setProgressivo(ConvertUtil.convertToString(rAllCompGf.getProgressivo()));
		dett.setDescComponente(costruisciTipoComponente(rAllCompGf.getIdTipoComponente(), rAllCompGf.getProgressivo()));
		
		dett.setDataInstallazione(ConvertUtil.convertToString(rAllCompGf.getDataInstall()));
		dett.setMarca(vCompGf.getDesMarca());
		dett.setModello(vCompGf.getModello());
		dett.setMatricola(vCompGf.getMatricola());
		dett.setTipo(vCompGf.getDesDettaglioGf());
		dett.setNCircuiti(ConvertUtil.convertToString(vCompGf.getNCircuiti()));
		dett.setRaffPotenzaKw(ConvertUtil.convertToString(vCompGf.getRaffPotenzaKw()));
		dett.setRiscPotenzaKw(ConvertUtil.convertToString(vCompGf.getRiscPotenzaKw()));

		dett.setCombustibile(vCompGf.getDesCombustibile());
		
		log.debug("[MapDto:mapToTipo2Dett] END");
		
		return dett;
	}
	
	public static Tipo3Dett mapToTipo3Dett(SigitRAllegatoCompScDto rAllCompSc, SigitVSk4ScDto vCompSc) {
		//metodo che recupera le info da dto grafico e lo riversa nel dto da persistere
		log.debug("[MapDto:mapToTipo3Dett] BEGIN");
		
		Tipo3Dett dett = new Tipo3Dett();
		
		dett.setIdTipoComponente(rAllCompSc.getIdTipoComponente());
		dett.setProgressivo(ConvertUtil.convertToString(rAllCompSc.getProgressivo()));
		dett.setDescComponente(costruisciTipoComponente(rAllCompSc.getIdTipoComponente(), rAllCompSc.getProgressivo()));
		dett.setDataInstallazione(ConvertUtil.convertToString(rAllCompSc.getDataInstall()));
		
		dett.setMarca(vCompSc.getDesMarca());
		dett.setModello(vCompSc.getModello());
		dett.setMatricola(vCompSc.getMatricola());
		
		dett.setPotenzaTermicaKw(ConvertUtil.convertToString(vCompSc.getPotenzaTermicaKw()));

		log.debug("[MapDto:mapToTipo3Dett] END");
		
		return dett;
	}
	
	public static Tipo4Dett mapToTipo4Dett(SigitRAllegatoCompCgDto rAllCompCg, SigitVSk4CgDto vCompCg) {
		//metodo che recupera le info da dto grafico e lo riversa nel dto da persistere
		log.debug("[MapDto:mapToTipo4Dett] BEGIN");
		
		Tipo4Dett dett = new Tipo4Dett();
		
		dett.setIdTipoComponente(rAllCompCg.getIdTipoComponente());
		dett.setProgressivo(ConvertUtil.convertToString(rAllCompCg.getProgressivo()));
		dett.setDescComponente(costruisciTipoComponente(rAllCompCg.getIdTipoComponente(), rAllCompCg.getProgressivo()));
		
		dett.setDataInstallazione(ConvertUtil.convertToString(rAllCompCg.getDataInstall()));
		dett.setMarca(vCompCg.getDesMarca());
		dett.setModello(vCompCg.getModello());
		dett.setMatricola(vCompCg.getMatricola());
		//dett.setDescTipo(vCompCg.getDesDettaglioGt());
		dett.setPotenzaElettricaKw(ConvertUtil.convertToString(vCompCg.getPotenzaElettricaKw()));
		dett.setPotenzaTermicaKw(ConvertUtil.convertToString(vCompCg.getPotenzaTermicaKw()));
		dett.setTipologia(vCompCg.getTipologia());
		dett.setAlimentazione(vCompCg.getDesCombustibile());
		dett.setCoMedio(GenericUtil.getStringValid(vCompCg.getCoMin())+"/"+GenericUtil.getStringValid(vCompCg.getCoMax()));
		
		log.debug("[MapDto:mapToTipo4Dett] END");
		
		return dett;
	}
	
	public static ComponenteSC mapToComponenteSC(SigitTCompScDto entity, Map<BigDecimal, String> dizionarioMarche) {

		ComponenteSC dto = new ComponenteSC();
		dto.setCfProp(entity.getCfProprietario());
		dto.setComponente(entity.getIdTipoComponente() + "-" + entity.getProgressivo());
		dto.setDataDismissione(ConvertUtil.convertToString(entity.getDataDismiss()));
		dto.setDataInstallazione(ConvertUtil.convertToString(entity.getDataInstall()));
		dto.setDenominazioneProp(entity.getNomeProprietario());
		dto.setFabbricante(ConvertUtil.convertToString(entity.getFkMarca()));
		if (entity.getFkMarca() != null && dizionarioMarche != null && !dizionarioMarche.isEmpty()) {
			dto.setFabbricanteLabel(dizionarioMarche.get(entity.getFkMarca()));
		}
		dto.setFlgDismesso(ConvertUtil.convertToBooleanAllways(entity.getFlgDismissione()));
		dto.setMatricola(entity.getMatricola());
		dto.setModello(entity.getModello());
		dto.setNote(entity.getNote());
		dto.setPotenzaTermicaKw(ConvertUtil.convertToString(entity.getPotenzaTermicaKw()));
		dto.setTempoManutenzione(ConvertUtil.convertToString(entity.getTempoManutAnni()));
		
		return dto;
	}
	
	public static SigitTCompScDto mapToSigitTCompSCDto (ComponenteSC dto, BigDecimal codiceImpianto, BigDecimal progressivo, String cfUtenteMod) {
		
		SigitTCompScDto entity = new SigitTCompScDto();
		
		entity.setCfProprietario(dto.getCfProp());
		entity.setCodiceImpianto(codiceImpianto);
		try{entity.setDataInstall(ConvertUtil.convertToSqlDate(dto.getDataInstallazione()));}catch (Exception e) {entity.setDataInstall(null);}
		try{entity.setDataDismiss(ConvertUtil.convertToSqlDate(dto.getDataDismissione()));}catch (Exception e) {entity.setDataDismiss(null);}
		entity.setNomeProprietario(dto.getDenominazioneProp());
		entity.setFkMarca(ConvertUtil.convertToBigDecimal(dto.getFabbricante()));
		entity.setFlgDismissione(ConvertUtil.convertToBigDecimal(dto.getFlgDismesso()));
		entity.setMatricola(dto.getMatricola());
		entity.setModello(dto.getModello());
		entity.setNote(dto.getNote());
		entity.setPotenzaTermicaKw(ConvertUtil.convertToBigDecimal(dto.getPotenzaTermicaKw()));
		entity.setProgressivo(progressivo);
		entity.setTempoManutAnni(ConvertUtil.convertToBigDecimal(dto.getTempoManutenzione()));
		entity.setIdTipoComponente(Constants.TIPO_COMPONENTE_SC);
		
		entity.setUtenteUltMod(cfUtenteMod);
		entity.setDataUltMod(DateUtil.getSqlDataCorrente());
		
		return entity;
	}
	
	public static ComponenteGF mapToComponenteGF(SigitTCompGfDto entity, Map<BigDecimal, String> dizionarioMarche, Map<BigDecimal, String> dizionarioCombustibile) {

		ComponenteGF dto = new ComponenteGF();
		dto.setCombustibile(ConvertUtil.convertToString(entity.getFkCombustibile()));
		if (entity.getFkCombustibile() != null && dizionarioCombustibile != null && !dizionarioCombustibile.isEmpty()) {
			dto.setCombustibileLabel(dizionarioCombustibile.get(entity.getFkCombustibile()));
		}
		dto.setComponente(entity.getIdTipoComponente() + "-" + entity.getProgressivo());
		dto.setCop(entity.getRiscaldamentoCop());
		dto.setDataDismissione(ConvertUtil.convertToString(entity.getDataDismiss()));
		dto.setDataInstallazione(ConvertUtil.convertToString(entity.getDataInstall()));
		dto.setEer(entity.getRaffrescamentoEer());
		dto.setFabbricante(ConvertUtil.convertToString(entity.getFkMarca()));
		if (entity.getFkMarca() != null && dizionarioMarche != null && !dizionarioMarche.isEmpty()) {
			dto.setFabbricanteLabel(dizionarioMarche.get(entity.getFkMarca()));
		}
		dto.setFlgDismesso(ConvertUtil.convertToBooleanAllways(entity.getFlgDismissione()));
		dto.setFluidoFrigorigeno(entity.getFluidoFrigorigeno());
		dto.setFluidoLatoUtenze(ConvertUtil.getEnumFromString(SorgenteFluidoEnum.class, entity.getFlgFluidoUtenze()) != null ? entity.getFlgFluidoUtenze() : null);
		dto.setMatricola(entity.getMatricola());
		dto.setModello(entity.getModello());
		dto.setNumCircuiti(ConvertUtil.convertToString(entity.getNCircuiti()));
		dto.setNote(entity.getNote());
		dto.setRaffPotenzaAssorbita(ConvertUtil.convertToString(entity.getRaffPotenzaAss()));
		dto.setRaffPotenzaKw(ConvertUtil.convertToString(entity.getRaffPotenzaKw()));
		dto.setRiscPotenzaKw(ConvertUtil.convertToString(entity.getRiscPotenzaKw()));
		dto.setRiscPotenzaAssorbita(ConvertUtil.convertToString(entity.getRiscPotenzaAssKw()));
		dto.setSorgenteLatoEsterno(ConvertUtil.getEnumFromString(SorgenteFluidoEnum.class, entity.getFlgSorgenteExt()) != null ? entity.getFlgSorgenteExt() : null);
		dto.setTempoManutenzione(ConvertUtil.convertToString(entity.getTempoManutAnni()));
		dto.setTipologia(ConvertUtil.convertToString(entity.getFkDettaglioGf()));
		return dto;
		
	}
	
	public static SigitTCompGfDto mapToSigitTCompGFDto (ComponenteGF dto, BigDecimal codiceImpianto, BigDecimal progressivo, String cfUtenteMod) {
		
		SigitTCompGfDto entity = new SigitTCompGfDto();
		entity.setCodiceImpianto(codiceImpianto);
		try{entity.setDataInstall(ConvertUtil.convertToSqlDate(dto.getDataInstallazione()));}catch (Exception e) {entity.setDataInstall(null);}
		try{entity.setDataDismiss(ConvertUtil.convertToSqlDate(dto.getDataDismissione()));}catch (Exception e) {entity.setDataDismiss(null);}
		entity.setFkCombustibile(ConvertUtil.convertToBigDecimal(dto.getCombustibile()));
		entity.setFkDettaglioGf(ConvertUtil.convertToBigDecimal(dto.getTipologia()));
		entity.setFkMarca(ConvertUtil.convertToBigDecimal(dto.getFabbricante()));
		entity.setFlgDismissione(ConvertUtil.convertToBigDecimal(dto.getFlgDismesso()));
		entity.setFlgFluidoUtenze(ConvertUtil.getEnumFromString(SorgenteFluidoEnum.class, dto.getFluidoLatoUtenze()) != null ? dto.getFluidoLatoUtenze() : null);
		entity.setFlgSorgenteExt(ConvertUtil.getEnumFromString(SorgenteFluidoEnum.class, dto.getSorgenteLatoEsterno()) != null ? dto.getSorgenteLatoEsterno() : null);
		entity.setFluidoFrigorigeno(dto.getFluidoFrigorigeno());
		entity.setIdTipoComponente(Constants.TIPO_COMPONENTE_GF);
		entity.setMatricola(dto.getMatricola());
		entity.setModello(dto.getModello());
		entity.setNCircuiti(ConvertUtil.convertToBigDecimal(dto.getNumCircuiti()));
		entity.setNote(dto.getNote());
		entity.setProgressivo(progressivo);
		entity.setRaffPotenzaAss(ConvertUtil.convertToBigDecimal(dto.getRaffPotenzaAssorbita()));
		entity.setRaffPotenzaKw(ConvertUtil.convertToBigDecimal(dto.getRaffPotenzaKw()));
		entity.setRaffrescamentoEer(dto.getEer());
		entity.setRiscaldamentoCop(dto.getCop());
		entity.setRiscPotenzaAssKw(ConvertUtil.convertToBigDecimal(dto.getRiscPotenzaAssorbita()));
		entity.setRiscPotenzaKw(ConvertUtil.convertToBigDecimal(dto.getRiscPotenzaKw()));
		entity.setTempoManutAnni(ConvertUtil.convertToBigDecimal(dto.getTempoManutenzione()));
		
		entity.setUtenteUltMod(cfUtenteMod);
		entity.setDataUltMod(DateUtil.getSqlDataCorrente());
		
		return entity;

	}
	
	public static ComponenteCG mapToComponenteCG(SigitTCompCgDto entity, Map<BigDecimal, String> dizionarioMarche, Map<BigDecimal, String> dizionarioCombustibile) {

		ComponenteCG dto = new ComponenteCG();
		dto.setAlimentazione(ConvertUtil.convertToString(entity.getFkCombustibile()));
		if (entity.getFkCombustibile() != null && dizionarioCombustibile != null && !dizionarioCombustibile.isEmpty()) {
			dto.setAlimentazioneLabel(dizionarioCombustibile.get(entity.getFkCombustibile()));
		}
		dto.setCoMax(ConvertUtil.convertToString(entity.getCoMax()));
		dto.setCoMin(ConvertUtil.convertToString(entity.getCoMin()));
		dto.setComponente(entity.getIdTipoComponente() + "-" + entity.getProgressivo());
		dto.setDataDismissione(ConvertUtil.convertToString(entity.getDataDismiss()));
		dto.setDataInstallazione(ConvertUtil.convertToString(entity.getDataInstall()));
		dto.setFabbricante(ConvertUtil.convertToString(entity.getFkMarca()));
		if (entity.getFkMarca() != null && dizionarioMarche != null && !dizionarioMarche.isEmpty()) {
			dto.setFabbricanteLabel(dizionarioMarche.get(entity.getFkMarca()));
		}
		dto.setFlgDismesso(ConvertUtil.convertToBooleanAllways(entity.getFlgDismissione()));
		dto.setMatricola(entity.getMatricola());
		dto.setModello(entity.getModello());
		dto.setNote(entity.getNote());
		dto.setPotenzaElettricaKw(ConvertUtil.convertToString(entity.getPotenzaElettricaKw()));
		dto.setPotenzaTermicaKw(ConvertUtil.convertToString(entity.getPotenzaTermicaKw()));
		dto.setTemperaturaFumiMonteMax(ConvertUtil.convertToString(entity.getTempFumiMonteMax()));
		dto.setTemperaturaFumiMonteMin(ConvertUtil.convertToString(entity.getTempFumiMonteMin()));
		dto.setTemperaturaFumiValleMax(ConvertUtil.convertToString(entity.getTempFumiValleMax()));
		dto.setTemperaturaFumiValleMin(ConvertUtil.convertToString(entity.getTempFumiValleMin()));
		dto.setTemperaturaH2OIngressoMax(ConvertUtil.convertToString(entity.getTempH2oInMax()));
		dto.setTemperaturaH2OIngressoMin(ConvertUtil.convertToString(entity.getTempH2oInMin()));
		dto.setTemperaturaH2OMotoreMax(ConvertUtil.convertToString(entity.getTempH2oMotoreMax()));
		dto.setTemperaturaH2OMotoreMin(ConvertUtil.convertToString(entity.getTempH2oMotoreMin()));
		dto.setTemperaturaH2OUscitaMax(ConvertUtil.convertToString(entity.getTempH2oOutMax()));
		dto.setTemperaturaH2OUscitaMin(ConvertUtil.convertToString(entity.getTempH2oOutMin()));
		dto.setTempoManutenzione(ConvertUtil.convertToString(entity.getTempoManutAnni()));
		dto.setTipologia(entity.getTipologia());
		return dto;
		
	}
	
	public static SigitTCompCgDto mapToSigitTCompCGDto (ComponenteCG dto, BigDecimal codiceImpianto, BigDecimal progressivo, String cfUtenteMod) {
		
		SigitTCompCgDto entity = new SigitTCompCgDto();
		entity.setCodiceImpianto(codiceImpianto);
		entity.setCoMax(ConvertUtil.convertToBigDecimal(dto.getCoMax()));
		entity.setCoMin(ConvertUtil.convertToBigDecimal(dto.getCoMin()));
		try{entity.setDataInstall(ConvertUtil.convertToSqlDate(dto.getDataInstallazione()));}catch (Exception e) {entity.setDataInstall(null);}
		try{entity.setDataDismiss(ConvertUtil.convertToSqlDate(dto.getDataDismissione()));}catch (Exception e) {entity.setDataDismiss(null);}
		entity.setFkCombustibile(ConvertUtil.convertToBigDecimal(dto.getAlimentazione()));
		entity.setFkMarca(ConvertUtil.convertToBigDecimal(dto.getFabbricante()));
		entity.setFlgDismissione(ConvertUtil.convertToBigDecimal(dto.getFlgDismesso()));
		entity.setMatricola(dto.getMatricola());
		entity.setModello(dto.getModello());
		entity.setNote(dto.getNote());
		entity.setPotenzaElettricaKw(ConvertUtil.convertToBigDecimal(dto.getPotenzaElettricaKw()));
		entity.setPotenzaTermicaKw(ConvertUtil.convertToBigDecimal(dto.getPotenzaTermicaKw()));
		entity.setProgressivo(progressivo);
		entity.setTempFumiMonteMax(ConvertUtil.convertToBigDecimal(dto.getTemperaturaFumiMonteMax()));
		entity.setTempFumiMonteMin(ConvertUtil.convertToBigDecimal(dto.getTemperaturaFumiMonteMin()));
		entity.setTempFumiValleMax(ConvertUtil.convertToBigDecimal(dto.getTemperaturaFumiValleMax()));
		entity.setTempFumiValleMin(ConvertUtil.convertToBigDecimal(dto.getTemperaturaFumiValleMin()));
		entity.setTempH2oInMax(ConvertUtil.convertToBigDecimal(dto.getTemperaturaH2OIngressoMax()));
		entity.setTempH2oInMin(ConvertUtil.convertToBigDecimal(dto.getTemperaturaH2OIngressoMin()));
		entity.setTempH2oMotoreMax(ConvertUtil.convertToBigDecimal(dto.getTemperaturaH2OMotoreMax()));
		entity.setTempH2oMotoreMin(ConvertUtil.convertToBigDecimal(dto.getTemperaturaH2OMotoreMin()));
		entity.setTempH2oOutMax(ConvertUtil.convertToBigDecimal(dto.getTemperaturaH2OUscitaMax()));
		entity.setTempH2oOutMin(ConvertUtil.convertToBigDecimal(dto.getTemperaturaH2OUscitaMin()));
		entity.setTempoManutAnni(ConvertUtil.convertToBigDecimal(dto.getTempoManutenzione()));
		entity.setTipologia(dto.getTipologia());
		entity.setIdTipoComponente(Constants.TIPO_COMPONENTE_CG);
		
		entity.setUtenteUltMod(cfUtenteMod);
		entity.setDataUltMod(DateUtil.getSqlDataCorrente());
		
		return entity;

	}
	
	
	
	public static ComponenteGT mapToComponenteGT(SigitTCompGtDto entity, Map<BigDecimal, String> dizionarioMarche, Map<BigDecimal, String> dizionarioCombustibile) {

		ComponenteGT dto = new ComponenteGT();
		dto.setCombustibile(ConvertUtil.convertToString(entity.getFkCombustibile()));
		if (entity.getFkCombustibile() != null && dizionarioCombustibile != null && !dizionarioCombustibile.isEmpty()) {
			dto.setCombustibileLabel(dizionarioCombustibile.get(entity.getFkCombustibile()));
		}
		
		dto.setComponente(entity.getIdTipoComponente() + "-" + entity.getProgressivo());
		dto.setDataDismissione(ConvertUtil.convertToString(entity.getDataDismiss()));
		dto.setDataInstallazione(ConvertUtil.convertToString(entity.getDataInstall()));
		dto.setFabbricante(ConvertUtil.convertToString(entity.getFkMarca()));
		if (entity.getFkMarca() != null && dizionarioMarche != null && !dizionarioMarche.isEmpty()) {
			dto.setFabbricanteLabel(dizionarioMarche.get(entity.getFkMarca()));
		}
		dto.setFlgDismesso(ConvertUtil.convertToBooleanAllways(entity.getFlgDismissione()));
		dto.setFluido(ConvertUtil.convertToString(entity.getFkFluido()));
		dto.setMatricola(entity.getMatricola());
		dto.setModello(entity.getModello());
		dto.setNumModuli(ConvertUtil.convertToString(entity.getNModuli()));
		dto.setNote(entity.getNote());
		dto.setPotenzaTermicaKw(ConvertUtil.convertToString(entity.getPotenzaTermicaKw()));
		dto.setRendimentoPerc(ConvertUtil.convertToString(entity.getRendimentoPerc()));
		dto.setTempoManutenzione(ConvertUtil.convertToString(entity.getTempoManutAnni()));
		dto.setTipologia(ConvertUtil.convertToString(entity.getFkDettaglioGt()));
		return dto;
		
	}
	
	public static SigitTCompGtDto mapToSigitTCompGTDto (ComponenteGT dto, BigDecimal codiceImpianto, BigDecimal progressivo, String cfUtenteMod) {
		
		SigitTCompGtDto entity = new SigitTCompGtDto();
		entity.setCodiceImpianto(codiceImpianto);
		try{entity.setDataInstall(ConvertUtil.convertToSqlDate(dto.getDataInstallazione()));}catch (Exception e) {entity.setDataInstall(null);}
		try{entity.setDataDismiss(ConvertUtil.convertToSqlDate(dto.getDataDismissione()));}catch (Exception e) {entity.setDataDismiss(null);}
		entity.setFkCombustibile(ConvertUtil.convertToBigDecimal(dto.getCombustibile()));
		entity.setFkMarca(ConvertUtil.convertToBigDecimal(dto.getFabbricante()));
		entity.setFlgDismissione(ConvertUtil.convertToBigDecimal(dto.getFlgDismesso()));
		entity.setFkFluido(ConvertUtil.convertToBigDecimal(dto.getFluido()));
		entity.setMatricola(dto.getMatricola());
		entity.setModello(dto.getModello());
		entity.setNModuli(ConvertUtil.convertToBigDecimal(dto.getNumModuli()));
		entity.setNote(dto.getNote());
		entity.setPotenzaTermicaKw(ConvertUtil.convertToBigDecimal(dto.getPotenzaTermicaKw()));
		entity.setProgressivo(progressivo);
		entity.setRendimentoPerc(ConvertUtil.convertToBigDecimal(dto.getRendimentoPerc()));
		entity.setTempoManutAnni(ConvertUtil.convertToBigDecimal(dto.getTempoManutenzione()));
		entity.setFkDettaglioGt(ConvertUtil.convertToBigDecimal(dto.getTipologia()));
		entity.setIdTipoComponente(Constants.TIPO_COMPONENTE_GT);
		
		entity.setUtenteUltMod(cfUtenteMod);
		entity.setDataUltMod(DateUtil.getSqlDataCorrente());
		
		return entity;

	}

	public static ComponenteBRRC mapToComponenteBRRC (SigitTCompBrRcDto entity, Map<BigDecimal, String> dizionarioMarche, Map<BigDecimal, String> dizionarioCombustibile) {

		ComponenteBRRC dto = new ComponenteBRRC();
		dto.setComponente(entity.getTipologiaBrRc() + "-"+entity.getProgressivoBrRc());
		dto.setDataDismissione(ConvertUtil.convertToString(entity.getDataDismiss()));
		dto.setDataInstallazione(ConvertUtil.convertToString(entity.getDataInstall()));
		dto.setFabbricante(ConvertUtil.convertToString(entity.getFkMarca()));
		if (entity.getFkMarca() != null && dizionarioMarche != null && !dizionarioMarche.isEmpty()) {
			dto.setFabbricanteLabel(dizionarioMarche.get(entity.getFkMarca()));
		}
		dto.setGtCollegato(ConvertUtil.convertToString(entity.getFkProgressivo()));
		if (entity.getFkProgressivo() != null && entity.getFkTipoComponente() != null) {
			dto.setGtCollegatoLabel(entity.getFkTipoComponente() + Constants.INTERVAL_SEP + entity.getFkProgressivo());
		}
		dto.setFlgDismesso(ConvertUtil.convertToBooleanAllways(entity.getFlgDismissione()));
		
		dto.setMatricola(entity.getMatricola());
		dto.setModello(entity.getModello());
		dto.setPortataMax(ConvertUtil.convertToString(entity.getPotTermMaxKw()));
		dto.setPortataMin(ConvertUtil.convertToString(entity.getPotTermMinKw()));
		dto.setTipologia(entity.getTipologia());
		dto.setCombustibile(ConvertUtil.convertToString(entity.getFkCombustibile()));
		if (entity.getFkCombustibile() != null && dizionarioCombustibile != null && !dizionarioCombustibile.isEmpty()) {
			dto.setCombustibileLabel(dizionarioCombustibile.get(entity.getFkCombustibile())); //componenti sostituite: desCombustibile
		}
		return dto;
		
	}
	
	public static SigitTCompBrRcDto mapToSigitTCompBrRcDto (ComponenteBRRC dto, BigDecimal codiceImpianto, BigDecimal fkProgressivo, java.sql.Date fkDataInstallaz, BigDecimal progressivo, String tipoComponente) {
		
		SigitTCompBrRcDto entity = new SigitTCompBrRcDto();
		entity.setCodiceImpianto(codiceImpianto);
		entity.setFkProgressivo(fkProgressivo);
		entity.setFkTipoComponente(Constants.TIPO_COMPONENTE_GT);
		entity.setFkDataInstall(fkDataInstallaz);
		entity.setProgressivoBrRc(progressivo);
		try{entity.setDataInstall(ConvertUtil.convertToSqlDate(dto.getDataInstallazione()));}catch (Exception e) {entity.setDataInstall(null);}
		try{entity.setDataDismiss(ConvertUtil.convertToSqlDate(dto.getDataDismissione()));}catch (Exception e) {entity.setDataDismiss(null);}
		entity.setFkMarca(ConvertUtil.convertToBigDecimal(dto.getFabbricante()));
		entity.setModello(dto.getModello());
		entity.setMatricola(dto.getMatricola());
		entity.setTipologia(dto.getTipologia());
		entity.setTipologiaBrRc(tipoComponente);
		entity.setPotTermMaxKw(ConvertUtil.convertToBigDecimal(dto.getPortataMax()));
		entity.setPotTermMinKw(ConvertUtil.convertToBigDecimal(dto.getPortataMin()));
		entity.setFkCombustibile(ConvertUtil.convertToBigDecimal(dto.getCombustibile()));
		entity.setFlgDismissione(ConvertUtil.convertToBigDecimal(dto.getFlgDismesso()));
		return entity;

	}
	
	public static TipoGFDett mapToTipoGFDett(TipoGFDett dett, List<SigitTDettIspezGfDto> tDettList) {
		log.debug("[mapToTipoGTDett] BEGIN");
		
		SigitTDettIspezGfDto tDett = null;
		if (tDettList != null && tDettList.size() > 0) {
			StringBuffer sbCircuitiNonComp = null;
			for (int i = 0; i< tDettList.size(); i++) {
				tDett = tDettList.get(i);
				if (i == 0) {
					// Se e' il primo elemento setto i dati comuni
					dett.setCodImpianto(ConvertUtil.convertToInteger(tDett.getCodiceImpianto()));
					dett.setIdAllegato(ConvertUtil.convertToInteger(tDett.getFkAllegato()));
					dett.setProgressivo(ConvertUtil.convertToString(tDett.getProgressivo()));
					
					dett.setS6nFlgFugaDiretta(ConvertUtil.convertToInteger(tDett.getS6nFlgFugaDiretta()));
					dett.setS6nFlgFugaIndiretta(ConvertUtil.convertToInteger(tDett.getS6nFlgFugaIndiretta()));
					dett.setS6hFlgInverter(ConvertUtil.convertToInteger(tDett.getS6hFlgInverter()));
					
					dett.setS7aDataUltimaManut(ConvertUtil.convertToString(tDett.getS7aDataUltimaManut()));
					dett.setS7aFkFrequenzaManut(ConvertUtil.convertToString(tDett.getS7aFkFrequenzaManut()));
					dett.setS7aFrequenzaManutAltro(tDett.getS7aFrequenzaManutAltro());
					dett.setS7bDataRee(ConvertUtil.convertToString(tDett.getS7cDataRee()));
					dett.setS7bFlgOsservazioni(ConvertUtil.convertToBooleanAllways(tDett.getS7cFlgOsservazioni()));
					dett.setS7bFlgPrescr(ConvertUtil.convertToBooleanAllways(tDett.getS7cFlgPrescr()));
					dett.setS7bFlgRaccomand(ConvertUtil.convertToBooleanAllways(tDett.getS7cFlgRaccomand()));
					dett.setS7bFlgRegistroApparecc(ConvertUtil.convertToInteger(tDett.getS7bFlgRegistroApparecc()));
					dett.setS7cFlgReePresente(ConvertUtil.convertToInteger(tDett.getS7cFlgReePresente()));
					dett.setS7FlgManutEffettuata(ConvertUtil.convertToInteger(tDett.getS7aFlgManutEffettuata()));
					
				}
				if (GenericUtil.isNullOrEmpty(tDett.getControlloweb()))
				{
					if (sbCircuitiNonComp == null)
					{
						sbCircuitiNonComp = new StringBuffer();
					}
					else
					{
						sbCircuitiNonComp.append(", ");
						
					}
					sbCircuitiNonComp.append(tDett.getS8aNCircuito());
				}
				
				if (GenericUtil.isNotNullOrEmpty(sbCircuitiNonComp))
				{
					dett.setElencoCircuitiNonComp(sbCircuitiNonComp.toString());
				}
				else
				{
					dett.setElencoCircuitiNonComp(null);
				}
			}
		}
		
		return dett;
	}
	
	
	public static TipoGTDett mapToTipoGTDett(TipoGTDett dett, List<SigitTDettIspezGtDto> tDettList) {
		log.debug("[mapToTipoGTDett] BEGIN");
		
		SigitTDettIspezGtDto tDett = null;
		if (tDettList != null && tDettList.size() > 0) {
			StringBuffer sbModuliNonComp = null;
			for (int i = 0; i< tDettList.size(); i++) {
				tDett = tDettList.get(i);
				
				if (i == 0) {
					// Se e' il primo elemento setto i dati comuni
					dett.setCodImpianto(ConvertUtil.convertToInteger(tDett.getCodiceImpianto()));
					dett.setIdAllegato(ConvertUtil.convertToInteger(tDett.getFkAllegato()));
					dett.setProgressivo(ConvertUtil.convertToString(tDett.getProgressivo()));
					
					dett.setS6dFlgEvacuFumi(tDett.getS6dFlgEvacuFumi());
					dett.setS6iFlgTipoB(ConvertUtil.convertToBooleanAllways(tDett.getS6iFlgTipoB()));
					dett.setS6iFlgTipoC(ConvertUtil.convertToBooleanAllways(tDett.getS6iFlgTipoC()));
					dett.setS6jFkClassDpr660_96(tDett.getS6jFkClassDpr66096());
					dett.setS6kBruciatoreAKw(ConvertUtil.convertToString(tDett.getS6kBruciatoreAKw()));
					dett.setS6kBruciatoreDaKw(ConvertUtil.convertToString(tDett.getS6kBruciatoreDaKw()));
					dett.setS6kPotTermFocolKw(ConvertUtil.convertToString(tDett.getS6kPotTermFocolKw()));
					dett.setS6lPortataCombKgH(tDett.getS6lPortataCombKgH());
					dett.setS6lPortataCombM3H(ConvertUtil.convertToString(tDett.getS6lPortataCombM3H()));
					dett.setS6lPotTermFocolKw(ConvertUtil.convertToString(tDett.getS6lPotTermFocolKw()));
					
					dett.setS7aDataUltimaManut(ConvertUtil.convertToString(tDett.getS7aDataUltimaManut()));
					dett.setS7aFkFrequenzaManut(ConvertUtil.convertToString(tDett.getS7aFkFrequenzaManut()));
					dett.setS7aFlgManutEffettuata(ConvertUtil.convertToInteger(tDett.getS7aFlgManutEffettuata()));
					dett.setS7aFrequenzaManutAltro(tDett.getS7aFrequenzaManutAltro());
					dett.setS7bDataRee(ConvertUtil.convertToString(tDett.getS7bDataRee()));
					dett.setS7bFlgOsservazioni(ConvertUtil.convertToBooleanAllways(tDett.getS7bFlgOsservazioni()));
					dett.setS7bFlgPrescr(ConvertUtil.convertToBooleanAllways(tDett.getS7bFlgPrescr()));
					dett.setS7bFlgRaccomand(ConvertUtil.convertToBooleanAllways(tDett.getS7bFlgRaccomand()));
					dett.setS7bFlgReePresente(ConvertUtil.convertToInteger(tDett.getS7bFlgReePresente()));

				}
				
				if (GenericUtil.isNullOrEmpty(tDett.getControlloweb()))
				{
					if (sbModuliNonComp == null)
					{
						sbModuliNonComp = new StringBuffer();
					}
					else
					{
						sbModuliNonComp.append(", ");
						
					}
					sbModuliNonComp.append(tDett.getS8aNModuloTermico());
				}
				
			}
			
			if (GenericUtil.isNotNullOrEmpty(sbModuliNonComp))
			{
				dett.setElencoModuliNonComp(sbModuliNonComp.toString());
			}
			else
			{
				dett.setElencoModuliNonComp(null);
			}
		}
		
		return dett;
	}
	
	public static Tipo1Dett mapToTipo1Dett(Tipo1Dett dett, List<SigitTDettTipo1Dto> tDettTipo1List) {
		//metodo che recupera le info da dto grafico e lo riversa nel dto da persistere
		log.debug("[MapDto:mapToTipo1Dett] BEGIN");

		SigitTDettTipo1Dto tDettTipo1 = null;
		if (tDettTipo1List != null && tDettTipo1List.size() > 0)
		{
			StringBuffer sbModuliNonComp = null;
			for (int i = 0; i < tDettTipo1List.size(); i++) {

				// Preno il primo elemento
				tDettTipo1 = tDettTipo1List.get(i);
				
				if (log.isDebugEnabled())
					GenericUtil.stampa(tDettTipo1, true, 3);
				
				if (i == 0)
				{
					
					// Se e' il primo elemento setto i dati comuni

					dett.setCodImpianto(ConvertUtil.convertToInteger(tDettTipo1.getCodiceImpianto()));
					dett.setIdAllegato(ConvertUtil.convertToInteger(tDettTipo1.getFkAllegato()));
					dett.setProgressivo(ConvertUtil.convertToString(tDettTipo1.getProgressivo()));
					
					dett.setPotTermFocolKw(ConvertUtil.convertToString(tDettTipo1.getEPotTermFocolKw()));
					//dett.setPotenzaTermicaKw(ConvertUtil.convertToString(tDettTipo1.getEPotTermFocolKw()));

					dett.setFlgClimaInverno(ConvertUtil.convertToBoolean(tDettTipo1.getEFlgClimaInverno()));
					dett.setFlgProduzAcs(ConvertUtil.convertToBoolean(tDettTipo1.getEFlgProduzAcs()));

					dett.setFlgEvacuFumi(tDettTipo1.getEFlgEvacuFumi());

					dett.setDeprCanaleFumoPa(ConvertUtil.convertToString(tDettTipo1.getEDeprCanaleFumoPa()));


					dett.setFlgDisposComando(ConvertUtil.convertToInteger(tDettTipo1.getEFlgDisposComando()));
					dett.setFlgDisposSicurezza(ConvertUtil.convertToInteger(tDettTipo1.getEFlgDisposSicurezza()));
					dett.setFlgValvolaSicurezza(ConvertUtil.convertToInteger(tDettTipo1.getEFlgValvolaSicurezza()));
					dett.setFlgScambiatoreFumi(ConvertUtil.convertToInteger(tDettTipo1.getEFlgScambiatoreFumi()));
					dett.setFlgRiflusso(ConvertUtil.convertToInteger(tDettTipo1.getEFlgRiflusso()));
					dett.setFlgUni10389_1(ConvertUtil.convertToInteger(tDettTipo1.getEFlgUni103891()));
					dett.setAltroRiferimento(tDettTipo1.getL111AltroRiferimento());
				}

				if (GenericUtil.isNullOrEmpty(tDettTipo1.getEControlloweb()))
				{
					if (sbModuliNonComp == null)
					{
						sbModuliNonComp = new StringBuffer();
					}
					else
					{
						sbModuliNonComp.append(", ");
						
					}
					sbModuliNonComp.append(tDettTipo1.getENModuloTermico());
				}
			}
			
			if (GenericUtil.isNotNullOrEmpty(sbModuliNonComp))
			{
				dett.setElencoModuliNonComp(sbModuliNonComp.toString());
			}
			else
			{
				dett.setElencoModuliNonComp(null);
			}
		}


		log.debug("[MapDto:mapToTipo1Dett] END");

		return dett;
	}
	
	public static Tipo2Dett mapToTipo2Dett(Tipo2Dett dett, List<SigitTDettTipo2Dto> tDettTipo2List) {
		//metodo che recupera le info da dto grafico e lo riversa nel dto da persistere
		log.debug("[MapDto:mapToTipo2Dett] BEGIN");

		SigitTDettTipo2Dto tDettTipo2 = null;
		if (tDettTipo2List != null && tDettTipo2List.size() > 0)
		{
			StringBuffer sbModuliNonComp = null;
			for (int i = 0; i < tDettTipo2List.size(); i++) {

				// Preno il primo elemento
				tDettTipo2 = tDettTipo2List.get(i);
				
				if (log.isDebugEnabled())
					GenericUtil.stampa(tDettTipo2, true, 3);
				
				if (i == 0)
				{
					
					// Se e' il primo elemento setto i dati comuni

					dett.setCodImpianto(ConvertUtil.convertToInteger(tDettTipo2.getCodiceImpianto()));
					dett.setIdAllegato(ConvertUtil.convertToInteger(tDettTipo2.getFkAllegato()));
					dett.setProgressivo(ConvertUtil.convertToString(tDettTipo2.getProgressivo()));
					
					//dett.setNCircuiti(tDettTipo2.getENCircuito());
					//dett.setRaffPotenzaKw(val);PotenzaKw(ConvertUtil.convertToString(tDettTipo2.getraEPotTermFocolKw()));
					//dett.setPotenzaTermicaKw(ConvertUtil.convertToString(tDettTipo1.getEPotTermFocolKw()));

					dett.setFlgModProva(tDettTipo2.getEFlgModProva());
					dett.setFlgPerditaGas(ConvertUtil.convertToInteger(tDettTipo2.getEFlgPerditaGas()));
					dett.setFlgLeakDirector(ConvertUtil.convertToInteger(tDettTipo2.getEFlgLeakDetector()));
					dett.setFlgParamTermodinam(ConvertUtil.convertToInteger(tDettTipo2.getEFlgParamTermodinam()));
					dett.setFlgIncrostazioni(ConvertUtil.convertToInteger(tDettTipo2.getEFlgIncrostazioni()));

				}

				if (GenericUtil.isNullOrEmpty(tDettTipo2.getEControlloweb()))
				{
					if (sbModuliNonComp == null)
					{
						sbModuliNonComp = new StringBuffer();
					}
					else
					{
						sbModuliNonComp.append(", ");
						
					}
					sbModuliNonComp.append(tDettTipo2.getENCircuito());
				}
			}
			
			if (GenericUtil.isNotNullOrEmpty(sbModuliNonComp))
			{
				dett.setElencoCircuitiNonComp(sbModuliNonComp.toString());
			}
			else
			{
				dett.setElencoCircuitiNonComp(null);
			}
		}


		log.debug("[MapDto:mapToTipo2Dett] END");

		return dett;
	}
	
	public static Tipo3Dett mapToTipo3Dett(Tipo3Dett dett, SigitTDettTipo3Dto tDettTipo3) {
		log.debug("[MapDto:mapToTipo3Dett] BEGIN");
		
		if (tDettTipo3 != null)
		{
			
			if (log.isDebugEnabled())
				GenericUtil.stampa(tDettTipo3, true, 3);
			
			dett.setIdDettTipo3(ConvertUtil.convertToInteger(tDettTipo3.getIdDettTipo3()));
			dett.setCodImpianto(ConvertUtil.convertToInteger(tDettTipo3.getCodiceImpianto()));
			dett.setIdAllegato(ConvertUtil.convertToInteger(tDettTipo3.getFkAllegato()));
			dett.setProgressivo(ConvertUtil.convertToString(tDettTipo3.getProgressivo()));

			dett.setIdFluido(ConvertUtil.convertToString(tDettTipo3.getFkFluido()));
			dett.setFluidoAlimentazione(ConvertUtil.convertToString(tDettTipo3.getFkFluidoAlimentaz()));
			
			dett.setFlgClimaInverno(ConvertUtil.convertToBooleanAllways(tDettTipo3.getEFlgClimaInverno()));
			dett.setFlgProduzAcs(ConvertUtil.convertToBooleanAllways(tDettTipo3.getEFlgProduzAcs()));
			
			dett.setFlgPotenzaCompatibile(ConvertUtil.convertToInteger(tDettTipo3.getEFlgPotenzaCompatibile()));
			dett.setFlgCoibIdonea(ConvertUtil.convertToInteger(tDettTipo3.getEFlgCoibIdonea()));
			dett.setFlgDispFunzionanti(ConvertUtil.convertToInteger(tDettTipo3.getEFlgDispFunzionanti()));
			dett.setTempExt(ConvertUtil.convertToString(tDettTipo3.getETempExtC()));
			dett.setTempMandPrimario(ConvertUtil.convertToString(tDettTipo3.getETempMandPrimarioC()));
			dett.setTempRitorPrimario(ConvertUtil.convertToString(tDettTipo3.getETempRitorPrimarioC()));
			dett.setPotenzaTermKw(ConvertUtil.convertToString(tDettTipo3.getEPotenzaTermKw()));
			dett.setPortFluidoM3(ConvertUtil.convertToString(tDettTipo3.getEPortFluidoM3H()));
			dett.setTempMandSecondario(ConvertUtil.convertToString(tDettTipo3.getETempMandSecondarioC()));
			dett.setTempRitSecondario(ConvertUtil.convertToString(tDettTipo3.getETempRitSecondarioC()));
			
		}

		log.debug("[MapDto:mapToTipo3Dett] END");

		return dett;
	}
	
	public static Tipo4Dett mapToTipo4Dett(Tipo4Dett dett, List<SigitTDettTipo4Dto> tDettTipo4List) {
		//metodo che recupera le info da dto grafico e lo riversa nel dto da persistere
		log.debug("[MapDto:mapToTipo4Dett] BEGIN");

		SigitTDettTipo4Dto tDettTipo4 = null;
		if (tDettTipo4List != null && tDettTipo4List.size() > 0)
		{
			//StringBuffer sbModuliNonComp = null;
			for (int i = 0; i < tDettTipo4List.size(); i++) {

				// Prendo il primo elemento
				tDettTipo4 = tDettTipo4List.get(i);
				
				if (log.isDebugEnabled())
					GenericUtil.stampa(tDettTipo4, true, 3);
				
				if (i == 0)
				{
					dett.setIdDettTipo4(ConvertUtil.convertToInteger(tDettTipo4.getIdDettTipo4()));
					dett.setCodImpianto(ConvertUtil.convertToInteger(tDettTipo4.getCodiceImpianto()));
					dett.setIdAllegato(ConvertUtil.convertToInteger(tDettTipo4.getFkAllegato()));
					dett.setProgressivo(ConvertUtil.convertToString(tDettTipo4.getProgressivo()));

					dett.setIdFluido(ConvertUtil.convertToString(tDettTipo4.getFkFluido()));

					dett.setPotenzaAssorbCombKw(ConvertUtil.convertToString(tDettTipo4.getEPotenzaAssorbCombKw()));
					dett.setPotenzaTermBypassKw(ConvertUtil.convertToString(tDettTipo4.getEPotenzaTermBypassKw()));
					
					dett.setTempAriaC(ConvertUtil.convertToString(tDettTipo4.getETempAriaC()));
					
					dett.setTempH2oOutC(ConvertUtil.convertToString(tDettTipo4.getETempH2oOutC()));
					dett.setTempH2oInC(ConvertUtil.convertToString(tDettTipo4.getETempH2oInC()));
					dett.setPotenzaMorsettiKw(ConvertUtil.convertToString(tDettTipo4.getEPotenzaMorsettiKw()));
					dett.setTempH2oMotoreC(ConvertUtil.convertToString(tDettTipo4.getETempH2oMotoreC()));
					dett.setTempFumiValleC(ConvertUtil.convertToString(tDettTipo4.getETempFumiValleC()));
					dett.setTempFumiMonteC(ConvertUtil.convertToString(tDettTipo4.getETempFumiMonteC()));
					
					
					dett.setSovrafreqSogliaHzMin(ConvertUtil.convertToString(tDettTipo4.getL114SovrafreqSogliaHzMin()));
					dett.setSovrafreqSogliaHzMed(ConvertUtil.convertToString(tDettTipo4.getL114SovrafreqSogliaHzMed()));
					dett.setSovrafreqSogliaHzMax(ConvertUtil.convertToString(tDettTipo4.getL114SovrafreqSogliaHzMax()));
					
					dett.setSovrafreqTempoSMin(ConvertUtil.convertToString(tDettTipo4.getL114SovrafreqTempoSMin()));
					dett.setSovrafreqTempoSMed(ConvertUtil.convertToString(tDettTipo4.getL114SovrafreqTempoSMed()));
					dett.setSovrafreqTempoSMax(ConvertUtil.convertToString(tDettTipo4.getL114SovrafreqTempoSMax()));

					
					
					dett.setSottofreqSogliaHzMin(ConvertUtil.convertToString(tDettTipo4.getL114SottofreqSogliaHzMin()));
					dett.setSottofreqSogliaHzMed(ConvertUtil.convertToString(tDettTipo4.getL114SottofreqSogliaHzMed()));
					dett.setSottofreqSogliaHzMax(ConvertUtil.convertToString(tDettTipo4.getL114SottofreqSogliaHzMax()));
					
					dett.setSottofreqTempoSMin(ConvertUtil.convertToString(tDettTipo4.getL114SottofreqTempoSMin()));
					dett.setSottofreqTempoSMed(ConvertUtil.convertToString(tDettTipo4.getL114SottofreqTempoSMed()));
					dett.setSottofreqTempoSMax(ConvertUtil.convertToString(tDettTipo4.getL114SottofreqTempoSMax()));

					
					
					dett.setSovratensSogliaVMin(ConvertUtil.convertToString(tDettTipo4.getL114SovratensSogliaVMin()));
					dett.setSovratensSogliaVMed(ConvertUtil.convertToString(tDettTipo4.getL114SovratensSogliaVMed()));
					dett.setSovratensSogliaVMax(ConvertUtil.convertToString(tDettTipo4.getL114SovratensSogliaVMax()));
					
					dett.setSovratensTempoSMin(ConvertUtil.convertToString(tDettTipo4.getL114SovratensTempoSMin()));
					dett.setSovratensTempoSMed(ConvertUtil.convertToString(tDettTipo4.getL114SovratensTempoSMed()));
					dett.setSovratensTempoSMax(ConvertUtil.convertToString(tDettTipo4.getL114SovratensTempoSMax()));

					
					
					dett.setSottotensSogliaVMin(ConvertUtil.convertToString(tDettTipo4.getL114SottotensSogliaVMin()));
					dett.setSottotensSogliaVMed(ConvertUtil.convertToString(tDettTipo4.getL114SottotensSogliaVMed()));
					dett.setSottotensSogliaVMax(ConvertUtil.convertToString(tDettTipo4.getL114SottotensSogliaVMax()));
					
					dett.setSottotensTempoSMin(ConvertUtil.convertToString(tDettTipo4.getL114SottotensTempoSMin()));
					dett.setSottotensTempoSMed(ConvertUtil.convertToString(tDettTipo4.getL114SottotensTempoSMed()));
					dett.setSottotensTempoSMax(ConvertUtil.convertToString(tDettTipo4.getL114SottotensTempoSMax()));

				}

				/*
				if (GenericUtil.isNullOrEmpty(tDettTipo4.getEControlloweb()))
				{
					if (sbModuliNonComp == null)
					{
						sbModuliNonComp = new StringBuffer();
					}
					else
					{
						sbModuliNonComp.append(", ");
						
					}
					sbModuliNonComp.append(tDettTipo4.getENModuloTermico());
				}
				*/
			}
			
			/*
			if (GenericUtil.isNotNullOrEmpty(sbModuliNonComp))
			{
				dett.setElencoModuliNonComp(sbModuliNonComp.toString());
			}
			else
			{
				dett.setElencoModuliNonComp(null);
			}
			*/
		}


		log.debug("[MapDto:mapToTipo4Dett] END");

		return dett;
	}
	
	
	public static TipoGFDettCircuito mapToTipoGFDettCircuito (SigitTDettIspezGfDto dtoDb) {
		log.debug("[mapToTipoGFDettCircuito] BEGIN");
		
		TipoGFDettCircuito circuito = new TipoGFDettCircuito();
		
		circuito.setIdDettGF(ConvertUtil.convertToInteger(dtoDb.getIdDettIspezGf()));
		circuito.setS8aNCircuito(dtoDb.getS8aNCircuito());
		circuito.setS8bFlgProveRaffrescamento(ConvertUtil.convertToBooleanAllways(dtoDb.getS8bFlgProveRaffrescamento()));
		circuito.setS8bFlgProveRiscaldamento(ConvertUtil.convertToBooleanAllways(dtoDb.getS8bFlgProveRiscaldamento()));
		circuito.setS8cFlgFiltriPuliti(ConvertUtil.convertToInteger(dtoDb.getS8cFlgFiltriPuliti()));
		circuito.setS8cMarcaStrumMisura(dtoDb.getS8eMarcaStrumMisura());
		circuito.setS8cMatricolaStrumMisura(dtoDb.getS8eMatricolaStrumMisura());
		circuito.setS8cModelloStrumMisura(dtoDb.getS8eModelloStrumMisura());
		circuito.setS8dFlgAssenzaPerditeGas(ConvertUtil.convertToInteger(dtoDb.getS8dFlgAssenzaPerditeGas()));
		circuito.setS8fPotAssorbitaKw(ConvertUtil.convertToString(dtoDb.getS8fPotAssorbitaKw()));
		circuito.setS8gFlgStrumentazioneFissa(ConvertUtil.convertToInteger(dtoDb.getS8gFlgStrumentazioneFissa()));
		circuito.setS8hOperatoreDenominazione(dtoDb.getS8hOperatoreDenominazione());
		circuito.setS8iOperatoreNumIscriz(dtoDb.getS8iOperatoreNumIscriz());
		circuito.setS8jSottoraffreddamentoK(ConvertUtil.convertToString(dtoDb.getS8jSottoraffreddamentoK()));
		circuito.setS8jSurriscaldamentok(ConvertUtil.convertToString(dtoDb.getS8jSurriscaldamentoK()));
		circuito.setS8jTempCondensazioneC(ConvertUtil.convertToString(dtoDb.getS8jTempCondensazioneC()));
		circuito.setS8jTempEvaporazioneC(ConvertUtil.convertToString(dtoDb.getS8jTempIngressoFluidoC()));
		circuito.setS8jTempIngressoFluidoC(ConvertUtil.convertToString(dtoDb.getS8jTempIngressoFluidoC()));
		circuito.setS8jTempSorgIngressoC(ConvertUtil.convertToString(dtoDb.getS8jTempSorgIngressoC()));
		circuito.setS8jTempSorgUscitaC(ConvertUtil.convertToString(dtoDb.getS8jTempSorgUscitaC()));
		circuito.setS8jTempUscitaFluidoC(ConvertUtil.convertToString(dtoDb.getS8jTempUscitaFluidoC()));
		
		circuito.setS9eFlgNoRispetto7a(ConvertUtil.convertToBooleanAllways(dtoDb.getS9cFlgNoRispetto7a()));
		circuito.setS9eFlgNoRispetto7c(ConvertUtil.convertToBooleanAllways(dtoDb.getS9cFlgNoRispetto7b()));
		circuito.setS9eFlgNoRispetto8d(ConvertUtil.convertToBooleanAllways(dtoDb.getS9cFlgNoRispetto8d()));
		circuito.setS9eFlgNoRispetto9a(ConvertUtil.convertToBooleanAllways(dtoDb.getS9cFlgNoRispetto9a()));
		
		circuito.setS9eFlgRispettoNormativa(ConvertUtil.convertToBooleanAllways(dtoDb.getS9bFlgRispettoNormativa()));
		circuito.setS9verificaSuperata(ConvertUtil.convertToInteger(dtoDb.getS9aFlgVerificaSuperata()));
			
		log.debug("[mapToTipoGFDettCircuito] END");
		
		return circuito;
		
	}
	
	public static TipoGTDettModulo mapToTipoGTDettModulo(SigitTDettIspezGtDto tDettTipoGT) {
		log.debug("[mapToTipoGTDettModulo] BEGIN");
		TipoGTDettModulo modulo = new TipoGTDettModulo();
		
		modulo.setIdDettGT(ConvertUtil.convertToInteger(tDettTipoGT.getIdDettIspezGt()));
		modulo.setS8aNModuloTermico(tDettTipoGT.getS8aNModuloTermico());
		modulo.setS8bFumoMis1(ConvertUtil.convertToString(tDettTipoGT.getS8bFumoMis1()));
		modulo.setS8bFumoMis2(ConvertUtil.convertToString(tDettTipoGT.getS8bFumoMis2()));
		modulo.setS8bFumoMis3(ConvertUtil.convertToString(tDettTipoGT.getS8bFumoMis3()));
		modulo.setS8cMarcaStrumMisura(tDettTipoGT.getS8cMarcaStrumMisura());
		modulo.setS8cMatricolaStrumMisura(tDettTipoGT.getS8cMatricolaStrumMisura());
		modulo.setS8cModelloStrumMisura(tDettTipoGT.getS8cModelloStrumMisura());
		modulo.setS8dCoFumiSecchiPpm(ConvertUtil.convertToString(tDettTipoGT.getS8dCoFumiSecchiPpm()));
		modulo.setS8dNoMgKwH(ConvertUtil.convertToString(tDettTipoGT.getS8dNoMgKwH()));
		
		if (GenericUtil.isNotNullOrEmpty(tDettTipoGT.getS8dCo2Perc())) {
			modulo.setS8dPerc(ConvertUtil.convertToString(tDettTipoGT.getS8dCo2Perc()));
			modulo.setS8dSceltaPerc(O2CO2Enum.CO2.name());
		} else if (GenericUtil.isNotNullOrEmpty(tDettTipoGT.getS8dO2Perc())){
			modulo.setS8dPerc(ConvertUtil.convertToString(tDettTipoGT.getS8dO2Perc()));
			modulo.setS8dSceltaPerc(O2CO2Enum.O2.name());
		}
		
		modulo.setS8dTempAria_c(ConvertUtil.convertToString(tDettTipoGT.getS8dTempAriaC()));
		modulo.setS8dTempFluidoMandataC(ConvertUtil.convertToString(tDettTipoGT.getS8dTempFluidoMandataC()));
		modulo.setS8dTempFumiC(ConvertUtil.convertToString(tDettTipoGT.getS8dTempFumiC()));
		modulo.setS8eEtPerc(ConvertUtil.convertToString(tDettTipoGT.getS8eEtPerc()));
		modulo.setS8eFumiSecchiNoAriaPpm(ConvertUtil.convertToString(tDettTipoGT.getS8eFumiSecchiNoAriaPpm()));
		modulo.setS8eIndiceAria(ConvertUtil.convertToString(tDettTipoGT.getS8eIndiceAria()));
		modulo.setS8eNoxMgKwH(ConvertUtil.convertToString(tDettTipoGT.getS8eNoxMgKwH()));
		modulo.setS8eQsPerc(ConvertUtil.convertToString(tDettTipoGT.getS8eQsPerc()));
		modulo.setS8eRendCombPerc(ConvertUtil.convertToString(tDettTipoGT.getS8eRendCombPerc()));
		
		
		RegolareIrregolareEnum esitoMonossido = ConvertUtil.getEnumFromString(RegolareIrregolareEnum.class, tDettTipoGT.getS9aFlgMonossidoCarb());
		modulo.setS9aFlgMonossidoCarb(esitoMonossido == null ? "" : esitoMonossido.getDescrizione());

		modulo.setS9bFlgFumosita(tDettTipoGT.getS9bFlgFumosita());
		modulo.setS9cFlgRendCombustSuff(GenericUtil.isNullOrEmpty(tDettTipoGT.getS9cFlgRendCombustSuff()) ? null : ConvertUtil.convertToString(tDettTipoGT.getS9cFlgRendCombustSuff().intValue()));
		modulo.setS9cRendMinCombustPerc(ConvertUtil.convertToString(tDettTipoGT.getS9cRendMinCombustPerc()));
		modulo.setS9dFlgOssidiAzoto(tDettTipoGT.getS9dFlgOssidiAzoto());
		modulo.setS9dOssidiAzotoLimMgKwH(ConvertUtil.convertToString(tDettTipoGT.getS9dOssidiAzotoLimMgKwH()));
		modulo.setS9eFlgNoRispetto7a(ConvertUtil.convertToBooleanAllways(tDettTipoGT.getS9eFlgNoRispetto7a()));
		modulo.setS9eFlgNoRispetto7b(ConvertUtil.convertToBooleanAllways(tDettTipoGT.getS9eFlgNoRispetto7b()));
		modulo.setS9eFlgNoRispetto9a(ConvertUtil.convertToBooleanAllways(tDettTipoGT.getS9eFlgNoRispetto9a()));
		modulo.setS9eFlgNoRispetto9b(ConvertUtil.convertToBooleanAllways(tDettTipoGT.getS9eFlgNoRispetto9b()));
		modulo.setS9eFlgNoRispetto9c(ConvertUtil.convertToBooleanAllways(tDettTipoGT.getS9eFlgNoRispetto9c()));
		modulo.setS9eFlgNoRispetto9d(ConvertUtil.convertToBooleanAllways(tDettTipoGT.getS9eFlgNoRispetto9d()));
		modulo.setS9eFlgRispettoNormativa(ConvertUtil.convertToBooleanAllways(tDettTipoGT.getS9eFlgRispettoNormativa()));
		
		String s8eRendCombPerc = "";
		String s8eNoxMgKwH = "";
		if (GenericUtil.isNullOrEmpty(tDettTipoGT.getS8eRendCombPerc())) {
			tDettTipoGT.setS8eRendCombPerc(new BigDecimal(0));
		}
		
		
		s8eRendCombPerc = ConvertUtil.convertToString(tDettTipoGT.getS8eRendCombPerc().add(new BigDecimal(2)));
		
		if (GenericUtil.isNullOrEmpty(tDettTipoGT.getS8eNoxMgKwH())) {
			tDettTipoGT.setS8eNoxMgKwH(new BigDecimal(0));
		}
		
		s8eNoxMgKwH = ConvertUtil.convertToString(tDettTipoGT.getS8eNoxMgKwH().subtract(new BigDecimal(20)));
		
		modulo.setValoreRilevatoPiuDue("Valore rilevato + 2 = " + s8eRendCombPerc + " %");
		modulo.setValoreRilevatoMenoVenti("Valore rilevato - 20 = "+ s8eNoxMgKwH + " mg/kWh");
		
		
		log.debug("[mapToTipoGTDettModulo] END");
		
		return modulo;
	}
	
	public static Tipo1DettModulo mapToTipo1DettModulo(SigitTDettTipo1Dto tDettTipo1) {
		//metodo che recupera le info da dto grafico e lo riversa nel dto da persistere
		log.debug("[mapToTipo1DettModulo] BEGIN");
		
		Tipo1DettModulo modulo = new Tipo1DettModulo();
		
		modulo.setIdDettTipo1(ConvertUtil.convertToInteger(tDettTipo1.getIdDettTipo1()));
		
		modulo.setNumModuloTermico(tDettTipo1.getENModuloTermico());
		modulo.setTempFumiC(ConvertUtil.convertToString(tDettTipo1.getETempFumiC()));
		modulo.setTempAriaC(ConvertUtil.convertToString(tDettTipo1.getETempAriaC()));
		
		modulo.setO2Perc(ConvertUtil.convertToString(tDettTipo1.getEO2Perc()));
		modulo.setCo2Perc(ConvertUtil.convertToString(tDettTipo1.getECo2Perc()));
		modulo.setBacharachMin(ConvertUtil.convertToString(tDettTipo1.getEBacharachMin()));
		modulo.setBacharachMed(ConvertUtil.convertToString(tDettTipo1.getEBacharachMed()));
		modulo.setBacharachMax(ConvertUtil.convertToString(tDettTipo1.getEBacharachMax()));
		modulo.setCoCorrettoPpm(ConvertUtil.convertToString(tDettTipo1.getECoCorrettoPpm()));
		modulo.setRendCombPerc(ConvertUtil.convertToString(tDettTipo1.getERendCombPerc()));
		modulo.setRendMinLeggePerc(ConvertUtil.convertToString(tDettTipo1.getERendMinLeggePerc()));
		//modulo.setNoxPpm(getNOxToString(tDettTipo1.getENoxMgKwh(), tDettTipo1.getENoxPpm()));
		modulo.setNoxPpm(ConvertUtil.convertToString(tDettTipo1.getENoxMgKwh()));
		
		String portCombUmCod = GenericUtil.getCodByDescription(tDettTipo1.getL111PortataCombustibileUm(), GenericUtil.getComboPortataCombustibile());
		modulo.setPortataCombUm(portCombUmCod);
		log.debug("Stampo la portCombUmCod: "+portCombUmCod);

		modulo.setPortataComb(ConvertUtil.convertToString(tDettTipo1.getL111PortataCombustibile()));
		modulo.setCoNoAriaPpm(ConvertUtil.convertToString(tDettTipo1.getL111CoNoAriaPpm()));
		modulo.setFlgRispettaBacharac(ConvertUtil.convertToInteger(tDettTipo1.getL111FlgRispettaBacharach()));
		modulo.setFlgRendMagRendMin(ConvertUtil.convertToInteger(tDettTipo1.getL111FlgRendMagRendMin()));
		
		
		log.debug("[mapToTipo1DettModulo] END");
		
		return modulo;
	}
	
	private static String getNOxToString (BigDecimal eNoxMgKwh, BigDecimal eNoxPpm) {
		if (eNoxMgKwh != null ) {
			return ConvertUtil.convertToString(eNoxMgKwh) + " mg/kWh";
		}
		if (eNoxPpm != null) {
			return ConvertUtil.convertToString(eNoxPpm) + " ppm";
		} 
		return "";
	}
	
	/**
	 * Carica una lista di {@link CodeDescription} di combustibili
	 * 
	 * @param p
	 *            Lista dei combustibili
	 * @return Lista di {@link CodeDescription}
	 */
	public static ArrayList<CodeDescription> mapToModuli(List<SigitTDettTipo1Dto> tDettTipo1List) {
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (tDettTipo1List != null) {
			for (SigitTDettTipo1Dto obj : tDettTipo1List) {
				result.add(mapToCodeDescription(obj));
			}
		}
		//Collections.sort(result, ComparatorUtil.compare());
		return result;
	}
	
	public static ArrayList<CodeDescription> mapToCircuitiRappProva(List<SigitTDettIspezGfDto> tDettTipo2List) {
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (tDettTipo2List != null) {
			for (SigitTDettIspezGfDto obj : tDettTipo2List) {
				result.add(mapToCodeDescription(obj));
			}
		}
		//Collections.sort(result, ComparatorUtil.compare());
		return result;
	}
	
	public static ArrayList<CodeDescription> mapToModuliRappProva(List<SigitTDettIspezGtDto> tDettTipo1List) {
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (tDettTipo1List != null) {
			for (SigitTDettIspezGtDto obj : tDettTipo1List) {
				result.add(mapToCodeDescription(obj));
			}
		}
		//Collections.sort(result, ComparatorUtil.compare());
		return result;
	}
	
	public static Tipo2DettCircuito mapToTipo2DettCircuito(SigitTDettTipo2Dto tDettTipo2) {
		//metodo che recupera le info da dto grafico e lo riversa nel dto da persistere
		log.debug("[mapToTipo2DettCircuito] BEGIN");
		
		Tipo2DettCircuito circuito = new Tipo2DettCircuito();
		
		circuito.setIdDettTipo2(ConvertUtil.convertToInteger(tDettTipo2.getIdDettTipo2()));
		
		circuito.setNumCircuito(ConvertUtil.convertToInteger(tDettTipo2.getENCircuito()));
		
		circuito.setSurrisc(ConvertUtil.convertToString(tDettTipo2.getETSurriscC()));
		circuito.setSottoraffredd(ConvertUtil.convertToString(tDettTipo2.getETSottorafC()));
		
		circuito.setCondensazione(ConvertUtil.convertToString(tDettTipo2.getETCondensazioneC()));
		circuito.setEvaporazione(ConvertUtil.convertToString(tDettTipo2.getETEvaporazioneC()));
		circuito.setInLatoEst(ConvertUtil.convertToString(tDettTipo2.getETInExtC()));
		circuito.setOutLatoEst(ConvertUtil.convertToString(tDettTipo2.getETOutExtC()));
		circuito.setInLatoUtenze(ConvertUtil.convertToString(tDettTipo2.getETInUtenzeC()));
		circuito.setOutLatoUtenze(ConvertUtil.convertToString(tDettTipo2.getETOutUtenzeC()));
		circuito.setTorreOutFluido(ConvertUtil.convertToString(tDettTipo2.getL112TorreTOutFluido()));
		circuito.setTorreBulboUmido(ConvertUtil.convertToString(tDettTipo2.getL112TorreTBulboUmido()));
		circuito.setScambiatoreInExt(ConvertUtil.convertToString(tDettTipo2.getL112ScambiatoreTInExt()));

		
		circuito.setScambiatoreOutExt(ConvertUtil.convertToString(tDettTipo2.getL112ScambiatoreTOutExt()));
		circuito.setScambiatoreInMacchina(ConvertUtil.convertToString(tDettTipo2.getL112ScambiatTInMacchina()));
		circuito.setScambiatoreOutMacchina(ConvertUtil.convertToString(tDettTipo2.getL112ScambiatTOutMacchina()));
		circuito.setPotenzaAssorbitaKw(ConvertUtil.convertToString(tDettTipo2.getL112PotenzaAssorbitaKw()));
		circuito.setFlgPulizaFiltri(ConvertUtil.convertToBoolean(tDettTipo2.getL112FlgPuliziaFiltri()));
		circuito.setFlgVerificaSuperata(ConvertUtil.convertToBoolean(tDettTipo2.getL112FlgVerificaSuperata()));
		circuito.setDataRipristino(ConvertUtil.convertToString(tDettTipo2.getL112DataRipristino()));
		
		log.debug("[mapToTipo2DettCircuito] END");
		
		return circuito;
	}
	
	public static ArrayList<CodeDescription> mapToCircuiti(List<SigitTDettTipo2Dto> tDettTipo2List) {
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (tDettTipo2List != null) {
			for (SigitTDettTipo2Dto obj : tDettTipo2List) {
				result.add(mapToCodeDescription(obj));
			}
		}
		//Collections.sort(result, ComparatorUtil.compare());
		return result;
	}
	
	
	public static ControlloLibretto mapToControlloLibretto(SigitTControlloLibrettoDto tControlloLibretto) {
		//metodo che recupera le info da dto grafico e lo riversa nel dto da persistere
		log.debug("[mapToControlloLibretto] BEGIN");
		
		ControlloLibretto controllo = new ControlloLibretto();
		
		controllo.setDataAggiornamento(ConvertUtil.convertToString(tControlloLibretto.getDtUltMod()));
		controllo.setFlgControlloScheda1(ConvertUtil.convertToBooleanAllways(tControlloLibretto.getFlgL1Controlloweb()));
		controllo.setFlgControlloScheda5(ConvertUtil.convertToBooleanAllways(tControlloLibretto.getFlgL5Controlloweb()));
		controllo.setFlgControlloScheda6(ConvertUtil.convertToBooleanAllways(tControlloLibretto.getFlgL6Controlloweb()));
		controllo.setFlgControlloScheda7(ConvertUtil.convertToBooleanAllways(tControlloLibretto.getFlgL7Controlloweb()));
		
		controllo.setDescControlloScheda1(ConvertUtil.convertToStringSiNo(controllo.getFlgControlloScheda1()));
		controllo.setDescControlloScheda5(ConvertUtil.convertToStringSiNo(controllo.getFlgControlloScheda5()));
		controllo.setDescControlloScheda6(ConvertUtil.convertToStringSiNo(controllo.getFlgControlloScheda6()));
		controllo.setDescControlloScheda7(ConvertUtil.convertToStringSiNo(controllo.getFlgControlloScheda7()));
		
		log.debug("[mapToControlloLibretto] END");
		
		return controllo;
	}

	
	public static ArrayList<LibrettoDett> convertToListLibrettoDett(List<SigitTLibrettoByCodiceImpNonBozzaDto> list) {
		ArrayList<LibrettoDett> output = new ArrayList<LibrettoDett>();
		if(list!=null)
		{
			for (SigitTLibrettoByCodiceImpNonBozzaDto cont : list) {
				LibrettoDett imp = new LibrettoDett();
				imp.setIdLibretto(ConvertUtil.convertToInteger(cont.getLibIdLibretto()));
				imp.setDataConsolidamento(ConvertUtil.convertToString(cont.getLibDataConsolidamento()));
				imp.setDescTipoIntervento(cont.getMcDesMotivoConsolid());
				imp.setNomeDocumento(cont.getLibFileIndex());
				imp.setUid(cont.getLibUidIndex());

				output.add(imp);
			}
		}
		return output;
	}
	
	public static ArrayList<LibrettoDett> convertToListStoricoLibrettoDett(List<SigitSLibrettoByCodiceImpiantoNonBozzaDto> list) {
		ArrayList<LibrettoDett> output = new ArrayList<LibrettoDett>();
		if(list!=null)
		{
			for (SigitSLibrettoByCodiceImpiantoNonBozzaDto cont : list) {
				LibrettoDett imp = new LibrettoDett();
				imp.setIdLibretto(ConvertUtil.convertToInteger(cont.getLibIdLibretto()));
				imp.setDataConsolidamento(ConvertUtil.convertToString(cont.getLibDataConsolidamento()));
				imp.setDescTipoIntervento(cont.getMotDesMotivoConsolid());
				imp.setNomeDocumento(cont.getLibFileIndex());
				imp.setUid(cont.getLibUidIndex());

				output.add(imp);
			}
		}
		return output;
	}
	
	public static RicercaVerificaFilter mapToRicercaVerificaFilter (RicercaVerifica ricercaVerifica) {
		return RicercaVerificaFilter.getByRicercaVerifica(ricercaVerifica);
	}

	public static RicercaAccertamentoFilter mapToRicercaAccertamentoFilter (RicercaAccertamento ricercaAccertamento) {
		return RicercaAccertamentoFilter.getByRicercaAccertamento(ricercaAccertamento);
	}

	public static SigitTVerificaDto mapToSigitTVerificaDto (Verifica verifica, UtenteLoggato utente) {
		if (verifica == null) {
			return null;
		}
		
		SigitTVerificaDto entity = new SigitTVerificaDto();
		if (utente != null) {
			entity.setCfUtenteCaricamento(utente.getCodiceFiscale());
			entity.setDenomUtenteCaricamento(utente.getDenominazione());
		}

		log.debug("#### STAMPO L'ID VERIFICA: "+verifica.getIdentificativo());
		
		entity.setIdVerifica(ConvertUtil.convertToInteger(verifica.getIdentificativo()));

		entity.setCodiceImpianto(ConvertUtil.convertToBigDecimal(verifica.getCodiceImpianto()));
		entity.setDtCaricamento(ConvertUtil.convertToSqlDate(verifica.getDataCaricamento()));
		entity.setDtSveglia(ConvertUtil.convertToSqlDate(verifica.getDataSveglia()));
		entity.setFkTipoVerifica(verifica.getTipoVerifica());
		entity.setFkDatoDistrib(ConvertUtil.convertToInteger(verifica.getIdDatoDistributore()));
		entity.setFkAllegato(ConvertUtil.convertToBigDecimal(verifica.getIdAllegato()));
		entity.setNote(verifica.getNote());
		entity.setNoteSveglia(verifica.getNoteSveglia());
		entity.setSiglaBollino(verifica.getSiglaBollino());
		entity.setNumeroBollino(ConvertUtil.convertToBigDecimal(verifica.getNumeroBollino()));
		
		return entity;
	}
	
	public static SigitTAccertamentoDto mapToSigitTAccertamentoDto (Accertamento accertamento, SigitTAccertamentoDto entity, UtenteLoggato utente) {
		if (accertamento == null) {
			return null;
		}
		
		//SigitTAccertamentoDto entity = new SigitTAccertamentoDto();
		if (utente != null) {
			entity.setCfUtenteAssegn(utente.getCodiceFiscale());
			entity.setDenomUtenteAssegn(utente.getDenominazione());
		}
		
		entity.setCodiceImpianto(ConvertUtil.convertToBigDecimal(accertamento.getCodiceImpianto()));
		entity.setDtCreazione(ConvertUtil.convertToSqlDate(accertamento.getDataCreazione()));
		entity.setDtSveglia(ConvertUtil.convertToSqlDate(accertamento.getDataSveglia()));
		entity.setFkTipoAnomalia(ConvertUtil.convertToInteger(accertamento.getIdTipoAnomalia()));
		entity.setNote(GenericUtil.getStringSql(accertamento.getNote()));
		entity.setNoteSveglia(accertamento.getNoteSveglia());
		entity.setIdAccertamento(ConvertUtil.convertToInteger(accertamento.getIdentificativo()));
		entity.setFkVerifica(ConvertUtil.convertToInteger(accertamento.getIdVerifica()));
		entity.setSiglaProvCompetenza(accertamento.getSiglaProv());
		entity.setIstatProvCompetenza(accertamento.getCodIstatProv());
		
		return entity;
	}
	
	public static SigitTAzioneDto mapToSigitTAzioneDto (Integer tipoAzione, Azione azione) {
		if (azione == null) {
			return null;
		}
		
		SigitTAzioneDto entity = new SigitTAzioneDto();
		
		entity.setIdAzione(ConvertUtil.convertToInteger(azione.getIdAzione()));
		entity.setDescrizioneAzione(azione.getDescrizione());

		switch (tipoAzione) {
        case Constants.ID_TIPO_AZIONE_VERIFICA:  
    		entity.setFkVerifica(azione.getFkAzione());
            break;
        case Constants.ID_TIPO_AZIONE_ACCERTAMENTO:  
    		entity.setFkAccertamento(azione.getFkAzione());
            break;
        case Constants.ID_TIPO_AZIONE_ISPEZIONE:  
    		entity.setFkIspezione2018(azione.getFkAzione());
            break;
        case Constants.ID_TIPO_AZIONE_SANZIONE:  
    		entity.setFkSanzione(azione.getFkAzione());
            break;
		}
		entity.setFkTipoAzione(tipoAzione);
		
		return entity;
	}
	
	public static Azione mapToAzione (SigitTAzioneDto azioneDb, SigitTDocAzioneDto docAzioneDb) {
		Azione azione = new Azione();
		if (azioneDb == null) {
			return azione;
		}
		
		azione.setCfUtenteAzione(azioneDb.getCfUtenteAzione());
		azione.setDataAzione(ConvertUtil.convertToString(azioneDb.getDtAzione()));
		azione.setDenomUtenteAzione(azioneDb.getDenomUtenteAzione());
		azione.setDescrizione(azioneDb.getDescrizioneAzione());
		azione.setDescrizioneUtente(ConvertUtil.getStringByConcat(" ", azioneDb.getDenomUtenteAzione(), "("+azioneDb.getCfUtenteAzione()+")"));

		int tipoAzione = azioneDb.getFkTipoAzione();
		String descAzione = null;
		azione.setIdAzione(ConvertUtil.convertToString(azioneDb.getIdAzione()));
		
		switch (tipoAzione) {
        case Constants.ID_TIPO_AZIONE_VERIFICA:  
        	azione.setFkAzione(azioneDb.getFkVerifica());
        	descAzione = "verifica";
            break;
        case Constants.ID_TIPO_AZIONE_ACCERTAMENTO:  
        	azione.setFkAzione(azioneDb.getFkAccertamento());
        	descAzione = "accertamento";
            break;
        case Constants.ID_TIPO_AZIONE_ISPEZIONE:  
        	azione.setFkAzione(azioneDb.getFkIspezione2018());
        	descAzione = "ispezione";
            break;
        case Constants.ID_TIPO_AZIONE_SANZIONE:  
        	azione.setFkAzione(azioneDb.getFkSanzione());
        	descAzione = "sanzione";
            break;
		}
		
		if (azione.getFkAzione() != null && azione.getFkAzione().intValue() != 0) {
			azione.setDescrizioneSu("codice " + descAzione + " " + azione.getFkAzione());
		}
		
		
		if (docAzioneDb != null) {
			azione.setUidIndex(docAzioneDb.getUidIndex());
			azione.setNomeDoc(docAzioneDb.getNomeDoc());
			azione.setIdDocAzione(ConvertUtil.convertToString(docAzioneDb.getIdDocAzione()));
		} else {
			azione.setNomeDoc("");
		}
		
		return azione;
	}
	
	public static String getDescStatoRapManutenzione(BigDecimal fkStatoRapp, BigDecimal fkTipoDocumento, String descStatoDB)
	{
		int idTipoDoc = ConvertUtil.convertToInteger(fkTipoDocumento);

		if (ConvertUtil.convertToInteger(fkStatoRapp) == Constants.ID_STATO_RAPPORTO_RESPINTO &&
				(idTipoDoc == Constants.MANUTENZIONE_GT ||
				idTipoDoc == Constants.MANUTENZIONE_GF ||
				idTipoDoc == Constants.MANUTENZIONE_SC ||
				idTipoDoc == Constants.MANUTENZIONE_CG))
		{
			return Constants.LABEL_ANNULLATO;
		}
		else
		{
			return descStatoDB;
		}
	}
	
	public static ArrayList<Sveglia> mapToSveglieVerifica(List<SigitTVerificaDto>  listaVerifiche) {
		ArrayList<Sveglia> result = new ArrayList<Sveglia>();
		if (listaVerifiche != null) {
			Sveglia cd = null;
			for (SigitTVerificaDto obj : listaVerifiche) {

				cd = new Sveglia();
				cd.setIdentificativo(obj.getIdVerifica());
				cd.setDataSveglia(ConvertUtil.convertToString(obj.getDtSveglia()));
				cd.setNoteSveglia(obj.getNoteSveglia());

				result.add(cd);
			}
		}
		return result;
	}

	public static ArrayList<Sveglia> mapToSveglieAccertamento(List<SigitTAccertamentoDto>  listaAccertamenti) {
		ArrayList<Sveglia> result = new ArrayList<Sveglia>();
		if (listaAccertamenti != null) {
			Sveglia cd = null;
			for (SigitTAccertamentoDto obj : listaAccertamenti) {

				cd = new Sveglia();
				cd.setIdentificativo(obj.getIdAccertamento());
				cd.setDataSveglia(ConvertUtil.convertToString(obj.getDtSveglia()));
				cd.setNoteSveglia(obj.getNoteSveglia());

				result.add(cd);
			}
		}
		return result;
	}
	
	public static Sveglia mapToSvegliaAccertamento(SigitTAccertamentoDto accertamento, SigitVRicercaImpiantiDto impiantoEntity) {
		Sveglia result = null;
		if (accertamento != null) {

			result = new Sveglia();
			result.setIdentificativo(accertamento.getIdAccertamento());
			result.setDataSveglia(ConvertUtil.convertToString(accertamento.getDtSveglia()));
			result.setNoteSveglia(accertamento.getNoteSveglia());
			
			if (impiantoEntity != null)
			{
				result.setCodiceImpianto(ConvertUtil.convertToString(impiantoEntity.getCodiceImpianto()));
				result.setIndirizzoImpianto(getIndirizzoCompleto(impiantoEntity.getDenominazioneComune(), impiantoEntity.getIndirizzoUnitaImmob(), impiantoEntity.getCivico(), impiantoEntity.getSiglaProvincia()));
			}

		}
		return result;
	}
	
	public static ArrayList<Sveglia> mapToSveglieIspezione(List<SigitTIspezione2018Dto>  listaIspezioni) {
		ArrayList<Sveglia> result = new ArrayList<Sveglia>();
		if (listaIspezioni != null) {
			Sveglia cd = null;
			for (SigitTIspezione2018Dto obj : listaIspezioni) {

				cd = new Sveglia();
				cd.setIdentificativo(obj.getIdIspezione2018());
				cd.setDataSveglia(ConvertUtil.convertToString(obj.getDtSveglia()));
				cd.setNoteSveglia(obj.getNoteSveglia());

				result.add(cd);
			}
		}
		return result;
	}

	public static Sveglia mapToSvegliaIspezione(SigitTIspezione2018Dto ispezione, SigitVRicercaImpiantiDto impiantoEntity) {
		Sveglia result = null;
		if (ispezione != null) {

			result = new Sveglia();
			result.setIdentificativo(ispezione.getIdIspezione2018());
			result.setDataSveglia(ConvertUtil.convertToString(ispezione.getDtSveglia()));
			result.setNoteSveglia(ispezione.getNoteSveglia());
			
			if (impiantoEntity != null)
			{
				result.setCodiceImpianto(ConvertUtil.convertToString(impiantoEntity.getCodiceImpianto()));
				result.setIndirizzoImpianto(getIndirizzoCompleto(impiantoEntity.getDenominazioneComune(), impiantoEntity.getIndirizzoUnitaImmob(), impiantoEntity.getCivico(), impiantoEntity.getSiglaProvincia()));
			}

		}
		return result;
	}

	
	public static ArrayList<Sveglia> mapToSveglieSanzione(List<SigitTSanzioneDto>  listaSanzioni) {
		ArrayList<Sveglia> result = new ArrayList<Sveglia>();
		if (listaSanzioni != null) {
			Sveglia cd = null;
			for (SigitTSanzioneDto obj : listaSanzioni) {

				cd = new Sveglia();
				cd.setIdentificativo(obj.getIdSanzione());
				cd.setDataSveglia(ConvertUtil.convertToString(obj.getDtSveglia()));
				cd.setNoteSveglia(obj.getNoteSveglia());

				result.add(cd);
			}
		}
		return result;
	}

	public static SigitTDatoDistribDto mapToSigitTDatoDistribDto(DistributoreMan distrib, ArrayList<CodeDescription> indirizziForn, ArrayList<CodeDescription> indirizziFatt, String cfUtenteMod) {

		SigitTDatoDistribDto dto = new SigitTDatoDistribDto();
		
		dto.setFlgPfPg(distrib.getFlgImpresaForn()?Constants.LABEL_PG:Constants.LABEL_PF);
		
		dto.setCognomeDenom(GenericUtil.getStringSql(distrib.getCognomeForn()));
		dto.setNome(GenericUtil.getStringSql(distrib.getNomeForn()));
		dto.setCfPiva(GenericUtil.getStringUpperSql(distrib.getCfPivaForn()));

		dto.setIstatComune(distrib.getIdComuneForn());
		
		String indirizzo = null;
		if (GenericUtil.isNotNullOrEmpty(distrib.getIdIndirizzoForn()))
		{
			indirizzo = GenericUtil.getDescriptionByCod(distrib.getIdIndirizzoForn(), indirizziForn);
		}
		else
		{
			indirizzo = distrib.getIndirizzoNoStradForn();
		}

		if (GenericUtil.isNotNullOrEmpty(indirizzo))
		{
			dto.setDug(GenericUtil.getToponimo(indirizzo));
			dto.setIndirizzo(GenericUtil.getIndirizzo(indirizzo));
		}
		
		dto.setCivico(GenericUtil.getStringSql(distrib.getIndirizzoCivicoForn()));
		dto.setCap(GenericUtil.getStringSql(distrib.getIndirizzoCapForn()));

		
		dto.setAnnoRif(ConvertUtil.convertToBigDecimal(distrib.getAnnoRiferimento()));
		dto.setNrMesiFattur(ConvertUtil.convertToBigDecimal(distrib.getNumMesiFatt()));
		dto.setPodPdr(GenericUtil.getStringSql(distrib.getCodicePdrPod()));
		
		
		dto.setFkTipoContratto(distrib.getIdTipoContratto());
		dto.setFkCategoriaUtil(distrib.getIdCategoria());
		dto.setFkCombustibile(ConvertUtil.convertToBigDecimal(distrib.getIdCombustibile()));
		
		dto.setConsumoAnno(ConvertUtil.convertToBigDecimal(distrib.getConsumoAnnuo()));
		dto.setFkUnitaMisura(ConvertUtil.convertToString(distrib.getIdUnitaMisuraConsumo()));

		dto.setVolumetria(ConvertUtil.convertToBigDecimal(distrib.getVolumetriaRiscaldata()));

		if (ConvertUtil.convertToBooleanAllways(distrib.getFlgFatturazioneUguale()))
		{

			dto.setFlgPfPgFatt(dto.getFlgPfPg());

			dto.setCognomeDenomFatt(dto.getCognomeDenom());
			dto.setNomeFatt(dto.getNome());
			dto.setCfPivaFatt(dto.getCfPiva());

			dto.setIstatComuneFatt(dto.getIstatComune());

			dto.setDugFatt(dto.getDug());
			dto.setIndirizzoFatt(dto.getIndirizzo());

			dto.setCivicoFatt(dto.getCivico());
			dto.setCapFatt(dto.getCap());

		}
		else
		{
			dto.setFlgPfPgFatt(distrib.getFlgImpresaFatt()?Constants.LABEL_PG:Constants.LABEL_PF);
			
			dto.setCognomeDenomFatt(GenericUtil.getStringSql(distrib.getCognomeFatt()));
			dto.setNomeFatt(GenericUtil.getStringSql(distrib.getNomeFatt()));
			dto.setCfPivaFatt(GenericUtil.getStringUpperSql(distrib.getCfPivaFatt()));

			
			if (ConvertUtil.convertToBooleanAllways(distrib.getFlgIndirizzoFattEstero()))
			{
				dto.setIndirizzoFatt("Indirizzo estero: "+distrib.getIndirizzoNoStradFatt());

			}
			else
			{
				dto.setIstatComuneFatt(distrib.getIdComuneFatt());
				
				if (GenericUtil.isNotNullOrEmpty(distrib.getIdIndirizzoFatt()))
				{
					indirizzo = GenericUtil.getDescriptionByCod(distrib.getIdIndirizzoFatt(), indirizziFatt);
				}
				else
				{
					indirizzo = distrib.getIndirizzoNoStradFatt();
				}

				
				if (GenericUtil.isNotNullOrEmpty(indirizzo))
				{
					dto.setDugFatt(GenericUtil.getToponimo(indirizzo));
					dto.setIndirizzoFatt(GenericUtil.getIndirizzo(indirizzo));
				}
			}
			
			
			dto.setCivicoFatt(GenericUtil.getStringSql(distrib.getIndirizzoCivicoFatt()));
			dto.setCapFatt(GenericUtil.getStringSql(distrib.getIndirizzoCapFatt()));
		}
		

		return dto;
	}
	
	public static DistributoreMan mapToDistributoreMan(SigitTDatoDistribDto datoDistrib, String siglaProvinciaForn, String siglaProvinciaFatt) {
		
		DistributoreMan distributoreMan = new DistributoreMan();
		
		String nome = datoDistrib.getNome();
		String nomeFatt = datoDistrib.getNomeFatt();
		String cap = datoDistrib.getCap();
		String capFatt = datoDistrib.getCapFatt();
		
		distributoreMan.setFlgImpresaForn(datoDistrib.getFlgPfPg().equals(Constants.LABEL_PG));
		distributoreMan.setCognomeForn(datoDistrib.getCognomeDenom());
		distributoreMan.setNomeForn(nome);
		distributoreMan.setCfPivaForn(datoDistrib.getCfPiva());
		
		distributoreMan.setIdProvinciaForn(siglaProvinciaForn);
		distributoreMan.setIdComuneForn(datoDistrib.getIstatComune());
		distributoreMan.setIndirizzoForn(getIndirizzoByDugIndirizzo(datoDistrib.getDug(), datoDistrib.getIndirizzo()));
		
		distributoreMan.setIndirizzoCivicoForn(datoDistrib.getCivico());
		distributoreMan.setIndirizzoCapForn(cap);

		distributoreMan.setAnnoRiferimento(ConvertUtil.convertToString(datoDistrib.getAnnoRif()));
		distributoreMan.setNumMesiFatt(ConvertUtil.convertToInteger(datoDistrib.getNrMesiFattur()));
		distributoreMan.setCodicePdrPod(datoDistrib.getPodPdr());

		distributoreMan.setIdTipoContratto(datoDistrib.getFkTipoContratto());
		distributoreMan.setIdCategoria(datoDistrib.getFkCategoriaUtil());
				
		distributoreMan.setIdCombustibile(ConvertUtil.convertToInteger(datoDistrib.getFkCombustibile()));
		distributoreMan.setConsumoAnnuo(ConvertUtil.convertToString(datoDistrib.getConsumoAnno()));

		distributoreMan.setIdUnitaMisuraConsumo(ConvertUtil.convertToInteger(datoDistrib.getFkUnitaMisura()));
		
		distributoreMan.setVolumetriaRiscaldata(ConvertUtil.convertToString(datoDistrib.getVolumetria()));

		boolean flagFatturazioneUguale = datoDistrib.getFlgPfPgFatt().equals(datoDistrib.getFlgPfPg()) &&
			datoDistrib.getCognomeDenomFatt().equals(datoDistrib.getCognomeDenom()) &&
			((nomeFatt == null && nome == null) || (nomeFatt != null && nomeFatt.equals(nome))) &&
			datoDistrib.getCfPivaFatt().equals(datoDistrib.getCfPiva()) &&
			datoDistrib.getIstatComuneFatt().equals(datoDistrib.getIstatComune()) &&
			datoDistrib.getDugFatt().equals(datoDistrib.getDug()) &&
			datoDistrib.getIndirizzoFatt().equals(datoDistrib.getIndirizzo()) &&
			datoDistrib.getCivicoFatt().equals(datoDistrib.getCivico()) &&
			((capFatt == null && cap == null) || (capFatt != null && capFatt.equals(cap)));
			
		distributoreMan.setFlgFatturazioneUguale(flagFatturazioneUguale);
		
		distributoreMan.setFlgImpresaFatt(datoDistrib.getFlgPfPgFatt().equals(Constants.LABEL_PG));
		distributoreMan.setCognomeFatt(datoDistrib.getCognomeDenomFatt());
		distributoreMan.setNomeFatt(nomeFatt);
		distributoreMan.setCfPivaFatt(datoDistrib.getCfPivaFatt());

		String indirizzoFatt = datoDistrib.getIndirizzoFatt();
		
		boolean flgIndirizzoFattEstero = indirizzoFatt.startsWith("Indirizzo estero:");
		
		distributoreMan.setFlgIndirizzoFattEstero(flgIndirizzoFattEstero);
		
		if (flgIndirizzoFattEstero) {
			distributoreMan.setIndirizzoFatt(indirizzoFatt);
		} else {
			distributoreMan.setIdProvinciaFatt(siglaProvinciaFatt);
			distributoreMan.setIdComuneFatt(datoDistrib.getIstatComuneFatt());
			distributoreMan.setIndirizzoFatt(getIndirizzoByDugIndirizzo(datoDistrib.getDugFatt(), indirizzoFatt));
		}
			
		distributoreMan.setIndirizzoCivicoFatt(datoDistrib.getCivicoFatt());
		distributoreMan.setIndirizzoCapFatt(capFatt);
		
		return distributoreMan;
	}
	
	//sezione dedicata alle ispezioni
//	public static SigitTIspezione2018Dto mapToSigitTIspezione2018Dto (Ispezione2018 ispezione, BigDecimal statoIspezione) {
//		SigitTIspezione2018Dto db = new SigitTIspezione2018Dto();
//		db.setCfIspettoreSecondario(ispezione.getCfSecondoIspettore());
//		db.setCodiceImpianto(ConvertUtil.convertToBigDecimal(ispezione.getCodiceImpianto()));
////		db.setDataIspezione(ispezione.getd); ???
////		db.setDtSveglia(ispezione.getd); ???
//		db.setEnteCompetente(ispezione.getEnteCompetente());
//		db.setFkAccertamento(ConvertUtil.convertToInteger(ispezione.getIdAccertamento()));
////		db.setFkImpRuoloPfpgIspettore(ispezione.);
//		db.setFkStatoIspezione(ispezione.get);
//		db.setFkVerifica(ConvertUtil.convertToInteger(ispezione.getIdVerifica()));
////		db.setFlgEsito(ispezione.getf);
//		db.setIdIspezione2018(ConvertUtil.convertToInteger(ispezione.getIdentificativoIspezione()));
//		db.setNote(ispezione.getNote());
//		db.setNoteSveglia(ispezione.get);
//	}
	
	
	public static Ispezione2018 mapToRisultatoRicercaIspezione(SigitVRicercaIspezioniDto risultatoRicerca, Map<Integer, String> mappaStatoIspezione, Map<String, String> mappaElencoProvincePiemIstat) {
		
		if (risultatoRicerca == null) {
			return null;
		}
		
		Ispezione2018 ispezione2018 = new Ispezione2018();
		ispezione2018.setIdentificativoIspezione(ConvertUtil.convertToString(risultatoRicerca.getIdIspezione2018()));
		
		String cf = null;
		
		if (GenericUtil.isNotNullOrEmpty(risultatoRicerca.getCognome()))
		{
			ispezione2018.setDescrizioneIspettore(ConvertUtil.getStringByConcat(" ", risultatoRicerca.getCognome(), risultatoRicerca.getNome(), "("+risultatoRicerca.getCodiceFiscale()+")"));
		}
			
		ispezione2018.setCfSecondoIspettore(risultatoRicerca.getCfIspettoreSecondario());
		
		ispezione2018.setEnteCompetente(risultatoRicerca.getEnteCompetente());
		ispezione2018.setNote(risultatoRicerca.getEnteCompetente());
		
		ispezione2018.setDataCreazione(ConvertUtil.convertToString(risultatoRicerca.getDtCreazione()));
		
		if (mappaStatoIspezione != null) {
			if (risultatoRicerca.getFkStatoIspezione() != null && risultatoRicerca.getFkStatoIspezione().intValue() != 0) {
				ispezione2018.setDescrizioneStato(mappaStatoIspezione.get(ConvertUtil.convertToInteger(risultatoRicerca.getFkStatoIspezione())));
			}
		}
		
		if (risultatoRicerca.getCodiceImpianto() != null && risultatoRicerca.getCodiceImpianto().intValue() != Constants.COD_IMPIANTO_VUOTO) {
			ispezione2018.setCodiceImpianto(ConvertUtil.convertToString(risultatoRicerca.getCodiceImpianto()));
			ispezione2018.setCodIstatProv(mappaElencoProvincePiemIstat.get(risultatoRicerca.getIstatProvCompetenza()));
		} else {
			ispezione2018.setCodiceImpianto(null);
			ispezione2018.setCodIstatProv(null);
		}
		
		
		Boolean esitoBoolean = ConvertUtil.convertToBoolean(risultatoRicerca.getFlgEsito());
		ispezione2018.setEsito(esitoBoolean == null ? "" : esitoBoolean ? PositivoNegativoEnum.POSITIVO.getDescrizione() : PositivoNegativoEnum.NEGATIVO.getDescrizione());
		
		Boolean isPagamentoBoolean = ConvertUtil.convertToBoolean(risultatoRicerca.getFlgIspPagamento());

		ispezione2018.setDescIspPagamento(isPagamentoBoolean == null ? "" : isPagamentoBoolean ? Constants.LABEL_SI : Constants.LABEL_NO);
		
		return ispezione2018;
		
	}
	
	
	
	public static Ispezione2018 mapToIspezione2018(SigitTIspezione2018Dto entity, Map<Integer, String> mappaStatoIspezione, SigitVTotImpiantoCercaUbicazioneImpiantoDto impianto, SigitRIspezIspetDto ispezIspet, SigitTPersonaFisicaDto ispettore, SigitTDatoDistribDto datoDistrib, String indirizzoDatoDistrib, String datoDistributoreAnnoRiferimentoDatiUtente) {
		Ispezione2018 dto = new Ispezione2018();
		
		dto.setCfSecondoIspettore(entity.getCfIspettoreSecondario());
		if (entity.getCodiceImpianto() != null && entity.getCodiceImpianto().intValue() != Constants.COD_IMPIANTO_VUOTO) {
			dto.setCodiceImpianto(ConvertUtil.convertToString(entity.getCodiceImpianto()));
			dto.setCodIstatProv(entity.getIstatProvCompetenza());
			if (impianto != null) {
				String ubicazioneImpianto =  MapDto.getRisultatoImpianto(impianto);
				dto.setLocalizzazioneImpianto("localizzazione : " + ubicazioneImpianto);
			}
		} else {
			dto.setCodiceImpianto(null);
			dto.setCodIstatProv(null);
			if (datoDistrib != null) {
				dto.setIdDatoDistrib(datoDistrib.getIdDatoDistrib());
				dto.setLocalizzazioneDistributore("localizzazione : " + indirizzoDatoDistrib);
				dto.setDatoDistributoreAnnoRiferimentoDatiUtente(datoDistributoreAnnoRiferimentoDatiUtente);
			}
		}
		
		dto.setDataConclusione(ConvertUtil.convertToString(entity.getDtConclusione()));
		dto.setDataCreazione(ConvertUtil.convertToString(entity.getDtCreazione()));
		
		if (ispezIspet != null) {
			dto.setIdIspezIspet(ConvertUtil.convertToInteger(ispezIspet.getIdIspezIspet()));
			dto.setIdPfIspettore(ConvertUtil.convertToInteger(ispezIspet.getFkPersonaFisica()));

		}
		
		if (ispettore != null) {
			dto.setDescrizioneIspettore(ConvertUtil.getStringByConcat(" ", ispettore.getCognome(), ispettore.getNome(), "("+ispettore.getCodiceFiscale()+")"));
		}
		
		
		if (mappaStatoIspezione != null) {
			if (entity.getFkStatoIspezione() != null && entity.getFkStatoIspezione().intValue() != 0) {
				dto.setDescrizioneStato(mappaStatoIspezione.get(ConvertUtil.convertToInteger(entity.getFkStatoIspezione())));
			}
		}
		
		dto.setDescrizioneSveglia(ConvertUtil.getStringByConcat(" ", ConvertUtil.convertToString(entity.getDtSveglia()), entity.getNoteSveglia()));
		
		dto.setEnteCompetente(entity.getEnteCompetente());
		dto.setEsito(entity.getFlgEsito() == null ? "" : ConvertUtil.convertToBooleanAllways(entity.getFlgEsito())?Constants.DESC_ESITO_POSITIVO:Constants.DESC_ESITO_NEGATIVO);
		dto.setIdAccertamento(ConvertUtil.convertToString(entity.getFkAccertamento()));
		dto.setIdentificativoIspezione(ConvertUtil.convertToString(entity.getIdIspezione2018()));
		dto.setIdVerifica(ConvertUtil.convertToString(entity.getFkVerifica()));

		dto.setNote(entity.getNote());

		dto.setFlgIspPagamento(ConvertUtil.convertToBooleanAllways(entity.getFlgIspPagamento()));
		
		dto.setIdStatoIspezione(ConvertUtil.convertToString(entity.getFkStatoIspezione()));
		
		return dto;
	}
	
	public static ArrayList<Abilitazione> mapToListaAbilitazioni(List<SigitRPfRuoloPaByExampleDto>  listaRuoloPa) {
		ArrayList<Abilitazione> result = new ArrayList<Abilitazione>();
		
		Abilitazione abilitazione = null;
		SigitRPfRuoloPaByExampleDto dto = null;
		if (listaRuoloPa != null) {
			
			for (int i = 0; i < listaRuoloPa.size(); i++) {
				
				dto = listaRuoloPa.get(i);
				
				abilitazione = new Abilitazione();
				abilitazione.setIdAbilitazione(i);
				abilitazione.setIdRuoloPa(dto.getRpaIdRuoloPa());
				abilitazione.setDescRuoloPa(dto.getDrDesRuoloPa());
				abilitazione.setIstatAbilitazione(dto.getRpaIstatAbilitazione());
				abilitazione.setDescrAbilitazione(dto.getRpaDescAbilitazione());
				abilitazione.setMailComunicazione(dto.getAbMailComunicazione());
				abilitazione.setIdPersonaFisica(ConvertUtil.convertToString(dto.getPfIdPersonaFisica()));
				abilitazione.setCfUtente(dto.getPfCodiceFiscale());
				abilitazione.setDescUtente(costruisciCognomeNomeCF(dto.getPfCognome(), dto.getPfNome(), dto.getPfCodiceFiscale()));
				abilitazione.setDataInizio(ConvertUtil.convertToString(dto.getRpaDataInizio()));
				abilitazione.setDataFine(ConvertUtil.convertToString(dto.getRpaDataFine()));
				abilitazione.setNote(dto.getRpaNote());
				
				result.add(abilitazione);
			}
		}

		return result;
	}
	
	public static SigitRPfRuoloPaDto mapToSigitRPfRuoloPaDto(Abilitazione entity) {
		SigitRPfRuoloPaDto dto = new SigitRPfRuoloPaDto();
		
		String istatAbilitazione = entity.getIstatAbilitazione();
		
		//Aggiungo codice istat regione se non presente per avere codice istat completo
		istatAbilitazione = GenericUtil.aggiungiCodIstatPiemonteAIstatAbilitazione(istatAbilitazione);
		
		dto.setIdPersonaFisica(ConvertUtil.convertToBigDecimal(entity.getIdPersonaFisica()));
		dto.setIdRuoloPa(entity.getIdRuoloPa());
		dto.setIstatAbilitazione(istatAbilitazione);
		dto.setDataInizio(ConvertUtil.convertToSqlDate(entity.getDataInizio()));
		dto.setDataFine(ConvertUtil.convertToSqlDate(entity.getDataFine()));
		dto.setNote(entity.getNote());
		dto.setDescAbilitazione(entity.getDescrAbilitazione());
		
		return dto;
	}
	
	public static SigitTAbilitazioneDto mapToSigitTAbilitazioneDto(Abilitazione entity) {
		SigitTAbilitazioneDto dto = new SigitTAbilitazioneDto();
		
		String istatAbilitazione = entity.getIstatAbilitazione();
		
		//Aggiungo codice istat regione se non presente per avere codice istat completo
		istatAbilitazione = GenericUtil.aggiungiCodIstatPiemonteAIstatAbilitazione(istatAbilitazione);
		
		dto.setIdRuoloPa(entity.getIdRuoloPa());
		dto.setIstatAbilitazione(istatAbilitazione);
		dto.setMailComunicazione(entity.getMailComunicazione());
		
		return dto;
	}
	
	public static ArrayList<CodeDescription> mapToCodeDescriptionAbilitazione(List<SigitRPfRuoloPaDto> objList) {
		
		ArrayList<CodeDescription> result = new ArrayList<CodeDescription>();
		if (objList != null) {
			for (SigitRPfRuoloPaDto obj : objList) {
				result.add(mapToCodeDescription(obj));
			}
		}
		Collections.sort(result, ComparatorUtil.compare());
		return result;
	}

	public static ArrayList<IdDescription> mapToIdDescriptionRuoloPa(List<SigitDRuoloPaDto> objList) {
		
		ArrayList<IdDescription> result = new ArrayList<IdDescription>();
		if (objList != null) {
			for (SigitDRuoloPaDto obj : objList) {
				result.add(mapToIdDescription(obj));
			}
		}
		Collections.sort(result, ComparatorUtil.compareDescriprionById());
		return result;
	}
	
	private static CodeDescription mapToCodeDescription(SigitRPfRuoloPaDto obj) {
		CodeDescription cd = new CodeDescription();
		cd.setCode(obj.getIstatAbilitazione());
		cd.setDescription(obj.getDescAbilitazione());
		return cd;
	}
	
	private static IdDescription mapToIdDescription(SigitDRuoloPaDto obj) {
		IdDescription cd = new IdDescription();
		cd.setId(obj.getIdRuoloPa());
		cd.setDescription(obj.getDesRuoloPa());
		return cd;
	}
	
	public static SigitSLibrettoDto mapToSigitSLibrettoDto(SigitTLibrettoDto tLibretto) {
		SigitSLibrettoDto sLibretto = new SigitSLibrettoDto();
		
		// Copiare le properties da un dto ad un altro:
		try {
			PropertyUtils.copyProperties(sLibretto, tLibretto);
		} catch (Exception e) {
			log.error("mapToSigitSLibrettoDto - Errore nel copyProperties: "+e);
		} 
		
		return sLibretto;
	}
	
	public static SigitTLibrettoDto mapToSigitTLibrettoDto(SigitSLibrettoDto sLibretto) {
		SigitTLibrettoDto tLibretto = new SigitTLibrettoDto();
		
		// Copiare le properties da un dto ad un altro:
		try {
			PropertyUtils.copyProperties(tLibretto, sLibretto);
		} catch (Exception e) {
			log.error("mapToSigitTLibrettoDto - Errore nel copyProperties: "+e);
		} 
		
		return tLibretto;
	}
	
	public static SigitWrkLogPrecDto mapToSigitWrkLogPrecDto(SigitWrkLogDto wrkLog) {
		SigitWrkLogPrecDto wrkLogPrec = new SigitWrkLogPrecDto();
		
		// Copiare le properties da un dto ad un altro:
		try {
			PropertyUtils.copyProperties(wrkLogPrec, wrkLog);
		} catch (Exception e) {
			log.error("mapToSigitWrkLogPrecDto - Errore nel copyProperties: "+e);
		} 
		
		return wrkLogPrec;
	}
	
	public static SigitVRicercaAllegatiDto mapToSigitVRicercaAllegatiDto(SigitVRicercaAllegatiStoricoDto ricercaStoricoAll) {
		SigitVRicercaAllegatiDto ricercaAll = new SigitVRicercaAllegatiDto();
		try {
			PropertyUtils.copyProperties(ricercaAll, ricercaStoricoAll);
		} catch (Exception e) {
			log.error("mapToSigitVRicercaAllegatiDto - Errore nel copyProperties: "+e);
		} 
		
		return ricercaAll;
	}

	public static ArrayList<UserWs> mapToUserWsList(List<SigitTUserWsDto> userWsDtoList) {
		ArrayList<UserWs> list = new ArrayList<UserWs>();
		for(int i = 0; i < userWsDtoList.size(); i++) {
			list.add(mapToUserWsFromDto(userWsDtoList.get(i)));
		}
		return list;
	}
	
	
	public static UserWs mapToUserWsFromDto(SigitTUserWsDto userWsDto) {
		UserWs userWs = new UserWs();
		userWs.setIdUserWs(userWsDto.getIdUserWs());
		userWs.setUserWs(userWsDto.getUserWs());
		userWs.setToken(userWsDto.getToken());
		userWs.setDtCreazioneToken(ConvertUtil.convertToString(userWsDto.getDtCreazioneToken()));
		userWs.setDtScadenzaToken(ConvertUtil.convertToString(userWsDto.getDtScadenzaToken()));
		return userWs;
	}
	
	public static SigitSAccessoDto mapToSigitSAccessoDto(SigitLAccessoDto logAccesso) {
		SigitSAccessoDto logAccessoStorico = new SigitSAccessoDto();
		
		// Copiare le properties da un dto ad un altro:
		try {
			PropertyUtils.copyProperties(logAccessoStorico, logAccesso);
		} catch (Exception e) {
			log.error("mapToSigitSAccessoDto - Errore nel copyProperties: "+e);
		} 
		
		return logAccessoStorico;
	}
	
	public static String getIndirizzoByDugIndirizzo(String dug, String indirizzo) {
		
		String indirizzoConDug = indirizzo;
		
		if (GenericUtil.isNotNullOrEmpty(dug) && !indirizzo.startsWith(dug)) {
			
			indirizzoConDug = dug + " " + indirizzo;
		}
		
		return indirizzoConDug;
	}
}
